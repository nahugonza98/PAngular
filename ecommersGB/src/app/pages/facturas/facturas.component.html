<h2 class="titulo">Facturas generadas</h2>

<!-- Input de búsqueda -->

<div class="toolbar">
  <div class="buscador">
    <input
      type="text"
      [(ngModel)]="filtroFactura"
      placeholder="🔍 Buscar por ID..."
      class="form-control"
    />
  </div>

<button class="btn-like-input" (click)="exportarCSV()" [disabled]="descargandoCsv">
    Exportar CSV
  </button>
</div>
<table class="tabla-facturas" *ngIf="facturas.length > 0; else sinDatos">
  <thead>
    <tr>
      <th>ID</th>
      <th>Fecha</th>
      <th>Total</th>
      <th>Total_USD</th>
      <th>Cliente</th>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let factura of facturas | filtroFactura:filtroFactura">
      <td>{{ factura.id }}</td>
      <td>{{ factura.fecha | date: 'short' }}</td>
<td>$ {{ (factura.total || factura.total_ars) | number:'1.2-2' }}</td>
      <td>$ {{ (factura.total_usd || factura.total_usd) | number: '1.2-2' }}</td>
      <td>{{ factura.cliente_nombre || '—' }}</td>

    </tr>
  </tbody>
</table>

<ng-template #sinDatos>
  <p>No hay facturas registradas.</p>
</ng-template>
