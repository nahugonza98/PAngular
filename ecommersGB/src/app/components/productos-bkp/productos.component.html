<h2 class="titulo">Productos disponibles</h2>

<!-- Input de bÃºsqueda -->
<div class="buscador">
  <input
    type="text"
    [(ngModel)]="filtro"
    placeholder="ğŸ” Buscar producto..."
    class="form-control"
  />
</div>

<div class="grid-productos">
  <!-- El pipe  -->
  <div class="tarjeta" *ngFor="let producto of productos | filtroNombre:filtro">
    <img [src]="producto.imagen" [alt]="producto.nombre" class="imagen-producto" />

    <!-- Solo visible si es admin -->
    <div class="botones-abm" *ngIf="usuarioActual?.rol === 'admin'">
      <a [routerLink]="['/editar-producto', producto.id]" class="btn-editar">âœï¸ Editar</a>
      <button (click)="confirmarEliminar(producto.id)" class="btn-eliminar">ğŸ—‘ï¸ Eliminar</button>
    </div>

    <div class="contenido-tarjeta">
      <h3>{{ producto.nombre }}</h3>
      <p class="precio">$ {{ producto.precio | number: '1.0-2' }}</p>

      <div *ngIf="producto.stock < 3" class="ultimas-unidades">
        Â¡Ãšltimas unidades!
      </div>

      <button (click)="agregarAlCarrito(producto)" class="btn-agregar">
        AÃ±adir al carrito
      </button>
    </div>
  </div>
</div>

<!-- Modal de confirmaciÃ³n de carrito -->
<div class="modal-confirmacion" *ngIf="mostrarConfirmacion">
  âœ… <strong>{{ productoAgregado }}</strong> fue agregado al carrito
</div>

<!-- Modal de confirmaciÃ³n de eliminaciÃ³n -->
<div class="modal-overlay" *ngIf="mostrarModalEliminar">
  <div class="modal-contenido">
    <h3>Â¿Eliminar producto?</h3>
    <p>Â¿EstÃ¡s seguro de que querÃ©s eliminar este producto?</p>
    <div class="modal-botones">
      <button (click)="eliminarConfirmado()" class="btn-confirmar">SÃ­, eliminar</button>
      <button (click)="cancelarEliminar()" class="btn-cancelar">Cancelar</button>
    </div>
  </div>
</div>
