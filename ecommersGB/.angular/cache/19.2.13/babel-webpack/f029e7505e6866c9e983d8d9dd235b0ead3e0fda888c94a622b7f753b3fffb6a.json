{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Nahuel/Documents/Proyectos/PAngular-master/PAngular-master/ecommersGB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { getFirebase } from '../../firebase.init';\nimport { onAuthStateChanged, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { ref as dbRef, onValue, off, update, push, query, orderByChild, get } from 'firebase/database';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"historyRef\"];\nconst _c1 = (a0, a1) => ({\n  me: a0,\n  other: a1\n});\nfunction ChatComponent_div_0_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.loginErrorMsg);\n  }\n}\nfunction ChatComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 3)(2, \"h3\");\n    i0.ɵɵtext(3, \"Iniciar sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"form\", 4);\n    i0.ɵɵlistener(\"ngSubmit\", function ChatComponent_div_0_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.login());\n    });\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵtext(6, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 5);\n    i0.ɵɵelementStart(8, \"label\");\n    i0.ɵɵtext(9, \"Contrase\\u00F1a\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 6);\n    i0.ɵɵelementStart(11, \"label\");\n    i0.ɵɵtext(12, \"Nombre a mostrar en el chat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 7);\n    i0.ɵɵtemplate(14, ChatComponent_div_0_div_14_Template, 2, 1, \"div\", 8);\n    i0.ɵɵelementStart(15, \"button\", 9);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.loginForm);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loginErrorMsg);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r1.loadingLogin || ctx_r1.loginForm.invalid);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.loadingLogin ? \"Ingresando\\u2026\" : \"Iniciar sesi\\u00F3n\", \" \");\n  }\n}\nfunction ChatComponent_ng_template_1_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23)(2, \"div\", 24)(3, \"b\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 25);\n    i0.ɵɵtext(6, \"\\u00B7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 26);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 25);\n    i0.ɵɵtext(10, \"\\u00B7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\", 27);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 28);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const chat_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(9, _c1, chat_r4.uid === ctx_r1.currentUid, chat_r4.uid !== ctx_r1.currentUid));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.nombreDe(chat_r4.uid));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.rolDe(chat_r4.uid));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.rolDe(chat_r4.uid), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(13, 6, chat_r4.timestamp, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(chat_r4.text);\n  }\n}\nfunction ChatComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"div\", 13);\n    i0.ɵɵtext(3, \"Sala global\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"span\", 14);\n    i0.ɵɵelementStart(5, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ChatComponent_ng_template_1_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.logout());\n    });\n    i0.ɵɵtext(6, \"Salir\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 16, 1);\n    i0.ɵɵtemplate(9, ChatComponent_ng_template_1_div_9_Template, 16, 12, \"div\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"form\", 18);\n    i0.ɵɵlistener(\"ngSubmit\", function ChatComponent_ng_template_1_Template_form_ngSubmit_10_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.send());\n    });\n    i0.ɵɵelementStart(11, \"div\", 19);\n    i0.ɵɵelement(12, \"input\", 20);\n    i0.ɵɵelementStart(13, \"button\", 21);\n    i0.ɵɵtext(14, \" Enviar \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.chats)(\"ngForTrackBy\", ctx_r1.trackById);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.form.invalid || !(ctx_r1.form.value.message == null ? null : ctx_r1.form.value.message.trim()));\n  }\n}\nexport let ChatComponent = /*#__PURE__*/(() => {\n  class ChatComponent {\n    fb;\n    isLoggedIn = false;\n    currentUid = null;\n    loginForm;\n    form;\n    loadingLogin = false;\n    loginErrorMsg = '';\n    chats = [];\n    usersMap = {};\n    auth;\n    db = null;\n    authUnsub = null;\n    usersOff = null;\n    msgsOff = null;\n    historyRef;\n    constructor(fb) {\n      this.fb = fb;\n      this.loginForm = this.fb.group({\n        email: ['', [Validators.required, Validators.email]],\n        password: ['', [Validators.required]],\n        username: ['', [Validators.minLength(3), Validators.maxLength(24)]]\n      });\n      this.form = this.fb.group({\n        message: ['', [Validators.required]]\n      });\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const {\n          auth,\n          database\n        } = yield getFirebase();\n        _this.auth = auth;\n        _this.db = database;\n        _this.authUnsub = onAuthStateChanged(_this.auth, /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (user) {\n            _this.isLoggedIn = !!user;\n            _this.currentUid = user?.uid ?? null;\n            if (_this.isLoggedIn) {\n              yield _this.ensureDefaultRole();\n              _this.subUsers();\n              _this.subMensajes();\n            } else {\n              _this.unsubUsers();\n              _this.unsubMensajes();\n              _this.chats = [];\n            }\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }());\n      })();\n    }\n    ngAfterViewInit() {\n      // asegura que si ya hay mensajes, se haga scroll\n      this.scrollToBottom();\n    }\n    ngOnDestroy() {\n      this.authUnsub?.();\n      this.unsubUsers();\n      this.unsubMensajes();\n    }\n    // -------- SUBS ----------\n    subUsers() {\n      if (!this.db) return;\n      const ref = dbRef(this.db, 'users');\n      const cb = snap => {\n        this.usersMap = snap.val() ?? {};\n        this.chats = [...this.chats];\n      };\n      onValue(ref, cb);\n      this.usersOff = () => off(ref, 'value', cb);\n    }\n    unsubUsers() {\n      this.usersOff?.();\n      this.usersOff = null;\n    }\n    subMensajes() {\n      if (!this.db) return;\n      const ref = query(dbRef(this.db, 'rooms/global/messages'), orderByChild('timestamp'));\n      const cb = snap => {\n        const list = [];\n        snap.forEach(child => {\n          const m = child.val();\n          list.push({\n            id: child.key,\n            uid: m.uid,\n            text: m.text,\n            timestamp: typeof m.timestamp === 'number' ? m.timestamp : Date.now()\n          });\n        });\n        this.chats = list;\n        this.scrollToBottom(); // auto scroll al recibir mensajes\n      };\n      onValue(ref, cb);\n      this.msgsOff = () => off(ref, 'value', cb);\n    }\n    unsubMensajes() {\n      this.msgsOff?.();\n      this.msgsOff = null;\n    }\n    // -------- LOGIN ----------\n    login() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this2.db || _this2.loginForm.invalid) return;\n        _this2.loadingLogin = true;\n        _this2.loginErrorMsg = '';\n        const {\n          email,\n          password,\n          username\n        } = _this2.loginForm.value;\n        try {\n          const cred = yield signInWithEmailAndPassword(_this2.auth, email, password);\n          const uid = cred.user.uid;\n          const alias = (username ?? '').toString().trim();\n          const payload = {\n            email\n          };\n          if (alias.length >= 3 && alias.length <= 24) {\n            payload.displayName = alias;\n            localStorage.setItem('chatAlias', alias);\n          }\n          yield update(dbRef(_this2.db, `users/${uid}`), payload);\n          yield _this2.ensureDefaultRole(uid);\n        } catch (e) {\n          _this2.loginErrorMsg = e?.message ?? 'Error al iniciar sesión';\n        } finally {\n          _this2.loadingLogin = false;\n        }\n      })();\n    }\n    logout() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        yield signOut(_this3.auth);\n      })();\n    }\n    // -------- MENSAJES ----------\n    send() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this4.db || !_this4.currentUid || _this4.form.invalid) return;\n        const message = (_this4.form.value.message ?? '').toString().trim();\n        if (!message) return;\n        yield push(dbRef(_this4.db, 'rooms/global/messages'), {\n          uid: _this4.currentUid,\n          text: message,\n          timestamp: Date.now()\n        });\n        _this4.form.patchValue({\n          message: ''\n        });\n        _this4.scrollToBottom(); // auto scroll al enviar\n      })();\n    }\n    // -------- HELPERS ----------\n    trackById(_i, m) {\n      return m.id;\n    }\n    nombreDe(uid) {\n      return this.usersMap[uid]?.displayName || 'Anon';\n    }\n    rolDe(uid) {\n      const r = this.usersMap[uid]?.role;\n      return r === 'admin' || r === 'moderator' ? r : 'user';\n    }\n    // -------- UTIL: asegurar rol por defecto ----------\n    ensureDefaultRole(forceUid) {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this5.db) return;\n        const uid = forceUid ?? _this5.currentUid;\n        if (!uid) return;\n        const roleSnap = yield get(dbRef(_this5.db, `users/${uid}/role`));\n        if (!roleSnap.exists()) {\n          yield update(dbRef(_this5.db, `users/${uid}`), {\n            role: 'user'\n          });\n        }\n      })();\n    }\n    // -------- Auto-scroll ----------\n    scrollToBottom() {\n      setTimeout(() => {\n        if (this.historyRef?.nativeElement) {\n          const el = this.historyRef.nativeElement;\n          el.scrollTop = el.scrollHeight;\n        }\n      }, 50); // delay corto para que Angular pinte primero\n    }\n    static ɵfac = function ChatComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ChatComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatComponent,\n      selectors: [[\"app-chat\"]],\n      viewQuery: function ChatComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.historyRef = _t.first);\n        }\n      },\n      decls: 3,\n      vars: 2,\n      consts: [[\"chatUI\", \"\"], [\"historyRef\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"id\", \"loginCard\"], [1, \"login\", 3, \"ngSubmit\", \"formGroup\"], [\"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"nombre@correo.com\"], [\"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"], [\"type\", \"text\", \"formControlName\", \"username\", \"placeholder\", \"Tu alias\"], [\"class\", \"alert\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"login-btn\", 3, \"disabled\"], [1, \"alert\"], [1, \"chat-shell\"], [1, \"chat-header\"], [1, \"title\"], [1, \"spacer\"], [1, \"logout\", 3, \"click\"], [\"id\", \"history\", 1, \"history\"], [\"class\", \"msg\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"id\", \"message\", 1, \"composer\", 3, \"ngSubmit\", \"formGroup\"], [1, \"send-box\"], [\"type\", \"text\", \"formControlName\", \"message\", \"placeholder\", \"Escribe un mensaje\\u2026\", \"autocomplete\", \"off\"], [\"type\", \"submit\", 1, \"send-box\", 3, \"disabled\"], [1, \"msg\", 3, \"ngClass\"], [1, \"bubble\"], [1, \"msg-meta\"], [1, \"sep\"], [1, \"role-badge\", 3, \"ngClass\"], [1, \"time\"], [1, \"msg-text\"]],\n      template: function ChatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, ChatComponent_div_0_Template, 17, 4, \"div\", 2)(1, ChatComponent_ng_template_1_Template, 15, 4, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const chatUI_r5 = i0.ɵɵreference(2);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn)(\"ngIfElse\", chatUI_r5);\n        }\n      },\n      dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, i2.DatePipe, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\"[_ngcontent-%COMP%]:root{--bg: #f2f4f7;--card: #ffffff;--text: #0f172a;--muted:#475569;--primary:#1976d2;--primary-700:#125aa0;--border:#e5e7eb;--ring:#cfe6ff}*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%], body[_ngcontent-%COMP%]{background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}.chat-shell[_ngcontent-%COMP%]{height:min(92vh,860px);max-width:920px;margin:16px auto;background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 8px 24px #10182812;display:flex;flex-direction:column;overflow:hidden}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 14px;background:var(--primary);color:#fff;font-weight:700}.chat-header[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{margin-left:auto;background:#fff;color:var(--primary);border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}.chat-header[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]:hover{background:#f6f7fb}.history[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:12px 14px 8px;background:#eef2f7}.history[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cfd5dd;border-radius:6px}.msg[_ngcontent-%COMP%]{display:flex;margin:6px 0}.msg.me[_ngcontent-%COMP%]{justify-content:flex-end}.msg.other[_ngcontent-%COMP%]{justify-content:flex-start}.bubble[_ngcontent-%COMP%]{max-width:76%;padding:8px 12px;border-radius:12px;background:#fff;border:1px solid var(--border);box-shadow:0 1px 2px #1018280d;color:var(--text)!important}.msg.other[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{border-bottom-left-radius:6px}.msg.me[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background:var(--primary);border-color:transparent;color:#fff!important;border-bottom-right-radius:6px}.msg-meta[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:6px;font-size:.82rem;margin-bottom:3px;opacity:.95;color:var(--muted)!important}.sep[_ngcontent-%COMP%]{opacity:.45}.role-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:999px;font-size:11px;line-height:1;background:#eef2ff;color:#4338ca;border:1px solid rgba(67,56,202,.15)}.role-badge.admin[_ngcontent-%COMP%]{background:#ffe8e8;color:#b91c1c;border-color:#f9c8c8}.role-badge.moderator[_ngcontent-%COMP%]{background:#efe3ff;color:#6d28d9;border-color:#dec7ff}.msg.me[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:#ffffff2e;color:#fff;border-color:#ffffff40}.msg-text[_ngcontent-%COMP%]{line-height:1.42;word-wrap:break-word;white-space:pre-wrap;color:inherit!important}.composer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:var(--card);border-top:1px solid var(--border);padding:8px 10px}.send-box[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:8px}.send-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:11px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text)}.send-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring);outline:0}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;border-radius:10px;padding:11px 16px;background:var(--primary);color:#fff;font-weight:800;cursor:pointer;transition:background .15s ease,transform .06s ease}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:enabled{background:var(--primary-700)}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:enabled{transform:translateY(1px)}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#aeb5bd;cursor:not-allowed}#loginCard[_ngcontent-%COMP%]{background:var(--card);width:min(92vw,520px);margin:24px auto;padding:18px 20px 24px;border:1px solid var(--border);border-radius:14px;box-shadow:0 8px 24px #0000000f}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:2px 0 10px;font-size:1.25rem;font-weight:800;color:var(--text)}.login[_ngcontent-%COMP%]{display:grid;gap:12px}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text);font-weight:700;margin-top:2px}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-top:6px;padding:11px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);outline:none}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)}.login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:block;width:92%;text-align:center;padding:11px 12px;border-radius:10px;background:var(--primary);color:#fff;font-weight:800;margin:6px auto 0;cursor:pointer}.login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-700)}.alert[_ngcontent-%COMP%]{margin-top:4px;padding:9px 11px;border:1px solid #f5bcbc;background:#ffe8e8;color:#b00020;border-radius:10px;font-weight:700;font-size:.92rem}@media (max-width:600px){.chat-shell[_ngcontent-%COMP%]{height:calc(100dvh - 16px);margin:8px}.bubble[_ngcontent-%COMP%]{max-width:88%}}.msg.me[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background:#1976d2!important;color:#fff!important;border-color:transparent!important;box-shadow:0 2px 8px #0000002e!important;opacity:1!important}.msg.me[_ngcontent-%COMP%]   .msg-meta[_ngcontent-%COMP%]{color:#ffffffe6!important}.msg.me[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{color:#fff!important;border-color:#ffffff40!important}.msg.me[_ngcontent-%COMP%]   .msg-text[_ngcontent-%COMP%]{color:#fff!important}.bubble[_ngcontent-%COMP%]{background:#fff!important;color:#0f172a!important}[_nghost-%COMP%]     .composer .send-box button{background:#1976d2!important;color:#fff!important;border:0!important;border-radius:10px!important;padding:11px 16px!important;font-weight:800!important;box-shadow:0 4px 14px #1976d24d!important}[_nghost-%COMP%]     .composer .send-box button:hover:enabled{background:#125aa0!important}[_nghost-%COMP%]     .composer .send-box button:disabled{background:#9aa4b2!important;color:#f1f5f9!important;box-shadow:none!important}.msg.me[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:#eef2ff!important;color:#4338ca!important;border:1px solid rgba(67,56,202,.15)!important}.msg.me[_ngcontent-%COMP%]   .role-badge.admin[_ngcontent-%COMP%]{background:#ffe8e8!important;color:#b91c1c!important;border-color:#f9c8c8!important}.msg.me[_ngcontent-%COMP%]   .role-badge.moderator[_ngcontent-%COMP%]{background:#efe3ff!important;color:#6d28d9!important;border-color:#dec7ff!important}[_nghost-%COMP%]     .chat-header .logout{background:#1976d2!important;color:#fff!important;font-weight:700!important;border:0!important;border-radius:8px!important;padding:8px 14px!important;cursor:pointer!important;box-shadow:0 4px 12px #1976d240!important}[_nghost-%COMP%]     .chat-header .logout:hover{background:#125aa0!important}[_nghost-%COMP%]     .chat-header .logout:disabled{background:#9aa4b2!important;color:#f1f5f9!important;box-shadow:none!important;cursor:not-allowed!important}#loginCard[_ngcontent-%COMP%]{width:min(92vw,460px)!important;margin:32px auto!important;padding:20px 22px 24px!important;border:1px solid var(--border)!important;border-radius:16px!important;background:var(--card)!important;box-shadow:0 14px 40px #10182814!important}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 14px!important;font-size:1.35rem!important;font-weight:800!important;color:var(--text)!important}.login[_ngcontent-%COMP%]{display:grid!important;gap:14px!important}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem!important;font-weight:700!important;color:var(--text)!important;margin-top:2px!important}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-top:6px!important;padding:12px 14px!important;border:1px solid var(--border)!important;border-radius:12px!important;background:#fff!important;color:var(--text)!important;outline:none!important}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8!important}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)!important;box-shadow:0 0 0 3px var(--ring)!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;padding:12px 14px!important;border-radius:12px!important;border:0!important;background:#1976d2!important;color:#fff!important;font-weight:800!important;text-align:center!important;cursor:pointer!important;box-shadow:0 6px 18px #1976d247!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background:#125aa0!important}.title[_ngcontent-%COMP%]{color:#000}#loginCard[_ngcontent-%COMP%]{width:min(92vw,460px)!important;margin:32px auto!important;padding:22px 20px 20px!important;border:1px solid var(--border)!important;border-radius:18px!important;background:#fff!important;box-shadow:0 16px 48px #1018281a!important;position:relative!important;overflow:hidden!important}#loginCard[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;inset:0 auto auto 0;height:84px;width:100%;background:linear-gradient(135deg,#1976d2,#7c4dff,#00b7ff);opacity:.95}#loginCard[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;left:0;top:0;height:84px;width:100%;background-image:radial-gradient(rgba(255,255,255,.35) 1px,transparent 1.5px);background-size:12px 12px}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{position:relative;z-index:1;margin:0 0 14px!important;padding-top:50px;font-size:1.35rem!important;font-weight:800!important;color:#0f172a!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem!important;font-weight:700!important;color:#0f172a!important;margin-top:2px!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#7c4dff!important;box-shadow:0 0 0 4px #7c4dff2e!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;padding:12px 14px!important;border-radius:999px!important;border:0!important;background:linear-gradient(90deg,#1976d2,#7c4dff,#00b7ff)!important;background-size:200% 100%!important;color:#fff!important;font-weight:800!important;text-align:center!important;cursor:pointer!important;box-shadow:0 8px 22px #1976d247!important;transition:background-position .35s ease}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-position:100% 0!important}#loginCard.chat-shell[_ngcontent-%COMP%]{height:auto!important;max-height:none!important;display:block!important;box-shadow:0 16px 48px #1018281a!important}#loginCard[_ngcontent-%COMP%]:before, #loginCard[_ngcontent-%COMP%]:after{content:none!important;display:none!important}#loginCard[_ngcontent-%COMP%]{width:min(92vw,460px)!important;margin:32px auto!important;padding:20px 22px 22px!important;border:1px solid var(--border)!important;border-radius:16px!important;background:#fff!important;box-shadow:0 14px 40px #10182814!important}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px!important;padding:0!important;font-size:1.32rem!important;font-weight:800!important;color:#0f172a!important;position:relative!important}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:\\\"\\\"!important;position:absolute!important;left:0;bottom:-8px;width:64px;height:4px;border-radius:999px;background:linear-gradient(90deg,#1976d2,#7c4dff)!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{display:grid!important;gap:14px!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem!important;font-weight:700!important;color:#0f172a!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-top:6px!important;padding:12px 14px!important;border:1px solid var(--border)!important;border-radius:12px!important;background:#fff!important;color:#0f172a!important;outline:none!important;transition:box-shadow .15s,border-color .15s}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1976d2!important;box-shadow:0 0 0 3px #1976d22e!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;padding:12px 14px!important;border-radius:999px!important;border:0!important;background:linear-gradient(90deg,#1976d2,#7c4dff)!important;color:#fff!important;font-weight:800!important;text-align:center!important;cursor:pointer!important;box-shadow:0 8px 22px #1976d23d!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{filter:brightness(.95)!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:disabled{background:#9aa4b2!important;color:#f1f5f9!important;box-shadow:none!important;cursor:not-allowed!important}#loginCard[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin-top:4px!important;padding:10px 12px!important;border:1px solid #f5bcbc!important;background:#ffe8e8!important;color:#b00020!important;border-radius:10px!important;font-weight:700!important;font-size:.95rem!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:calc(100% - 20px)!important;margin:12px auto 6px!important;padding:12px 16px!important;border-radius:999px!important}.chat-shell[_ngcontent-%COMP%]{height:72vh!important;max-height:72vh!important;margin:12px auto!important}.history[_ngcontent-%COMP%]{flex:1 1 auto!important;overflow-y:auto!important;max-height:none!important;padding:10px 12px 8px!important}@media (max-height: 800px){.chat-shell[_ngcontent-%COMP%]{height:68vh!important;max-height:68vh!important}}\"]\n    });\n  }\n  return ChatComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}