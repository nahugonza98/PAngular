{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Nahuel/Documents/Proyectos/PAngular-master/PAngular-master/ecommersGB/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../servicios/productos.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction IngresarProductoComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F El nombre es obligatorio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IngresarProductoComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F El precio es obligatorio y debe ser mayor a 0. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IngresarProductoComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \" \\u26A0\\uFE0F Deb\\u00E9s ingresar una URL de imagen. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction IngresarProductoComponent_p_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.mensaje);\n  }\n}\nexport let IngresarProductoComponent = /*#__PURE__*/(() => {\n  class IngresarProductoComponent {\n    constructor(fb, productosSrv, router) {\n      this.fb = fb;\n      this.productosSrv = productosSrv;\n      this.router = router;\n      this.mensaje = '';\n      this.guardando = false;\n      this.formulario = this.fb.group({\n        nombre: ['', [Validators.required, Validators.minLength(2)]],\n        precio: [null, [Validators.required, Validators.min(0.01)]],\n        imagen: ['', [Validators.required]],\n        descripcion: [''],\n        stock: [0, [Validators.min(0)]]\n      });\n    }\n    campoInvalido(nombre) {\n      const c = this.formulario.get(nombre);\n      return !!c && c.invalid && (c.dirty || c.touched);\n    }\n    guardarProducto() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.mensaje = '';\n        if (_this.formulario.invalid) {\n          _this.formulario.markAllAsTouched();\n          return;\n        }\n        _this.guardando = true;\n        const payload = _this.formulario.value;\n        try {\n          const nuevoId = yield _this.productosSrv.crearProducto(payload);\n          _this.mensaje = `✅ Producto creado (ID ${nuevoId}).`;\n          // si querés redirigir:\n          // await this.router.navigate(['/productos']);\n          _this.formulario.reset();\n        } catch (e) {\n          console.error('Error al crear producto en RTDB', e);\n          _this.mensaje = '❌ No se pudo crear el producto.';\n        } finally {\n          _this.guardando = false;\n        }\n      })();\n    }\n    static {\n      this.ɵfac = function IngresarProductoComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || IngresarProductoComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProductosService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: IngresarProductoComponent,\n        selectors: [[\"app-ingresar-producto\"]],\n        decls: 22,\n        vars: 11,\n        consts: [[1, \"form-wrapper\"], [3, \"ngSubmit\", \"formGroup\"], [\"type\", \"text\", \"formControlName\", \"nombre\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"number\", \"formControlName\", \"precio\"], [\"type\", \"text\", \"formControlName\", \"imagen\"], [\"formControlName\", \"descripcion\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [4, \"ngIf\"], [1, \"error\"]],\n        template: function IngresarProductoComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Ingresar nuevo producto\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function IngresarProductoComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.guardarProducto();\n            });\n            i0.ɵɵelementStart(4, \"label\");\n            i0.ɵɵtext(5, \"Nombre:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(6, \"input\", 2);\n            i0.ɵɵtemplate(7, IngresarProductoComponent_div_7_Template, 2, 0, \"div\", 3);\n            i0.ɵɵelementStart(8, \"label\");\n            i0.ɵɵtext(9, \"Precio:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(10, \"input\", 4);\n            i0.ɵɵtemplate(11, IngresarProductoComponent_div_11_Template, 2, 0, \"div\", 3);\n            i0.ɵɵelementStart(12, \"label\");\n            i0.ɵɵtext(13, \"Imagen (URL):\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(14, \"input\", 5);\n            i0.ɵɵtemplate(15, IngresarProductoComponent_div_15_Template, 2, 0, \"div\", 3);\n            i0.ɵɵelementStart(16, \"label\");\n            i0.ɵɵtext(17, \"Descripci\\u00F3n:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"textarea\", 6);\n            i0.ɵɵelementStart(19, \"button\", 7);\n            i0.ɵɵtext(20, \"Guardar producto\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(21, IngresarProductoComponent_p_21_Template, 2, 1, \"p\", 8);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.formulario);\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"invalido\", ctx.campoInvalido(\"nombre\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.campoInvalido(\"nombre\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"invalido\", ctx.campoInvalido(\"precio\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.campoInvalido(\"precio\"));\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"invalido\", ctx.campoInvalido(\"imagen\"));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.campoInvalido(\"imagen\"));\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.mensaje);\n          }\n        },\n        dependencies: [CommonModule, i4.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\"form[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:24px;border-radius:12px;box-shadow:0 4px 10px #00000014;max-width:500px;margin:20px auto;display:flex;flex-direction:column;gap:15px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:5px;color:#333}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px 12px;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .2s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#28a745;outline:none}button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff;font-weight:700;border:none;padding:12px;border-radius:8px;cursor:pointer;transition:background-color .2s ease,transform .1s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}button[type=submit][_ngcontent-%COMP%]:active{transform:scale(.98)}p[_ngcontent-%COMP%]{margin-top:15px;font-weight:700;color:#155724}.invalido[_ngcontent-%COMP%]{border-color:#dc3545!important}.error[_ngcontent-%COMP%]{color:#dc3545;font-size:.9rem;margin-top:-10px;margin-bottom:5px}.form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:40px;padding:0 16px}h2[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:24px;color:#222}\"]\n      });\n    }\n  }\n  return IngresarProductoComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}