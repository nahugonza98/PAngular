"use strict";(self.webpackChunkecommersGB=self.webpackChunkecommersGB||[]).push([[792],{317:(Ca,Fr,Fe)=>{Fe.d(Fr,{$b:()=>me,Ey:()=>ln,He:()=>Zt,Vy:()=>Ie});const P=[];var me=function(re){return re[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",re}(me||{});const Q={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},N=me.INFO,Tn={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},bt=(re,le,...Me)=>{if(le<re.logLevel)return;const st=(new Date).toISOString(),Et=Tn[le];if(!Et)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Et](`[${st}]  ${re.name}:`,...Me)};class Ie{constructor(le){this.name=le,this._logLevel=N,this._logHandler=bt,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in me))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?Q[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...le),this._logHandler(this,me.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...le),this._logHandler(this,me.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,me.INFO,...le),this._logHandler(this,me.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,me.WARN,...le),this._logHandler(this,me.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...le),this._logHandler(this,me.ERROR,...le)}}function Zt(re){P.forEach(le=>{le.setLogLevel(re)})}function ln(re,le){for(const Me of P){let st=null;le&&le.level&&(st=Q[le.level]),Me.userLogHandler=null===re?null:(Et,Vn,...ii)=>{const Ki=ii.map(Ht=>{if(null==Ht)return null;if("string"==typeof Ht)return Ht;if("number"==typeof Ht||"boolean"==typeof Ht)return Ht.toString();if(Ht instanceof Error)return Ht.message;try{return JSON.stringify(Ht)}catch{return null}}).filter(Ht=>Ht).join(" ");Vn>=(st??Et.logLevel)&&re({level:me[Vn].toLowerCase(),message:Ki,args:ii,type:Et.name})}}}},364:(Ca,Fr,Fe)=>{Fe.r(Fr),Fe.d(Fr,{ActionCodeOperation:()=>Wc,ActionCodeURL:()=>ro,AuthCredential:()=>to,AuthErrorCodes:()=>ai,EmailAuthCredential:()=>us,EmailAuthProvider:()=>_r,FacebookAuthProvider:()=>Vi,FactorId:()=>pd,GithubAuthProvider:()=>dn,GoogleAuthProvider:()=>Ae,OAuthCredential:()=>di,OAuthProvider:()=>Hs,OperationType:()=>Ti,PhoneAuthCredential:()=>Xr,PhoneAuthProvider:()=>K,PhoneMultiFactorGenerator:()=>uc,ProviderId:()=>Rs,RecaptchaVerifier:()=>uf,SAMLAuthProvider:()=>Kn,SignInMethod:()=>Il,TotpMultiFactorGenerator:()=>Ou,TotpSecret:()=>hc,TwitterAuthProvider:()=>Ye,applyActionCode:()=>Ad,beforeAuthStateChanged:()=>Ql,browserCookiePersistence:()=>af,browserLocalPersistence:()=>Kp,browserPopupRedirectResolver:()=>cc,browserSessionPersistence:()=>_u,checkActionCode:()=>xd,confirmPasswordReset:()=>$s,connectAuthEmulator:()=>Pa,createUserWithEmailAndPassword:()=>$p,debugErrorMap:()=>Gc,deleteUser:()=>Wr,fetchSignInMethodsForEmail:()=>tn,getAdditionalUserInfo:()=>zr,getAuth:()=>na,getIdToken:()=>ir,getIdTokenResult:()=>vn,getMultiFactorResolver:()=>Od,getRedirectResult:()=>Uo,inMemoryPersistence:()=>Se,indexedDBLocalPersistence:()=>Cu,initializeAuth:()=>zt,initializeRecaptchaConfig:()=>ye,isSignInWithEmailLink:()=>Nd,linkWithCredential:()=>ps,linkWithPhoneNumber:()=>Ud,linkWithPopup:()=>qd,linkWithRedirect:()=>jo,multiFactor:()=>pu,onAuthStateChanged:()=>za,onIdTokenChanged:()=>Bi,parseActionCodeURL:()=>Oa,prodErrorMap:()=>Eo,reauthenticateWithCredential:()=>xo,reauthenticateWithPhoneNumber:()=>Jp,reauthenticateWithPopup:()=>x_,reauthenticateWithRedirect:()=>Bo,reload:()=>Oe,revokeAccessToken:()=>Zl,sendEmailVerification:()=>bn,sendPasswordResetEmail:()=>Md,sendSignInLinkToEmail:()=>Wp,setPersistence:()=>vs,signInAnonymously:()=>Up,signInWithCredential:()=>zl,signInWithCustomToken:()=>Sd,signInWithEmailAndPassword:()=>zp,signInWithEmailLink:()=>Kl,signInWithPhoneNumber:()=>Iu,signInWithPopup:()=>Wd,signInWithRedirect:()=>Tu,signOut:()=>$n,unlink:()=>M_,updateCurrentUser:()=>rn,updateEmail:()=>du,updatePassword:()=>Ws,updatePhoneNumber:()=>eg,updateProfile:()=>Ve,useDeviceLanguage:()=>Vt,validatePassword:()=>so,verifyBeforeUpdateEmail:()=>$a,verifyPasswordResetCode:()=>zs});var P=Fe(467),me=Fe(807),Q=Fe(882),N=Fe(317);function Zt(_,p){var a={};for(var c in _)Object.prototype.hasOwnProperty.call(_,c)&&p.indexOf(c)<0&&(a[c]=_[c]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var d=0;for(c=Object.getOwnPropertySymbols(_);d<c.length;d++)p.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(_,c[d])&&(a[c[d]]=_[c[d]])}return a}"function"==typeof SuppressedError&&SuppressedError;var Ps=Fe(958);const pd={PHONE:"phone",TOTP:"totp"},Rs={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Il={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},Ti={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},Wc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Gc=function rs(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},Eo=function wa(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Mi=new Q.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ai={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"},nr=new N.Vy("@firebase/auth");function wo(_,...p){nr.logLevel<=N.$b.ERROR&&nr.error(`Auth (${me.MF}): ${_}`,...p)}function An(_,...p){throw un(_,...p)}function Ke(_,...p){return un(_,...p)}function Yr(_,p,a){const c=Object.assign(Object.assign({},Eo()),{[p]:a});return new Q.FA("auth","Firebase",c).create(p,{appName:_.name})}function $t(_){return Yr(_,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gr(_,p,a){if(!(p instanceof a))throw a.name!==p.constructor.name&&An(_,"argument-error"),Yr(_,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function un(_,...p){if("string"!=typeof _){const a=p[0],c=[...p.slice(1)];return c[0]&&(c[0].appName=_.name),_._errorFactory.create(a,...c)}return Mi.create(_,...p)}function ie(_,p,...a){if(!_)throw un(p,...a)}function xn(_){const p="INTERNAL ASSERTION FAILED: "+_;throw wo(p),new Error(p)}function Pn(_,p){_||xn(p)}function rr(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function li(){return"http:"===Qr()||"https:"===Qr()}function Qr(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Qi{constructor(p,a){this.shortDelay=p,this.longDelay=a,Pn(a>p,"Short delay should be less than long delay!"),this.isMobile=(0,Q.jZ)()||(0,Q.lV)()}get(){return function Ai(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(li()||(0,Q.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function os(_,p){Pn(_.emulator,"Emulator should always be set here");const{url:a}=_.emulator;return p?`${a}${p.startsWith("/")?p.slice(1):p}`:a}class ss{static initialize(p,a,c){this.fetchImpl=p,a&&(this.headersImpl=a),c&&(this.responseImpl=c)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ks=new Qi(3e4,6e4);function wt(_,p){return _.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:_.tenantId}):p}function Pt(_,p,a,c){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,P.A)(function*(_,p,a,c,d={}){return Da(_,d,(0,P.A)(function*(){let f={},m={};c&&("GET"===p?m=c:f={body:JSON.stringify(c)});const v=(0,Q.Am)(Object.assign({key:_.config.apiKey},m)).slice(1),E=yield _._getAdditionalHeaders();E["Content-Type"]="application/json",_.languageCode&&(E["X-Firebase-Locale"]=_.languageCode);const I=Object.assign({method:p,headers:E},f);return(0,Q.c1)()||(I.referrerPolicy="no-referrer"),_.emulatorConfig&&(0,Q.zJ)(_.emulatorConfig.host)&&(I.credentials="include"),ss.fetch()(yield Do(_,_.config.apiHost,a,v),I)}))})).apply(this,arguments)}function Da(_,p,a){return ci.apply(this,arguments)}function ci(){return(ci=(0,P.A)(function*(_,p,a){_._canInitEmulator=!1;const c=Object.assign(Object.assign({},xi),p);try{const d=new ki(_),f=yield Promise.race([a(),d.promise]);d.clearNetworkTimeout();const m=yield f.json();if("needConfirmation"in m)throw Io(_,"account-exists-with-different-credential",m);if(f.ok&&!("errorMessage"in m))return m;{const v=f.ok?m.errorMessage:m.error.message,[E,I]=v.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===E)throw Io(_,"credential-already-in-use",m);if("EMAIL_EXISTS"===E)throw Io(_,"email-already-in-use",m);if("USER_DISABLED"===E)throw Io(_,"user-disabled",m);const T=c[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw Yr(_,T,I);An(_,T)}}catch(d){if(d instanceof Q.g)throw d;An(_,"network-request-failed",{message:String(d)})}})).apply(this,arguments)}function Sr(_,p,a,c){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.A)(function*(_,p,a,c,d={}){const f=yield Pt(_,p,a,c,d);return"mfaPendingCredential"in f&&An(_,"multi-factor-auth-required",{_serverResponse:f}),f})).apply(this,arguments)}function Do(_,p,a,c){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.A)(function*(_,p,a,c){const d=`${p}${a}?${c}`,f=_,m=f.config.emulator?os(_.config,d):`${_.config.apiScheme}://${d}`;return Bn.includes(a)&&(yield f._persistenceManagerAvailable,"COOKIE"===f._getPersistenceType())?f._getPersistence()._getFinalTarget(m).toString():m})).apply(this,arguments)}function Ri(_){switch(_){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ki{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((a,c)=>{this.timer=setTimeout(()=>c(Ke(this.auth,"network-request-failed")),ks.get())})}}function Io(_,p,a){const c={appName:_.name};a.email&&(c.email=a.email),a.phoneNumber&&(c.phoneNumber=a.phoneNumber);const d=Ke(_,p,c);return d.customData._tokenResponse=a,d}function Vr(_){return void 0!==_&&void 0!==_.getResponse}function Rt(_){return void 0!==_&&void 0!==_.enterprise}class Xi{constructor(p){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=p.recaptchaEnforcementState}getProviderEnforcementState(p){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const a of this.recaptchaEnforcementState)if(a.provider&&a.provider===p)return Ri(a.enforcementState);return null}isProviderEnabled(p){return"ENFORCE"===this.getProviderEnforcementState(p)||"AUDIT"===this.getProviderEnforcementState(p)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}function Ni(){return(Ni=(0,P.A)(function*(_){return(yield Pt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Oi(_,p){return R.apply(this,arguments)}function R(){return(R=(0,P.A)(function*(_,p){return Pt(_,"GET","/v2/recaptchaConfig",wt(_,p))})).apply(this,arguments)}function O(){return(O=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function z(){return(z=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function he(_,p){return ze.apply(this,arguments)}function ze(){return(ze=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Ce(_){if(_)try{const p=new Date(Number(_));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ir(_,p=!1){return(0,Q.Ku)(_).getIdToken(p)}function vn(_){return H.apply(this,arguments)}function H(){return(H=(0,P.A)(function*(_,p=!1){const a=(0,Q.Ku)(_),c=yield a.getIdToken(p),d=Ee(c);ie(d&&d.exp&&d.auth_time&&d.iat,a.auth,"internal-error");const f="object"==typeof d.firebase?d.firebase:void 0,m=f?.sign_in_provider;return{claims:d,token:c,authTime:Ce(ft(d.auth_time)),issuedAtTime:Ce(ft(d.iat)),expirationTime:Ce(ft(d.exp)),signInProvider:m||null,signInSecondFactor:f?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(_){return 1e3*Number(_)}function Ee(_){const[p,a,c]=_.split(".");if(void 0===p||void 0===a||void 0===c)return wo("JWT malformed, contained fewer than 3 sections"),null;try{const d=(0,Q.u)(a);return d?JSON.parse(d):(wo("Failed to decode base64 JWT payload"),null)}catch(d){return wo("Caught error parsing JWT payload as JSON",d?.toString()),null}}function $(_){const p=Ee(_);return ie(p,"internal-error"),ie(typeof p.exp<"u","internal-error"),ie(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}function F(_,p){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.A)(function*(_,p,a=!1){if(a)return p;try{return yield p}catch(c){throw c instanceof Q.g&&function de({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(c)&&_.auth.currentUser===_&&(yield _.auth.signOut()),c}})).apply(this,arguments)}class we{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var a;if(p){const c=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),c}{this.errorBackoff=3e4;const d=(null!==(a=this.user.stsTokenManager.expirationTime)&&void 0!==a?a:0)-Date.now()-3e5;return Math.max(0,d)}}schedule(p=!1){var a=this;if(!this.isRunning)return;const c=this.getInterval(p);this.timerId=setTimeout((0,P.A)(function*(){yield a.iteration()}),c)}iteration(){var p=this;return(0,P.A)(function*(){try{yield p.user.getIdToken(!0)}catch(a){return void("auth/network-request-failed"===a?.code&&p.schedule(!0))}p.schedule()})()}}class De{constructor(p,a){this.createdAt=p,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ce(this.lastLoginAt),this.creationTime=Ce(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ne(_){return vt.apply(this,arguments)}function vt(){return(vt=(0,P.A)(function*(_){var p;const a=_.auth,c=yield _.getIdToken(),d=yield F(_,he(a,{idToken:c}));ie(d?.users.length,a,"internal-error");const f=d.users[0];_._notifyReloadListener(f);const m=null!==(p=f.providerUserInfo)&&void 0!==p&&p.length?Ji(f.providerUserInfo):[],v=function Ue(_,p){return[..._.filter(c=>!p.some(d=>d.providerId===c.providerId)),...p]}(_.providerData,m),T=!!_.isAnonymous&&!(_.email&&f.passwordHash||v?.length),M={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:v,metadata:new De(f.createdAt,f.lastLoginAt),isAnonymous:T};Object.assign(_,M)})).apply(this,arguments)}function Oe(_){return We.apply(this,arguments)}function We(){return(We=(0,P.A)(function*(_){const p=(0,Q.Ku)(_);yield Ne(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ji(_){return _.map(p=>{var{providerId:a}=p,c=Zt(p,["providerId"]);return{providerId:a,uid:c.rawId||"",displayName:c.displayName||null,email:c.email||null,phoneNumber:c.phoneNumber||null,photoURL:c.photoUrl||null}})}function Kc(){return(Kc=(0,P.A)(function*(_,p){const a=yield Da(_,{},(0,P.A)(function*(){const c=(0,Q.Am)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:d,apiKey:f}=_.config,m=yield Do(_,d,"/v1/token",`key=${f}`),v=yield _._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:c};return _.emulatorConfig&&(0,Q.zJ)(_.emulatorConfig.host)&&(E.credentials="include"),ss.fetch()(m,E)}));return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}})).apply(this,arguments)}function _t(){return(_t=(0,P.A)(function*(_,p){return Pt(_,"POST","/v2/accounts:revokeToken",wt(_,p))})).apply(this,arguments)}class Ns{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ie(p.idToken,"internal-error"),ie(typeof p.idToken<"u","internal-error"),ie(typeof p.refreshToken<"u","internal-error");const a="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):$(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,a)}updateFromIdToken(p){ie(0!==p.length,"internal-error");const a=$(p);this.updateTokensAndExpiration(p,null,a)}getToken(p){var a=this;return(0,P.A)(function*(c,d=!1){return d||!a.accessToken||a.isExpired?(ie(a.refreshToken,c,"user-token-expired"),a.refreshToken?(yield a.refresh(c,a.refreshToken),a.accessToken):null):a.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(p,a){var c=this;return(0,P.A)(function*(){const{accessToken:d,refreshToken:f,expiresIn:m}=yield function $e(_,p){return Kc.apply(this,arguments)}(p,a);c.updateTokensAndExpiration(d,f,Number(m))})()}updateTokensAndExpiration(p,a,c){this.refreshToken=a||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*c}static fromJSON(p,a){const{refreshToken:c,accessToken:d,expirationTime:f}=a,m=new Ns;return c&&(ie("string"==typeof c,"internal-error",{appName:p}),m.refreshToken=c),d&&(ie("string"==typeof d,"internal-error",{appName:p}),m.accessToken=d),f&&(ie("number"==typeof f,"internal-error",{appName:p}),m.expirationTime=f),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ns,this.toJSON())}_performRefresh(){return xn("not implemented")}}function He(_,p){ie("string"==typeof _||typeof _>"u","internal-error",{appName:p})}class Be{constructor(p){var{uid:a,auth:c,stsTokenManager:d}=p,f=Zt(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new we(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=c,this.stsTokenManager=d,this.accessToken=d.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new De(f.createdAt||void 0,f.lastLoginAt||void 0)}getIdToken(p){var a=this;return(0,P.A)(function*(){const c=yield F(a,a.stsTokenManager.getToken(a.auth,p));return ie(c,a.auth,"internal-error"),a.accessToken!==c&&(a.accessToken=c,yield a.auth._persistUserIfCurrent(a),a.auth._notifyListenersIfCurrent(a)),c})()}getIdTokenResult(p){return vn(this,p)}reload(){return Oe(this)}_assign(p){this!==p&&(ie(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(a=>Object.assign({},a)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const a=new Be(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(p){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p){var a=this;return(0,P.A)(function*(c,d=!1){let f=!1;c.idToken&&c.idToken!==a.stsTokenManager.accessToken&&(a.stsTokenManager.updateFromServerResponse(c),f=!0),d&&(yield Ne(a)),yield a.auth._persistUserIfCurrent(a),f&&a.auth._notifyListenersIfCurrent(a)}).apply(this,arguments)}delete(){var p=this;return(0,P.A)(function*(){if((0,me.xZ)(p.auth.app))return Promise.reject($t(p.auth));const a=yield p.getIdToken();return yield F(p,function k(_,p){return O.apply(this,arguments)}(p.auth,{idToken:a})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,a){var c,d,f,m,v,E,I,T;const M=null!==(c=a.displayName)&&void 0!==c?c:void 0,V=null!==(d=a.email)&&void 0!==d?d:void 0,U=null!==(f=a.phoneNumber)&&void 0!==f?f:void 0,Y=null!==(m=a.photoURL)&&void 0!==m?m:void 0,fe=null!==(v=a.tenantId)&&void 0!==v?v:void 0,ve=null!==(E=a._redirectEventId)&&void 0!==E?E:void 0,at=null!==(I=a.createdAt)&&void 0!==I?I:void 0,Zn=null!==(T=a.lastLoginAt)&&void 0!==T?T:void 0,{uid:ra,emailVerified:ol,isAnonymous:gc,providerData:wn,stsTokenManager:rC}=a;ie(ra&&rC,p,"internal-error");const iC=Ns.fromJSON(this.name,rC);ie("string"==typeof ra,p,"internal-error"),He(M,p.name),He(V,p.name),ie("boolean"==typeof ol,p,"internal-error"),ie("boolean"==typeof gc,p,"internal-error"),He(U,p.name),He(Y,p.name),He(fe,p.name),He(ve,p.name),He(at,p.name),He(Zn,p.name);const O_=new Be({uid:ra,auth:p,email:V,emailVerified:ol,displayName:M,isAnonymous:gc,photoURL:Y,phoneNumber:U,tenantId:fe,stsTokenManager:iC,createdAt:at,lastLoginAt:Zn});return wn&&Array.isArray(wn)&&(O_.providerData=wn.map(F_=>Object.assign({},F_))),ve&&(O_._redirectEventId=ve),O_}static _fromIdTokenResponse(p,a){return(0,P.A)(function*(c,d,f=!1){const m=new Ns;m.updateFromServerResponse(d);const v=new Be({uid:d.localId,auth:c,stsTokenManager:m,isAnonymous:f});return yield Ne(v),v}).apply(this,arguments)}static _fromGetAccountInfoResponse(p,a,c){return(0,P.A)(function*(){const d=a.users[0];ie(void 0!==d.localId,"internal-error");const f=void 0!==d.providerUserInfo?Ji(d.providerUserInfo):[],m=!(d.email&&d.passwordHash||f?.length),v=new Ns;v.updateFromIdToken(c);const E=new Be({uid:d.localId,auth:p,stsTokenManager:v,isAnonymous:m}),I={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:f,metadata:new De(d.createdAt,d.lastLoginAt),isAnonymous:!(d.email&&d.passwordHash||f?.length)};return Object.assign(E,I),E})()}}const Tr=new Map;function So(_){Pn(_ instanceof Function,"Expected a class definition");let p=Tr.get(_);return p?(Pn(p instanceof _,"Instance stored in cache mismatched with class"),p):(p=new _,Tr.set(_,p),p)}const Se=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,P.A)(function*(){return!0})()}_set(a,c){var d=this;return(0,P.A)(function*(){d.storage[a]=c})()}_get(a){var c=this;return(0,P.A)(function*(){const d=c.storage[a];return void 0===d?null:d})()}_remove(a){var c=this;return(0,P.A)(function*(){delete c.storage[a]})()}_addListener(a,c){}_removeListener(a,c){}}return _.type="NONE",_})();function Os(_,p,a){return`firebase:${_}:${p}:${a}`}class qn{constructor(p,a,c){this.persistence=p,this.auth=a,this.userKey=c;const{config:d,name:f}=this.auth;this.fullUserKey=Os(this.userKey,d.apiKey,f),this.fullPersistenceKey=Os("persistence",d.apiKey,f),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,P.A)(function*(){const a=yield p.persistence._get(p.fullUserKey);if(!a)return null;if("string"==typeof a){const c=yield he(p.auth,{idToken:a}).catch(()=>{});return c?Be._fromGetAccountInfoResponse(p.auth,c,a):null}return Be._fromJSON(p.auth,a)})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var a=this;return(0,P.A)(function*(){if(a.persistence===p)return;const c=yield a.getCurrentUser();return yield a.removeCurrentUser(),a.persistence=p,c?a.setCurrentUser(c):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,a){return(0,P.A)(function*(c,d,f="authUser"){if(!d.length)return new qn(So(Se),c,f);const m=(yield Promise.all(d.map(function(){var M=(0,P.A)(function*(V){if(yield V._isAvailable())return V});return function(V){return M.apply(this,arguments)}}()))).filter(M=>M);let v=m[0]||So(Se);const E=Os(f,c.config.apiKey,c.name);let I=null;for(const M of d)try{const V=yield M._get(E);if(V){let U;if("string"==typeof V){const Y=yield he(c,{idToken:V}).catch(()=>{});if(!Y)break;U=yield Be._fromGetAccountInfoResponse(c,Y,V)}else U=Be._fromJSON(c,V);M!==v&&(I=U),v=M;break}}catch{}const T=m.filter(M=>M._shouldAllowMigration);return v._shouldAllowMigration&&T.length?(v=T[0],I&&(yield v._set(E,I.toJSON())),yield Promise.all(d.map(function(){var M=(0,P.A)(function*(V){if(V!==v)try{yield V._remove(E)}catch{}});return function(V){return M.apply(this,arguments)}}())),new qn(v,c,f)):new qn(v,c,f)}).apply(this,arguments)}}function Op(_){const p=_.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Sl(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(gd(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Qh(p))return"Blackberry";if(Lp(p))return"Webos";if(Fs(p))return"Safari";if((p.includes("chrome/")||eo(p))&&!p.includes("edge/"))return"Chrome";if(Fp(p))return"Android";{const c=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===c?.length)return c[1]}return"Other"}function gd(_=(0,Q.ZQ)()){return/firefox\//i.test(_)}function Fs(_=(0,Q.ZQ)()){const p=_.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function eo(_=(0,Q.ZQ)()){return/crios\//i.test(_)}function Sl(_=(0,Q.ZQ)()){return/iemobile/i.test(_)}function Fp(_=(0,Q.ZQ)()){return/android/i.test(_)}function Qh(_=(0,Q.ZQ)()){return/blackberry/i.test(_)}function Lp(_=(0,Q.ZQ)()){return/webos/i.test(_)}function md(_=(0,Q.ZQ)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function ue(_=(0,Q.ZQ)()){return md(_)||Fp(_)||Lp(_)||Qh(_)||/windows phone/i.test(_)||Sl(_)}function Yc(_,p=[]){let a;switch(_){case"Browser":a=Op((0,Q.ZQ)());break;case"Worker":a=`${Op((0,Q.ZQ)())}-${_}`;break;default:a=_}const c=p.length?p.join(","):"FirebaseCore-web";return`${a}/JsCore/${me.MF}/${c}`}class _d{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,a){const c=f=>new Promise((m,v)=>{try{m(p(f))}catch(E){v(E)}});c.onAbort=a,this.queue.push(c);const d=this.queue.length-1;return()=>{this.queue[d]=()=>Promise.resolve()}}runMiddleware(p){var a=this;return(0,P.A)(function*(){if(a.auth.currentUser===p)return;const c=[];try{for(const d of a.queue)yield d(p),d.onAbort&&c.push(d.onAbort)}catch(d){c.reverse();for(const f of c)try{f()}catch{}throw a.auth._errorFactory.create("login-blocked",{originalMessage:d?.message})}})()}}function Fi(){return(Fi=(0,P.A)(function*(_,p={}){return Pt(_,"GET","/v2/passwordPolicy",wt(_,p))})).apply(this,arguments)}class pe{constructor(p){var a,c,d,f;const m=p.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(a=m.minPasswordLength)&&void 0!==a?a:6,m.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=m.maxPasswordLength),void 0!==m.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=m.containsLowercaseCharacter),void 0!==m.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=m.containsUppercaseCharacter),void 0!==m.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=m.containsNumericCharacter),void 0!==m.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=m.containsNonAlphanumericCharacter),this.enforcementState=p.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(d=null===(c=p.allowedNonAlphanumericCharacters)||void 0===c?void 0:c.join(""))&&void 0!==d?d:"",this.forceUpgradeOnSignin=null!==(f=p.forceUpgradeOnSignin)&&void 0!==f&&f,this.schemaVersion=p.schemaVersion}validatePassword(p){var a,c,d,f,m,v;const E={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(p,E),this.validatePasswordCharacterOptions(p,E),E.isValid&&(E.isValid=null===(a=E.meetsMinPasswordLength)||void 0===a||a),E.isValid&&(E.isValid=null===(c=E.meetsMaxPasswordLength)||void 0===c||c),E.isValid&&(E.isValid=null===(d=E.containsLowercaseLetter)||void 0===d||d),E.isValid&&(E.isValid=null===(f=E.containsUppercaseLetter)||void 0===f||f),E.isValid&&(E.isValid=null===(m=E.containsNumericCharacter)||void 0===m||m),E.isValid&&(E.isValid=null===(v=E.containsNonAlphanumericCharacter)||void 0===v||v),E}validatePasswordLengthOptions(p,a){const c=this.customStrengthOptions.minPasswordLength,d=this.customStrengthOptions.maxPasswordLength;c&&(a.meetsMinPasswordLength=p.length>=c),d&&(a.meetsMaxPasswordLength=p.length<=d)}validatePasswordCharacterOptions(p,a){let c;this.updatePasswordCharacterOptionsStatuses(a,!1,!1,!1,!1);for(let d=0;d<p.length;d++)c=p.charAt(d),this.updatePasswordCharacterOptionsStatuses(a,c>="a"&&c<="z",c>="A"&&c<="Z",c>="0"&&c<="9",this.allowedNonAlphanumericCharacters.includes(c))}updatePasswordCharacterOptionsStatuses(p,a,c,d,f){this.customStrengthOptions.containsLowercaseLetter&&(p.containsLowercaseLetter||(p.containsLowercaseLetter=a)),this.customStrengthOptions.containsUppercaseLetter&&(p.containsUppercaseLetter||(p.containsUppercaseLetter=c)),this.customStrengthOptions.containsNumericCharacter&&(p.containsNumericCharacter||(p.containsNumericCharacter=d)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(p.containsNonAlphanumericCharacter||(p.containsNonAlphanumericCharacter=f))}}class T_{constructor(p,a,c,d){this.app=p,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=c,this.config=d,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tl(this),this.idTokenSubscription=new Tl(this),this.beforeStateQueue=new _d(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=d.sdkClientVersion,this._persistenceManagerAvailable=new Promise(f=>this._resolvePersistenceManagerAvailable=f)}_initializeWithPersistence(p,a){var c=this;return a&&(this._popupRedirectResolver=So(a)),this._initializationPromise=this.queue((0,P.A)(function*(){var d,f,m;if(!c._deleted&&(c.persistenceManager=yield qn.create(c,p),null===(d=c._resolvePersistenceManagerAvailable)||void 0===d||d.call(c),!c._deleted)){if(null!==(f=c._popupRedirectResolver)&&void 0!==f&&f._shouldInitProactively)try{yield c._popupRedirectResolver._initialize(c)}catch{}yield c.initializeCurrentUser(a),c.lastNotifiedUid=(null===(m=c.currentUser)||void 0===m?void 0:m.uid)||null,!c._deleted&&(c._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,P.A)(function*(){if(p._deleted)return;const a=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||a){if(p.currentUser&&a&&p.currentUser.uid===a.uid)return p._currentUser._assign(a),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(a,!0)}})()}initializeCurrentUserFromIdToken(p){var a=this;return(0,P.A)(function*(){try{const c=yield he(a,{idToken:p}),d=yield Be._fromGetAccountInfoResponse(a,c,p);yield a.directlySetCurrentUser(d)}catch(c){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",c),yield a.directlySetCurrentUser(null)}})()}initializeCurrentUser(p){var a=this;return(0,P.A)(function*(){var c;if((0,me.xZ)(a.app)){const v=a.app.settings.authIdToken;return v?new Promise(E=>{setTimeout(()=>a.initializeCurrentUserFromIdToken(v).then(E,E))}):a.directlySetCurrentUser(null)}const d=yield a.assertedPersistence.getCurrentUser();let f=d,m=!1;if(p&&a.config.authDomain){yield a.getOrInitRedirectPersistenceManager();const v=null===(c=a.redirectUser)||void 0===c?void 0:c._redirectEventId,E=f?._redirectEventId,I=yield a.tryRedirectSignIn(p);(!v||v===E)&&I?.user&&(f=I.user,m=!0)}if(!f)return a.directlySetCurrentUser(null);if(!f._redirectEventId){if(m)try{yield a.beforeStateQueue.runMiddleware(f)}catch(v){f=d,a._popupRedirectResolver._overrideRedirectResult(a,()=>Promise.reject(v))}return f?a.reloadAndSetCurrentUserOrClear(f):a.directlySetCurrentUser(null)}return ie(a._popupRedirectResolver,a,"argument-error"),yield a.getOrInitRedirectPersistenceManager(),a.redirectUser&&a.redirectUser._redirectEventId===f._redirectEventId?a.directlySetCurrentUser(f):a.reloadAndSetCurrentUserOrClear(f)})()}tryRedirectSignIn(p){var a=this;return(0,P.A)(function*(){let c=null;try{c=yield a._popupRedirectResolver._completeRedirectFn(a,p,!0)}catch{yield a._setRedirectUser(null)}return c})()}reloadAndSetCurrentUserOrClear(p){var a=this;return(0,P.A)(function*(){try{yield Ne(p)}catch(c){if("auth/network-request-failed"!==c?.code)return a.directlySetCurrentUser(null)}return a.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function qc(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var p=this;return(0,P.A)(function*(){p._deleted=!0})()}updateCurrentUser(p){var a=this;return(0,P.A)(function*(){if((0,me.xZ)(a.app))return Promise.reject($t(a));const c=p?(0,Q.Ku)(p):null;return c&&ie(c.auth.config.apiKey===a.config.apiKey,a,"invalid-user-token"),a._updateCurrentUser(c&&c._clone(a))})()}_updateCurrentUser(p){var a=this;return(0,P.A)(function*(c,d=!1){if(!a._deleted)return c&&ie(a.tenantId===c.tenantId,a,"tenant-id-mismatch"),d||(yield a.beforeStateQueue.runMiddleware(c)),a.queue((0,P.A)(function*(){yield a.directlySetCurrentUser(c),a.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var p=this;return(0,P.A)(function*(){return(0,me.xZ)(p.app)?Promise.reject($t(p)):(yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0))})()}setPersistence(p){var a=this;return(0,me.xZ)(this.app)?Promise.reject($t(this)):this.queue((0,P.A)(function*(){yield a.assertedPersistence.setPersistence(So(p))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(p){var a=this;return(0,P.A)(function*(){a._getPasswordPolicyInternal()||(yield a._updatePasswordPolicy());const c=a._getPasswordPolicyInternal();return c.schemaVersion!==a.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(a._errorFactory.create("unsupported-password-policy-schema-version",{})):c.validatePassword(p)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var p=this;return(0,P.A)(function*(){const a=yield function Vp(_){return Fi.apply(this,arguments)}(p),c=new pe(a);null===p.tenantId?p._projectPasswordPolicy=c:p._tenantPasswordPolicies[p.tenantId]=c})()}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(p){this._errorFactory=new Q.FA("auth","Firebase",p())}onAuthStateChanged(p,a,c){return this.registerStateListener(this.authStateSubscription,p,a,c)}beforeAuthStateChanged(p,a){return this.beforeStateQueue.pushCallback(p,a)}onIdTokenChanged(p,a,c){return this.registerStateListener(this.idTokenSubscription,p,a,c)}authStateReady(){return new Promise((p,a)=>{if(this.currentUser)p();else{const c=this.onAuthStateChanged(()=>{c(),p()},a)}})}revokeAccessToken(p){var a=this;return(0,P.A)(function*(){if(a.currentUser){const c=yield a.currentUser.getIdToken(),d={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:p,idToken:c};null!=a.tenantId&&(d.tenantId=a.tenantId),yield function S_(_,p){return _t.apply(this,arguments)}(a,d)}})()}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,a){var c=this;return(0,P.A)(function*(){const d=yield c.getOrInitRedirectPersistenceManager(a);return null===p?d.removeCurrentUser():d.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var a=this;return(0,P.A)(function*(){if(!a.redirectPersistenceManager){const c=p&&So(p)||a._popupRedirectResolver;ie(c,a,"argument-error"),a.redirectPersistenceManager=yield qn.create(a,[So(c._redirectPersistence)],"redirectUser"),a.redirectUser=yield a.redirectPersistenceManager.getCurrentUser()}return a.redirectPersistenceManager})()}_redirectUserForId(p){var a=this;return(0,P.A)(function*(){var c,d;return a._isInitialized&&(yield a.queue((0,P.A)(function*(){}))),(null===(c=a._currentUser)||void 0===c?void 0:c._redirectEventId)===p?a._currentUser:(null===(d=a.redirectUser)||void 0===d?void 0:d._redirectEventId)===p?a.redirectUser:null})()}_persistUserIfCurrent(p){var a=this;return(0,P.A)(function*(){if(p===a.currentUser)return a.queue((0,P.A)(function*(){return a.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const c=null!==(a=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==a?a:null;this.lastNotifiedUid!==c&&(this.lastNotifiedUid=c,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,a,c,d){if(this._deleted)return()=>{};const f="function"==typeof a?a:a.next.bind(a);let m=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(v,this,"internal-error"),v.then(()=>{m||f(this.currentUser)}),"function"==typeof a){const E=p.addObserver(a,c,d);return()=>{m=!0,E()}}{const E=p.addObserver(a);return()=>{m=!0,E()}}}directlySetCurrentUser(p){var a=this;return(0,P.A)(function*(){a.currentUser&&a.currentUser!==p&&a._currentUser._stopProactiveRefresh(),p&&a.isProactiveRefreshEnabled&&p._startProactiveRefresh(),a.currentUser=p,p?yield a.assertedPersistence.setCurrentUser(p):yield a.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Yc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,P.A)(function*(){var a;const c={"X-Client-Version":p.clientVersion};p.app.options.appId&&(c["X-Firebase-gmpid"]=p.app.options.appId);const d=yield null===(a=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===a?void 0:a.getHeartbeatsHeader();d&&(c["X-Firebase-Client"]=d);const f=yield p._getAppCheckToken();return f&&(c["X-Firebase-AppCheck"]=f),c})()}_getAppCheckToken(){var p=this;return(0,P.A)(function*(){var a;if((0,me.xZ)(p.app)&&p.app.settings.appCheckToken)return p.app.settings.appCheckToken;const c=yield null===(a=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===a?void 0:a.getToken();return c?.error&&function is(_,...p){nr.logLevel<=N.$b.WARN&&nr.warn(`Auth (${me.MF}): ${_}`,...p)}(`Error while retrieving App Check token: ${c.error}`),c?.token})()}}function Je(_){return(0,Q.Ku)(_)}class Tl{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,Q.tD)(a=>this.observer=a)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ls={loadJS:()=>(0,P.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vd(_){return Ls.loadJS(_)}function as(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ta=1e12;class Xc{constructor(p){this.auth=p,this.counter=Ta,this._widgets=new Map}render(p,a){const c=this.counter;return this._widgets.set(c,new Bp(p,this.auth.name,a||{})),this.counter++,c}reset(p){var a;const c=p||Ta;null===(a=this._widgets.get(c))||void 0===a||a.delete(),this._widgets.delete(c)}getResponse(p){var a;return(null===(a=this._widgets.get(p||Ta))||void 0===a?void 0:a.getResponse())||""}execute(p){var a=this;return(0,P.A)(function*(){var c;return null===(c=a._widgets.get(p||Ta))||void 0===c||c.execute(),""})()}}class Jh{constructor(){this.enterprise=new Nt}ready(p){p()}execute(p,a){return Promise.resolve("token")}render(p,a){return""}}class Nt{ready(p){p()}execute(p,a){return Promise.resolve("token")}render(p,a){return""}}class Bp{constructor(p,a,c){this.params=c,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const d="string"==typeof p?document.getElementById(p):p;ie(d,"argument-error",{appName:a}),this.container=d,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jc(_){const p=[],a="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let c=0;c<_;c++)p.push(a.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":a}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,a)try{a()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ma="NO_RECAPTCHA";class Aa{constructor(p){this.type="recaptcha-enterprise",this.auth=Je(p)}verify(){var p=this;return(0,P.A)(function*(a="verify",c=!1){function f(){return f=(0,P.A)(function*(v){if(!c){if(null==v.tenantId&&null!=v._agentRecaptchaConfig)return v._agentRecaptchaConfig.siteKey;if(null!=v.tenantId&&void 0!==v._tenantRecaptchaConfigs[v.tenantId])return v._tenantRecaptchaConfigs[v.tenantId].siteKey}return new Promise(function(){var E=(0,P.A)(function*(I,T){Oi(v,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(M=>{if(void 0!==M.recaptchaKey){const V=new Xi(M);return null==v.tenantId?v._agentRecaptchaConfig=V:v._tenantRecaptchaConfigs[v.tenantId]=V,I(V.siteKey)}T(new Error("recaptcha Enterprise site key undefined"))}).catch(M=>{T(M)})});return function(I,T){return E.apply(this,arguments)}}())}),f.apply(this,arguments)}function m(v,E,I){const T=window.grecaptcha;Rt(T)?T.enterprise.ready(()=>{T.enterprise.execute(v,{action:a}).then(M=>{E(M)}).catch(()=>{E(Ma)})}):I(Error("No reCAPTCHA enterprise script loaded."))}return p.auth.settings.appVerificationDisabledForTesting?(new Jh).execute("siteKey",{action:"verify"}):new Promise((v,E)=>{(function d(v){return f.apply(this,arguments)})(p.auth).then(I=>{if(!c&&Rt(window.grecaptcha))m(I,v,E);else{if(typeof window>"u")return void E(new Error("RecaptchaVerifier is only supported in browser"));let T=function Al(){return Ls.recaptchaEnterpriseScript}();0!==T.length&&(T+=I),vd(T).then(()=>{m(I,v,E)}).catch(M=>{E(M)})}}).catch(I=>{E(I)})})}).apply(this,arguments)}}function ui(_,p,a){return xa.apply(this,arguments)}function xa(){return(xa=(0,P.A)(function*(_,p,a,c=!1,d=!1){const f=new Aa(_);let m;if(d)m=Ma;else try{m=yield f.verify(a)}catch{m=yield f.verify(a,!0)}const v=Object.assign({},p);return"mfaSmsEnrollment"===a||"mfaSmsSignIn"===a?("phoneEnrollmentInfo"in v?Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:v.phoneEnrollmentInfo.phoneNumber,recaptchaToken:v.phoneEnrollmentInfo.recaptchaToken,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}):"phoneSignInInfo"in v&&Object.assign(v,{phoneSignInInfo:{recaptchaToken:v.phoneSignInInfo.recaptchaToken,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}}),v):(Object.assign(v,c?{captchaResp:m}:{captchaResponse:m}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v)})).apply(this,arguments)}function Le(_,p,a,c,d){return ls.apply(this,arguments)}function ls(){return ls=(0,P.A)(function*(_,p,a,c,d){var f,m;if("EMAIL_PASSWORD_PROVIDER"===d){if(null!==(f=_._getRecaptchaConfig())&&void 0!==f&&f.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const v=yield ui(_,p,a,"getOobCode"===a);return c(_,v)}return c(_,p).catch(function(){var v=(0,P.A)(function*(E){if("auth/missing-recaptcha-token"===E.code){console.log(`${a} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const I=yield ui(_,p,a,"getOobCode"===a);return c(_,I)}return Promise.reject(E)});return function(E){return v.apply(this,arguments)}}())}if("PHONE_PROVIDER"===d){if(null!==(m=_._getRecaptchaConfig())&&void 0!==m&&m.isProviderEnabled("PHONE_PROVIDER")){const v=yield ui(_,p,a);return c(_,v).catch(function(){var E=(0,P.A)(function*(I){var T;if("AUDIT"===(null===(T=_._getRecaptchaConfig())||void 0===T?void 0:T.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===I.code||"auth/invalid-app-credential"===I.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${a} flow.`);const M=yield ui(_,p,a,!1,!0);return c(_,M)}return Promise.reject(I)});return function(I){return E.apply(this,arguments)}}())}{const v=yield ui(_,p,a,!1,!0);return c(_,v)}}return Promise.reject(d+" provider is not supported.")}),ls.apply(this,arguments)}function cs(_){return xl.apply(this,arguments)}function xl(){return(xl=(0,P.A)(function*(_){const p=Je(_),a=yield Oi(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),c=new Xi(a);null==p.tenantId?p._agentRecaptchaConfig=c:p._tenantRecaptchaConfigs[p.tenantId]=c,c.isAnyProviderEnabled()&&new Aa(p).verify()})).apply(this,arguments)}function zt(_,p){const a=(0,me.j6)(_,"auth");if(a.isInitialized()){const d=a.getImmediate(),f=a.getOptions();if((0,Q.bD)(f,p??{}))return d;An(d,"already-initialized")}return a.initialize({options:p})}function Pa(_,p,a){const c=Je(_);ie(/^https?:\/\//.test(p),c,"invalid-emulator-scheme");const d=!!a?.disableWarnings,f=Pl(p),{host:m,port:v}=function Ge(_){const p=Pl(_),a=/(\/\/)?([^?#/]+)/.exec(_.substr(p.length));if(!a)return{host:"",port:null};const c=a[2].split("@").pop()||"",d=/^(\[[^\]]+\])(:|$)/.exec(c);if(d){const f=d[1];return{host:f,port:gt(c.substr(f.length+1))}}{const[f,m]=c.split(":");return{host:f,port:gt(m)}}}(p),E=null===v?"":`:${v}`,I={url:`${f}//${m}${E}/`},T=Object.freeze({host:m,port:v,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:d})});if(!c._canInitEmulator)return ie(c.config.emulator&&c.emulatorConfig,c,"emulator-config-failed"),void ie((0,Q.bD)(I,c.config.emulator)&&(0,Q.bD)(T,c.emulatorConfig),c,"emulator-config-failed");c.config.emulator=I,c.emulatorConfig=T,c.settings.appVerificationDisabledForTesting=!0,(0,Q.zJ)(m)?((0,Q.gE)(`${f}//${m}${E}`),(0,Q.P1)("Auth",!0)):d||function eu(){function _(){const p=document.createElement("p"),a=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Pl(_){const p=_.indexOf(":");return p<0?"":_.substr(0,p+1)}function gt(_){if(!_)return null;const p=Number(_);return isNaN(p)?null:p}class to{constructor(p,a){this.providerId=p,this.signInMethod=a}toJSON(){return xn("not implemented")}_getIdTokenResponse(p){return xn("not implemented")}_linkToIdToken(p,a){return xn("not implemented")}_getReauthenticationResolver(p){return xn("not implemented")}}function Cd(_,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:resetPassword",wt(_,p))})).apply(this,arguments)}function kl(){return(kl=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function et(_,p){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:signUp",p)})).apply(this,arguments)}function mr(){return(mr=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",wt(_,p))})).apply(this,arguments)}function nu(_,p){return tf.apply(this,arguments)}function tf(){return(tf=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithPassword",wt(_,p))})).apply(this,arguments)}function Ol(_,p){return To.apply(this,arguments)}function To(){return(To=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:sendOobCode",wt(_,p))})).apply(this,arguments)}function Fl(){return(Fl=(0,P.A)(function*(_,p){return Ol(_,p)})).apply(this,arguments)}function Ll(_,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,P.A)(function*(_,p){return Ol(_,p)})).apply(this,arguments)}function jp(_,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,P.A)(function*(_,p){return Ol(_,p)})).apply(this,arguments)}function Vl(){return(Vl=(0,P.A)(function*(_,p){return Ol(_,p)})).apply(this,arguments)}function ru(){return(ru=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithEmailLink",wt(_,p))})).apply(this,arguments)}function Bs(){return(Bs=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithEmailLink",wt(_,p))})).apply(this,arguments)}class us extends to{constructor(p,a,c,d=null){super("password",c),this._email=p,this._password=a,this._tenantId=d}static _fromEmailAndPassword(p,a){return new us(p,a,"password")}static _fromEmailAndCode(p,a,c=null){return new us(p,a,"emailLink",c)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const a="string"==typeof p?JSON.parse(p):p;if(a?.email&&a?.password){if("password"===a.signInMethod)return this._fromEmailAndPassword(a.email,a.password);if("emailLink"===a.signInMethod)return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}_getIdTokenResponse(p){var a=this;return(0,P.A)(function*(){switch(a.signInMethod){case"password":return Le(p,{returnSecureToken:!0,email:a._email,password:a._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nu,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function Te(_,p){return ru.apply(this,arguments)}(p,{email:a._email,oobCode:a._password});default:An(p,"internal-error")}})()}_linkToIdToken(p,a){var c=this;return(0,P.A)(function*(){switch(c.signInMethod){case"password":return Le(p,{idToken:a,returnSecureToken:!0,email:c._email,password:c._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",et,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return function X(_,p){return Bs.apply(this,arguments)}(p,{idToken:a,email:c._email,oobCode:c._password});default:An(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Zr(_,p){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithIdp",wt(_,p))})).apply(this,arguments)}class di extends to{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const a=new di(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(a.idToken=p.idToken),p.accessToken&&(a.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(a.nonce=p.nonce),p.pendingToken&&(a.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(a.accessToken=p.oauthToken,a.secret=p.oauthTokenSecret):An("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const a="string"==typeof p?JSON.parse(p):p,{providerId:c,signInMethod:d}=a,f=Zt(a,["providerId","signInMethod"]);if(!c||!d)return null;const m=new di(c,d);return m.idToken=f.idToken||void 0,m.accessToken=f.accessToken||void 0,m.secret=f.secret,m.nonce=f.nonce,m.pendingToken=f.pendingToken||null,m}_getIdTokenResponse(p){return Zr(p,this.buildRequest())}_linkToIdToken(p,a){const c=this.buildRequest();return c.idToken=a,Zr(p,c)}_getReauthenticationResolver(p){const a=this.buildRequest();return a.autoCreate=!1,Zr(p,a)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),p.postBody=(0,Q.Am)(a)}return p}}function iu(_,p){return js.apply(this,arguments)}function js(){return(js=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:sendVerificationCode",wt(_,p))})).apply(this,arguments)}function Mo(){return(Mo=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithPhoneNumber",wt(_,p))})).apply(this,arguments)}function Br(){return(Br=(0,P.A)(function*(_,p){const a=yield Sr(_,"POST","/v1/accounts:signInWithPhoneNumber",wt(_,p));if(a.temporaryProof)throw Io(_,"account-exists-with-different-credential",a);return a})).apply(this,arguments)}const ds={USER_NOT_FOUND:"user-not-found"};function hs(){return(hs=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithPhoneNumber",wt(_,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ds)})).apply(this,arguments)}class Xr extends to{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,a){return new Xr({verificationId:p,verificationCode:a})}static _fromTokenResponse(p,a){return new Xr({phoneNumber:p,temporaryProof:a})}_getIdTokenResponse(p){return function ou(_,p){return Mo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,a){return function Us(_,p){return Br.apply(this,arguments)}(p,Object.assign({idToken:a},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function jr(_,p){return hs.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:a,verificationId:c,verificationCode:d}=this.params;return p&&a?{temporaryProof:p,phoneNumber:a}:{sessionInfo:c,code:d}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:a,verificationCode:c,phoneNumber:d,temporaryProof:f}=p;return c||a||d||f?new Xr({verificationId:a,verificationCode:c,phoneNumber:d,temporaryProof:f}):null}}class ro{constructor(p){var a,c,d,f,m,v;const E=(0,Q.I9)((0,Q.hp)(p)),I=null!==(a=E.apiKey)&&void 0!==a?a:null,T=null!==(c=E.oobCode)&&void 0!==c?c:null,M=function su(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(d=E.mode)&&void 0!==d?d:null);ie(I&&T&&M,"argument-error"),this.apiKey=I,this.operation=M,this.code=T,this.continueUrl=null!==(f=E.continueUrl)&&void 0!==f?f:null,this.languageCode=null!==(m=E.lang)&&void 0!==m?m:null,this.tenantId=null!==(v=E.tenantId)&&void 0!==v?v:null}static parseLink(p){const a=function au(_){const p=(0,Q.I9)((0,Q.hp)(_)).link,a=p?(0,Q.I9)((0,Q.hp)(p)).deep_link_id:null,c=(0,Q.I9)((0,Q.hp)(_)).deep_link_id;return(c?(0,Q.I9)((0,Q.hp)(c)).link:null)||c||a||p||_}(p);try{return new ro(a)}catch{return null}}}function Oa(_){return ro.parseLink(_)}let _r=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(a,c){return us._fromEmailAndPassword(a,c)}static credentialWithLink(a,c){const d=ro.parseLink(c);return ie(d,"argument-error"),us._fromEmailAndCode(a,d.code,d.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Ur{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class yr extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Hs extends yr{static credentialFromJSON(p){const a="string"==typeof p?JSON.parse(p):p;return ie("providerId"in a&&"signInMethod"in a,"argument-error"),di._fromParams(a)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ie(p.idToken||p.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Hs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Hs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:a,oauthAccessToken:c,oauthTokenSecret:d,pendingToken:f,nonce:m,providerId:v}=p;if(!c&&!d&&!a&&!f||!v)return null;try{return new Hs(v)._credential({idToken:a,accessToken:c,nonce:m,pendingToken:f})}catch{return null}}}let Vi=(()=>{class _ extends yr{constructor(){super("facebook.com")}static credential(a){return di._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:a})}static credentialFromResult(a){return _.credentialFromTaggedObject(a)}static credentialFromError(a){return _.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a||!("oauthAccessToken"in a)||!a.oauthAccessToken)return null;try{return _.credential(a.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ae=(()=>{class _ extends yr{constructor(){super("google.com"),this.addScope("profile")}static credential(a,c){return di._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:a,accessToken:c})}static credentialFromResult(a){return _.credentialFromTaggedObject(a)}static credentialFromError(a){return _.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;const{oauthIdToken:c,oauthAccessToken:d}=a;if(!c&&!d)return null;try{return _.credential(c,d)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),dn=(()=>{class _ extends yr{constructor(){super("github.com")}static credential(a){return di._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:a})}static credentialFromResult(a){return _.credentialFromTaggedObject(a)}static credentialFromError(a){return _.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a||!("oauthAccessToken"in a)||!a.oauthAccessToken)return null;try{return _.credential(a.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ao extends to{constructor(p,a){super(p,p),this.pendingToken=a}_getIdTokenResponse(p){return Zr(p,this.buildRequest())}_linkToIdToken(p,a){const c=this.buildRequest();return c.idToken=a,Zr(p,c)}_getReauthenticationResolver(p){const a=this.buildRequest();return a.autoCreate=!1,Zr(p,a)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const a="string"==typeof p?JSON.parse(p):p,{providerId:c,signInMethod:d,pendingToken:f}=a;return c&&d&&f&&c===d?new Ao(c,f):null}static _create(p,a){return new Ao(p,a)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kn extends Ur{constructor(p){ie(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Kn.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Kn.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const a=Ao.fromJSON(p);return ie(a,"argument-error"),a}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:a,providerId:c}=p;if(!a||!c)return null;try{return Ao._create(c,a)}catch{return null}}}let Ye=(()=>{class _ extends yr{constructor(){super("twitter.com")}static credential(a,c){return di._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:a,oauthTokenSecret:c})}static credentialFromResult(a){return _.credentialFromTaggedObject(a)}static credentialFromError(a){return _.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;const{oauthAccessToken:c,oauthTokenSecret:d}=a;if(!c||!d)return null;try{return _.credential(c,d)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function jn(_,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signUp",wt(_,p))})).apply(this,arguments)}class kn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,a,c){return(0,P.A)(function*(d,f,m,v=!1){const E=yield Be._fromIdTokenResponse(d,m,v),I=Mr(m);return new kn({user:E,providerId:I,_tokenResponse:m,operationType:f})}).apply(this,arguments)}static _forOperation(p,a,c){return(0,P.A)(function*(){yield p._updateTokensIfNecessary(c,!0);const d=Mr(c);return new kn({user:p,providerId:d,_tokenResponse:c,operationType:a})})()}}function Mr(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Up(_){return La.apply(this,arguments)}function La(){return(La=(0,P.A)(function*(_){var p;if((0,me.xZ)(_.app))return Promise.reject($t(_));const a=Je(_);if(yield a._initializationPromise,null!==(p=a.currentUser)&&void 0!==p&&p.isAnonymous)return new kn({user:a.currentUser,providerId:null,operationType:"signIn"});const c=yield jn(a,{returnSecureToken:!0}),d=yield kn._fromIdTokenResponse(a,"signIn",c,!0);return yield a._updateCurrentUser(d.user),d})).apply(this,arguments)}class Va extends Q.g{constructor(p,a,c,d){var f;super(a.code,a.message),this.operationType=c,this.user=d,Object.setPrototypeOf(this,Va.prototype),this.customData={appName:p.name,tenantId:null!==(f=p.tenantId)&&void 0!==f?f:void 0,_serverResponse:a.customData._serverResponse,operationType:c}}static _fromErrorAndOperation(p,a,c,d){return new Va(p,a,c,d)}}function wd(_,p,a,c){return("reauthenticate"===p?a._getReauthenticationResolver(_):a._getIdTokenResponse(_)).catch(f=>{throw"auth/multi-factor-auth-required"===f.code?Va._fromErrorAndOperation(_,f,p,c):f})}function jl(_){return new Set(_.map(({providerId:p})=>p).filter(p=>!!p))}function M_(_,p){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,P.A)(function*(_,p){const a=(0,Q.Ku)(_);yield Ba(!0,a,p);const{providerUserInfo:c}=yield function ee(_,p){return z.apply(this,arguments)}(a.auth,{idToken:yield a.getIdToken(),deleteProvider:[p]}),d=jl(c||[]);return a.providerData=a.providerData.filter(f=>d.has(f.providerId)),d.has("phone")||(a.phoneNumber=null),yield a.auth._persistUserIfCurrent(a),a}),Ul.apply(this,arguments)}function Dd(_,p){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,P.A)(function*(_,p,a=!1){const c=yield F(_,p._linkToIdToken(_.auth,yield _.getIdToken()),a);return kn._forOperation(_,"link",c)})).apply(this,arguments)}function Ba(_,p,a){return $l.apply(this,arguments)}function $l(){return($l=(0,P.A)(function*(_,p,a){yield Ne(p);const d=!1===_?"provider-already-linked":"no-such-provider";ie(jl(p.providerData).has(a)===_,p.auth,d)})).apply(this,arguments)}function fs(_,p){return Id.apply(this,arguments)}function Id(){return(Id=(0,P.A)(function*(_,p,a=!1){const{auth:c}=_;if((0,me.xZ)(c.app))return Promise.reject($t(c));const d="reauthenticate";try{const f=yield F(_,wd(c,d,p,_),a);ie(f.idToken,c,"internal-error");const m=Ee(f.idToken);ie(m,c,"internal-error");const{sub:v}=m;return ie(_.uid===v,c,"user-mismatch"),kn._forOperation(_,d,f)}catch(f){throw"auth/user-not-found"===f?.code&&An(c,"user-mismatch"),f}})).apply(this,arguments)}function lu(_,p){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.A)(function*(_,p,a=!1){if((0,me.xZ)(_.app))return Promise.reject($t(_));const c="signIn",d=yield wd(_,c,p),f=yield kn._fromIdTokenResponse(_,c,d);return a||(yield _._updateCurrentUser(f.user)),f})).apply(this,arguments)}function zl(_,p){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,P.A)(function*(_,p){return lu(Je(_),p)})).apply(this,arguments)}function ps(_,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,P.A)(function*(_,p){const a=(0,Q.Ku)(_);return yield Ba(!1,a,p.providerId),Dd(a,p)})).apply(this,arguments)}function xo(_,p){return gs.apply(this,arguments)}function gs(){return(gs=(0,P.A)(function*(_,p){return fs((0,Q.Ku)(_),p)})).apply(this,arguments)}function Gl(){return(Gl=(0,P.A)(function*(_,p){return Sr(_,"POST","/v1/accounts:signInWithCustomToken",wt(_,p))})).apply(this,arguments)}function Sd(_,p){return ms.apply(this,arguments)}function ms(){return ms=(0,P.A)(function*(_,p){if((0,me.xZ)(_.app))return Promise.reject($t(_));const a=Je(_),c=yield function Hp(_,p){return Gl.apply(this,arguments)}(a,{token:p,returnSecureToken:!0}),d=yield kn._fromIdTokenResponse(a,"signIn",c);return yield a._updateCurrentUser(d.user),d}),ms.apply(this,arguments)}class io{constructor(p,a){this.factorId=p,this.uid=a.mfaEnrollmentId,this.enrollmentTime=new Date(a.enrolledAt).toUTCString(),this.displayName=a.displayName}static _fromServerResponse(p,a){return"phoneInfo"in a?Td._fromServerResponse(p,a):"totpInfo"in a?cu._fromServerResponse(p,a):An(p,"internal-error")}}class Td extends io{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,a){return new Td(a)}}class cu extends io{constructor(p){super("totp",p)}static _fromServerResponse(p,a){return new cu(a)}}function Ua(_,p,a){var c;ie((null===(c=a.url)||void 0===c?void 0:c.length)>0,_,"invalid-continue-uri"),ie(typeof a.dynamicLinkDomain>"u"||a.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),ie(typeof a.linkDomain>"u"||a.linkDomain.length>0,_,"invalid-hosting-link-domain"),p.continueUrl=a.url,p.dynamicLinkDomain=a.dynamicLinkDomain,p.linkDomain=a.linkDomain,p.canHandleCodeInApp=a.handleCodeInApp,a.iOS&&(ie(a.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),p.iOSBundleId=a.iOS.bundleId),a.android&&(ie(a.android.packageName.length>0,_,"missing-android-pkg-name"),p.androidInstallApp=a.android.installApp,p.androidMinimumVersionCode=a.android.minimumVersion,p.androidPackageName=a.android.packageName)}function ql(_){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,P.A)(function*(_){const p=Je(_);p._getPasswordPolicyInternal()&&(yield p._updatePasswordPolicy())})).apply(this,arguments)}function Md(_,p,a){return _s.apply(this,arguments)}function _s(){return(_s=(0,P.A)(function*(_,p,a){const c=Je(_),d={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};a&&Ua(c,d,a),yield Le(c,d,"getOobCode",Ll,"EMAIL_PASSWORD_PROVIDER")})).apply(this,arguments)}function $s(_,p,a){return Ha.apply(this,arguments)}function Ha(){return Ha=(0,P.A)(function*(_,p,a){yield Cd((0,Q.Ku)(_),{oobCode:p,newPassword:a}).catch(function(){var c=(0,P.A)(function*(d){throw"auth/password-does-not-meet-requirements"===d.code&&ql(_),d});return function(d){return c.apply(this,arguments)}}())}),Ha.apply(this,arguments)}function Ad(_,p){return fn.apply(this,arguments)}function fn(){return fn=(0,P.A)(function*(_,p){yield function ef(_,p){return mr.apply(this,arguments)}((0,Q.Ku)(_),{oobCode:p})}),fn.apply(this,arguments)}function xd(_,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,P.A)(function*(_,p){const a=(0,Q.Ku)(_),c=yield Cd(a,{oobCode:p}),d=c.requestType;switch(ie(d,a,"internal-error"),d){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(c.newEmail,a,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(c.mfaInfo,a,"internal-error");default:ie(c.email,a,"internal-error")}let f=null;return c.mfaInfo&&(f=io._fromServerResponse(Je(a),c.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===c.requestType?c.newEmail:c.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===c.requestType?c.email:c.newEmail)||null,multiFactorInfo:f},operation:d}})).apply(this,arguments)}function zs(_,p){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,P.A)(function*(_,p){const{data:a}=yield xd((0,Q.Ku)(_),p);return a.email})).apply(this,arguments)}function $p(_,p,a){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,P.A)(function*(_,p,a){if((0,me.xZ)(_.app))return Promise.reject($t(_));const c=Je(_),m=yield Le(c,{returnSecureToken:!0,email:p,password:a,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jn,"EMAIL_PASSWORD_PROVIDER").catch(E=>{throw"auth/password-does-not-meet-requirements"===E.code&&ql(_),E}),v=yield kn._fromIdTokenResponse(c,"signIn",m);return yield c._updateCurrentUser(v.user),v})).apply(this,arguments)}function zp(_,p,a){return(0,me.xZ)(_.app)?Promise.reject($t(_)):zl((0,Q.Ku)(_),_r.credential(p,a)).catch(function(){var c=(0,P.A)(function*(d){throw"auth/password-does-not-meet-requirements"===d.code&&ql(_),d});return function(d){return c.apply(this,arguments)}}())}function Wp(_,p,a){return kd.apply(this,arguments)}function kd(){return(kd=(0,P.A)(function*(_,p,a){const c=Je(_),d={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};(function f(m,v){ie(v.handleCodeInApp,c,"argument-error"),v&&Ua(c,m,v)})(d,a),yield Le(c,d,"getOobCode",jp,"EMAIL_PASSWORD_PROVIDER")})).apply(this,arguments)}function Nd(_,p){const a=ro.parseLink(p);return"EMAIL_SIGNIN"===a?.operation}function Kl(_,p,a){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,P.A)(function*(_,p,a){if((0,me.xZ)(_.app))return Promise.reject($t(_));const c=(0,Q.Ku)(_),d=_r.credentialWithLink(p,a||rr());return ie(d._tenantId===(c.tenantId||null),c,"tenant-id-mismatch"),zl(c,d)})).apply(this,arguments)}function ke(){return(ke=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:createAuthUri",wt(_,p))})).apply(this,arguments)}function tn(_,p){return Hn.apply(this,arguments)}function Hn(){return Hn=(0,P.A)(function*(_,p){const c={identifier:p,continueUri:li()?rr():"http://localhost"},{signinMethods:d}=yield function oe(_,p){return ke.apply(this,arguments)}((0,Q.Ku)(_),c);return d||[]}),Hn.apply(this,arguments)}function bn(_,p){return Yn.apply(this,arguments)}function Yn(){return Yn=(0,P.A)(function*(_,p){const a=(0,Q.Ku)(_),d={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};p&&Ua(a.auth,d,p);const{email:f}=yield function Ra(_,p){return Fl.apply(this,arguments)}(a.auth,d);f!==_.email&&(yield _.reload())}),Yn.apply(this,arguments)}function $a(_,p,a){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_),f={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:p};a&&Ua(c.auth,f,a);const{email:m}=yield function Vs(_,p){return Vl.apply(this,arguments)}(c.auth,f);m!==_.email&&(yield _.reload())}),Dt.apply(this,arguments)}function $r(){return($r=(0,P.A)(function*(_,p){return Pt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ve(_,p){return Po.apply(this,arguments)}function Po(){return Po=(0,P.A)(function*(_,{displayName:p,photoURL:a}){if(void 0===p&&void 0===a)return;const c=(0,Q.Ku)(_),f={idToken:yield c.getIdToken(),displayName:p,photoUrl:a,returnSecureToken:!0},m=yield F(c,function nn(_,p){return $r.apply(this,arguments)}(c.auth,f));c.displayName=m.displayName||null,c.photoURL=m.photoUrl||null;const v=c.providerData.find(({providerId:E})=>"password"===E);v&&(v.displayName=c.displayName,v.photoURL=c.photoURL),yield c._updateTokensIfNecessary(m)}),Po.apply(this,arguments)}function du(_,p){const a=(0,Q.Ku)(_);return(0,me.xZ)(a.auth.app)?Promise.reject($t(a.auth)):It(a,p,null)}function Ws(_,p){return It((0,Q.Ku)(_),null,p)}function It(_,p,a){return oo.apply(this,arguments)}function oo(){return oo=(0,P.A)(function*(_,p,a){const{auth:c}=_,f={idToken:yield _.getIdToken(),returnSecureToken:!0};p&&(f.email=p),a&&(f.password=a);const m=yield F(_,function Rl(_,p){return kl.apply(this,arguments)}(c,f));yield _._updateTokensIfNecessary(m,!0)}),oo.apply(this,arguments)}class Cn{constructor(p,a,c={}){this.isNewUser=p,this.providerId=a,this.profile=c}}class Ro extends Cn{constructor(p,a,c,d){super(p,a,c),this.username=d}}class Yl extends Cn{constructor(p,a){super(p,"facebook.com",a)}}class ys extends Ro{constructor(p,a){super(p,"github.com",a,"string"==typeof a?.login?a?.login:null)}}class hu extends Cn{constructor(p,a){super(p,"google.com",a)}}class qs extends Ro{constructor(p,a,c){super(p,"twitter.com",a,c)}}function zr(_){const{user:p,_tokenResponse:a}=_;return p.isAnonymous&&!a?{providerId:null,isNewUser:!1,profile:null}:function Gs(_){var p,a;if(!_)return null;const{providerId:c}=_,d=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},f=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!c&&_?.idToken){const m=null===(a=null===(p=Ee(_.idToken))||void 0===p?void 0:p.firebase)||void 0===a?void 0:a.sign_in_provider;if(m)return new Cn(f,"anonymous"!==m&&"custom"!==m?m:null)}if(!c)return null;switch(c){case"facebook.com":return new Yl(f,d);case"github.com":return new ys(f,d);case"google.com":return new hu(f,d);case"twitter.com":return new qs(f,d,_.screenName||null);case"custom":case"anonymous":return new Cn(f,null);default:return new Cn(f,c,d)}}(a)}function vs(_,p){return(0,Q.Ku)(_).setPersistence(p)}function ye(_){return cs(_)}function so(_,p){return or.apply(this,arguments)}function or(){return(or=(0,P.A)(function*(_,p){return Je(_).validatePassword(p)})).apply(this,arguments)}function Bi(_,p,a,c){return(0,Q.Ku)(_).onIdTokenChanged(p,a,c)}function Ql(_,p,a){return(0,Q.Ku)(_).beforeAuthStateChanged(p,a)}function za(_,p,a,c){return(0,Q.Ku)(_).onAuthStateChanged(p,a,c)}function Vt(_){(0,Q.Ku)(_).useDeviceLanguage()}function rn(_,p){return(0,Q.Ku)(_).updateCurrentUser(p)}function $n(_){return(0,Q.Ku)(_).signOut()}function Zl(_,p){return Je(_).revokeAccessToken(p)}function Wr(_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,P.A)(function*(_){return(0,Q.Ku)(_).delete()})).apply(this,arguments)}class Kt{constructor(p,a,c){this.type=p,this.credential=a,this.user=c}static _fromIdtoken(p,a){return new Kt("enroll",p,a)}static _fromMfaPendingCredential(p){return new Kt("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var a,c;if(p?.multiFactorSession){if(null!==(a=p.multiFactorSession)&&void 0!==a&&a.pendingCredential)return Kt._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(c=p.multiFactorSession)&&void 0!==c&&c.idToken)return Kt._fromIdtoken(p.multiFactorSession.idToken)}return null}}class hi{constructor(p,a,c){this.session=p,this.hints=a,this.signInResolver=c}static _fromError(p,a){const c=Je(p),d=a.customData._serverResponse,f=(d.mfaInfo||[]).map(v=>io._fromServerResponse(c,v));ie(d.mfaPendingCredential,c,"internal-error");const m=Kt._fromMfaPendingCredential(d.mfaPendingCredential);return new hi(m,f,function(){var v=(0,P.A)(function*(E){const I=yield E._process(c,m);delete d.mfaInfo,delete d.mfaPendingCredential;const T=Object.assign(Object.assign({},d),{idToken:I.idToken,refreshToken:I.refreshToken});switch(a.operationType){case"signIn":const M=yield kn._fromIdTokenResponse(c,a.operationType,T);return yield c._updateCurrentUser(M.user),M;case"reauthenticate":return ie(a.user,c,"internal-error"),kn._forOperation(a.user,a.operationType,T);default:An(c,"internal-error")}});return function(E){return v.apply(this,arguments)}}())}resolveSignIn(p){var a=this;return(0,P.A)(function*(){return a.signInResolver(p)})()}}function Od(_,p){var a;const c=(0,Q.Ku)(_),d=p;return ie(p.customData.operationType,c,"argument-error"),ie(null===(a=d.customData._serverResponse)||void 0===a?void 0:a.mfaPendingCredential,c,"argument-error"),hi._fromError(c,d)}function Fd(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:start",wt(_,p))}class fu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(a=>{a.mfaInfo&&(this.enrolledFactors=a.mfaInfo.map(c=>io._fromServerResponse(p.auth,c)))})}static _fromUser(p){return new fu(p)}getSession(){var p=this;return(0,P.A)(function*(){return Kt._fromIdtoken(yield p.user.getIdToken(),p.user)})()}enroll(p,a){var c=this;return(0,P.A)(function*(){const d=p,f=yield c.getSession(),m=yield F(c.user,d._process(c.user.auth,f,a));return yield c.user._updateTokensIfNecessary(m),c.user.reload()})()}unenroll(p){var a=this;return(0,P.A)(function*(){const c="string"==typeof p?p:p.uid,d=yield a.user.getIdToken();try{const f=yield F(a.user,function Ga(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(_,p))}(a.user.auth,{idToken:d,mfaEnrollmentId:c}));a.enrolledFactors=a.enrolledFactors.filter(({uid:m})=>m!==c),yield a.user._updateTokensIfNecessary(f),yield a.user.reload()}catch(f){throw f}})()}}const nf=new WeakMap;function pu(_){const p=(0,Q.Ku)(_);return nf.has(p)||nf.set(p,fu._fromUser(p)),nf.get(p)}const Vd="__sak";class Gp{constructor(p,a){this.storageRetriever=p,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(Vd,"1"),this.storage.removeItem(Vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,a){return this.storage.setItem(p,JSON.stringify(a)),Promise.resolve()}_get(p){const a=this.storage.getItem(p);return Promise.resolve(a?JSON.parse(a):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kp=(()=>{class _ extends Gp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(a,c)=>this.onStorageEvent(a,c),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ue(),this._shouldAllowMigration=!0}forAllChangedKeys(a){for(const c of Object.keys(this.listeners)){const d=this.storage.getItem(c),f=this.localCache[c];d!==f&&a(c,f,d)}}onStorageEvent(a,c=!1){if(!a.key)return void this.forAllChangedKeys((v,E,I)=>{this.notifyListeners(v,I)});const d=a.key;c?this.detachListener():this.stopPolling();const f=()=>{const v=this.storage.getItem(d);!c&&this.localCache[d]===v||this.notifyListeners(d,v)},m=this.storage.getItem(d);!function Rn(){return(0,Q.lT)()&&10===document.documentMode}()||m===a.newValue||a.newValue===a.oldValue?f():setTimeout(f,10)}notifyListeners(a,c){this.localCache[a]=c;const d=this.listeners[a];if(d)for(const f of Array.from(d))f(c&&JSON.parse(c))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((a,c,d)=>{this.onStorageEvent(new StorageEvent("storage",{key:a,oldValue:c,newValue:d}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(a,c){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[a]||(this.listeners[a]=new Set,this.localCache[a]=this.storage.getItem(a)),this.listeners[a].add(c)}_removeListener(a,c){this.listeners[a]&&(this.listeners[a].delete(c),0===this.listeners[a].size&&delete this.listeners[a]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(a,c){var d=()=>super._set,f=this;return(0,P.A)(function*(){yield d().call(f,a,c),f.localCache[a]=JSON.stringify(c)})()}_get(a){var c=()=>super._get,d=this;return(0,P.A)(function*(){const f=yield c().call(d,a);return d.localCache[a]=JSON.stringify(f),f})()}_remove(a){var c=()=>super._remove,d=this;return(0,P.A)(function*(){yield c().call(d,a),delete d.localCache[a]})()}}return _.type="LOCAL",_})();function rf(_){var p,a;const c=_.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),d=RegExp(`${c}=([^;]+)`);return null!==(a=null===(p=document.cookie.match(d))||void 0===p?void 0:p[1])&&void 0!==a?a:null}function mu(_){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${_.split(":")[3]}`}const af=(()=>{class _{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(a){if(void 0===typeof window)return a;const c=new URL(`${window.location.origin}/__cookies__`);return c.searchParams.set("finalTarget",a),c}_isAvailable(){return(0,P.A)(function*(){var a;return!("boolean"==typeof isSecureContext&&!isSecureContext||typeof navigator>"u"||typeof document>"u")&&(null===(a=navigator.cookieEnabled)||void 0===a||a)})()}_set(a,c){return(0,P.A)(function*(){})()}_get(a){var c=this;return(0,P.A)(function*(){if(!c._isAvailable())return null;const d=mu(a);if(window.cookieStore){const f=yield window.cookieStore.get(d);return f?.value}return rf(d)})()}_remove(a){var c=this;return(0,P.A)(function*(){if(!c._isAvailable()||!(yield c._get(a)))return;const f=mu(a);document.cookie=`${f}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,yield fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})})()}_addListener(a,c){if(!this._isAvailable())return;const d=mu(a);if(window.cookieStore){const E=T=>{const M=T.changed.find(U=>U.name===d);M&&c(M.value),T.deleted.find(U=>U.name===d)&&c(null)};return this.listenerUnsubscribes.set(c,()=>window.cookieStore.removeEventListener("change",E)),window.cookieStore.addEventListener("change",E)}let f=rf(d);const m=setInterval(()=>{const E=rf(d);E!==f&&(c(E),f=E)},1e3);this.listenerUnsubscribes.set(c,()=>clearInterval(m))}_removeListener(a,c){const d=this.listenerUnsubscribes.get(c);d&&(d(),this.listenerUnsubscribes.delete(c))}}return _.type="COOKIE",_})(),_u=(()=>{class _ extends Gp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(a,c){}_removeListener(a,c){}}return _.type="SESSION",_})();let bs=(()=>{class _{constructor(a){this.eventTarget=a,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(a){const c=this.receivers.find(f=>f.isListeningto(a));if(c)return c;const d=new _(a);return this.receivers.push(d),d}isListeningto(a){return this.eventTarget===a}handleEvent(a){var c=this;return(0,P.A)(function*(){const d=a,{eventId:f,eventType:m,data:v}=d.data,E=c.handlersMap[m];if(!E?.size)return;d.ports[0].postMessage({status:"ack",eventId:f,eventType:m});const I=Array.from(E).map(function(){var M=(0,P.A)(function*(V){return V(d.origin,v)});return function(V){return M.apply(this,arguments)}}()),T=yield function yu(_){return Promise.all(_.map(function(){var p=(0,P.A)(function*(a){try{return{fulfilled:!0,value:yield a}}catch(c){return{fulfilled:!1,reason:c}}});return function(a){return p.apply(this,arguments)}}()))}(I);d.ports[0].postMessage({status:"done",eventId:f,eventType:m,response:T})})()}_subscribe(a,c){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[a]||(this.handlersMap[a]=new Set),this.handlersMap[a].add(c)}_unsubscribe(a,c){this.handlersMap[a]&&c&&this.handlersMap[a].delete(c),(!c||0===this.handlersMap[a].size)&&delete this.handlersMap[a],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function vr(_="",p=10){let a="";for(let c=0;c<p;c++)a+=Math.floor(10*Math.random());return _+a}class Bd{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,a){var c=this;return(0,P.A)(function*(d,f,m=50){const v=typeof MessageChannel<"u"?new MessageChannel:null;if(!v)throw new Error("connection_unavailable");let E,I;return new Promise((T,M)=>{const V=vr("",20);v.port1.start();const U=setTimeout(()=>{M(new Error("unsupported_event"))},m);I={messageChannel:v,onMessage(Y){const fe=Y;if(fe.data.eventId===V)switch(fe.data.status){case"ack":clearTimeout(U),E=setTimeout(()=>{M(new Error("timeout"))},3e3);break;case"done":clearTimeout(E),T(fe.data.response);break;default:clearTimeout(U),clearTimeout(E),M(new Error("invalid_response"))}}},c.handlers.add(I),v.port1.addEventListener("message",I.onMessage),c.target.postMessage({eventType:d,eventId:V,data:f},[v.port2])}).finally(()=>{I&&c.removeMessageHandler(I)})}).apply(this,arguments)}}function Nn(){return window}function Jl(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function Ks(){return(Ks=(0,P.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Mt="firebaseLocalStorageDb",Ys="firebaseLocalStorage",pt="fbase_key";class Cs{constructor(p){this.request=p}toPromise(){return new Promise((p,a)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function ko(_,p){return _.transaction([Ys],p?"readwrite":"readonly").objectStore(Ys)}function fi(){const _=indexedDB.open(Mt,1);return new Promise((p,a)=>{_.addEventListener("error",()=>{a(_.error)}),_.addEventListener("upgradeneeded",()=>{const c=_.result;try{c.createObjectStore(Ys,{keyPath:pt})}catch(d){a(d)}}),_.addEventListener("success",(0,P.A)(function*(){const c=_.result;c.objectStoreNames.contains(Ys)?p(c):(c.close(),yield function zn(){const _=indexedDB.deleteDatabase(Mt);return new Cs(_).toPromise()}(),p(yield fi()))}))})}function pi(_,p,a){return No.apply(this,arguments)}function No(){return(No=(0,P.A)(function*(_,p,a){const c=ko(_,!0).put({[pt]:p,value:a});return new Cs(c).toPromise()})).apply(this,arguments)}function Wn(){return(Wn=(0,P.A)(function*(_,p){const a=ko(_,!1).get(p),c=yield new Cs(a).toPromise();return void 0===c?null:c.value})).apply(this,arguments)}function qa(_,p){const a=ko(_,!0).delete(p);return new Cs(a).toPromise()}const Cu=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var a=this;return(0,P.A)(function*(){return a.db||(a.db=yield fi()),a.db})()}_withRetries(a){var c=this;return(0,P.A)(function*(){let d=0;for(;;)try{const f=yield c._openDb();return yield a(f)}catch(f){if(d++>3)throw f;c.db&&(c.db.close(),c.db=void 0)}})()}initializeServiceWorkerMessaging(){var a=this;return(0,P.A)(function*(){return Jl()?a.initializeReceiver():a.initializeSender()})()}initializeReceiver(){var a=this;return(0,P.A)(function*(){a.receiver=bs._getInstance(function Zp(){return Jl()?self:null}()),a.receiver._subscribe("keyChanged",function(){var c=(0,P.A)(function*(d,f){return{keyProcessed:(yield a._poll()).includes(f.key)}});return function(d,f){return c.apply(this,arguments)}}()),a.receiver._subscribe("ping",function(){var c=(0,P.A)(function*(d,f){return["keyChanged"]});return function(d,f){return c.apply(this,arguments)}}())})()}initializeSender(){var a=this;return(0,P.A)(function*(){var c,d;if(a.activeServiceWorker=yield function lf(){return Ks.apply(this,arguments)}(),!a.activeServiceWorker)return;a.sender=new Bd(a.activeServiceWorker);const f=yield a.sender._send("ping",{},800);f&&null!==(c=f[0])&&void 0!==c&&c.fulfilled&&null!==(d=f[0])&&void 0!==d&&d.value.includes("keyChanged")&&(a.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(a){var c=this;return(0,P.A)(function*(){if(c.sender&&c.activeServiceWorker&&function ec(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===c.activeServiceWorker)try{yield c.sender._send("keyChanged",{key:a},c.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,P.A)(function*(){try{if(!indexedDB)return!1;const a=yield fi();return yield pi(a,Vd,"1"),yield qa(a,Vd),!0}catch{}return!1})()}_withPendingWrite(a){var c=this;return(0,P.A)(function*(){c.pendingWrites++;try{yield a()}finally{c.pendingWrites--}})()}_set(a,c){var d=this;return(0,P.A)(function*(){return d._withPendingWrite((0,P.A)(function*(){return yield d._withRetries(f=>pi(f,a,c)),d.localCache[a]=c,d.notifyServiceWorker(a)}))})()}_get(a){var c=this;return(0,P.A)(function*(){const d=yield c._withRetries(f=>function bu(_,p){return Wn.apply(this,arguments)}(f,a));return c.localCache[a]=d,d})()}_remove(a){var c=this;return(0,P.A)(function*(){return c._withPendingWrite((0,P.A)(function*(){return yield c._withRetries(d=>qa(d,a)),delete c.localCache[a],c.notifyServiceWorker(a)}))})()}_poll(){var a=this;return(0,P.A)(function*(){const c=yield a._withRetries(m=>{const v=ko(m,!1).getAll();return new Cs(v).toPromise()});if(!c)return[];if(0!==a.pendingWrites)return[];const d=[],f=new Set;if(0!==c.length)for(const{fbase_key:m,value:v}of c)f.add(m),JSON.stringify(a.localCache[m])!==JSON.stringify(v)&&(a.notifyListeners(m,v),d.push(m));for(const m of Object.keys(a.localCache))a.localCache[m]&&!f.has(m)&&(a.notifyListeners(m,null),d.push(m));return d})()}notifyListeners(a,c){this.localCache[a]=c;const d=this.listeners[a];if(d)for(const f of Array.from(d))f(c)}startPolling(){var a=this;this.stopPolling(),this.pollTimer=setInterval((0,P.A)(function*(){return a._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(a,c){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[a]||(this.listeners[a]=new Set,this._get(a)),this.listeners[a].add(c)}_removeListener(a,c){this.listeners[a]&&(this.listeners[a].delete(c),0===this.listeners[a].size&&delete this.listeners[a]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Eu(_,p){return Pt(_,"POST","/v2/accounts/mfaSignIn:start",wt(_,p))}const sr=as("rcb"),Qs=new Qi(3e4,6e4);class wu{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Nn().grecaptcha)||void 0===p||!p.render)}load(p,a=""){return ie(function Du(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(a),p,"argument-error"),this.shouldResolveImmediately(a)&&Vr(Nn().grecaptcha)?Promise.resolve(Nn().grecaptcha):new Promise((c,d)=>{const f=Nn().setTimeout(()=>{d(Ke(p,"network-request-failed"))},Qs.get());Nn()[sr]=()=>{Nn().clearTimeout(f),delete Nn()[sr];const v=Nn().grecaptcha;if(!v||!Vr(v))return void d(Ke(p,"internal-error"));const E=v.render;v.render=(I,T)=>{const M=E(I,T);return this.counter++,M},this.hostLanguage=a,c(v)},vd(`${function Ml(){return Ls.recaptchaV2Script}()}?${(0,Q.Am)({onload:sr,render:"explicit",hl:a})}`).catch(()=>{clearTimeout(f),d(Ke(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var a;return!(null===(a=Nn().grecaptcha)||void 0===a||!a.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Oo{load(p){return(0,P.A)(function*(){return new Xc(p)})()}clearedOneInstance(){}}const Zs="recaptcha",jd={theme:"light",type:"image"};class uf{constructor(p,a,c=Object.assign({},jd)){this.parameters=c,this.type=Zs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Je(p),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const d="string"==typeof a?document.getElementById(a):a;ie(d,this.auth,"argument-error"),this.container=d,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Oo:new wu,this.validateStartingState()}verify(){var p=this;return(0,P.A)(function*(){p.assertNotDestroyed();const a=yield p.render(),c=p.getAssertedRecaptcha();return c.getResponse(a)||new Promise(f=>{const m=v=>{v&&(p.tokenChangeListeners.delete(m),f(v))};p.tokenChangeListeners.add(m),p.isInvisible&&c.execute(a)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return a=>{if(this.tokenChangeListeners.forEach(c=>c(a)),"function"==typeof p)p(a);else if("string"==typeof p){const c=Nn()[p];"function"==typeof c&&c(a)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,P.A)(function*(){if(yield p.init(),!p.widgetId){let a=p.container;if(!p.isInvisible){const c=document.createElement("div");a.appendChild(c),a=c}p.widgetId=p.getAssertedRecaptcha().render(a,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,P.A)(function*(){ie(li()&&!Jl(),p.auth,"internal-error"),yield function je(){let _=null;return new Promise(p=>{"complete"!==document.readyState?(_=()=>p(),window.addEventListener("load",_)):p()}).catch(p=>{throw _&&window.removeEventListener("load",_),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const a=yield function Sa(_){return Ni.apply(this,arguments)}(p.auth);ie(a,p.auth,"internal-error"),p.parameters.sitekey=a})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xs{constructor(p,a){this.verificationId=p,this.onConfirmation=a}confirm(p){const a=Xr._fromVerification(this.verificationId,p);return this.onConfirmation(a)}}function Iu(_,p,a){return nc.apply(this,arguments)}function nc(){return(nc=(0,P.A)(function*(_,p,a){if((0,me.xZ)(_.app))return Promise.reject($t(_));const c=Je(_),d=yield ao(c,p,(0,Q.Ku)(a));return new Xs(d,f=>zl(c,f))})).apply(this,arguments)}function Ud(_,p,a){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_);yield Ba(!1,c,"phone");const d=yield ao(c.auth,p,(0,Q.Ku)(a));return new Xs(d,f=>ps(c,f))})).apply(this,arguments)}function Jp(_,p,a){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_);if((0,me.xZ)(c.auth.app))return Promise.reject($t(c.auth));const d=yield ao(c.auth,p,(0,Q.Ku)(a));return new Xs(d,f=>xo(c,f))})).apply(this,arguments)}function ao(_,p,a){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,P.A)(function*(_,p,a){var c;if(!_._getRecaptchaConfig())try{yield cs(_)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let d;if(d="string"==typeof p?{phoneNumber:p}:p,"session"in d){const f=d.session;if("phoneNumber"in d){ie("enroll"===f.type,_,"internal-error");const m={idToken:f.credential,phoneEnrollmentInfo:{phoneNumber:d.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(yield Le(_,m,"mfaSmsEnrollment",function(){var T=(0,P.A)(function*(M,V){return V.phoneEnrollmentInfo.captchaResponse===Ma?(ie(a?.type===Zs,M,"argument-error"),Fd(M,yield $d(M,V,a))):Fd(M,V)});return function(V,U){return T.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(T=>Promise.reject(T))).phoneSessionInfo.sessionInfo}{ie("signin"===f.type,_,"internal-error");const m=(null===(c=d.multiFactorHint)||void 0===c?void 0:c.uid)||d.multiFactorUid;ie(m,_,"missing-multi-factor-info");const v={mfaPendingCredential:f.credential,mfaEnrollmentId:m,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(yield Le(_,v,"mfaSmsSignIn",function(){var M=(0,P.A)(function*(V,U){return U.phoneSignInInfo.captchaResponse===Ma?(ie(a?.type===Zs,V,"argument-error"),Eu(V,yield $d(V,U,a))):Eu(V,U)});return function(U,Y){return M.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(M=>Promise.reject(M))).phoneResponseInfo.sessionInfo}}{const f={phoneNumber:d.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(yield Le(_,f,"sendVerificationCode",function(){var I=(0,P.A)(function*(T,M){return M.captchaResponse===Ma?(ie(a?.type===Zs,T,"argument-error"),iu(T,yield $d(T,M,a))):iu(T,M)});return function(M,V){return I.apply(this,arguments)}}(),"PHONE_PROVIDER").catch(I=>Promise.reject(I))).sessionInfo}}finally{a?._reset()}}),Hd.apply(this,arguments)}function eg(_,p){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.A)(function*(_,p){const a=(0,Q.Ku)(_);if((0,me.xZ)(a.auth.app))return Promise.reject($t(a.auth));yield Dd(a,p)})).apply(this,arguments)}function $d(_,p,a){return zd.apply(this,arguments)}function zd(){return(zd=(0,P.A)(function*(_,p,a){ie(a.type===Zs,_,"argument-error");const c=yield a.verify();ie("string"==typeof c,_,"argument-error");const d=Object.assign({},p);return"phoneEnrollmentInfo"in d?(Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:d.phoneEnrollmentInfo.phoneNumber,recaptchaToken:c,captchaResponse:d.phoneEnrollmentInfo.captchaResponse,clientType:d.phoneEnrollmentInfo.clientType,recaptchaVersion:d.phoneEnrollmentInfo.recaptchaVersion}}),d):"phoneSignInInfo"in d?(Object.assign(d,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:d.phoneSignInInfo.captchaResponse,clientType:d.phoneSignInInfo.clientType,recaptchaVersion:d.phoneSignInInfo.recaptchaVersion}}),d):(Object.assign(d,{recaptchaToken:c}),d)})).apply(this,arguments)}let K=(()=>{class _{constructor(a){this.providerId=_.PROVIDER_ID,this.auth=Je(a)}verifyPhoneNumber(a,c){return ao(this.auth,a,(0,Q.Ku)(c))}static credential(a,c){return Xr._fromVerification(a,c)}static credentialFromResult(a){return _.credentialFromTaggedObject(a)}static credentialFromError(a){return _.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;const{phoneNumber:c,temporaryProof:d}=a;return c&&d?Xr._fromTokenResponse(c,d):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function xe(_,p){return p?So(p):(ie(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class rt extends to{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Zr(p,this._buildIdpRequest())}_linkToIdToken(p,a){return Zr(p,this._buildIdpRequest(a))}_getReauthenticationResolver(p){return Zr(p,this._buildIdpRequest())}_buildIdpRequest(p){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(a.idToken=p),a}}function dt(_){return lu(_.auth,new rt(_),_.bypassAuthState)}function Qe(_){const{auth:p,user:a}=_;return ie(a,p,"internal-error"),fs(a,new rt(_),_.bypassAuthState)}function Fo(_){return ea.apply(this,arguments)}function ea(){return(ea=(0,P.A)(function*(_){const{auth:p,user:a}=_;return ie(a,p,"internal-error"),Dd(a,new rt(_),_.bypassAuthState)})).apply(this,arguments)}class Gr{constructor(p,a,c,d,f=!1){this.auth=p,this.resolver=c,this.user=d,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){var p=this;return new Promise(function(){var a=(0,P.A)(function*(c,d){p.pendingPromise={resolve:c,reject:d};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(f){p.reject(f)}});return function(c,d){return a.apply(this,arguments)}}())}onAuthEvent(p){var a=this;return(0,P.A)(function*(){const{urlResponse:c,sessionId:d,postBody:f,tenantId:m,error:v,type:E}=p;if(v)return void a.reject(v);const I={auth:a.auth,requestUri:c,sessionId:d,tenantId:m||void 0,postBody:f||void 0,user:a.user,bypassAuthState:a.bypassAuthState};try{a.resolve(yield a.getIdpTask(E)(I))}catch(T){a.reject(T)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return dt;case"linkViaPopup":case"linkViaRedirect":return Fo;case"reauthViaPopup":case"reauthViaRedirect":return Qe;default:An(this.auth,"internal-error")}}resolve(p){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Za=new Qi(2e3,1e4);function Wd(_,p,a){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,P.A)(function*(_,p,a){if((0,me.xZ)(_.app))return Promise.reject(Ke(_,"operation-not-supported-in-this-environment"));const c=Je(_);gr(_,p,Ur);const d=xe(c,a);return new Vo(c,"signInViaPopup",p,d).executeNotNull()})).apply(this,arguments)}function x_(_,p,a){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_);if((0,me.xZ)(c.auth.app))return Promise.reject(Ke(c.auth,"operation-not-supported-in-this-environment"));gr(c.auth,p,Ur);const d=xe(c.auth,a);return new Vo(c.auth,"reauthViaPopup",p,d,c).executeNotNull()})).apply(this,arguments)}function qd(_,p,a){return rc.apply(this,arguments)}function rc(){return(rc=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_);gr(c.auth,p,Ur);const d=xe(c.auth,a);return new Vo(c.auth,"linkViaPopup",p,d,c).executeNotNull()})).apply(this,arguments)}let Vo=(()=>{class _ extends Gr{constructor(a,c,d,f,m){super(a,c,f,m),this.provider=d,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var a=this;return(0,P.A)(function*(){const c=yield a.execute();return ie(c,a.auth,"internal-error"),c})()}onExecution(){var a=this;return(0,P.A)(function*(){Pn(1===a.filter.length,"Popup operations only handle one event");const c=vr();a.authWindow=yield a.resolver._openPopup(a.auth,a.provider,a.filter[0],c),a.authWindow.associatedEvent=c,a.resolver._originValidation(a.auth).catch(d=>{a.reject(d)}),a.resolver._isIframeWebStorageSupported(a.auth,d=>{d||a.reject(Ke(a.auth,"web-storage-unsupported"))}),a.pollUserCancellation()})()}get eventId(){var a;return(null===(a=this.authWindow)||void 0===a?void 0:a.associatedEvent)||null}cancel(){this.reject(Ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const a=()=>{var c,d;this.pollId=null!==(d=null===(c=this.authWindow)||void 0===c?void 0:c.window)&&void 0!==d&&d.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ke(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(a,Za.get())};a()}}return _.currentPopupAction=null,_})();const Ar=new Map;class df extends Gr{constructor(p,a,c=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,c),this.eventId=null}execute(){var p=()=>super.execute,a=this;return(0,P.A)(function*(){let c=Ar.get(a.auth._key());if(!c){try{const f=(yield function gi(_,p){return ei.apply(this,arguments)}(a.resolver,a.auth))?yield p().call(a):null;c=()=>Promise.resolve(f)}catch(d){c=()=>Promise.reject(d)}Ar.set(a.auth._key(),c)}return a.bypassAuthState||Ar.set(a.auth._key(),()=>Promise.resolve(null)),c()})()}onAuthEvent(p){var a=()=>super.onAuthEvent,c=this;return(0,P.A)(function*(){if("signInViaRedirect"===p.type)return a().call(c,p);if("unknown"!==p.type){if(p.eventId){const d=yield c.auth._redirectUserForId(p.eventId);if(d)return c.user=d,a().call(c,p);c.resolve(null)}}else c.resolve(null)})()}onExecution(){return(0,P.A)(function*(){})()}cleanUp(){}}function ei(){return(ei=(0,P.A)(function*(_,p){const a=Xa(p),c=oc(_);if(!(yield c._isAvailable()))return!1;const d="true"===(yield c._get(a));return yield c._remove(a),d})).apply(this,arguments)}function Kd(_,p){return ic.apply(this,arguments)}function ic(){return(ic=(0,P.A)(function*(_,p){return oc(_)._set(Xa(p),"true")})).apply(this,arguments)}function hf(_,p){Ar.set(_._key(),p)}function oc(_){return So(_._redirectPersistence)}function Xa(_){return Os("pendingRedirect",_.config.apiKey,_.name)}function Tu(_,p,a){return function lr(_,p,a){return Ja.apply(this,arguments)}(_,p,a)}function Ja(){return(Ja=(0,P.A)(function*(_,p,a){if((0,me.xZ)(_.app))return Promise.reject($t(_));const c=Je(_);gr(_,p,Ur),yield c._initializationPromise;const d=xe(c,a);return yield Kd(d,c),d._openRedirect(c,p,"signInViaRedirect")})).apply(this,arguments)}function Bo(_,p,a){return function el(_,p,a){return xr.apply(this,arguments)}(_,p,a)}function xr(){return(xr=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_);if(gr(c.auth,p,Ur),(0,me.xZ)(c.auth.app))return Promise.reject($t(c.auth));yield c.auth._initializationPromise;const d=xe(c.auth,a);yield Kd(d,c.auth);const f=yield At(c);return d._openRedirect(c.auth,p,"reauthViaRedirect",f)})).apply(this,arguments)}function jo(_,p,a){return function Yd(_,p,a){return Mu.apply(this,arguments)}(_,p,a)}function Mu(){return(Mu=(0,P.A)(function*(_,p,a){const c=(0,Q.Ku)(_);gr(c.auth,p,Ur),yield c.auth._initializationPromise;const d=xe(c.auth,a);yield Ba(!1,c,p.providerId),yield Kd(d,c.auth);const f=yield At(c);return d._openRedirect(c.auth,p,"linkViaRedirect",f)})).apply(this,arguments)}function Uo(_,p){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,P.A)(function*(_,p){return yield Je(_)._initializationPromise,Qn(_,p,!1)})).apply(this,arguments)}function Qn(_,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,P.A)(function*(_,p,a=!1){if((0,me.xZ)(_.app))return Promise.reject($t(_));const c=Je(_),d=xe(c,p),m=yield new df(c,d,a).execute();return m&&!a&&(delete m.user._redirectEventId,yield c._persistUserIfCurrent(m.user),yield c._setRedirectUser(null,p)),m})).apply(this,arguments)}function At(_){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,P.A)(function*(_){const p=vr(`${_.uid}:::`);return _._redirectEventId=p,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),p})).apply(this,arguments)}class ng{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let a=!1;return this.consumers.forEach(c=>{this.isEventForConsumer(p,c)&&(a=!0,this.sendToConsumer(p,c),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function sc(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ta(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=p,a=!0)),a}sendToConsumer(p,a){var c;if(p.error&&!ta(p)){const d=(null===(c=p.error.code)||void 0===c?void 0:c.split("auth/")[1])||"internal-error";a.onError(Ke(this.auth,d))}else a.onAuthEvent(p)}isEventForConsumer(p,a){const c=null===a.eventId||!!p.eventId&&p.eventId===a.eventId;return a.filter.includes(p.type)&&c}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ff(p))}saveEventToCache(p){this.cachedEventUids.add(ff(p)),this.lastProcessedEventTime=Date.now()}}function ff(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(p=>p).join("-")}function ta({type:_,error:p}){return"unknown"===_&&"auth/no-auth-event"===p?.code}function ti(){return(ti=(0,P.A)(function*(_,p={}){return Pt(_,"GET","/v1/projects",p)})).apply(this,arguments)}const rg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xd=/^https?/;function tl(){return tl=(0,P.A)(function*(_){if(_.config.emulator)return;const{authorizedDomains:p}=yield function $o(_){return ti.apply(this,arguments)}(_);for(const a of p)try{if(Jd(a))return}catch{}An(_,"unauthorized-domain")}),tl.apply(this,arguments)}function Jd(_){const p=rr(),{protocol:a,hostname:c}=new URL(p);if(_.startsWith("chrome-extension://")){const m=new URL(_);return""===m.hostname&&""===c?"chrome-extension:"===a&&_.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===a&&m.hostname===c}if(!Xd.test(a))return!1;if(rg.test(_))return c===_;const d=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+d+"|"+d+")$","i").test(c)}const ni=new Qi(3e4,6e4);function xu(){const _=Nn().___jsl;if(_?.H)for(const p of Object.keys(_.H))if(_.H[p].r=_.H[p].r||[],_.H[p].L=_.H[p].L||[],_.H[p].r=[..._.H[p].L],_.CP)for(let a=0;a<_.CP.length;a++)_.CP[a]=null}let zo=null;const Pu=new Qi(5e3,15e3),sg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ag=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R_(_){const p=_.config;ie(p.authDomain,_,"auth-domain-config-required");const a=p.emulator?os(p,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,c={apiKey:p.apiKey,appName:_.name,v:me.MF},d=ag.get(_.config.apiHost);d&&(c.eid=d);const f=_._getFrameworks();return f.length&&(c.fw=f.join(",")),`${a}?${(0,Q.Am)(c).slice(1)}`}function th(){return th=(0,P.A)(function*(_){const p=yield function ac(_){return zo=zo||function ig(_){return new Promise((p,a)=>{var c,d,f;function m(){xu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{xu(),a(Ke(_,"network-request-failed"))},timeout:ni.get()})}if(null!==(d=null===(c=Nn().gapi)||void 0===c?void 0:c.iframes)&&void 0!==d&&d.Iframe)p(gapi.iframes.getContext());else{if(null===(f=Nn().gapi)||void 0===f||!f.load){const v=as("iframefcb");return Nn()[v]=()=>{gapi.load?m():a(Ke(_,"network-request-failed"))},vd(`${function Zc(){return Ls.gapiScript}()}?onload=${v}`).catch(E=>a(E))}m()}}).catch(p=>{throw zo=null,p})}(_),zo}(_),a=Nn().gapi;return ie(a,_,"internal-error"),p.open({where:document.body,url:R_(_),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sg,dontclear:!0},c=>new Promise(function(){var d=(0,P.A)(function*(f,m){yield c.restyle({setHideOnLeave:!1});const v=Ke(_,"network-request-failed"),E=Nn().setTimeout(()=>{m(v)},Pu.get());function I(){Nn().clearTimeout(E),f(c)}c.ping(I).then(I,()=>{m(v)})});return function(f,m){return d.apply(this,arguments)}}()))}),th.apply(this,arguments)}const pf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const N_=encodeURIComponent("fac");function ih(_,p,a,c,d,f){return il.apply(this,arguments)}function il(){return(il=(0,P.A)(function*(_,p,a,c,d,f){ie(_.config.authDomain,_,"auth-domain-config-required"),ie(_.config.apiKey,_,"invalid-api-key");const m={apiKey:_.config.apiKey,appName:_.name,authType:a,redirectUrl:c,v:me.MF,eventId:d};if(p instanceof Ur){p.setDefaultLanguage(_.languageCode),m.providerId=p.providerId||"",(0,Q.Im)(p.getCustomParameters())||(m.customParameters=JSON.stringify(p.getCustomParameters()));for(const[T,M]of Object.entries(f||{}))m[T]=M}if(p instanceof yr){const T=p.getScopes().filter(M=>""!==M);T.length>0&&(m.scopes=T.join(","))}_.tenantId&&(m.tid=_.tenantId);const v=m;for(const T of Object.keys(v))void 0===v[T]&&delete v[T];const E=yield _._getAppCheckToken(),I=E?`#${N_}=${encodeURIComponent(E)}`:"";return`${function _f({config:_}){return _.emulator?os(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,Q.Am)(v).slice(1)}${I}`})).apply(this,arguments)}const mi="webStorageSupport",cc=class oh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_u,this._completeRedirectFn=Qn,this._overrideRedirectResult=hf}_openPopup(p,a,c,d){var f=this;return(0,P.A)(function*(){var m;Pn(null===(m=f.eventManagers[p._key()])||void 0===m?void 0:m.manager,"_initialize() not called before _openPopup()");const v=yield ih(p,a,c,rr(),d);return function lg(_,p,a,c=500,d=600){const f=Math.max((window.screen.availHeight-d)/2,0).toString(),m=Math.max((window.screen.availWidth-c)/2,0).toString();let v="";const E=Object.assign(Object.assign({},pf),{width:c.toString(),height:d.toString(),top:f,left:m}),I=(0,Q.ZQ)().toLowerCase();a&&(v=eo(I)?"_blank":a),gd(I)&&(p=p||"http://localhost",E.scrollbars="yes");const T=Object.entries(E).reduce((V,[U,Y])=>`${V}${U}=${Y},`,"");if(function Zh(_=(0,Q.ZQ)()){var p;return md(_)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(I)&&"_self"!==v)return function lc(_,p){const a=document.createElement("a");a.href=_,a.target=p;const c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(c)}(p||"",v),new rl(null);const M=window.open(p||"",v,T);ie(M,_,"popup-blocked");try{M.focus()}catch{}return new rl(M)}(p,v,vr())})()}_openRedirect(p,a,c,d){var f=this;return(0,P.A)(function*(){return yield f._originValidation(p),function vu(_){Nn().location.href=_}(yield ih(p,a,c,rr(),d)),new Promise(()=>{})})()}_initialize(p){const a=p._key();if(this.eventManagers[a]){const{manager:d,promise:f}=this.eventManagers[a];return d?Promise.resolve(d):(Pn(f,"If manager is not set, promise should be"),f)}const c=this.initAndGetManager(p);return this.eventManagers[a]={promise:c},c.catch(()=>{delete this.eventManagers[a]}),c}initAndGetManager(p){var a=this;return(0,P.A)(function*(){const c=yield function k_(_){return th.apply(this,arguments)}(p),d=new ng(p);return c.register("authEvent",f=>(ie(f?.authEvent,p,"invalid-auth-event"),{status:d.onEvent(f.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),a.eventManagers[p._key()]={manager:d},a.iframes[p._key()]=c,d})()}_isIframeWebStorageSupported(p,a){this.iframes[p._key()].send(mi,{type:mi},d=>{var f;const m=null===(f=d?.[0])||void 0===f?void 0:f[mi];void 0!==m&&a(!!m),An(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const a=p._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=function Au(_){return tl.apply(this,arguments)}(p)),this.originValidationPromises[a]}get _shouldInitProactively(){return ue()||Fs()||md()}};class ku{constructor(p){this.factorId=p}_process(p,a,c){switch(a.type){case"enroll":return this._finalizeEnroll(p,a.credential,c);case"signin":return this._finalizeSignIn(p,a.credential);default:return xn("unexpected MultiFactorSessionType")}}}class Nu extends ku{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Nu(p)}_finalizeEnroll(p,a,c){return function Jr(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:finalize",wt(_,p))}(p,{idToken:a,displayName:c,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,a){return function tc(_,p){return Pt(_,"POST","/v2/accounts/mfaSignIn:finalize",wt(_,p))}(p,{mfaPendingCredential:a,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uc=(()=>{class _{constructor(){}static assertion(a){return Nu._fromCredential(a)}}return _.FACTOR_ID="phone",_})(),Ou=(()=>{class _{static assertionForEnrollment(a,c){return dc._fromSecret(a,c)}static assertionForSignIn(a,c){return dc._fromEnrollmentId(a,c)}static generateSecret(a){return(0,P.A)(function*(){var c;const d=a;ie(typeof(null===(c=d.user)||void 0===c?void 0:c.auth)<"u","internal-error");const f=yield function Xl(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:start",wt(_,p))}(d.user.auth,{idToken:d.credential,totpEnrollmentInfo:{}});return hc._fromStartTotpMfaEnrollmentResponse(f,d.user.auth)})()}}return _.FACTOR_ID="totp",_})();class dc extends ku{constructor(p,a,c){super("totp"),this.otp=p,this.enrollmentId=a,this.secret=c}static _fromSecret(p,a){return new dc(a,void 0,p)}static _fromEnrollmentId(p,a){return new dc(a,p)}_finalizeEnroll(p,a,c){var d=this;return(0,P.A)(function*(){return ie(typeof d.secret<"u",p,"argument-error"),function Ld(_,p){return Pt(_,"POST","/v2/accounts/mfaEnrollment:finalize",wt(_,p))}(p,{idToken:a,displayName:c,totpVerificationInfo:d.secret._makeTotpVerificationInfo(d.otp)})})()}_finalizeSignIn(p,a){var c=this;return(0,P.A)(function*(){return ie(void 0!==c.enrollmentId&&void 0!==c.otp,p,"argument-error"),function Ya(_,p){return Pt(_,"POST","/v2/accounts/mfaSignIn:finalize",wt(_,p))}(p,{mfaPendingCredential:a,mfaEnrollmentId:c.enrollmentId,totpVerificationInfo:{verificationCode:c.otp}})})()}}class hc{constructor(p,a,c,d,f,m,v){this.sessionInfo=m,this.auth=v,this.secretKey=p,this.hashingAlgorithm=a,this.codeLength=c,this.codeIntervalSeconds=d,this.enrollmentCompletionDeadline=f}static _fromStartTotpMfaEnrollmentResponse(p,a){return new hc(p.totpSessionInfo.sharedSecretKey,p.totpSessionInfo.hashingAlgorithm,p.totpSessionInfo.verificationCodeLength,p.totpSessionInfo.periodSec,new Date(p.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),p.totpSessionInfo.sessionInfo,a)}_makeTotpVerificationInfo(p){return{sessionInfo:this.sessionInfo,verificationCode:p}}generateQrCodeUrl(p,a){var c;let d=!1;return(fc(p)||fc(a))&&(d=!0),d&&(fc(p)&&(p=(null===(c=this.auth.currentUser)||void 0===c?void 0:c.email)||"unknownuser"),fc(a)&&(a=this.auth.name)),`otpauth://totp/${a}:${p}?secret=${this.secretKey}&issuer=${a}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function fc(_){return typeof _>"u"||0===_?.length}var Fu="@firebase/auth";class cg{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var a=this;return(0,P.A)(function*(){return a.assertAuthConfigured(),yield a.auth._initializationPromise,a.auth.currentUser?{accessToken:yield a.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const a=this.auth.onIdTokenChanged(c=>{p(c?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,a),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const a=this.internalListeners.get(p);a&&(this.internalListeners.delete(p),a(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const yf=(0,Q.XA)("authIdTokenMaxAge")||300;let ah=null;const Wo=_=>function(){var p=(0,P.A)(function*(a){const c=a&&(yield a.getIdTokenResult()),d=c&&((new Date).getTime()-Date.parse(c.issuedAtTime))/1e3;if(d&&d>yf)return;const f=c?.token;ah!==f&&(ah=f,yield fetch(_,{method:f?"POST":"DELETE",headers:f?{Authorization:`Bearer ${f}`}:{}}))});return function(a){return p.apply(this,arguments)}}();function na(_=(0,me.Sx)()){const p=(0,me.j6)(_,"auth");if(p.isInitialized())return p.getImmediate();const a=zt(_,{popupRedirectResolver:cc,persistence:[Cu,Kp,_u]}),c=(0,Q.XA)("authTokenSyncURL");if(c&&"boolean"==typeof isSecureContext&&isSecureContext){const f=new URL(c,location.origin);if(location.origin===f.origin){const m=Wo(f.toString());Ql(a,m,()=>m(a.currentUser)),Bi(a,v=>m(v))}}const d=(0,Q.Tj)("auth");return d&&Pa(a,`http://${d}`),a}(function Qc(_){Ls=_})({loadJS:_=>new Promise((p,a)=>{const c=document.createElement("script");c.setAttribute("src",_),c.onload=p,c.onerror=d=>{const f=Ke("internal-error");f.customData=d,a(f)},c.type="text/javascript",c.charset="UTF-8",function pn(){var _,p;return null!==(p=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==p?p:document}().appendChild(c)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function pc(_){(0,me.om)(new Ps.uA("auth",(p,{options:a})=>{const c=p.getProvider("app").getImmediate(),d=p.getProvider("heartbeat"),f=p.getProvider("app-check-internal"),{apiKey:m,authDomain:v}=c.options;ie(m&&!m.includes(":"),"invalid-api-key",{appName:c.name});const E={apiKey:m,authDomain:v,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yc(_)},I=new T_(c,d,f,E);return function Li(_,p){const a=p?.persistence||[],c=(Array.isArray(a)?a:[a]).map(So);p?.errorMap&&_._updateErrorMap(p.errorMap),_._initializeWithPersistence(c,p?.popupRedirectResolver)}(I,a),I},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,a,c)=>{p.getProvider("auth-internal").initialize()})),(0,me.om)(new Ps.uA("auth-internal",p=>{const a=Je(p.getProvider("auth").getImmediate());return new cg(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.KO)(Fu,"1.10.8",function Lu(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(_)),(0,me.KO)(Fu,"1.10.8","esm2017")}("Browser")},374:(Ca,Fr,Fe)=>{var P=Fe(467);function me(e,n){return Object.is(e,n)}let Q=null,N=!1,Tn=1;const bt=Symbol("SIGNAL");function Ie(e){const n=Q;return Q=e,n}const le={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Me(e){if(N)throw new Error("");if(null===Q)return;Q.consumerOnSignalRead(e);const n=Q.nextProducerIndex++;qt(Q),n<Q.producerNode.length&&Q.producerNode[n]!==e&&Xt(Q)&&vo(Q.producerNode[n],Q.producerIndexOfThis[n]),Q.producerNode[n]!==e&&(Q.producerNode[n]=e,Q.producerIndexOfThis[n]=Xt(Q)?Yi(e,Q,n):0),Q.producerLastReadVersion[n]=e.version}function Et(e){if((!Xt(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==Tn)){if(!e.producerMustRecompute(e)&&!Gn(e))return void Ht(e);e.producerRecomputeValue(e),Ht(e)}}function Vn(e){if(void 0===e.liveConsumerNode)return;const n=N;N=!0;try{for(const t of e.liveConsumerNode)t.dirty||Ki(t)}finally{N=n}}function ii(){return!1!==Q?.consumerAllowSignalWrites}function Ki(e){e.dirty=!0,Vn(e),e.consumerMarkedDirty?.(e)}function Ht(e){e.dirty=!1,e.lastCleanEpoch=Tn}function tr(e){return e&&(e.nextProducerIndex=0),Ie(e)}function Ir(e,n){if(Ie(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Xt(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)vo(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Gn(e){qt(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],r=e.producerLastReadVersion[n];if(r!==t.version||(Et(t),r!==t.version))return!0}return!1}function Ft(e){if(qt(e),Xt(e))for(let n=0;n<e.producerNode.length;n++)vo(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Yi(e,n,t){if(ns(e),0===e.liveConsumerNode.length&&oi(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=Yi(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function vo(e,n){if(ns(e),1===e.liveConsumerNode.length&&oi(e))for(let r=0;r<e.producerNode.length;r++)vo(e.producerNode[r],e.producerIndexOfThis[r]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[n],i=e.liveConsumerNode[n];qt(i),i.producerIndexOfThis[r]=n}}function Xt(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function qt(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function ns(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function oi(e){return void 0!==e.producerNode}const cn=Symbol("UNSET"),Jt=Symbol("COMPUTING"),Mn=Symbol("ERRORED"),Lr={...le,value:cn,dirty:!0,error:null,equal:me,kind:"computed",producerMustRecompute:e=>e.value===cn||e.value===Jt,producerRecomputeValue(e){if(e.value===Jt)throw new Error("Detected cycle in computations.");const n=e.value;e.value=Jt;const t=tr(e);let r,i=!1;try{r=e.computation(),Ie(null),i=n!==cn&&n!==Mn&&r!==Mn&&e.equal(n,r)}catch(o){r=Mn,e.error=o}finally{Ir(e,t)}i?e.value=n:(e.value=r,e.version++)}};let si=function bo(){throw new Error};function As(e){si(e)}function xs(e,n){ii()||As(e),e.equal(e.value,n)||(e.value=n,function Il(e){e.version++,function st(){Tn++}(),Vn(e)}(e))}const Rs={...le,equal:me,value:void 0,kind:"signal"};let Mi;function ai(){return Mi}function nr(e){const n=Mi;return Mi=e,n}const is=Symbol("NotFound");function Ke(e){return"function"==typeof e}function Yr(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Error;const $t=Yr(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function gr(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class un{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ke(r))try{r()}catch(o){n=o instanceof $t?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Pn(o)}catch(s){n=n??[],s instanceof $t?n=[...n,...s.errors]:n.push(s)}}if(n)throw new $t(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Pn(n);else{if(n instanceof un){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&gr(t,n)}remove(n){const{_finalizers:t}=this;t&&gr(t,n),n instanceof un&&n._removeParent(this)}}un.EMPTY=(()=>{const e=new un;return e.closed=!0,e})();const ie=un.EMPTY;function xn(e){return e instanceof un||e&&"closed"in e&&Ke(e.remove)&&Ke(e.add)&&Ke(e.unsubscribe)}function Pn(e){Ke(e)?e():e.unsubscribe()}const rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},li={setTimeout(e,n,...t){const{delegate:r}=li;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=li;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Qr(e){li.setTimeout(()=>{const{onUnhandledError:n}=rr;if(!n)throw e;n(e)})}function Ai(){}const qc=ss("C",void 0,void 0);function ss(e,n,t){return{kind:e,value:n,error:t}}let xi=null;function Bn(e){if(rr.useDeprecatedSynchronousErrorHandling){const n=!xi;if(n&&(xi={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=xi;if(xi=null,t)throw r}}else e()}class wt extends un{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,xn(n)&&n.add(this)):this.destination=Zi}static create(n,t,r){return new ci(n,t,r)}next(n){this.isStopped?Do(function os(e){return ss("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Do(function Qi(e){return ss("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Do(qc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pt=Function.prototype.bind;function Pi(e,n){return Pt.call(e,n)}class Da{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){Sr(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){Sr(r)}else Sr(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Sr(t)}}}class ci extends wt{constructor(n,t,r){let i;if(super(),Ke(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&rr.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Pi(n.next,o),error:n.error&&Pi(n.error,o),complete:n.complete&&Pi(n.complete,o)}):i=n}this.destination=new Da(i)}}function Sr(e){rr.useDeprecatedSynchronousErrorHandling?function ks(e){rr.useDeprecatedSynchronousErrorHandling&&xi&&(xi.errorThrown=!0,xi.error=e)}(e):Qr(e)}function Do(e,n){const{onStoppedNotification:t}=rr;t&&li.setTimeout(()=>t(e,n))}const Zi={closed:!0,next:Ai,error:function Ia(e){throw e},complete:Ai},Ri="function"==typeof Symbol&&Symbol.observable||"@@observable";function ki(e){return e}function Vr(e){return 0===e.length?ki:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let Rt=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function Ni(e){return e&&e instanceof wt||function Sa(e){return e&&Ke(e.next)&&Ke(e.error)&&Ke(e.complete)}(e)&&xn(e)}(t)?t:new ci(t,r,i);return Bn(()=>{const{operator:s,source:l}=this;o.add(s?s.call(o,l):l?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Xi(r))((i,o)=>{const s=new ci({next:l=>{try{t(l)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Ri](){return this}pipe(...t){return Vr(t)(this)}toPromise(t){return new(t=Xi(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=n=>new e(n),e})();function Xi(e){var n;return null!==(n=e??rr.Promise)&&void 0!==n?n:Promise}const Oi=Yr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let R=(()=>{class e extends Rt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new k(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Oi}next(t){Bn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Bn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?ie:(this.currentObservers=null,o.push(t),new un(()=>{this.currentObservers=null,gr(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new Rt;return t.source=this,t}}return e.create=(n,t)=>new k(n,t),e})();class k extends R{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:ie}}class O extends R{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}function ee(e){return Ke(e?.lift)}function z(e){return n=>{if(ee(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(e,n,t,r,i){return new ze(e,n,t,r,i)}class ze extends wt{constructor(n,t,r,i,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(l){try{t(l)}catch(u){n.error(u)}}:super._next,this._error=i?function(l){try{i(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ce(e,n){return z((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(e.call(n,o,i++))}))})}const vn="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class H extends Error{code;constructor(n,t){super(function Ee(e,n){return`${function ft(e){return`NG0${Math.abs(e)}`}(e)}${n?": "+n:""}`}(n,t)),this.code=n}}const $=Symbol("InputSignalNode#UNSET"),F={...Rs,transformFn:void 0,applyValueToInputSignal(e,n){xs(e,n)}};function de(e,n){const t=Object.create(F);function r(){if(Me(t),t.value===$)throw new H(-950,null);return t.value}return t.value=e,t.transformFn=n?.transform,r[bt]=t,r}function we(e){return{toString:e}.toString()}const Ne="__parameters__";function Ue(e,n,t){return we(()=>{const r=function We(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return l.annotation=s,l;function l(u,h,g){const y=u.hasOwnProperty(Ne)?u[Ne]:Object.defineProperty(u,Ne,{value:[]})[Ne];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(s),u}}return i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const $e=globalThis;function _t(e){for(let n in e)if(e[n]===_t)return n;throw Error("Could not find renamed property on target object.")}function Ns(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function He(e){if("string"==typeof e)return e;if(Array.isArray(e))return`[${e.map(He).join(", ")}]`;if(null==e)return""+e;const n=e.overriddenName||e.name;if(n)return`${n}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return r>=0?t.slice(0,r):t}function Be(e,n){return e?n?`${e} ${n}`:e:n||""}const So=_t({__forward_ref__:_t});function Lt(e){return e.__forward_ref__=Lt,e.toString=function(){return He(this())},e}function Se(e){return Os(e)?e():e}function Os(e){return"function"==typeof e&&e.hasOwnProperty(So)&&e.__forward_ref__===Lt}function pe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Je(e){return{providers:e.providers||[],imports:e.imports||[]}}function Tl(e){return Qc(e,Al)||Qc(e,as)}function Qc(e,n){return e.hasOwnProperty(n)?e[n]:null}function Ml(e){return e&&(e.hasOwnProperty(Zc)||e.hasOwnProperty(Xh))?e[Zc]:null}const Al=_t({\u0275prov:_t}),Zc=_t({\u0275inj:_t}),as=_t({ngInjectableDef:_t}),Xh=_t({ngInjectorDef:_t});class ce{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,t){this._desc=n,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Le(e){return e&&!!e.\u0275providers}const ls=_t({\u0275cmp:_t}),cs=_t({\u0275dir:_t}),xl=_t({\u0275pipe:_t}),zt=_t({\u0275mod:_t}),Li=_t({\u0275fac:_t}),Pa=_t({__NG_ELEMENT_ID__:_t}),Pl=_t({__NG_ENV_ID__:_t});function Ge(e){return"string"==typeof e?e:null==e?"":String(e)}function Cd(e,n){throw new H(-200,e)}function kl(e,n){throw new H(-201,!1)}var et=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(et||{});let Nl;function ef(){return Nl}function mr(e){const n=Nl;return Nl=e,n}function nu(e,n,t){const r=Tl(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&et.Optional?null:void 0!==n?n:void kl()}const To={},Ra="__NG_DI_FLAG__";class Fl{injector;constructor(n){this.injector=n}retrieve(n,t){return this.injector.get(n,t.optional?is:To,t)}}const Ll="ngTempTokenPath",jp=/\n/gm,Vs="__source";function Vl(e,n=et.Default){if(void 0===ai())throw new H(-203,!1);if(null===ai())return nu(e,void 0,n);{const t=ai();let r;return r=t instanceof Fl?t.injector:t,r.get(e,n&et.Optional?null:void 0,n)}}function Te(e,n=et.Default){return(ef()||Vl)(Se(e),n)}function X(e,n=et.Default){return Te(e,Bs(n))}function Bs(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function us(e){const n=[];for(let t=0;t<e.length;t++){const r=Se(e[t]);if(Array.isArray(r)){if(0===r.length)throw new H(900,!1);let i,o=et.Default;for(let s=0;s<r.length;s++){const l=r[s],u=Ed(l);"number"==typeof u?-1===u?i=l.token:o|=u:i=l}n.push(Te(i,o))}else n.push(Te(r))}return n}function Zr(e,n){return e[Ra]=n,e.prototype[Ra]=n,e}function Ed(e){return e[Ra]}const js=Zr(Ue("Optional"),8),Mo=Zr(Ue("SkipSelf"),4);function Br(e,n){return e.hasOwnProperty(Li)?e[Li]:null}function hs(e,n){e.forEach(t=>Array.isArray(t)?hs(t,n):n(t))}function Xr(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function su(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function _r(e,n,t){let r=yr(e,n);return r>=0?e[1|r]=t:(r=~r,function Oa(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function Ur(e,n){const t=yr(e,n);if(t>=0)return e[1|t]}function yr(e,n){return function Hs(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<t];if(n===s)return o<<t;s>n?i=o:r=o+1}return~(i<<t)}(e,n,1)}const Vi={},Ae=[],dn=new ce(""),Fa=new ce("",-1),Ao=new ce("");class Bl{get(n,t=To){if(t===To){const r=new Error(`NullInjectorError: No provider for ${He(n)}!`);throw r.name="NullInjectorError",r}return t}}function Kn(e,n){const t=e[zt]||null;if(!t&&!0===n)throw new Error(`Type ${He(e)} does not have '\u0275mod' property.`);return t}function Ye(e){return e[ls]||null}function hn(e){return e[xl]||null}function Mr(e){return{\u0275providers:e}}function La(...e){return{\u0275providers:Va(0,e),\u0275fromNgModule:!0}}function Va(e,...n){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return hs(n,s=>{const l=s;jl(l,o,[],r)&&(i||=[],i.push(l))}),void 0!==i&&wd(i,o),t}function wd(e,n){for(let t=0;t<e.length;t++){const{ngModule:r,providers:i}=e[t];Ul(i,o=>{n(o,r)})}}function jl(e,n,t,r){if(!(e=Se(e)))return!1;let i=null,o=Ml(e);const s=!o&&Ye(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const u=e.ngModule;if(o=Ml(u),!o)return!1;i=u}const l=r.has(i);if(s){if(l)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const h of u)jl(h,n,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!l){let h;r.add(i);try{hs(o.imports,g=>{jl(g,n,t,r)&&(h||=[],h.push(g))})}finally{}void 0!==h&&wd(h,n)}if(!l){const h=Br(i)||(()=>new i);n({provide:i,useFactory:h,deps:Ae},i),n({provide:Ao,useValue:i,multi:!0},i),n({provide:dn,useValue:()=>Te(i),multi:!0},i)}const u=o.providers;if(null!=u&&!l){const h=e;Ul(u,g=>{n(g,h)})}}}return i!==e&&void 0!==e.providers}function Ul(e,n){for(let t of e)Le(t)&&(t=t.\u0275providers),Array.isArray(t)?Ul(t,n):n(t)}const Dd=_t({provide:String,useValue:_t});function Hl(e){return null!==e&&"object"==typeof e&&Dd in e}function fs(e){return"function"==typeof e}const lu=new ce(""),ja={},zl={};let Wl;function ps(){return void 0===Wl&&(Wl=new Bl),Wl}class Un{}class xo extends Un{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ql(n,s=>this.processProvider(s)),this.records.set(Fa,io(void 0,this)),i.has("environment")&&this.records.set(Un,io(void 0,this));const o=this.records.get(lu);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ao,Ae,et.Self))}retrieve(n,t){return this.get(n,t.optional?is:To,t)}destroy(){ms(this),this._destroyed=!0;const n=Ie(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(n)}}onDestroy(n){return ms(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){ms(this);const t=nr(this),r=mr(void 0);try{return n()}finally{nr(t),mr(r)}}get(n,t=To,r=et.Default){if(ms(this),n.hasOwnProperty(Pl))return n[Pl](this);r=Bs(r);const o=nr(this),s=mr(void 0);try{if(!(r&et.SkipSelf)){let u=this.records.get(n);if(void 0===u){const h=function Ua(e){return"function"==typeof e||"object"==typeof e&&e instanceof ce}(n)&&Tl(n);u=h&&this.injectableDefInScope(h)?io(gs(n),ja):null,this.records.set(n,u)}if(null!=u)return this.hydrate(n,u,r)}return(r&et.Self?ps():this.parent).get(n,t=r&et.Optional&&t===To?null:t)}catch(l){if("NullInjectorError"===l.name){if((l[Ll]=l[Ll]||[]).unshift(He(n)),o)throw l;return function no(e,n,t,r){const i=e[Ll];throw n[Vs]&&i.unshift(n[Vs]),e.message=function di(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=He(n);if(Array.isArray(n))i=n.map(He).join(" -> ");else if("object"==typeof n){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let l=n[s];o.push(s+":"+("string"==typeof l?JSON.stringify(l):He(l)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(jp,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[Ll]=null,e}(l,n,"R3InjectorError",this.source)}throw l}finally{mr(s),nr(o)}}resolveInjectorInitializers(){const n=Ie(null),t=nr(this),r=mr(void 0);try{const o=this.get(dn,Ae,et.Self);for(const s of o)s()}finally{nr(t),mr(r),Ie(n)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(He(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){let t=fs(n=Se(n))?n:Se(n&&n.provide);const r=function Gl(e){return Hl(e)?io(void 0,e.useValue):io(Sd(e),ja)}(n);if(!fs(n)&&!0===n.multi){let i=this.records.get(t);i||(i=io(void 0,ja,!0),i.factory=()=>us(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t,r){const i=Ie(null);try{return t.value===zl?Cd(He(n)):t.value===ja&&(t.value=zl,t.value=t.factory(void 0,r)),"object"==typeof t.value&&t.value&&function cu(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ie(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Se(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function gs(e){const n=Tl(e),t=null!==n?n.factory:Br(e);if(null!==t)return t;if(e instanceof ce)throw new H(204,!1);if(e instanceof Function)return function Hp(e){if(e.length>0)throw new H(204,!1);const t=function vd(e){return e&&(e[Al]||e[as])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new H(204,!1)}function Sd(e,n,t){let r;if(fs(e)){const i=Se(e);return Br(i)||gs(i)}if(Hl(e))r=()=>Se(e.useValue);else if(function $l(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...us(e.deps||[]));else if(function Ba(e){return!(!e||!e.useExisting)}(e))r=(i,o)=>Te(Se(e.useExisting),void 0!==o&&o&et.Optional?et.Optional:void 0);else{const i=Se(e&&(e.useClass||e.provide));if(!function Td(e){return!!e.deps}(e))return Br(i)||gs(i);r=()=>new i(...us(e.deps))}return r}function ms(e){if(e.destroyed)throw new H(205,!1)}function io(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function ql(e,n){for(const t of e)Array.isArray(t)?ql(t,n):t&&Le(t)?ql(t.\u0275providers,n):n(t)}function Hr(e,n){let t;e instanceof xo?(ms(e),t=e):t=new Fl(e);const i=nr(t),o=mr(void 0);try{return n()}finally{nr(i),mr(o)}}function Md(){return void 0!==ef()||null!=ai()}function rn(e){return Array.isArray(e)&&"object"==typeof e[1]}function $n(e){return Array.isArray(e)&&!0===e[1]}function Zl(e){return!!(4&e.flags)}function Wr(e){return e.componentOffset>-1}function Wa(e){return!(1&~e.flags)}function Kt(e){return!!e.template}function hi(e){return!!(512&e[2])}function Jr(e){return!(256&~e[2])}class yu{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function bs(e,n,t,r){null!==n?n.applyValueToInputSignal(n,r):e[t]=r}const vr=(()=>{const e=()=>Bd;return e.ngInherit=!0,e})();function Bd(e){return e.type.prototype.ngOnChanges&&(e.setInput=vu),Nn}function Nn(){const e=lf(this),n=e?.current;if(n){const t=e.previous;if(t===Vi)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function vu(e,n,t,r,i){const o=this.declaredInputs[r],s=lf(e)||function Ks(e,n){return e[Jl]=n}(e,{previous:Vi,current:null}),l=s.current||(s.current={}),u=s.previous,h=u[o];l[o]=new yu(h&&h.currentValue,t,u===Vi),bs(e,n,i,t)}const Jl="__ngSimpleChanges__";function lf(e){return e[Jl]||null}function pt(e){for(;Array.isArray(e);)e=e[0];return e}function ko(e,n){return pt(n[e])}function zn(e,n){return pt(n[e.index])}function pi(e,n){return e.data[n]}function No(e,n){return e[n]}function Wn(e,n){const t=n[e];return rn(t)?t:t[0]}function Ka(e){return!(128&~e[2])}function En(e,n){return null==n?null:e[n]}function Cu(e){e[17]=0}function Eu(e){1024&e[2]||(e[2]|=1024,Ka(e)&&Qs(e))}function Ya(e){return!!(9216&e[2]||e[24]?.dirty)}function sr(e){e[10].changeDetectionScheduler?.notify(8),64&e[2]&&(e[2]|=1024),Ya(e)&&Qs(e)}function Qs(e){e[10].changeDetectionScheduler?.notify(0);let n=Oo(e);for(;null!==n&&!(8192&n[2])&&(n[2]|=8192,Ka(n));)n=Oo(n)}function wu(e,n){if(Jr(e))throw new H(911,!1);null===e[21]&&(e[21]=[]),e[21].push(n)}function Oo(e){const n=e[3];return $n(n)?n[3]:n}function Zs(e){return e[7]??=[]}function jd(e){return e.cleanup??=[]}const je={lFrame:jo(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let nc=!1;function Js(){return je.bindingsEnabled}function K(){return je.lFrame.lView}function xe(){return je.lFrame.tView}function rt(e){return je.lFrame.contextLView=e,e[8]}function dt(e){return je.lFrame.contextLView=null,e}function Qe(){let e=Fo();for(;null!==e&&64===e.type;)e=e.parent;return e}function Fo(){return je.lFrame.currentTNode}function Gr(e,n){const t=je.lFrame;t.currentTNode=e,t.isParent=n}function Za(){return je.lFrame.isParent}function Wd(){je.lFrame.isParent=!1}function rc(){return nc}function Vo(e){const n=nc;return nc=e,n}function ar(){const e=je.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function gi(){return je.lFrame.bindingIndex++}function P_(e,n){const t=je.lFrame;t.bindingIndex=t.bindingRootIndex=e,oc(n)}function oc(e){je.lFrame.currentDirectiveIndex=e}function Tu(){return je.lFrame.currentQueryIndex}function lr(e){je.lFrame.currentQueryIndex=e}function Ja(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[5]:null}function Bo(e,n,t){if(t&et.SkipSelf){let i=n,o=e;for(;!(i=i.parent,null!==i||t&et.Host||(i=Ja(o),null===i||(o=o[14],10&i.type))););if(null===i)return!1;n=i,e=o}const r=je.lFrame=xr();return r.currentTNode=n,r.lView=e,!0}function el(e){const n=xr(),t=e[1];je.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function xr(){const e=je.lFrame,n=null===e?null:e.child;return null===n?jo(e):n}function jo(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Yd(){const e=je.lFrame;return je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Mu=Yd;function Uo(){const e=Yd();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Qn(){return je.lFrame.selectedIndex}function Ho(e){je.lFrame.selectedIndex=e}function At(){const e=je.lFrame;return pi(e.tView,e.selectedIndex)}let sc=!0;function $o(){return sc}function ti(e){sc=e}function Xd(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const o=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:g}=o;s&&(e.contentHooks??=[]).push(-t,s),l&&((e.contentHooks??=[]).push(t,l),(e.contentCheckHooks??=[]).push(t,l)),u&&(e.viewHooks??=[]).push(-t,u),h&&((e.viewHooks??=[]).push(t,h),(e.viewCheckHooks??=[]).push(t,h)),null!=g&&(e.destroyHooks??=[]).push(t,g)}}function Au(e,n,t){ni(e,n,3,t)}function tl(e,n,t,r){(3&e[2])===t&&ni(e,n,t,r)}function Jd(e,n){let t=e[2];(3&t)===n&&(t&=16383,t+=1,e[2]=t)}function ni(e,n,t,r){const o=r??-1,s=n.length-1;let l=0;for(let u=void 0!==r?65535&e[17]:0;u<s;u++)if("number"==typeof n[u+1]){if(l=n[u],null!=r&&l>=r)break}else n[u]<0&&(e[17]+=65536),(l<o||-1==o)&&(ig(e,t,n,u),e[17]=(4294901760&e[17])+u+2),u++}function xu(e,n){const t=Ie(null);try{n.call(e)}finally{Ie(t)}}function ig(e,n,t,r){const i=t[r]<0,o=t[r+1],l=e[i?-t[r]:t[r]];i?e[2]>>14<e[17]>>16&&(3&e[2])===n&&(e[2]+=16384,xu(l,o)):xu(l,o)}class ac{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,t,r){this.factory=n,this.canSeeViewProviders=t,this.injectImpl=r}}function pf(e){return 3===e||4===e||6===e}function gf(e){return 64===e.charCodeAt(0)}function nl(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||mf(e,t,i,0,-1===t||2===t?n[++r]:null)}}return e}function mf(e,n,t,r,i){let o=0,s=e.length;if(-1===n)s=-1;else for(;o<e.length;){const l=e[o++];if("number"==typeof l){if(l===n){s=-1;break}if(l>n){s=o-1;break}}}for(;o<e.length;){const l=e[o];if("number"==typeof l)break;if(l===t)return void(null!==i&&(e[o+1]=i));o++,null!==i&&o++}-1!==s&&(e.splice(s,0,n),o=s+1),e.splice(o++,0,t),null!==i&&e.splice(o++,0,i)}function nh(e){return-1!==e}function rl(e){return 32767&e}function lc(e,n){let t=function lg(e){return e>>16}(e),r=n;for(;t>0;)r=r[14],t--;return r}let rh=!0;function Ru(e){const n=rh;return rh=e,n}let _f=0;const mi={};function cc(e,n){const t=Nu(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,ku(r.data,e),ku(n,null),ku(r.blueprint,null));const i=uc(e,n),o=e.injectorIndex;if(nh(i)){const s=rl(i),l=lc(i,n),u=l[1].data;for(let h=0;h<8;h++)n[o+h]=l[s+h]|u[s+h]}return n[o+8]=i,o}function ku(e,n){e.push(0,0,0,0,0,0,0,0,n)}function Nu(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function uc(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=d(i),null===r)return-1;if(t++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Ou(e,n,t){!function oh(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pa)&&(r=t[Pa]),null==r&&(r=t[Pa]=_f++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function hc(e,n,t){if(t&et.Optional||void 0!==e)return e;kl()}function fc(e,n,t,r){if(t&et.Optional&&void 0===r&&(r=null),!(t&(et.Self|et.Host))){const i=e[9],o=mr(void 0);try{return i?i.get(n,r,t&et.Optional):nu(n,r,t&et.Optional)}finally{mr(o)}}return hc(r,0,t)}function Fu(e,n,t,r=et.Default,i){if(null!==e){if(2048&n[2]&&!(r&et.Self)){const s=function c(e,n,t,r,i){let o=e,s=n;for(;null!==o&&null!==s&&2048&s[2]&&!hi(s);){const l=sh(o,s,t,r|et.Self,mi);if(l!==mi)return l;let u=o.parent;if(!u){const h=s[20];if(h){const g=h.get(t,mi,r);if(g!==mi)return g}u=d(s),s=s[14]}o=u}return i}(e,n,t,r,mi);if(s!==mi)return s}const o=sh(e,n,t,r,mi);if(o!==mi)return o}return fc(n,t,r,i)}function sh(e,n,t,r,i){const o=function ug(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Pa)?e[Pa]:void 0;return"number"==typeof n?n>=0?255&n:_:n}(t);if("function"==typeof o){if(!Bo(n,e,r))return r&et.Host?hc(i,0,r):fc(n,t,r,i);try{let s;if(s=o(r),null!=s||r&et.Optional)return s;kl()}finally{Mu()}}else if("number"==typeof o){let s=null,l=Nu(e,n),u=-1,h=r&et.Host?n[15][5]:null;for((-1===l||r&et.SkipSelf)&&(u=-1===l?uc(e,n):n[l+8],-1!==u&&ah(r,!1)?(s=n[1],l=rl(u),n=lc(u,n)):l=-1);-1!==l;){const g=n[1];if(yf(o,l,g.data)){const y=cg(l,n,t,s,r,h);if(y!==mi)return y}u=n[l+8],-1!==u&&ah(r,n[1].data[l+8]===h)&&yf(o,l,n)?(s=g,l=rl(u),n=lc(u,n)):l=-1}}return i}function cg(e,n,t,r,i,o){const s=n[1],l=s.data[e+8],g=Lu(l,s,t,null==r?Wr(l)&&rh:r!=s&&!!(3&l.type),i&et.Host&&o===l);return null!==g?pc(n,s,g,l,i):mi}function Lu(e,n,t,r,i){const o=e.providerIndexes,s=n.data,l=1048575&o,u=e.directiveStart,g=o>>20,b=i?l+g:e.directiveEnd;for(let C=r?l:l+g;C<b;C++){const w=s[C];if(C<u&&t===w||C>=u&&w.type===t)return C}if(i){const C=s[u];if(C&&Kt(C)&&C.type===t)return u}return null}function pc(e,n,t,r,i){let o=e[t];const s=n.data;if(o instanceof ac){const l=o;l.resolving&&Cd(function gt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ge(e)}(s[t]));const u=Ru(l.canSeeViewProviders);l.resolving=!0;const g=l.injectImpl?mr(l.injectImpl):null;Bo(e,r,et.Default);try{o=e[t]=l.factory(void 0,i,s,e,r),n.firstCreatePass&&t>=r.directiveStart&&function rg(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){const s=Bd(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}(t,s[t],n)}finally{null!==g&&mr(g),Ru(u),l.resolving=!1,Mu()}}return o}function yf(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function ah(e,n){return!(e&et.Self||e&et.Host&&n)}class pn{_tNode;_lView;constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Fu(this._tNode,this._lView,n,Bs(r),t)}}function _(){return new pn(Qe(),K())}function p(e){return we(()=>{const n=e.prototype.constructor,t=n[Li]||a(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[Li]||a(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function a(e){return Os(e)?()=>{const n=a(Se(e));return n&&n()}:Br(e)}function d(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[5]:null}function ol(e,n=null,t=null,r){const i=gc(e,n,t,r);return i.resolveInjectorInitializers(),i}function gc(e,n=null,t=null,r,i=new Set){const o=[t||Ae,La(e)];return r=r||("object"==typeof e?void 0:He(e)),new xo(o,n||ps(),r||null,i)}class wn{static THROW_IF_NOT_FOUND=To;static NULL=new Bl;static create(n,t){if(Array.isArray(n))return ol({name:""},t,n,"");{const r=n.name??"";return ol({name:r},n.parent,n.providers,r)}}static \u0275prov=pe({token:wn,providedIn:"any",factory:()=>Te(Fa)});static __NG_ELEMENT_ID__=-1}new ce("").__NG_ELEMENT_ID__=e=>{const n=Qe();if(null===n)throw new H(204,!1);if(2&n.type)return n.value;if(e&et.Optional)return null;throw new H(204,!1)};const F_=!1;let ia=(()=>class e{static __NG_ELEMENT_ID__=I2;static __NG_ENV_ID__=t=>t})();class WI extends ia{_lView;constructor(n){super(),this._lView=n}onDestroy(n){const t=this._lView;return Jr(t)?(n(),()=>{}):(wu(t,n),()=>function Du(e,n){if(null===e[21])return;const t=e[21].indexOf(n);-1!==t&&e[21].splice(t,1)}(t,n))}}function I2(){return new WI(K())}class mc{}const dg=new ce("",{providedIn:"root",factory:()=>!1}),GI=new ce(""),oC=new ce("");let _c=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new O(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}return e})();const cr=class S2 extends R{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Md()&&(this.destroyRef=X(ia,{optional:!0})??void 0,this.pendingTasks=X(_c,{optional:!0})??void 0)}emit(n){const t=Ie(null);try{super.next(n)}finally{Ie(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),s=r;if(n&&"object"==typeof n){const u=n;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const l=super.subscribe({next:i,error:o,complete:s});return n instanceof un&&n.add(l),l}wrapInTimeout(n){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{n(t)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function hg(...e){}function KI(e){let n,t;function r(){e=hg;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==n&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function YI(e){return queueMicrotask(()=>e()),()=>{e=hg}}const sC="isAngularZone",L_=sC+"_ID";let T2=0;class kt{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new cr(!1);onMicrotaskEmpty=new cr(!1);onStable=new cr(!1);onError=new cr(!1);constructor(n){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=F_}=n;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,function x2(e){const n=()=>{!function A2(e){function n(){KI(()=>{e.callbackScheduled=!1,lC(e),e.isCheckStableRunning=!0,aC(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),lC(e))}(e)},t=T2++;e._inner=e._inner.fork({name:"angular",properties:{[sC]:!0,[L_]:t,[L_+t]:!0},onInvokeTask:(r,i,o,s,l,u)=>{if(function P2(e){return XI(e,"__ignore_ng_zone__")}(u))return r.invokeTask(o,s,l,u);try{return QI(e),r.invokeTask(o,s,l,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&n(),ZI(e)}},onInvoke:(r,i,o,s,l,u,h)=>{try{return QI(e),r.invoke(o,s,l,u,h)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function R2(e){return XI(e,"__scheduler_tick__")}(u)&&n(),ZI(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,lC(e),aC(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(sC)}static assertInAngularZone(){if(!kt.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(kt.isInAngularZone())throw new H(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,n,M2,hg,hg);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const M2={};function aC(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lC(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function QI(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ZI(e){e._nesting--,aC(e)}class cC{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new cr;onMicrotaskEmpty=new cr;onStable=new cr;onError=new cr;run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}function XI(e,n){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[n]}class oa{_console=console;handleError(n){this._console.error("ERROR",n)}}const N2=new ce("",{providedIn:"root",factory:()=>{const e=X(kt),n=X(oa);return t=>e.runOutsideAngular(()=>n.handleError(t))}});function eS(e,n){return de(e,n)}const F2=(eS.required=function O2(e){return de($,e)},eS);function L2(){return vf(Qe(),K())}function vf(e,n){return new Go(zn(e,n))}let Go=(()=>class e{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=L2})();function tS(e){return e instanceof Go?e.nativeElement:e}function sl(e,n){const t=function Ea(e,n){const t=Object.create(Rs);t.value=e,void 0!==n&&(t.equal=n);const r=()=>(Me(t),t.value);return r[bt]=t,r}(e,n?.equal),r=t[bt];return t.set=i=>xs(r,i),t.update=i=>function Ps(e,n){ii()||As(e),xs(e,n(e.value))}(r,i),t.asReadonly=V_.bind(t),t}function V_(){const e=this[bt];if(void 0===e.readonlyFn){const n=()=>this();n[bt]=e,e.readonlyFn=n}return e.readonlyFn}function rS(e){return function nS(e){return"function"==typeof e&&void 0!==e[bt]}(e)&&"function"==typeof e.set}function V2(){return this._results[Symbol.iterator]()}class B2{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new R}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;const r=function jr(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function ds(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=V2}function pg(e){return!(128&~e.flags)}var B_=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(B_||{});const j_=new Map;let U2=0;function dC(e){j_.delete(e[19])}const fC="__ngContext__";function co(e,n){rn(n)?(e[fC]=n[19],function $2(e){j_.set(e[19],e)}(n)):e[fC]=n}function hS(e){return pS(e[12])}function fS(e){return pS(e[4])}function pS(e){for(;null!==e&&!$n(e);)e=e[4];return e}let gC;const yc=new ce("",{providedIn:"root",factory:()=>lV}),lV="ng",mC=new ce(""),H_=new ce("",{providedIn:"platform",factory:()=>"unknown"}),CS=new ce(""),ES=new ce("",{providedIn:"root",factory:()=>function al(){if(void 0!==gC)return gC;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),SS=new ce("",{providedIn:"root",factory:()=>!1});var TC=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(TC||{});const Cf=new ce(""),xS=new Set;function ji(e){xS.has(e)||(xS.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}let q_=(()=>class e{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=fV})();function fV(){return new q_(K(),Qe())}var Ef=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Ef||{});let MC=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}return e})();const PS=[Ef.EarlyRead,Ef.Write,Ef.MixedReadWrite,Ef.Read];let RS=(()=>{class e{ngZone=X(kt);scheduler=X(mc);errorHandler=X(oa,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){X(Cf,{optional:!0})}execute(){this.executing=!0;for(const r of PS)for(const i of this.sequences)if(!i.erroredOrDestroyed&&i.hooks[r])try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,i.hooks[r])(i.pipelinedValue),i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){const{view:r}=t;void 0!==r?((r[25]??=[]).push(t),Qs(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(TC.AFTER_NEXT_RENDER,t):t()}static \u0275prov=pe({token:e,providedIn:"root",factory:()=>new e})}return e})();class kS{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,t,r,i,o,s=null){this.impl=n,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const n=this.view?.[25];n&&(this.view[25]=n.filter(t=>t!==this))}}function AC(e,n){!n?.injector&&function _s(e){if(!Md())throw new H(-203,!1)}();const t=n?.injector??X(wn);return ji("NgAfterNextRender"),function OS(e,n,t,r){const i=n.get(MC);i.impl??=n.get(RS);const o=n.get(Cf,null,{optional:!0}),s=t?.phase??Ef.MixedReadWrite,l=!0!==t?.manualCleanup?n.get(ia):null,u=n.get(q_,null,{optional:!0}),h=new kS(i.impl,function pV(e,n){if(e instanceof Function){const t=[void 0,void 0,void 0,void 0];return t[n]=e,t}return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}(e,s),u?.view,r,l,o?.snapshot(null));return i.impl.register(h),h}(e,t,n,!0)}function aT(e,n){const t=e.contentQueries;if(null!==t){const r=Ie(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const l=e.data[s];lr(t[i]),l.contentQueries(2,n[s],s)}}}finally{Ie(r)}}}function $C(e,n,t){lr(0);const r=Ie(null);try{n(e,t)}finally{Ie(r)}}function zC(e,n,t){if(Zl(n)){const r=Ie(null);try{const o=n.directiveEnd;for(let s=n.directiveStart;s<o;s++){const l=e.data[s];l.contentQueries&&l.contentQueries(1,t[s],s)}}finally{Ie(r)}}}var Es=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Es||{});let ry;function dT(e){return function WC(){if(void 0===ry&&(ry=null,$e.trustedTypes))try{ry=$e.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ry}()?.createScriptURL(e)||e}class hT{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vn})`}}function Bu(e){return e instanceof hT?e.changingThisBreaksApplicationSecurity:e}function Tg(e,n){const t=function iB(e){return e instanceof hT&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${vn})`)}return t===n}const lB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Pf=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Pf||{});function Ag(e){const n=xg();return n?n.sanitize(Pf.URL,e)||"":Tg(e,"URL")?Bu(e):function GC(e){return(e=String(e)).match(lB)?e:"unsafe:"+e}(Ge(e))}function CT(e){const n=xg();if(n)return dT(n.sanitize(Pf.RESOURCE_URL,e)||"");if(Tg(e,"ResourceURL"))return dT(Bu(e));throw new H(904,!1)}function xg(){const e=K();return e&&e[10].sanitizer}const DB=/^>|^->|<!--|-->|--!>|<!-$/g,IB=/(<|>)/g;function ll(e){return e instanceof Function?e():e}function LB(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}const PT="ng-template";function VB(e,n,t,r){let i=0;if(r){for(;i<n.length&&"string"==typeof n[i];i+=2)if("class"===n[i]&&-1!==LB(n[i+1].toLowerCase(),t,0))return!0}else if(XC(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&"string"==typeof(o=n[i]);)if(o.toLowerCase()===t)return!0}return!1}function XC(e){return 4===e.type&&e.value!==PT}function BB(e,n,t){return n===(4!==e.type||t?e.value:PT)}function jB(e,n,t){let r=4;const i=e.attrs,o=null!==i?function $B(e){for(let n=0;n<e.length;n++)if(pf(e[n]))return n;return e.length}(i):0;let s=!1;for(let l=0;l<n.length;l++){const u=n[l];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!BB(e,u,t)||""===u&&1===n.length){if(sa(r))return!1;s=!0}}else if(8&r){if(null===i||!VB(e,i,u,t)){if(sa(r))return!1;s=!0}}else{const h=n[++l],g=UB(u,i,XC(e),t);if(-1===g){if(sa(r))return!1;s=!0;continue}if(""!==h){let y;if(y=g>o?"":i[g+1].toLowerCase(),2&r&&h!==y){if(sa(r))return!1;s=!0}}}}else{if(!s&&!sa(r)&&!sa(u))return!1;if(s&&sa(u))continue;s=!1,r=u|1&r}}return sa(r)||s}function sa(e){return!(1&e)}function UB(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){const s=n[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let l=n[++i];for(;"string"==typeof l;)l=n[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function zB(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function RT(e,n,t=!1){for(let r=0;r<n.length;r++)if(jB(e,n[r],t))return!0;return!1}function kT(e,n){return e?":not("+n.trim()+")":n}function GB(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&r){const l=e[++t];i+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!sa(s)&&(n+=kT(o,i),i=""),r=s,o=o||!sa(r);t++}return""!==i&&(n+=kT(o,i)),n}const it={};function e0(e,n){return e.createComment(function wT(e){return e.replace(DB,n=>n.replace(IB,"\u200b$1\u200b"))}(n))}function ay(e,n,t){return e.createElement(n,t)}function uh(e,n,t,r,i){e.insertBefore(n,t,r,i)}function OT(e,n,t){e.appendChild(n,t)}function FT(e,n,t,r,i){null!==r?uh(e,n,t,r,i):OT(e,n,t)}function VT(e,n,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&function th(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],l=t[r++];e.setAttribute(n,s,l,o)}else{const o=i,s=t[++r];gf(o)?e.setProperty(n,o,s):e.setAttribute(n,o,s),r++}}}(e,n,r),null!==i&&function QB(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}(e,n,i),null!==o&&function YB(e,n,t){e.setAttribute(n,"style",t)}(e,n,o)}function t0(e,n,t,r,i,o,s,l,u,h,g){const y=26+r,b=y+i,C=function ZB(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:it);return t}(y,b),w="function"==typeof h?h():h;return C[1]={type:e,blueprint:C,template:t,queries:null,viewQuery:l,declTNode:n,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:g}}function ly(e,n,t,r,i,o,s,l,u,h,g){const y=n.blueprint.slice();return y[0]=i,y[2]=1228|r,(null!==h||e&&2048&e[2])&&(y[2]|=2048),Cu(y),y[3]=y[14]=e,y[8]=t,y[10]=s||e&&e[10],y[11]=l||e&&e[11],y[9]=u||e&&e[9]||null,y[5]=o,y[19]=function H2(){return U2++}(),y[6]=g,y[20]=h,y[15]=2==n.type?e[15]:y,y}function n0(e){let n=16;return e.signals?n=4096:e.onPush&&(n=64),n}function Rg(e,n,t,r){if(0===t)return-1;const i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function r0(e,n){return e[12]?e[13][4]=n:e[12]=n,e[13]=n,n}function ne(e=1){jT(xe(),K(),Qn()+e,!1)}function jT(e,n,t,r){if(!r)if(3&~n[2]){const o=e.preOrderHooks;null!==o&&tl(n,o,0,t)}else{const o=e.preOrderCheckHooks;null!==o&&Au(n,o,t)}Ho(t)}var cy=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(cy||{});function o0(e,n,t,r){const i=Ie(null);try{const[o,s,l]=e.inputs[t];let u=null;!!(s&cy.SignalBased)&&(u=n[o][bt]),null!==u&&void 0!==u.transformFn?r=u.transformFn(r):null!==l&&(r=l.call(n,r)),null!==e.setInput?e.setInput(n,u,r,t,o):bs(n,u,o,r)}finally{Ie(i)}}function UT(e,n,t,r,i){const o=Qn(),s=2&r;try{Ho(-1),s&&n.length>26&&jT(e,n,26,!1),t(r,i)}finally{Ho(o)}}function uy(e,n,t){(function oj(e,n,t){const r=t.directiveStart,i=t.directiveEnd;Wr(t)&&function XB(e,n,t){const r=zn(n,e),i=function BT(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=t0(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}(t),o=e[10].rendererFactory,s=r0(e,ly(e,i,null,n0(t),r,n,null,o.createRenderer(r,t),null,null,null));e[n.index]=s}(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||cc(t,n);const o=t.initialInputs;for(let s=r;s<i;s++){const l=e.data[s],u=pc(n,e,s,t);co(u,n),null!==o&&lj(0,s-r,u,l,0,o),Kt(l)&&(Wn(t.index,n)[8]=pc(n,e,s,t))}})(e,n,t),!(64&~t.flags)&&function sj(e,n,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function hf(){return je.lFrame.currentDirectiveIndex}();try{Ho(o);for(let l=r;l<i;l++){const u=e.data[l],h=n[l];oc(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&aj(u,h)}}finally{Ho(-1),oc(s)}}(e,n,t)}function s0(e,n,t=zn){const r=n.localNames;if(null!==r){let i=n.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],l=-1===s?t(n,e):e[s];e[i++]=l}}}let HT=()=>null;function uo(e,n,t,r,i,o,s,l){if(l||!u0(n,e,t,r,i)){if(3&n.type){const u=zn(n,t);r=function rj(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,n.value||"",r):i,o.setProperty(u,r,i)}}else Wr(n)&&function ij(e,n){const t=Wn(n,e);16&t[2]||(t[2]|=64)}(t,n.index)}function aj(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function a0(e,n){const t=e.directiveRegistry;let r=null;if(t)for(let i=0;i<t.length;i++){const o=t[i];RT(n,o.selectors,!1)&&(r??=[],Kt(o)?r.unshift(o):r.push(o))}return r}function cl(e,n,t,r,i,o){const s=zn(e,n);!function l0(e,n,t,r,i,o,s){if(null==o)e.removeAttribute(n,i,t);else{const l=null==s?Ge(o):s(o,r||"",i);e.setAttribute(n,i,l,t)}}(n[11],s,o,e.value,t,r,i)}function lj(e,n,t,r,i,o){const s=o[n];if(null!==s)for(let l=0;l<s.length;l+=2)o0(r,t,s[l],s[l+1])}function u0(e,n,t,r,i){const o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r];let l=!1;if(s)for(let u=0;u<s.length;u+=2){const h=s[u];o0(n.data[h],t[h],s[u+1],i),l=!0}if(o)for(const u of o)o0(n.data[u],t[u],r,i),l=!0;return l}function cj(e,n){const t=Wn(n,e),r=t[1];!function uj(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(r,t);const i=t[0];null!==i&&null===t[6]&&(t[6]=null),dy(r,t,t[8])}function dy(e,n,t){el(n);try{const r=e.viewQuery;null!==r&&$C(1,r,t);const i=e.template;null!==i&&UT(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[18]?.finishViewCreation(e),e.staticContentQueries&&aT(e,n),e.staticViewQueries&&$C(2,e.viewQuery,t);const o=e.components;null!==o&&function dj(e,n){for(let t=0;t<n.length;t++)cj(e,n[t])}(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,Uo()}}function dh(e,n){return!n||null===n.firstChild||pg(e)}function h0(e,n){return undefined(e,n)}var ju=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ju||{});function Uu(e){return!(32&~e.flags)}function Nf(e,n,t,r,i){if(null!=r){let o,s=!1;$n(r)?o=r:rn(r)&&(s=!0,r=r[0]);const l=pt(r);0===e&&null!==t?null==i?OT(n,t,l):uh(n,t,l,i||null,!0):1===e&&null!==t?uh(n,t,l,i||null,!0):2===e?function Pg(e,n,t){e.removeChild(null,n,t)}(n,l,s):3===e&&n.destroyNode(l),null!=o&&function yj(e,n,t,r,i){const o=t[7];o!==pt(t)&&Nf(n,e,r,o,i);for(let l=10;l<t.length;l++){const u=t[l];fy(u[1],u,e,n,r,o)}}(n,e,o,t,i)}}function GT(e,n){n[10].changeDetectionScheduler?.notify(9),fy(e,n,n[11],2,null,null)}function f0(e,n){const t=e[9],r=t.indexOf(n);t.splice(r,1)}function kg(e,n){if(Jr(n))return;const t=n[11];t.destroyNode&&fy(e,n,t,3,null,null),function pj(e){let n=e[12];if(!n)return p0(e[1],e);for(;n;){let t=null;if(rn(n))t=n[12];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)rn(n)&&p0(n[1],n),n=n[3];null===n&&(n=e),rn(n)&&p0(n[1],n),t=n&&n[4]}n=t}}(n)}function p0(e,n){if(Jr(n))return;const t=Ie(null);try{n[2]&=-129,n[2]|=256,n[24]&&Ft(n[24]),function mj(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof ac)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const l=i[o[s]],u=o[s+1];try{u.call(l)}finally{}}else try{o.call(i)}finally{}}}}(e,n),function gj(e,n){const t=e.cleanup,r=n[7];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const l=t[s+3];l>=0?r[l]():r[-l].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(n[7]=null);const i=n[21];if(null!==i){n[21]=null;for(let s=0;s<i.length;s++)(0,i[s])()}const o=n[23];if(null!==o){n[23]=null;for(const s of o)s.destroy()}}(e,n),1===n[1].type&&n[11].destroy();const r=n[16];if(null!==r&&$n(n[3])){r!==n[3]&&f0(r,n);const i=n[18];null!==i&&i.detachView(e)}dC(n)}finally{Ie(t)}}function g0(e,n,t){return function qT(e,n,t){let r=n;for(;null!==r&&168&r.type;)r=(n=r).parent;if(null===r)return t[0];if(Wr(r)){const{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Es.None||i===Es.Emulated)return null}return zn(r,t)}(e,n.parent,t)}let QT=function YT(e,n,t){return 40&e.type?zn(e,t):null};function hy(e,n,t,r){const i=g0(e,r,n),o=n[11],l=function KT(e,n,t){return QT(e,n,t)}(r.parent||n[5],r,n);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)FT(o,i,t[u],l,!1);else FT(o,i,t,l,!1)}function hh(e,n){if(null!==n){const t=n.type;if(3&t)return zn(n,e);if(4&t)return _0(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return hh(e,r);{const i=e[n.index];return $n(i)?_0(-1,i):pt(i)}}if(128&t)return hh(e,n.next);if(32&t)return h0(n,e)()||pt(e[n.index]);{const r=XT(e,n);return null!==r?Array.isArray(r)?r[0]:hh(Oo(e[15]),r):hh(e,n.next)}}return null}function XT(e,n){return null!==n?e[15][5].projection[n.projection]:null}function _0(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return hh(r,i)}return n[7]}function y0(e,n,t,r,i,o,s){for(;null!=t;){if(128===t.type){t=t.next;continue}const l=r[t.index],u=t.type;if(s&&0===n&&(l&&co(pt(l),r),t.flags|=2),!Uu(t))if(8&u)y0(e,n,t.child,r,i,o,!1),Nf(n,e,i,l,o);else if(32&u){const h=h0(t,r);let g;for(;g=h();)Nf(n,e,i,g,o);Nf(n,e,i,l,o)}else 16&u?JT(e,n,r,t,i,o):Nf(n,e,i,l,o);t=s?t.projectionNext:t.next}}function fy(e,n,t,r,i,o){y0(t,r,e.firstChild,n,i,o,!1)}function JT(e,n,t,r,i,o){const s=t[15],u=s[5].projection[r.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++)Nf(n,e,i,u[h],o);else{let h=u;const g=s[3];pg(r)&&(h.flags|=128),y0(e,n,h,g,i,o,!0)}}function Of(e,n,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const o=n[t.index];null!==o&&r.push(pt(o)),$n(o)&&v0(o,r);const s=t.type;if(8&s)Of(e,n,t.child,r);else if(32&s){const l=h0(t,n);let u;for(;u=l();)r.push(u)}else if(16&s){const l=XT(n,t);if(Array.isArray(l))r.push(...l);else{const u=Oo(n[15]);Of(u[1],u,l,r,!0)}}t=i?t.projectionNext:t.next}return r}function v0(e,n){for(let t=10;t<e.length;t++){const r=e[t],i=r[1].firstChild;null!==i&&Of(r[1],r,i,n)}e[7]!==e[0]&&n.push(e[7])}function eM(e){if(null!==e[25]){for(const n of e[25])n.impl.addSequence(n);e[25].length=0}}let tM=[];const wj={...le,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Qs(e.lView)},consumerOnSignalRead(){this.lView[24]=this}},Ij={...le,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let n=Oo(e.lView);for(;n&&!nM(n[1]);)n=Oo(n);n&&Eu(n)},consumerOnSignalRead(){this.lView[24]=this}};function nM(e){return 2!==e.type}function rM(e){if(null===e[23])return;let n=!0;for(;n;){let t=!1;for(const r of e[23])r.dirty&&(t=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=t&&!!(8192&e[2])}}function py(e,n=!0,t=0){const i=e[10].rendererFactory;i.begin?.();try{!function Tj(e,n){const t=rc();try{Vo(!0),b0(e,n);let r=0;for(;Ya(e);){if(100===r)throw new H(103,!1);r++,b0(e,1)}}finally{Vo(t)}}(e,t)}catch(s){throw n&&function c0(e,n){const t=e[9],r=t?t.get(oa,null):null;r&&r.handleError(n)}(e,s),s}finally{i.end?.()}}function oM(e,n,t,r){if(Jr(n))return;const i=n[2];el(n);let l=!0,u=null,h=null;nM(e)?(h=function bj(e){return e[24]??function Cj(e){const n=tM.pop()??Object.create(wj);return n.lView=e,n}(e)}(n),u=tr(h)):null===function Zt(){return Q}()?(l=!1,h=function Dj(e){const n=e[24]??Object.create(Ij);return n.lView=e,n}(n),u=tr(h)):n[24]&&(Ft(n[24]),n[24]=null);try{Cu(n),function df(e){return je.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&UT(e,n,t,2,r);const g=!(3&~i);if(g){const C=e.preOrderCheckHooks;null!==C&&Au(n,C,null)}else{const C=e.preOrderHooks;null!==C&&tl(n,C,0,null),Jd(n,0)}if(function Mj(e){for(let n=hS(e);null!==n;n=fS(n)){if(!(2&n[2]))continue;const t=n[9];for(let r=0;r<t.length;r++)Eu(t[r])}}(n),rM(n),sM(n,0),null!==e.contentQueries&&aT(e,n),g){const C=e.contentCheckHooks;null!==C&&Au(n,C)}else{const C=e.contentHooks;null!==C&&tl(n,C,1),Jd(n,1)}!function xj(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ho(~i);else{const o=i,s=t[++r],l=t[++r];P_(s,o);const u=n[o];l(2,u)}}}finally{Ho(-1)}}(e,n);const y=e.components;null!==y&&lM(n,y,0);const b=e.viewQuery;if(null!==b&&$C(2,b,r),g){const C=e.viewCheckHooks;null!==C&&Au(n,C)}else{const C=e.viewHooks;null!==C&&tl(n,C,2),Jd(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[22]){for(const C of n[22])C();n[22]=null}eM(n),n[2]&=-73}catch(g){throw Qs(n),g}finally{null!==h&&(Ir(h,u),l&&function Ej(e){e.lView[24]!==e&&(e.lView=null,tM.push(e))}(h)),Uo()}}function sM(e,n){for(let t=hS(e);null!==t;t=fS(t))for(let r=10;r<t.length;r++)aM(t[r],n)}function Aj(e,n,t){const r=Wn(n,e);aM(r,t)}function aM(e,n){Ka(e)&&b0(e,n)}function b0(e,n){const r=e[1],i=e[2],o=e[24];let s=!!(0===n&&16&i);if(s||=!!(64&i&&0===n),s||=!!(1024&i),s||=!(!o?.dirty||!Gn(o)),s||=!1,o&&(o.dirty=!1),e[2]&=-9217,s)oM(r,e,r.template,e[8]);else if(8192&i){rM(e),sM(e,1);const l=r.components;null!==l&&lM(e,l,1),eM(e)}}function lM(e,n,t){for(let r=0;r<n.length;r++)Aj(e,n[r],t)}function Ng(e,n){const t=rc()?64:1088;for(e[10].changeDetectionScheduler?.notify(n);e;){e[2]|=t;const r=Oo(e);if(hi(e)&&!r)return e;e=r}return null}function cM(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function Og(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[16];null!==i&&i!==e&&f0(i,r),n>0&&(e[t-1][4]=r[4]);const o=su(e,10+n);!function WT(e,n){GT(e,n),n[0]=null,n[5]=null}(r[1],r);const s=o[18];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function dM(e,n){const t=e[9],r=n[3];(rn(r)||n[15]!==r[3][15])&&(e[2]|=2),null===t?e[9]=[n]:t.push(n)}let Fg=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const n=this._lView,t=n[1];return Of(t,n,t.firstChild,[])}constructor(n,t,r=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return Jr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if($n(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(Og(n,r),su(t,r))}this._attachedToViewContainer=!1}kg(this._lView[1],this._lView)}onDestroy(n){wu(this._lView,n)}markForCheck(){Ng(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){sr(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,py(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=hi(this._lView),t=this._lView[16];null!==t&&!n&&f0(t,this._lView),GT(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=n;const t=hi(this._lView),r=this._lView[16];null!==r&&!t&&dM(r,this._lView),sr(this._lView)}},Ec=(()=>class e{static __NG_ELEMENT_ID__=Nj})();const Rj=Ec,kj=class extends Rj{_declarationLView;_declarationTContainer;elementRef;constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,r){const i=function kf(e,n,t,r){const i=Ie(null);try{const o=n.tView,u=ly(e,o,t,4096&e[2]?4096:16,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[16]=e[n.index];const g=e[18];return null!==g&&(u[18]=g.createEmbeddedView(o)),dy(o,u,t),u}finally{Ie(i)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:r});return new Fg(i)}};function Nj(){return gy(Qe(),K())}function gy(e,n){return 4&e.type?new kj(n,e,vf(e,n)):null}function Lf(e,n,t,r,i){let o=e.data[n];if(null===o)o=function I0(e,n,t,r,i){const o=Fo(),s=Za(),u=e.data[n]=function zj(e,n,t,r,i,o){let s=n?n.injectorIndex:-1,l=0;return function ao(){return null!==je.skipHydrationRootTNode}()&&(l|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,n,r,i);return function $j(e,n,t,r){null===e.firstChild&&(e.firstChild=n),null!==t&&(r?null==t.child&&null!==n.parent&&(t.child=n):null===t.next&&(t.next=n,n.prev=t))}(e,u,o,s),u}(e,n,t,r,i),function Kd(){return je.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function ea(){const e=je.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Gr(o,!0),o}let xU=class{},NM=class{};class PU{resolveComponentFactory(n){throw Error(`No component factory found for ${He(n)}.`)}}let Ey=class{static NULL=new PU};class wy{}let wc=(()=>class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>function RU(){const e=K(),t=Wn(Qe().index,e);return(rn(t)?t:e)[11]}()})(),kU=(()=>{class e{static \u0275prov=pe({token:e,providedIn:"root",factory:()=>null})}return e})();const N0={};class jf{injector;parentInjector;constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=Bs(r);const i=this.injector.get(n,N0,r);return i!==N0||t===N0?i:this.parentInjector.get(n,t,r)}}function O0(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(null!==n)for(let s=0;s<n.length;s++){const l=n[s];"number"==typeof l?o=l:1==o?i=Be(i,l):2==o&&(r=Be(r,l+": "+n[++s]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function J(e,n=et.Default){const t=K();return null===t?Te(e,n):Fu(Qe(),t,Se(e),n)}function F0(e,n,t,r,i){const o=null===r?null:{"":-1},s=i(e,t);if(null!==s){let l,u=null,h=null;const g=function VU(e){let n=null,t=!1;for(let s=0;s<e.length;s++){const l=e[s];if(0===s&&Kt(l)&&(n=l),null!==l.findHostDirectiveDefs){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(const s of e)null!==s.findHostDirectiveDefs&&(r??=[],i??=new Map,o??=new Map,BU(s,r,o,i)),s===n&&(r??=[],r.push(s));return null!==r?(r.push(...null===n?e:e.slice(1)),[r,i,o]):null}(s);null===g?l=s:[l,u,h]=g,function UU(e,n,t,r,i,o,s){const l=r.length;let u=!1;for(let b=0;b<l;b++){const C=r[b];!u&&Kt(C)&&(u=!0,jU(e,t,b)),Ou(cc(t,n),e,C.type)}!function qU(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,l);for(let b=0;b<l;b++){const C=r[b];C.providersResolver&&C.providersResolver(C)}let h=!1,g=!1,y=Rg(e,n,l,null);l>0&&(t.directiveToIndex=new Map);for(let b=0;b<l;b++){const C=r[b];if(t.mergedAttrs=nl(t.mergedAttrs,C.hostAttrs),$U(e,t,n,y,C),GU(y,C,i),null!==s&&s.has(C)){const[D,S]=s.get(C);t.directiveToIndex.set(C.type,[y,D+t.directiveStart,S+t.directiveStart])}else(null===o||!o.has(C))&&t.directiveToIndex.set(C.type,y);null!==C.contentQueries&&(t.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(t.flags|=64);const w=C.type.prototype;!h&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),h=!0),!g&&(w.ngOnChanges||w.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),g=!0),y++}!function HU(e,n,t){for(let r=n.directiveStart;r<n.directiveEnd;r++){const i=e.data[r];if(null!==t&&t.has(i)){const o=t.get(i);VM(0,n,o,r),VM(1,n,o,r),jM(n,r,!0)}else LM(0,n,i,r),LM(1,n,i,r),jM(n,r,!1)}}(e,t,o)}(e,n,t,l,o,u,h)}null!==o&&null!==r&&function LU(e,n,t){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const o=t[n[i+1]];if(null==o)throw new H(-301,!1);r.push(n[i],o)}}(t,r,o)}function BU(e,n,t,r){const i=n.length;e.findHostDirectiveDefs(e,n,r),t.set(e,[i,n.length-1])}function jU(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function LM(e,n,t,r){const i=0===e?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){let s;s=0===e?n.inputs??={}:n.outputs??={},s[o]??=[],s[o].push(r),BM(n,o)}}function VM(e,n,t,r){const i=0===e?t.inputs:t.outputs;for(const o in i)if(i.hasOwnProperty(o)){const s=i[o];let l;l=0===e?n.hostDirectiveInputs??={}:n.hostDirectiveOutputs??={},l[s]??=[],l[s].push(r,o),BM(n,s)}}function BM(e,n){"class"===n?e.flags|=8:"style"===n&&(e.flags|=16)}function jM(e,n,t){const{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(null===r||!t&&null===i||t&&null===o||XC(e))return e.initialInputs??=[],void e.initialInputs.push(null);let s=null,l=0;for(;l<r.length;){const u=r[l];if(0!==u)if(5!==u){if("number"==typeof u)break;if(!t&&i.hasOwnProperty(u)){const h=i[u];for(const g of h)if(g===n){s??=[],s.push(u,r[l+1]);break}}else if(t&&o.hasOwnProperty(u)){const h=o[u];for(let g=0;g<h.length;g+=2)if(h[g]===n){s??=[],s.push(h[g+1],r[l+1]);break}}l+=2}else l+=2;else l+=4}e.initialInputs??=[],e.initialInputs.push(s)}function $U(e,n,t,r,i){e.data[r]=i;const o=i.factory||(i.factory=Br(i.type)),s=new ac(o,Kt(i),J);e.blueprint[r]=s,t[r]=s,function zU(e,n,t,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const l=~n.index;(function WU(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=l&&s.push(l),s.push(t,r,o)}}(e,n,r,Rg(e,t,i.hostVars,it),i)}function GU(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Kt(n)&&(t[""]=e)}}function UM(e,n,t,r,i,o,s,l){const u=n.consts,g=Lf(n,e,2,r,En(u,s));return o&&F0(n,t,g,En(u,l),i),g.mergedAttrs=nl(g.mergedAttrs,g.attrs),null!==g.attrs&&O0(g,g.attrs,!1),null!==g.mergedAttrs&&O0(g,g.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,g),g}function HM(e,n){Xd(e,n),Zl(n)&&e.queries.elementEnd(n)}class $M extends Ey{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Ye(n);return new Gg(t,this.ngModule)}}class Gg extends NM{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function KU(e){return Object.keys(e).map(n=>{const[t,r,i]=e[n],o={propName:t,templateName:n,isSignal:!!(r&cy.SignalBased)};return i&&(o.transform=i),o})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function YU(e){return Object.keys(e).map(n=>({propName:e[n],templateName:n}))}(this.componentDef.outputs),this.cachedOutputs}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function qB(e){return e.map(GB).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!t}create(n,t,r,i){const o=Ie(null);try{const s=this.componentDef,l=r?["ng-version","19.2.13"]:function KB(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&n.push(o,e[++r]):8===i&&t.push(o);else{if(!sa(i))break;i=o}r++}return t.length&&n.push(1,...t),n}(this.componentDef.selectors[0]),u=t0(0,null,null,1,0,null,null,null,null,[l],null),h=function QU(e,n,t){let r=n instanceof Un?n:n?.injector;return r&&null!==e.getStandaloneInjector&&(r=e.getStandaloneInjector(r)||r),r?new jf(t,r):t}(s,i||this.ngModule,n),g=function ZU(e){const n=e.get(wy,null);if(null===n)throw new H(407,!1);return{rendererFactory:n,sanitizer:e.get(kU,null),changeDetectionScheduler:e.get(mc,null)}}(h),y=g.rendererFactory.createRenderer(null,s),b=r?function JB(e,n,t,r){const o=r.get(SS,!1)||t===Es.ShadowDom,s=e.selectRootElement(n,o);return function ej(e){HT(e)}(s),s}(y,r,s.encapsulation,h):function XU(e,n){const t=(e.selectors[0][0]||"div").toLowerCase();return ay(n,t,"svg"===t?"svg":"math"===t?"math":null)}(s,y),C=ly(null,u,null,512|n0(s),null,null,g,y,h,null,null);C[26]=b,el(C);let w=null;try{const D=UM(26,u,C,"#host",()=>[this.componentDef],!0,0);b&&(VT(y,b,D),co(b,C)),uy(u,C,D),zC(u,D,C),HM(u,D),void 0!==t&&function eH(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const o=t[i];r.push(null!=o&&o.length?Array.from(o):null)}}(D,this.ngContentSelectors,t),w=Wn(D.index,C),C[8]=w[8],dy(u,C,null)}catch(D){throw null!==w&&dC(w),dC(C),D}finally{Uo()}return new JU(this.componentType,C)}finally{Ie(o)}}}class JU extends xU{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,t){super(),this._rootLView=t,this._tNode=pi(t[1],26),this.location=vf(this._tNode,t),this.instance=Wn(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new Fg(t,void 0,!1),this.componentType=n}setInput(n,t){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const i=this._rootLView;u0(r,i[1],i,n,t),this.previousInputValues.set(n,t),Ng(Wn(r.index,i),1)}get injector(){return new pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}let aa=(()=>class e{static __NG_ELEMENT_ID__=tH})();function tH(){return GM(Qe(),K())}const nH=aa,zM=class extends nH{_lContainer;_hostTNode;_hostLView;constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return vf(this._hostTNode,this._hostLView)}get injector(){return new pn(this._hostTNode,this._hostLView)}get parentInjector(){const n=uc(this._hostTNode,this._hostLView);if(nh(n)){const t=lc(n,this._hostLView),r=rl(n);return new pn(t[1].data[r+8],t)}return new pn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=WM(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const l=n.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(l,i,dh(this._hostTNode,null)),l}createComponent(n,t,r,i,o){const s=n&&!function zs(e){return"function"==typeof e}(n);let l;if(s)l=t;else{const w=t||{};l=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}const u=s?n:new Gg(Ye(n)),h=r||this.parentInjector;if(!o&&null==u.ngModule){const D=(s?h:this.parentInjector).get(Un,null);D&&(o=D)}Ye(u.componentType??{});const C=u.create(h,i,null,o);return this.insertImpl(C.hostView,l,dh(this._hostTNode,null)),C}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){const i=n._lView;if(function Xp(e){return $n(e[3])}(i)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const u=i[3],h=new zM(u,u[5],u[3]);h.detach(h.indexOf(n))}}const o=this._adjustIndex(t),s=this._lContainer;return function Ff(e,n,t,r=!0){const i=n[1];if(function Pj(e,n,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=n),r<o-10?(n[4]=t[i],Xr(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const s=n[16];null!==s&&t!==s&&dM(s,n);const l=n[18];null!==l&&l.insertView(e),sr(n),n[2]|=128}(i,n,e,t),r){const s=_0(t,e),l=n[11],u=l.parentNode(e[7]);null!==u&&function fj(e,n,t,r,i,o){r[0]=i,r[5]=n,fy(e,r,t,1,i,o)}(i,e[5],l,n,u,s)}const o=n[6];null!==o&&null!==o.firstChild&&(o.firstChild=null)}(s,i,o,r),n.attachToViewContainerRef(),Xr(L0(s),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=WM(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=Og(this._lContainer,t);r&&(su(L0(this._lContainer),t),kg(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=Og(this._lContainer,t);return r&&null!=su(L0(this._lContainer),t)?new Fg(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function WM(e){return e[8]}function L0(e){return e[8]||(e[8]=[])}function GM(e,n){let t;const r=n[e.index];return $n(r)?t=r:(t=cM(r,n,null,e),n[e.index]=t,r0(n,t)),qM(t,n,e,r),new zM(t,e,n)}let qM=function YM(e,n,t,r){if(e[7])return;let i;i=8&t.type?pt(r):function rH(e,n){const t=e[11],r=t.createComment(""),i=zn(n,e),o=t.parentNode(i);return uh(t,o,r,t.nextSibling(i),!1),r}(n,t),e[7]=i};class B0{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new B0(this.queryList)}setDirty(){this.queryList.setDirty()}}class j0{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new j0(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==W0(n,t).matches&&this.queries[t].setDirty()}}class QM{flags;read;predicate;constructor(n,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof n?function dH(e){return e.split(",").map(n=>n.trim())}(n):n}}class U0{queries;constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new U0(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class H0{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,t=-1){this.metadata=n,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new H0(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(n,t,aH(t,o)),this.matchTNodeWithReadOption(n,t,Lu(t,n,o,!1,!1))}else r===Ec?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Lu(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Go||i===aa||i===Ec&&4&t.type)this.addMatch(t.index,-2);else{const o=Lu(t,n,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function aH(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function cH(e,n,t,r){return-1===t?function lH(e,n){return 11&e.type?vf(e,n):4&e.type?gy(e,n):null}(n,e):-2===t?function uH(e,n,t){return t===Go?vf(n,e):t===Ec?gy(n,e):t===aa?GM(n,e):void 0}(e,n,r):pc(e,e[1],t,n)}function ZM(e,n,t,r){const i=n[18].queries[r];if(null===i.matches){const o=e.data,s=t.matches,l=[];for(let u=0;null!==s&&u<s.length;u+=2){const h=s[u];l.push(h<0?null:cH(n,o[h],s[u+1],t.metadata.read))}i.matches=l}return i.matches}function $0(e,n,t,r){const i=e.queries.getByIndex(t),o=i.matches;if(null!==o){const s=ZM(e,n,i,t);for(let l=0;l<o.length;l+=2){const u=o[l];if(u>0)r.push(s[l/2]);else{const h=o[l+1],g=n[-u];for(let y=10;y<g.length;y++){const b=g[y];b[16]===b[3]&&$0(b[1],b,h,r)}if(null!==g[9]){const y=g[9];for(let b=0;b<y.length;b++){const C=y[b];$0(C[1],C,h,r)}}}}}return r}function JM(e,n,t){const r=xe();return r.firstCreatePass&&(function tA(e,n,t){null===e.queries&&(e.queries=new U0),e.queries.track(new H0(n,t))}(r,new QM(e,n,t),-1),!(2&~n)&&(r.staticViewQueries=!0)),function XM(e,n,t){const r=new B2(!(4&~t));return function uf(e,n,t,r){const i=Zs(n);i.push(t),e.firstCreatePass&&jd(e).push(r,i.length-1)}(e,n,r,r.destroy),(n[18]??=new j0).queries.push(new B0(r))-1}(r,K(),n)}function W0(e,n){return e.queries.getByIndex(n)}function nA(e,n){const t=e[1],r=W0(t,n);return r.crossesNgTemplate?$0(t,e,n,[]):ZM(t,e,r,n)}let gh=class{},fA=class{};class K0 extends gh{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new $M(this);constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t;const o=Kn(n);this._bootstrapComponents=ll(o.bootstrap),this._r3Injector=gc(n,t,[{provide:gh,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver},...r],He(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Y0 extends fA{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new K0(this.moduleType,n,[])}}class pA extends gh{injector;componentFactoryResolver=new $M(this);instance=null;constructor(n){super();const t=new xo([...n.providers,{provide:gh,useValue:this},{provide:Ey,useValue:this.componentFactoryResolver}],n.parent||ps(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Iy(e,n,t=null){return new pA({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let DH=(()=>{class e{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Va(0,t.type),i=r.length>0?Iy([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=pe({token:e,providedIn:"environment",factory:()=>new e(Te(Un))})}return e})();function _i(e){return we(()=>{const n=gA(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===B_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:n.standalone?i=>i.get(DH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Es.Emulated,styles:e.styles||Ae,_:null,schemas:e.schemas||null,tView:null,id:""};n.standalone&&ji("NgStandalone"),mA(t);const r=e.dependencies;return t.directiveDefs=Sy(r,!1),t.pipeDefs=Sy(r,!0),t.id=function xH(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,"function"==typeof e.consts?"":e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(const o of r.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)|0;return n+=2147483648,"c"+n}(t),t})}function IH(e){return Ye(e)||function jn(e){return e[cs]||null}(e)}function SH(e){return null!==e}function $u(e){return we(()=>({type:e.type,bootstrap:e.bootstrap||Ae,declarations:e.declarations||Ae,imports:e.imports||Ae,exports:e.exports||Ae,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function TH(e,n){if(null==e)return Vi;const t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];let o,s,l,u;Array.isArray(i)?(l=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,l=cy.None,u=null),t[o]=[r,l,u],n[o]=s}return t}function MH(e){if(null==e)return Vi;const n={};for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function tt(e){return we(()=>{const n=gA(e);return mA(n),n})}function yi(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function gA(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputConfig:e.inputs||Vi,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:!0===e.signals,selectors:e.selectors||Ae,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TH(e.inputs,n),outputs:MH(e.outputs),debugInfo:null}}function mA(e){e.features?.forEach(n=>n(e))}function Sy(e,n){if(!e)return null;const t=n?hn:IH;return()=>("function"==typeof e?e():e).map(r=>t(r)).filter(SH)}function Wt(e){let n=function _A(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(Kt(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new H(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const s=e;s.inputs=Q0(e.inputs),s.declaredInputs=Q0(e.declaredInputs),s.outputs=Q0(e.outputs);const l=i.hostBindings;l&&OH(e,l);const u=i.viewQuery,h=i.contentQueries;if(u&&kH(e,u),h&&NH(e,h),PH(e,i),Ns(e.outputs,i.outputs),Kt(i)&&i.data.animation){const g=e.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const l=o[s];l&&l.ngInherit&&l(e),l===Wt&&(t=!1)}}n=Object.getPrototypeOf(n)}!function RH(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=nl(i.hostAttrs,t=nl(t,i.hostAttrs))}}(r)}function PH(e,n){for(const t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;const r=n.inputs[t];void 0!==r&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t])}}function Q0(e){return e===Vi?{}:e===Ae?[]:e}function kH(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function NH(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,o)=>{n(r,i,o),t(r,i,o)}:n}function OH(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}function Ty(e){return!!function X0(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function ul(e,n,t){return e[n]=t}function Xn(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function yt(e,n,t,r,i,o,s,l){const u=K(),h=xe();return function Yg(e,n,t,r,i,o,s,l,u,h){const g=t+26,y=n.firstCreatePass?function zH(e,n,t,r,i,o,s,l,u){const h=n.consts,g=Lf(n,e,4,s||null,l||null);Js()&&F0(n,t,g,En(h,u),a0),g.mergedAttrs=nl(g.mergedAttrs,g.attrs),Xd(n,g);const y=g.tView=t0(2,g,r,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,h,null);return null!==n.queries&&(n.queries.template(n,g),y.queries=n.queries.embeddedTView(g)),g}(g,n,e,r,i,o,s,l,u):n.data[g];Gr(y,!1);const b=EA(n,e,y,t);$o()&&hy(n,e,b,y),co(b,e);const C=cM(b,e,b,y);return e[g]=C,r0(e,C),Wa(y)&&uy(n,e,y),null!=u&&s0(e,y,h),y}(u,h,e,n,t,r,i,En(h.consts,o),s,l),yt}let EA=function wA(e,n,t,r){return ti(!0),n[11].createComment("")};let tE=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const FA=new ce("");let LA=(()=>{class e{static \u0275prov=pe({token:e,providedIn:"root",factory:()=>new $$})}return e})();class $${queuedEffectCount=0;queues=new Map;schedule(n){this.enqueue(n)}remove(n){const r=this.queues.get(n.zone);r.has(n)&&(r.delete(n),this.queuedEffectCount--)}enqueue(n){const t=n.zone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(n)||(this.queuedEffectCount++,r.add(n))}flush(){for(;this.queuedEffectCount>0;)for(const[n,t]of this.queues)null===n?this.flushQueue(t):n.run(()=>this.flushQueue(t))}flushQueue(n){for(const t of n)n.delete(t),this.queuedEffectCount--,t.run()}}function Zg(e){return!!e&&"function"==typeof e.then}function VA(e){return!!e&&"function"==typeof e.subscribe}const BA=new ce("");function jA(e){return Mr([{provide:BA,multi:!0,useValue:e}])}let UA=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=X(BA,{optional:!0})??[];injector=X(wn);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=Hr(this.injector,i);if(Zg(o))t.push(o);else if(VA(o)){const s=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const zf=new ce("");let qo=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=X(N2);afterRenderManager=X(MC);zonelessEnabled=X(dg);rootEffectScheduler=X(LA);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new R;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=X(_c).hasPendingTasks.pipe(Ce(t=>!t));constructor(){X(Cf,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=X(Un);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wn.NULL){const o=t instanceof NM;if(!this._injector.get(UA).done)throw new H(405,"");let l;l=o?t:this._injector.get(Ey).resolveComponentFactory(t),this.componentTypes.push(l.componentType);const u=function z$(e){return e.isBoundToModule}(l)?void 0:this._injector.get(gh),g=l.create(i,[],r||l.selector,u),y=g.location.nativeElement,b=g.injector.get(FA,null);return b?.registerApplication(y),g.onDestroy(()=>{this.detachView(g.hostView),ky(this.components,g),b?.unregisterApplication(y)}),this._loadComponent(g),g}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){null!==this.tracingSnapshot?this.tracingSnapshot.run(TC.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);const t=Ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ie(t),this.afterTick.next()}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wy,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)this.synchronizeOnce()}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const t=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)G$(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Ya(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;ky(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(zf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ky(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ky(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function G$(e,n,t,r){(t||Ya(e))&&py(e,n,t&&!r?0:1)}function dl(e,n,t,r){const i=K();return Xn(i,gi(),n)&&(xe(),cl(At(),i,e,n,t,r)),dl}function Gf(e,n,t,r){return Xn(e,gi(),t)?n+Ge(t)+r:it}function Ny(e,n){return e<<17|n<<2}function yh(e){return e>>17&32767}function hE(e){return 2|e}function ep(e){return(131068&e)>>2}function fE(e,n){return-131069&e|n<<2}function pE(e){return 1|e}function ax(e,n,t,r){const i=e[t+1],o=null===n;let s=r?yh(i):ep(i),l=!1;for(;0!==s&&(!1===l||o);){const h=e[s+1];Rz(e[s],n)&&(l=!0,e[s+1]=r?pE(h):hE(h)),s=r?yh(h):ep(h)}l&&(e[t+1]=r?hE(i):pE(i))}function Rz(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&yr(e,n)>=0}function Pe(e,n,t){const r=K();return Xn(r,gi(),n)&&uo(xe(),At(),r,e,n,r[11],t,!1),Pe}function gE(e,n,t,r,i){u0(n,e,t,i?"class":"style",r)}function la(e,n){return function ca(e,n,t,r){const i=K(),o=xe(),s=function ei(e){const n=je.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}(2);o.firstUpdatePass&&function mx(e,n,t,r){const i=e.data;if(null===i[t+1]){const o=i[Qn()],s=function gx(e,n){return n>=e.expandoStartIndex}(e,t);(function bx(e,n){return!!(e.flags&(n?8:16))})(o,r)&&null===n&&!s&&(n=!1),n=function Uz(e,n,t,r){const i=function Xa(e){const n=je.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let o=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=Jg(t=mE(null,e,n,t,r),n.attrs,r),o=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==i)if(t=mE(i,e,n,t,r),null===o){let u=function Hz(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==ep(r))return e[yh(r)]}(e,n,r);void 0!==u&&Array.isArray(u)&&(u=mE(null,e,n,u[1],r),u=Jg(u,n.attrs,r),function $z(e,n,t,r){e[yh(t?n.classBindings:n.styleBindings)]=r}(e,n,r,u))}else o=function zz(e,n,t){let r;const i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++)r=Jg(r,e[o].hostAttrs,t);return Jg(r,n.attrs,t)}(e,n,r)}return void 0!==o&&(r?n.residualClasses=o:n.residualStyles=o),t}(i,o,n,r),function xz(e,n,t,r,i,o){let s=o?n.classBindings:n.styleBindings,l=yh(s),u=ep(s);e[r]=t;let g,h=!1;if(Array.isArray(t)?(g=t[1],(null===g||yr(t,g)>0)&&(h=!0)):g=t,i)if(0!==u){const b=yh(e[l+1]);e[r+1]=Ny(b,l),0!==b&&(e[b+1]=fE(e[b+1],r)),e[l+1]=function Mz(e,n){return 131071&e|n<<17}(e[l+1],r)}else e[r+1]=Ny(l,0),0!==l&&(e[l+1]=fE(e[l+1],r)),l=r;else e[r+1]=Ny(u,0),0===l?l=r:e[u+1]=fE(e[u+1],r),u=r;h&&(e[r+1]=hE(e[r+1])),ax(e,g,r,!0),ax(e,g,r,!1),function Pz(e,n,t,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof n&&yr(o,n)>=0&&(t[r+1]=pE(t[r+1]))}(n,g,e,r,o),s=Ny(l,u),o?n.classBindings=s:n.styleBindings=s}(i,o,n,t,s,r)}}(o,e,s,r),n!==it&&Xn(i,s,n)&&function yx(e,n,t,r,i,o,s,l){if(!(3&n.type))return;const u=e.data,h=u[l+1],g=function Az(e){return!(1&~e)}(h)?vx(u,n,t,i,ep(h),s):void 0;Oy(g)||(Oy(o)||function Tz(e){return!(2&~e)}(h)&&(o=vx(u,null,t,i,l,s)),function vj(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:ju.DashCase;null==i?e.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ju.Important),e.setStyle(t,r,i,o))}}(r,s,ko(Qn(),t),i,o))}(o,o.data[Qn()],i,i[11],e,i[s+1]=function Kz(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=He(Bu(e)))),e}(n,t),r,s)}(e,n,null,!0),la}function mE(e,n,t,r,i){let o=null;const s=t.directiveEnd;let l=t.directiveStylingLast;for(-1===l?l=t.directiveStart:l++;l<s&&(o=n[l],r=Jg(r,o.hostAttrs,i),o!==e);)l++;return null!==e&&(t.directiveStylingLast=l),r}function Jg(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let o=0;o<n.length;o++){const s=n[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),_r(e,s,!!t||n[++o]))}return void 0===e?null:e}function vx(e,n,t,r,i,o){const s=null===n;let l;for(;i>0;){const u=e[i],h=Array.isArray(u),g=h?u[1]:u,y=null===g;let b=t[i+1];b===it&&(b=y?Ae:void 0);let C=y?Ur(b,r):g===r?b:void 0;if(h&&!Oy(C)&&(C=Ur(u,r)),Oy(C)&&(l=C,s))return l;const w=e[i+1];i=s?yh(w):ep(w)}if(null!==n){let u=o?n.residualClasses:n.residualStyles;null!=u&&(l=Ur(u,r))}return l}function Oy(e){return void 0!==e}function B(e,n,t,r){const i=K(),o=xe(),s=26+e,l=i[11],u=o.firstCreatePass?UM(s,o,i,n,a0,Js(),t,r):o.data[s],h=Dx(o,i,u,l,n,e);i[s]=h;const g=Wa(u);return Gr(u,!0),VT(l,h,u),!Uu(u)&&$o()&&hy(o,i,h,u),(0===function Ud(){return je.lFrame.elementDepthCount}()||g)&&co(h,i),function Qa(){je.lFrame.elementDepthCount++}(),g&&(uy(o,i,u),zC(o,u,i)),null!==r&&s0(i,u),B}function j(){let e=Qe();Za()?Wd():(e=e.parent,Gr(e,!1));const n=e;(function Hd(e){return je.skipHydrationRootTNode===e})(n)&&function zd(){je.skipHydrationRootTNode=null}(),function Jp(){je.lFrame.elementDepthCount--}();const t=xe();return t.firstCreatePass&&HM(t,n),null!=n.classesWithoutHost&&function sg(e){return!!(8&e.flags)}(n)&&gE(t,n,K(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function ag(e){return!!(16&e.flags)}(n)&&gE(t,n,K(),n.stylesWithoutHost,!1),j}function on(e,n,t,r){return B(e,n,t,r),j(),on}let Dx=(e,n,t,r,i,o)=>(ti(!0),ay(r,i,function ta(){return je.lFrame.currentNamespace}()));function Ly(e,n,t){const r=K(),i=xe(),o=e+26,s=i.firstCreatePass?function v3(e,n,t,r,i){const o=n.consts,s=En(o,r),l=Lf(n,e,8,"ng-container",s);null!==s&&O0(l,s,!0);const u=En(o,i);return Js()&&F0(n,t,l,u,a0),l.mergedAttrs=nl(l.mergedAttrs,l.attrs),null!==n.queries&&n.queries.elementStart(n,l),l}(o,i,r,n,t):i.data[o];Gr(s,!0);const l=Sx(i,r,s,e);return r[o]=l,$o()&&hy(i,r,l,s),co(l,r),Wa(s)&&(uy(i,r,s),zC(i,s,r)),null!=t&&s0(r,s),Ly}function Vy(){let e=Qe();const n=xe();return Za()?Wd():(e=e.parent,Gr(e,!1)),n.firstCreatePass&&(Xd(n,e),Zl(e)&&n.queries.elementEnd(e)),Vy}let Sx=(e,n,t,r)=>(ti(!0),e0(n[11],""));function Rr(){return K()}const vh=void 0;var w3=["en",[["a","p"],["AM","PM"],vh],[["AM","PM"],vh,vh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vh,"{1} 'at' {0}",vh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function E3(e){const n=Math.floor(Math.abs(e)),t=e.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===t?1:5}];let np={};function Hi(e){const n=function D3(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=xx(n);if(t)return t;const r=n.split("-")[0];if(t=xx(r),t)return t;if("en"===r)return w3;throw new H(701,!1)}function xx(e){return e in np||(np[e]=$e.ng&&$e.ng.common&&$e.ng.common.locales&&$e.ng.common.locales[e]),np[e]}var gn=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(gn||{});const By="en-US";let Px=By;function Yx(e,n,t){return function r(i){if(i===Function)return t;Ng(Wr(e)?Wn(e.index,n):n,5);const s=n[8];let l=Qx(n,s,t,i),u=r.__ngNextListenerFn__;for(;u;)l=Qx(n,s,u,i)&&l,u=u.__ngNextListenerFn__;return l}}function Qx(e,n,t,r){const i=Ie(null);try{return!1!==t(r)}catch(o){return function h4(e,n){const t=e[9],r=t?t.get(oa,null):null;r&&r.handleError(n)}(e,o),!1}finally{Ie(i)}}function Zx(e,n,t,r,i,o){const l=n[1],g=n[t][l.data[t].outputs[r]],y=l.firstCreatePass?jd(l):null,b=Zs(n),C=g.subscribe(o),w=b.length;b.push(o,C),y&&y.push(i,e.index,w,-(w+1))}function ht(e,n,t,r){const i=K(),o=xe(),s=Qe();return EE(o,i,i[11],s,e,n,r),ht}function EE(e,n,t,r,i,o,s){const l=Wa(r),h=e.firstCreatePass?jd(e):null,g=Zs(n);let y=!0;if(3&r.type||s){const b=zn(r,n),C=s?s(b):b,w=g.length,D=s?x=>s(pt(x[r.index])):r.index;let S=null;if(!s&&l&&(S=function f4(e,n,t,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const l=n[7],u=i[o+2];return l.length>u?l[u]:null}"string"==typeof s&&(o+=2)}return null}(e,n,i,r.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=o,S.__ngLastListenerFn__=o,y=!1;else{o=Yx(r,n,o);const x=t.listen(C,i,o);g.push(o,x),h&&h.push(i,D,w,w+1)}}else o=Yx(r,n,o);if(y){const b=r.outputs?.[i],C=r.hostDirectiveOutputs?.[i];if(C&&C.length)for(let w=0;w<C.length;w+=2)Zx(r,n,C[w],C[w+1],i,o);if(b&&b.length)for(const w of b)Zx(r,n,w,i,i,o)}}function ot(e=1){return function Qd(e){return(je.lFrame.contextLView=function tc(e,n){for(;e>0;)n=n[14],e--;return n}(e,je.lFrame.contextLView))[8]}(e)}function wE(e,n,t){return DE(e,"",n,"",t),wE}function DE(e,n,t,r,i){const o=K(),s=Gf(o,n,t,r);return s!==it&&uo(xe(),At(),o,e,s,o[11],i,!1),DE}function om(e,n,t){JM(e,n,t)}function rp(e){const n=K(),t=xe(),r=Tu();lr(r+1);const i=W0(t,r);if(e.dirty&&function qa(e){return!(4&~e[2])}(n)===!(2&~i.metadata.flags)){if(null===i.matches)e.reset([]);else{const o=nA(n,r);e.reset(o,tS),e.notifyOnChanges()}return!0}return!1}function ip(){return function z0(e,n){return e[18].queries[n].queryList}(K(),Tu())}function sm(e){return No(function Lo(){return je.lFrame.contextLView}(),26+e)}function q(e,n=""){const t=K(),r=xe(),i=e+26,o=r.firstCreatePass?Lf(r,i,1,n,null):r.data[i],s=_P(r,t,o,n,e);t[i]=s,$o()&&hy(r,t,s,o),Gr(o,!1)}let _P=(e,n,t,r,i)=>(ti(!0),function JC(e,n){return e.createText(n)}(n[11],r));function br(e){return mn("",e,""),br}function mn(e,n,t){const r=K(),i=Gf(r,e,n,t);return i!==it&&function Dc(e,n,t){const r=ko(n,e);!function NT(e,n,t){e.setValue(n,t)}(e[11],r,t)}(r,Qn(),i),mn}function fo(e,n,t){rS(n)&&(n=n());const r=K();return Xn(r,gi(),n)&&uo(xe(),At(),r,e,n,r[11],t,!1),fo}function Ko(e,n){const t=rS(e);return t&&e.set(n),t}function po(e,n){const t=K(),r=xe(),i=Qe();return EE(r,t,t[11],i,e,n),po}function IE(e,n,t,r,i){if(e=Se(e),Array.isArray(e))for(let o=0;o<e.length;o++)IE(e[o],n,t,r,i);else{const o=xe(),s=K(),l=Qe();let u=fs(e)?e:Se(e.provide);const h=Sd(e),g=1048575&l.providerIndexes,y=l.directiveStart,b=l.providerIndexes>>20;if(fs(e)||!e.multi){const C=new ac(h,i,J),w=TE(u,n,i?g:g+b,y);-1===w?(Ou(cc(l,s),o,u),SE(o,e,n.length),n.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(C),s.push(C)):(t[w]=C,s[w]=C)}else{const C=TE(u,n,g+b,y),w=TE(u,n,g,g+b),S=w>=0&&t[w];if(i&&!S||!i&&!(C>=0&&t[C])){Ou(cc(l,s),o,u);const x=function V4(e,n,t,r,i){const o=new ac(e,t,J);return o.multi=[],o.index=n,o.componentProviders=0,MP(o,i,r&&!t),o}(i?L4:F4,t.length,i,r,h);!i&&S&&(t[w].providerFactory=x),SE(o,e,n.length,0),n.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),t.push(x),s.push(x)}else SE(o,e,C>-1?C:w,MP(t[i?w:C],h,!i&&r));!i&&r&&S&&t[w].componentProviders++}}}function SE(e,n,t,r){const i=fs(n),o=function Id(e){return!!e.useClass}(n);if(i||o){const u=(o?Se(n.useClass):n).prototype.ngOnDestroy;if(u){const h=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const g=h.indexOf(t);-1===g?h.push(t,[r,u]):h[g+1].push(r,u)}else h.push(t,u)}}}function MP(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function TE(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function F4(e,n,t,r,i){return ME(this.multi,[])}function L4(e,n,t,r,i){const o=this.multi;let s;if(this.providerFactory){const l=this.providerFactory.componentProviders,u=pc(r,r[1],this.providerFactory.index,i);s=u.slice(0,l),ME(o,s);for(let h=l;h<u.length;h++)s.push(u[h])}else s=[],ME(o,s);return s}function ME(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function On(e,n=[]){return t=>{t.providersResolver=(r,i)=>function O4(e,n,t){const r=xe();if(r.firstCreatePass){const i=Kt(e);IE(t,r.data,r.blueprint,i,!0),IE(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}function PP(e,n,t,r){return function kP(e,n,t,r,i,o){const s=n+t;return Xn(e,s,i)?ul(e,s+1,o?r.call(o,i):r(i)):am(e,s+1)}(K(),ar(),e,n,t,r)}function am(e,n){const t=e[n];return t===it?void 0:t}function NP(e,n,t,r,i,o,s){const l=n+t;return function mh(e,n,t,r){const i=Xn(e,n,t);return Xn(e,n+1,r)||i}(e,l,i,o)?ul(e,l+2,s?r.call(s,i,o):r(i,o)):am(e,l+2)}function dr(e,n){const t=xe();let r;const i=e+26;t.firstCreatePass?(r=function Y4(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=Br(r.type)),l=mr(J);try{const u=Ru(!1),h=o();return Ru(u),function bu(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,K(),i,h),h}finally{mr(l)}}function hr(e,n,t,r){const i=e+26,o=K(),s=No(o,i);return function lm(e,n){return e[1].data[n].pure}(o,i)?NP(o,ar(),n,s.transform,t,r,s):s.transform(t,r)}function cm(e,n){return gy(e,n)}class T8{ngModuleFactory;componentFactories;constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let M8=(()=>{class e{compileModuleSync(t){return new Y0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=ll(Kn(t).declarations).reduce((s,l)=>{const u=Ye(l);return u&&s.push(new Gg(u)),s},[]);return new T8(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),P8=(()=>{class e{zone=X(kt);changeDetectionScheduler=X(mc);applicationRef=X(qo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kE({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new kt({...NE(),scheduleInRootZone:t}),[{provide:kt,useFactory:e},{provide:dn,multi:!0,useFactory:()=>{const r=X(P8,{optional:!0});return()=>r.initialize()}},{provide:dn,multi:!0,useFactory:()=>{const r=X(k8);return()=>{r.initialize()}}},!0===n?{provide:GI,useValue:!0}:[],{provide:oC,useValue:t??F_}]}function NE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let k8=(()=>{class e{subscription=new un;initialized=!1;zone=X(kt);pendingTasks=X(_c);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{kt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{kt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),dm=(()=>{class e{appRef=X(qo);taskService=X(_c);ngZone=X(kt);zonelessEnabled=X(dg);tracing=X(Cf,{optional:!0});disableScheduling=X(GI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new un;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(L_):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(X(oC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cC||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let r=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?YI:KI;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(L_+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const qu=new ce("",{providedIn:"root",factory:()=>X(qu,et.Optional|et.SkipSelf)||function N8(){return typeof $localize<"u"&&$localize.locale||By}()}),qy=new ce(""),j8=new ce("");function hm(e){return!e.moduleRef}let Ku=null;let fm=(()=>class e{static __NG_ELEMENT_ID__=G8})();function G8(e){return function q8(e,n,t){if(Wr(e)&&!t){const r=Wn(e.index,n);return new Fg(r,r)}return 175&e.type?new Fg(n[15],n):null}(Qe(),K(),!(16&~e))}class pR{constructor(){}supports(n){return Ty(n)}create(n){return new X8(n)}}const Z8=(e,n)=>n;class X8{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||Z8}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<mR(r,i,o)?t:r,l=mR(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const h=l-i,g=u-i;if(h!=g){for(let b=0;b<h;b++){const C=b<o.length?o[b]:o[b]=0,w=C+b;g<=w&&w<h&&(o[b]=C+1)}o[s.previousIndex]=g-h}}l!==u&&n(s,l,u)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Ty(n))throw new H(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let l=0;l<this.length;l++)o=n[l],s=this._trackByFn(l,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,l)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,l),r=!0),t=t._next}else i=0,function HH(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,l=>{s=this._trackByFn(i,l),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,l,s,i)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,i)):n=this._addAfter(new J8(t,r),o,i),n}_verifyReinsertion(n,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?n=this._reinsertAfter(o,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,o=n._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new gR),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gR),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class J8{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,t){this.item=n,this.trackById=t}}class eW{_head=null;_tail=null;add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class gR{map=new Map;put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new eW,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mR(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}function yR(){return new jE([new pR])}let jE=(()=>{class e{factories;static \u0275prov=pe({token:e,providedIn:"root",factory:yR});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||yR()),deps:[[e,new Mo,new js]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new H(901,!1)}}return e})();function oW(e){try{const{rootComponent:n,appProviders:t,platformProviders:r}=e,i=function W8(e=[]){if(Ku)return Ku;const n=function lR(e=[],n){return wn.create({name:n,providers:[{provide:lu,useValue:"platform"},{provide:qy,useValue:new Set([()=>Ku=null])},...e]})}(e);return Ku=n,function HA(){!function en(e){si=e}(()=>{throw new H(600,!1)})}(),function cR(e){const n=e.get(mC,null);Hr(e,()=>{n?.forEach(t=>t())})}(n),n}(r),o=[kE({}),{provide:mc,useExisting:dm},...t||[]];return function oR(e){const n=hm(e)?e.r3Injector:e.moduleRef.injector,t=n.get(kt);return t.run(()=>{hm(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const r=n.get(oa,null);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),hm(e)){const o=()=>n.destroy(),s=e.platformInjector.get(qy);s.add(o),n.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{const o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(qy);s.add(o),e.moduleRef.onDestroy(()=>{ky(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return function H8(e,n,t){try{const r=t();return Zg(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(r,t,()=>{const o=n.get(UA);return o.runInitializers(),o.donePromise.then(()=>{if(function M3(e){"string"==typeof e&&(Px=e.toLowerCase().replace(/_/g,"-"))}(n.get(qu,By)||By),!n.get(j8,!0))return hm(e)?n.get(qo):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(hm(e)){const u=n.get(qo);return void 0!==e.rootComponent&&u.bootstrap(e.rootComponent),u}return function U8(e,n){const t=e.injector.get(qo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>t.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new H(-403,!1);e.instance.ngDoBootstrap(t)}n.push(e)}(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}({r3Injector:new pA({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}}function sp(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function Cr(e){return function Eo(e){const n=Ie(null);try{return e()}finally{Ie(n)}}(e)}function Ic(e,n){return function Dl(e,n){const t=Object.create(Lr);t.computation=e,void 0!==n&&(t.equal=n);const r=()=>{if(Et(t),Me(t),t.value===Mn)throw t.error;return t.value};return r[bt]=t,r}(e,n?.equal)}const go=new ce("");let BR=null;function Yu(){return BR}class YW{}let zE=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>X(ZW),providedIn:"platform"})}return e})();const QW=new ce("");let ZW=(()=>{class e extends zE{_location;_history;_doc=X(go);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yu().getBaseHref(this._doc)}onPopState(t){const r=Yu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Yu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function WE(e,n){return e?n?e.endsWith("/")?n.startsWith("/")?e+n.slice(1):e+n:n.startsWith("/")?e+n:`${e}/${n}`:e:n}function jR(e){const n=e.search(/#|\?|$/);return"/"===e[n-1]?e.slice(0,n-1)+e.slice(n):e}function Sc(e){return e&&"?"!==e[0]?`?${e}`:e}let Ch=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>X(HR),providedIn:"root"})}return e})();const UR=new ce("");let HR=(()=>{class e extends Ch{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??X(go).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return WE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Sc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Sc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Sc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(Te(zE),Te(UR,8))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gm=(()=>{class e{_subject=new R;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function e5(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(jR($R(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Sc(r))}normalize(t){return e.stripTrailingSlash(function JW(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,$R(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Sc;static joinWithSlash=WE;static stripTrailingSlash=jR;static \u0275fac=function(r){return new(r||e)(Te(Ch))};static \u0275prov=pe({token:e,factory:()=>function XW(){return new gm(Te(Ch))}(),providedIn:"root"})}return e})();function $R(e){return e.replace(/\/index.html$/,"")}function zR(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}const WR="browser";function GR(e){return"server"===e}class qR{}const GE=new ce("");let KR=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(Te(GE),Te(kt))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();class YR{_doc;constructor(n){this._doc=n}manager}const tv="ng-app-id";function QR(e){for(const n of e)n.remove()}function ZR(e,n){const t=n.createElement("style");return t.textContent=e,t}function qE(e,n){const t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}let XR=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=GR(o),function r5(e,n,t,r){const i=e.head?.querySelectorAll(`style[${tv}="${n}"],link[${tv}="${n}"]`);if(i)for(const o of i)o.removeAttribute(tv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(const i of t)this.addUsage(i,this.inline,ZR);r?.forEach(i=>this.addUsage(i,this.external,qE))}removeStyles(t,r){for(const i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){const o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){const i=r.get(t);i&&(i.usage--,i.usage<=0&&(QR(i.elements),r.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])QR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(t,ZR(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(t,qE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(tv,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(Te(go),Te(yc),Te(ES,8),Te(H_))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();const KE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},YE=/%COMP%/g,c5=new ce("",{providedIn:"root",factory:()=>!0});function ek(e,n){return n.map(t=>t.replace(YE,e))}let QE=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,l,u,h=null,g=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=l,this.ngZone=u,this.nonce=h,this.tracingService=g,this.platformIsServer=GR(l),this.defaultRenderer=new ZE(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Es.ShadowDom&&(r={...r,encapsulation:Es.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof nk?i.applyToHost(t):i instanceof XE&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,l=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer,b=this.tracingService;switch(r.encapsulation){case Es.Emulated:o=new nk(u,h,r,this.appId,g,s,l,y,b);break;case Es.ShadowDom:return new f5(u,h,t,r,s,l,this.nonce,y,b);default:o=new XE(u,h,r,g,s,l,y,b)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(Te(KR),Te(XR),Te(yc),Te(c5),Te(go),Te(H_),Te(kt),Te(ES),Te(Cf,8))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();class ZE{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,i,o){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(KE[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(tk(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(tk(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const o=KE[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=KE[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(ju.DashCase|ju.Important)?n.style.setProperty(t,r,i&ju.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&ju.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){null!=n&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,i){if("string"==typeof n&&!(n=Yu().getGlobalEventTarget(this.doc,n)))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,t,o)),this.eventManager.addEventListener(n,t,o,i)}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function tk(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class f5 extends ZE{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,r,i,o,s,l,u,h){super(n,o,s,u,h),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=i.styles;g=ek(i.id,g);for(const b of g){const C=document.createElement("style");l&&C.setAttribute("nonce",l),C.textContent=b,this.shadowRoot.appendChild(C)}const y=i.getExternalStyles?.();if(y)for(const b of y){const C=qE(b,o);l&&C.setAttribute("nonce",l),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class XE extends ZE{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,r,i,o,s,l,u,h){super(n,o,s,l,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let g=r.styles;this.styles=h?ek(h,g):g,this.styleUrls=r.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class nk extends XE{contentAttr;hostAttr;constructor(n,t,r,i,o,s,l,u,h){const g=i+"-"+r.id;super(n,t,r,o,s,l,u,h,g),this.contentAttr=function u5(e){return"_ngcontent-%COMP%".replace(YE,e)}(g),this.hostAttr=function d5(e){return"_nghost-%COMP%".replace(YE,e)}(g)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class JE extends YW{supportsDOMEvents=!0;static makeCurrent(){!function KW(e){BR??=e}(new JE)}onAndCancel(n,t,r,i){return n.addEventListener(t,r,i),()=>{n.removeEventListener(t,r,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function p5(){return mm=mm||document.head.querySelector("base"),mm?mm.getAttribute("href"):null}();return null==t?null:function g5(e){return new URL(e,document.baseURI).pathname}(t)}resetBaseElement(){mm=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return zR(document.cookie,n)}}let mm=null,_5=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();const rk=["alt","control","meta","shift"],v5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b5={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};function ik(e){return{appProviders:[...M5,...e?.providers??[]],platformProviders:S5}}const S5=[{provide:H_,useValue:WR},{provide:mC,useValue:function w5(){JE.makeCurrent()},multi:!0},{provide:go,useFactory:function I5(){return function aV(e){gC=e}(document),document}}],M5=[{provide:lu,useValue:"root"},{provide:oa,useFactory:function D5(){return new oa}},{provide:GE,useClass:(()=>{class e extends YR{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(Te(go))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})(),multi:!0,deps:[go]},{provide:GE,useClass:(()=>{class e extends YR{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i,o){const s=e.parseEventName(r),l=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yu().onAndCancel(t,s.domEventName,l,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),s="code."),rk.forEach(h=>{const g=r.indexOf(h);g>-1&&(r.splice(g,1),s+=h+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=v5[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rk.forEach(s=>{s!==i&&(0,b5[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(r){return new(r||e)(Te(go))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})(),multi:!0,deps:[go]},QE,XR,KR,{provide:wy,useExisting:QE},{provide:qR,useClass:_5},[]];let A5=(()=>{class e{static \u0275prov=pe({token:e,providedIn:"root",factory:()=>new x5(X(go),window)})}return e})();class x5{document;window;offset=()=>[0,0];constructor(n,t){this.document=n,this.window=t}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){const t=function P5(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}let o6=(()=>{class e extends Ch{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=WE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Sc(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Sc(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(Te(zE),Te(UR,8))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();var ov=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(ov||{}),zi=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(zi||{}),an=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(an||{}),Yo=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(Yo||{});function sv(e,n){return Is(Hi(e)[gn.DateFormat],n)}function av(e,n){return Is(Hi(e)[gn.TimeFormat],n)}function lv(e,n){return Is(Hi(e)[gn.DateTimeFormat],n)}function Ds(e,n){const t=Hi(e),r=t[gn.NumberSymbols][n];if(typeof r>"u"){if(12===n)return t[gn.NumberSymbols][0];if(13===n)return t[gn.NumberSymbols][1]}return r}function mk(e){if(!e[gn.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[gn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Is(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new Error("Locale data API: locale data undefined")}function iw(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const v6=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,cv={},b6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function C6(e,n,t,r){let i=function x6(e){if(vk(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,o=1,s=1]=e.split("-").map(l=>+l);return uv(i,o-1,s)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let r;if(r=e.match(v6))return function P6(e){const n=new Date(0);let t=0,r=0;const i=e[8]?n.setUTCFullYear:n.setFullYear,o=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const s=Number(e[4]||0)-t,l=Number(e[5]||0)-r,u=Number(e[6]||0),h=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return o.call(n,s,l,u,h),n}(r)}const n=new Date(e);if(!vk(n))throw new Error(`Unable to convert "${e}" into a date`);return n}(e);n=Tc(t,n)||n;let l,s=[];for(;n;){if(l=b6.exec(n),!l){s.push(n);break}{s=s.concat(l.slice(1));const g=s.pop();if(!g)break;n=g}}let u=i.getTimezoneOffset();r&&(u=yk(r,u),i=function A6(e,n){const i=e.getTimezoneOffset();return function M6(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,-1*(yk(n,i)-i))}(i,r));let h="";return s.forEach(g=>{const y=function T6(e){if(sw[e])return sw[e];let n;switch(e){case"G":case"GG":case"GGG":n=_n(3,an.Abbreviated);break;case"GGGG":n=_n(3,an.Wide);break;case"GGGGG":n=_n(3,an.Narrow);break;case"y":n=wr(0,1,0,!1,!0);break;case"yy":n=wr(0,2,0,!0,!0);break;case"yyy":n=wr(0,3,0,!1,!0);break;case"yyyy":n=wr(0,4,0,!1,!0);break;case"Y":n=pv(1);break;case"YY":n=pv(2,!0);break;case"YYY":n=pv(3);break;case"YYYY":n=pv(4);break;case"M":case"L":n=wr(1,1,1);break;case"MM":case"LL":n=wr(1,2,1);break;case"MMM":n=_n(2,an.Abbreviated);break;case"MMMM":n=_n(2,an.Wide);break;case"MMMMM":n=_n(2,an.Narrow);break;case"LLL":n=_n(2,an.Abbreviated,zi.Standalone);break;case"LLLL":n=_n(2,an.Wide,zi.Standalone);break;case"LLLLL":n=_n(2,an.Narrow,zi.Standalone);break;case"w":n=ow(1);break;case"ww":n=ow(2);break;case"W":n=ow(1,!0);break;case"d":n=wr(2,1);break;case"dd":n=wr(2,2);break;case"c":case"cc":n=wr(7,1);break;case"ccc":n=_n(1,an.Abbreviated,zi.Standalone);break;case"cccc":n=_n(1,an.Wide,zi.Standalone);break;case"ccccc":n=_n(1,an.Narrow,zi.Standalone);break;case"cccccc":n=_n(1,an.Short,zi.Standalone);break;case"E":case"EE":case"EEE":n=_n(1,an.Abbreviated);break;case"EEEE":n=_n(1,an.Wide);break;case"EEEEE":n=_n(1,an.Narrow);break;case"EEEEEE":n=_n(1,an.Short);break;case"a":case"aa":case"aaa":n=_n(0,an.Abbreviated);break;case"aaaa":n=_n(0,an.Wide);break;case"aaaaa":n=_n(0,an.Narrow);break;case"b":case"bb":case"bbb":n=_n(0,an.Abbreviated,zi.Standalone,!0);break;case"bbbb":n=_n(0,an.Wide,zi.Standalone,!0);break;case"bbbbb":n=_n(0,an.Narrow,zi.Standalone,!0);break;case"B":case"BB":case"BBB":n=_n(0,an.Abbreviated,zi.Format,!0);break;case"BBBB":n=_n(0,an.Wide,zi.Format,!0);break;case"BBBBB":n=_n(0,an.Narrow,zi.Format,!0);break;case"h":n=wr(3,1,-12);break;case"hh":n=wr(3,2,-12);break;case"H":n=wr(3,1);break;case"HH":n=wr(3,2);break;case"m":n=wr(4,1);break;case"mm":n=wr(4,2);break;case"s":n=wr(5,1);break;case"ss":n=wr(5,2);break;case"S":n=wr(6,1);break;case"SS":n=wr(6,2);break;case"SSS":n=wr(6,3);break;case"Z":case"ZZ":case"ZZZ":n=hv(0);break;case"ZZZZZ":n=hv(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=hv(1);break;case"OOOO":case"ZZZZ":case"zzzz":n=hv(2);break;default:return null}return sw[e]=n,n}(g);h+=y?y(i,t,u):"''"===g?"'":g.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}function uv(e,n,t){const r=new Date(0);return r.setFullYear(e,n,t),r.setHours(0,0,0),r}function Tc(e,n){const t=function a6(e){return Hi(e)[gn.LocaleId]}(e);if(cv[t]??={},cv[t][n])return cv[t][n];let r="";switch(n){case"shortDate":r=sv(e,Yo.Short);break;case"mediumDate":r=sv(e,Yo.Medium);break;case"longDate":r=sv(e,Yo.Long);break;case"fullDate":r=sv(e,Yo.Full);break;case"shortTime":r=av(e,Yo.Short);break;case"mediumTime":r=av(e,Yo.Medium);break;case"longTime":r=av(e,Yo.Long);break;case"fullTime":r=av(e,Yo.Full);break;case"short":const i=Tc(e,"shortTime"),o=Tc(e,"shortDate");r=dv(lv(e,Yo.Short),[i,o]);break;case"medium":const s=Tc(e,"mediumTime"),l=Tc(e,"mediumDate");r=dv(lv(e,Yo.Medium),[s,l]);break;case"long":const u=Tc(e,"longTime"),h=Tc(e,"longDate");r=dv(lv(e,Yo.Long),[u,h]);break;case"full":const g=Tc(e,"fullTime"),y=Tc(e,"fullDate");r=dv(lv(e,Yo.Full),[g,y])}return r&&(cv[t][n]=r),r}function dv(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,r){return null!=n&&r in n?n[r]:t})),e}function da(e,n,t="-",r,i){let o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=t));let s=String(e);for(;s.length<n;)s="0"+s;return r&&(s=s.slice(s.length-n)),o+s}function wr(e,n,t=0,r=!1,i=!1){return function(o,s){let l=function w6(e,n){switch(e){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();case 3:return n.getHours();case 4:return n.getMinutes();case 5:return n.getSeconds();case 6:return n.getMilliseconds();case 7:return n.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,o);if((t>0||l>-t)&&(l+=t),3===e)0===l&&-12===t&&(l=12);else if(6===e)return function E6(e,n){return da(e,3).substring(0,n)}(l,n);const u=Ds(s,5);return da(l,n,u,r,i)}}function _n(e,n,t=zi.Format,r=!1){return function(i,o){return function D6(e,n,t,r,i,o){switch(t){case 2:return function u6(e,n,t){const r=Hi(e),o=Is([r[gn.MonthsFormat],r[gn.MonthsStandalone]],n);return Is(o,t)}(n,i,r)[e.getMonth()];case 1:return function c6(e,n,t){const r=Hi(e),o=Is([r[gn.DaysFormat],r[gn.DaysStandalone]],n);return Is(o,t)}(n,i,r)[e.getDay()];case 0:const s=e.getHours(),l=e.getMinutes();if(o){const h=function p6(e){const n=Hi(e);return mk(n),(n[gn.ExtraData][2]||[]).map(r=>"string"==typeof r?iw(r):[iw(r[0]),iw(r[1])])}(n),g=function g6(e,n,t){const r=Hi(e);mk(r);const o=Is([r[gn.ExtraData][0],r[gn.ExtraData][1]],n)||[];return Is(o,t)||[]}(n,i,r),y=h.findIndex(b=>{if(Array.isArray(b)){const[C,w]=b,D=s>=C.hours&&l>=C.minutes,S=s<w.hours||s===w.hours&&l<w.minutes;if(C.hours<w.hours){if(D&&S)return!0}else if(D||S)return!0}else if(b.hours===s&&b.minutes===l)return!0;return!1});if(-1!==y)return g[y]}return function l6(e,n,t){const r=Hi(e),o=Is([r[gn.DayPeriodsFormat],r[gn.DayPeriodsStandalone]],n);return Is(o,t)}(n,i,r)[s<12?0:1];case 3:return function d6(e,n){return Is(Hi(e)[gn.Eras],n)}(n,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,e,n,t,r)}}function hv(e){return function(n,t,r){const i=-1*r,o=Ds(t,5),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case 0:return(i>=0?"+":"")+da(s,2,o)+da(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+da(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+da(s,2,o)+":"+da(Math.abs(i%60),2,o);case 3:return 0===r?"Z":(i>=0?"+":"")+da(s,2,o)+":"+da(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}const I6=0,fv=4;function _k(e){const n=e.getDay(),t=0===n?-3:fv-n;return uv(e.getFullYear(),e.getMonth(),e.getDate()+t)}function ow(e,n=!1){return function(t,r){let i;if(n){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=_k(t),s=function S6(e){const n=uv(e,I6,1).getDay();return uv(e,0,1+(n<=fv?fv:fv+7)-n)}(o.getFullYear()),l=o.getTime()-s.getTime();i=1+Math.round(l/6048e5)}return da(i,e,Ds(r,5))}}function pv(e,n=!1){return function(t,r){return da(_k(t).getFullYear(),e,Ds(r,5),n)}}const sw={};function yk(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function vk(e){return e instanceof Date&&!isNaN(e.valueOf())}const R6=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function uw(e){const n=parseInt(e);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+e);return n}const hw=/\s+/,wk=[];let Dk=(()=>{class e{_ngEl;_renderer;initialClasses=wk;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=null!=t?t.trim().split(hw):wk}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(hw):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(hw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||e)(J(Go),J(wc))};static \u0275dir=tt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return e})();class z6{$implicit;ngForOf;index;count;constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Eh=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new z6(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const l=r.get(o);r.move(l,s),Sk(l,i)}});for(let i=0,o=r.length;i<o;i++){const l=r.get(i).context;l.index=i,l.count=o,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Sk(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||e)(J(aa),J(Ec),J(jE))};static \u0275dir=tt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function Sk(e,n){e.context.$implicit=n.item}let Qo=(()=>{class e{_viewContainer;_context=new W6;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Tk(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Tk(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||e)(J(aa),J(Ec))};static \u0275dir=tt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})();class W6{$implicit=null;ngIf=null}function Tk(e,n){if(e&&!e.createEmbeddedView)throw new H(2020,!1)}function ha(e,n){return new H(2100,!1)}const iG=new ce(""),oG=new ce("");let gw=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return C6(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw ha()}}static \u0275fac=function(r){return new(r||e)(J(qu,16),J(iG,24),J(oG,24))};static \u0275pipe=yi({name:"date",type:e,pure:!0})}return e})(),lp=(()=>{class e{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!function mw(e){return!(null==e||""===e||e!=e)}(t))return null;i||=this._locale;try{return function V6(e,n,t){return function lw(e,n,t,r,i,o,s=!1){let l="",u=!1;if(isFinite(e)){let h=function j6(e){let r,i,o,s,l,n=Math.abs(e)+"",t=0;for((i=n.indexOf("."))>-1&&(n=n.replace(".","")),(o=n.search(/e/i))>0?(i<0&&(i=o),i+=+n.slice(o+1),n=n.substring(0,o)):i<0&&(i=n.length),o=0;"0"===n.charAt(o);o++);if(o===(l=n.length))r=[0],i=1;else{for(l--;"0"===n.charAt(l);)l--;for(i-=o,r=[],s=0;o<=l;o++,s++)r[s]=Number(n.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(e);s&&(h=function B6(e){if(0===e.digits[0])return e;const n=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===n?e.digits.push(0,0):1===n&&e.digits.push(0),e.integerLen+=2),e}(h));let g=n.minInt,y=n.minFrac,b=n.maxFrac;if(o){const A=o.match(R6);if(null===A)throw new Error(`${o} is not a valid digit info`);const L=A[1],G=A[3],W=A[5];null!=L&&(g=uw(L)),null!=G&&(y=uw(G)),null!=W?b=uw(W):null!=G&&y>b&&(b=y)}!function U6(e,n,t){if(n>t)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${t}).`);let r=e.digits,i=r.length-e.integerLen;const o=Math.min(Math.max(n,i),t);let s=o+e.integerLen,l=r[s];if(s>0){r.splice(Math.max(e.integerLen,s));for(let y=s;y<r.length;y++)r[y]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let y=1;y<s;y++)r[y]=0}if(l>=5)if(s-1<0){for(let y=0;y>s;y--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const h=n+e.integerLen,g=r.reduceRight(function(y,b,C,w){return w[C]=(b+=y)<10?b:b-10,u&&(0===w[C]&&C>=h?w.pop():u=!1),b>=10?1:0},0);g&&(r.unshift(g),e.integerLen++)}(h,y,b);let C=h.digits,w=h.integerLen;const D=h.exponent;let S=[];for(u=C.every(A=>!A);w<g;w++)C.unshift(0);for(;w<0;w++)C.unshift(0);w>0?S=C.splice(w,C.length):(S=C,C=[0]);const x=[];for(C.length>=n.lgSize&&x.unshift(C.splice(-n.lgSize,C.length).join(""));C.length>n.gSize;)x.unshift(C.splice(-n.gSize,C.length).join(""));C.length&&x.unshift(C.join("")),l=x.join(Ds(t,r)),S.length&&(l+=Ds(t,i)+S.join("")),D&&(l+=Ds(t,6)+"+"+D)}else l=Ds(t,9);return l=e<0&&!u?n.negPre+l+n.negSuf:n.posPre+l+n.posSuf,l}(e,function cw(e,n="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],l=s[0],u=s[1]||"";t.posPre=l.substring(0,l.indexOf("#"));for(let g=0;g<u.length;g++){const y=u.charAt(g);"0"===y?t.minFrac=t.maxFrac=g+1:"#"===y?t.maxFrac=g+1:t.posSuf+=y}const h=l.split(",");if(t.gSize=h[1]?h[1].length:0,t.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){const g=i.length-t.posPre.length-t.posSuf.length,y=o.indexOf("#");t.negPre=o.substring(0,y).replace(/'/g,""),t.negSuf=o.slice(y+g).replace(/'/g,"")}else t.negPre=n+t.posPre,t.negSuf=t.posSuf;return t}(function rw(e,n){return Hi(e)[gn.NumberFormats][n]}(n,ov.Decimal),Ds(n,5)),n,1,0,t)}(function _w(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(`${e} is not a number`);return e}(t),i,r)}catch(o){throw ha()}}static \u0275fac=function(r){return new(r||e)(J(qu,16))};static \u0275pipe=yi({name:"number",type:e,pure:!0})}return e})();let Zo=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$u({type:e});static \u0275inj=Je({})}return e})();function Qu(e){return this instanceof Qu?(this.v=e,this):new Qu(e)}function kk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function Cw(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(s){return new Promise(function(l,u){!function i(o,s,l,u){Promise.resolve(u).then(function(h){o({value:h,done:l})},s)}(l,u,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Nk=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ok(e){return Ke(e?.then)}function Fk(e){return Ke(e[Ri])}function Lk(e){return Symbol.asyncIterator&&Ke(e?.[Symbol.asyncIterator])}function Vk(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bk=function UG(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function jk(e){return Ke(e?.[Bk])}function Uk(e){return function Rk(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",function s(C){return function(w){return Promise.resolve(w).then(C,y)}}),i[Symbol.asyncIterator]=function(){return this},i;function l(C,w){r[C]&&(i[C]=function(D){return new Promise(function(S,x){o.push([C,D,S,x])>1||u(C,D)})},w&&(i[C]=w(i[C])))}function u(C,w){try{!function h(C){C.value instanceof Qu?Promise.resolve(C.value.v).then(g,y):b(o[0][2],C)}(r[C](w))}catch(D){b(o[0][3],D)}}function g(C){u("next",C)}function y(C){u("throw",C)}function b(C,w){C(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Qu(t.read());if(i)return yield Qu(void 0);yield yield Qu(r)}}finally{t.releaseLock()}})}function Hk(e){return Ke(e?.getReader)}function pl(e){if(e instanceof Rt)return e;if(null!=e){if(Fk(e))return function HG(e){return new Rt(n=>{const t=e[Ri]();if(Ke(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Nk(e))return function $G(e){return new Rt(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Ok(e))return function zG(e){return new Rt(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Qr)})}(e);if(Lk(e))return $k(e);if(jk(e))return function WG(e){return new Rt(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(Hk(e))return function GG(e){return $k(Uk(e))}(e)}throw Vk(e)}function $k(e){return new Rt(n=>{(function qG(e,n){var t,r,i,o;return function xk(e,n,t,r){return new(t||(t=Promise))(function(o,s){function l(g){try{h(r.next(g))}catch(y){s(y)}}function u(g){try{h(r.throw(g))}catch(y){s(y)}}function h(g){g.done?o(g.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(g.value).then(l,u)}h((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=kk(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Mc(e,n,t,r=0,i=!1){const o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function zk(e,n=0){return z((t,r)=>{t.subscribe(he(r,i=>Mc(r,e,()=>r.next(i),n),()=>Mc(r,e,()=>r.complete(),n),i=>Mc(r,e,()=>r.error(i),n)))})}function Wk(e,n=0){return z((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function Gk(e,n){if(!e)throw new Error("Iterable cannot be null");return new Rt(t=>{Mc(t,n,()=>{const r=e[Symbol.asyncIterator]();Mc(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function kr(e,n){return n?function JG(e,n){if(null!=e){if(Fk(e))return function KG(e,n){return pl(e).pipe(Wk(n),zk(n))}(e,n);if(Nk(e))return function QG(e,n){return new Rt(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(Ok(e))return function YG(e,n){return pl(e).pipe(Wk(n),zk(n))}(e,n);if(Lk(e))return Gk(e,n);if(jk(e))return function ZG(e,n){return new Rt(t=>{let r;return Mc(t,n,()=>{r=e[Bk](),Mc(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Ke(r?.return)&&r.return()})}(e,n);if(Hk(e))return function XG(e,n){return Gk(Uk(e),n)}(e,n)}throw Vk(e)}(e,n):pl(e)}function ww(e){return e[e.length-1]}function qk(e){return Ke(ww(e))?e.pop():void 0}function mv(e){return function eq(e){return e&&Ke(e.schedule)}(ww(e))?e.pop():void 0}function Ze(...e){return kr(e,mv(e))}const{isArray:tq}=Array,{getPrototypeOf:nq,prototype:rq,keys:iq}=Object;function Kk(e){if(1===e.length){const n=e[0];if(tq(n))return{args:n,keys:null};if(function oq(e){return e&&"object"==typeof e&&nq(e)===rq}(n)){const t=iq(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:sq}=Array;function Yk(e){return Ce(n=>function aq(e,n){return sq(n)?e(...n):e(n)}(e,n))}function Qk(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function Dw(...e){const n=mv(e),t=qk(e),{args:r,keys:i}=Kk(e);if(0===r.length)return kr([],n);const o=new Rt(function lq(e,n,t=ki){return r=>{Zk(n,()=>{const{length:i}=e,o=new Array(i);let s=i,l=i;for(let u=0;u<i;u++)Zk(n,()=>{const h=kr(e[u],n);let g=!1;h.subscribe(he(r,y=>{o[u]=y,g||(g=!0,l--),l||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,i?s=>Qk(i,s):ki));return t?o.pipe(Yk(t)):o}function Zk(e,n,t){e?Mc(t,e,n):n()}const _v=Yr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function vi(e,n,t=1/0){return Ke(n)?vi((r,i)=>Ce((o,s)=>n(r,o,i,s))(pl(e(r,i))),t):("number"==typeof n&&(t=n),z((r,i)=>function cq(e,n,t,r,i,o,s,l){const u=[];let h=0,g=0,y=!1;const b=()=>{y&&!u.length&&!h&&n.complete()},C=D=>h<r?w(D):u.push(D),w=D=>{o&&n.next(D),h++;let S=!1;pl(t(D,g++)).subscribe(he(n,x=>{i?.(x),o?C(x):n.next(x)},()=>{S=!0},void 0,()=>{if(S)try{for(h--;u.length&&h<r;){const x=u.shift();s?Mc(n,s,()=>w(x)):w(x)}b()}catch(x){n.error(x)}}))};return e.subscribe(he(n,C,()=>{y=!0,b()})),()=>{l?.()}}(r,i,e,t)))}function Cm(e=1/0){return vi(ki,e)}function Iw(...e){return function uq(){return Cm(1)}()(kr(e,mv(e)))}function Xk(e){return new Rt(n=>{pl(e()).subscribe(n)})}function yv(e,n){const t=Ke(e)?e:()=>e,r=i=>i.error(t());return new Rt(n?i=>n.schedule(r,0,i):r)}const fa=new Rt(e=>e.complete());function Sw(){return z((e,n)=>{let t=null;e._refCount++;const r=he(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class Jk extends Rt{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ee(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new un;const t=this.getSubject();n.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=un.EMPTY)}return n}refCount(){return Sw()(this)}}function pa(e,n){return z((t,r)=>{let i=null,o=0,s=!1;const l=()=>s&&!i&&r.complete();t.subscribe(he(r,u=>{i?.unsubscribe();let h=0;const g=o++;pl(e(u,g)).subscribe(i=he(r,y=>r.next(n?n(u,y,g,h++):y),()=>{i=null,l()}))},()=>{s=!0,l()}))})}function cp(e){return e<=0?()=>fa:z((n,t)=>{let r=0;n.subscribe(he(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Ac(e,n){return z((t,r)=>{let i=0;t.subscribe(he(r,o=>e.call(n,o,i++)&&r.next(o)))})}function vv(e){return z((n,t)=>{let r=!1;n.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function eN(e=fq){return z((n,t)=>{let r=!1;n.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function fq(){return new _v}function wh(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ac((i,o)=>e(i,o,r)):ki,cp(1),t?vv(n):eN(()=>new _v))}function up(e,n){return Ke(n)?vi(e,n,1):vi(e,1)}function Wi(e,n,t){const r=Ke(e)||n||t?{next:e,error:n,complete:t}:e;return r?z((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let l=!0;i.subscribe(he(o,u=>{var h;null===(h=r.next)||void 0===h||h.call(r,u),o.next(u)},()=>{var u;l=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var h;l=!1,null===(h=r.error)||void 0===h||h.call(r,u),o.error(u)},()=>{var u,h;l&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):ki}function dp(e){return z((n,t)=>{let o,r=null,i=!1;r=n.subscribe(he(t,void 0,void 0,s=>{o=pl(e(s,dp(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Tw(e){return e<=0?()=>fa:z((n,t)=>{let r=[];n.subscribe(he(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Em(e){return z((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}let yq=(()=>{class e{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||e)(Te(go))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const mt="primary",Dm=Symbol("RouteTitle");class Eq{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function hp(e){return new Eq(e)}function wq(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],l=e[o];if(":"===s[0])i[s.substring(1)]=l;else if(s!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function gl(e,n){const t=e?Mw(e):void 0,r=n?Mw(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!rN(e[i],n[i]))return!1;return!0}function Mw(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function rN(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}return e===n}function iN(e){return e.length>0?e[e.length-1]:null}function Xu(e){return function pG(e){return!!e&&(e instanceof Rt||Ke(e.lift)&&Ke(e.subscribe))}(e)?e:Zg(e)?kr(Promise.resolve(e)):Ze(e)}const Iq={exact:function aN(e,n,t){if(!Ih(e.segments,n.segments)||!bv(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!aN(e.children[r],n.children[r],t))return!1;return!0},subset:lN},oN={exact:function Sq(e,n){return gl(e,n)},subset:function Tq(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>rN(e[t],n[t]))},ignored:()=>!0};function sN(e,n,t){return Iq[t.paths](e.root,n.root,t.matrixParams)&&oN[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function lN(e,n,t){return cN(e,n,n.segments,t)}function cN(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Ih(i,t)||n.hasChildren()||!bv(i,t,r))}if(e.segments.length===t.length){if(!Ih(e.segments,t)||!bv(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!lN(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!!(Ih(e.segments,i)&&bv(e.segments,i,r)&&e.children[mt])&&cN(e.children[mt],n,o,r)}}function bv(e,n,t){return n.every((r,i)=>oN[t](e[i].parameters,r.parameters))}class Dh{root;queryParams;fragment;_queryParamMap;constructor(n=new Qt([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=hp(this.queryParams),this._queryParamMap}toString(){return xq.serialize(this)}}class Qt{segments;children;parent=null;constructor(n,t){this.segments=n,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ev(this)}}class Im{path;parameters;_parameterMap;constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=hp(this.parameters),this._parameterMap}toString(){return hN(this)}}function Ih(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let Sm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>new Cv,providedIn:"root"})}return e})();class Cv{parse(n){const t=new Uq(n);return new Dh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Tm(n.root,!0)}`,r=function kq(e){const n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${wv(t)}=${wv(i)}`).join("&"):`${wv(t)}=${wv(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function Pq(e){return encodeURI(e)}(n.fragment)}`:""}`}}const xq=new Cv;function Ev(e){return e.segments.map(n=>hN(n)).join("/")}function Tm(e,n){if(!e.hasChildren())return Ev(e);if(n){const t=e.children[mt]?Tm(e.children[mt],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==mt&&r.push(`${i}:${Tm(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Aq(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===mt&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==mt&&(t=t.concat(n(i,r)))}),t}(e,(r,i)=>i===mt?[Tm(e.children[mt],!1)]:[`${i}:${Tm(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[mt]?`${Ev(e)}/${t[0]}`:`${Ev(e)}/(${t.join("//")})`}}function uN(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wv(e){return uN(e).replace(/%3B/gi,";")}function Aw(e){return uN(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dv(e){return decodeURIComponent(e)}function dN(e){return Dv(e.replace(/\+/g,"%20"))}function hN(e){return`${Aw(e.path)}${function Rq(e){return Object.entries(e).map(([n,t])=>`;${Aw(n)}=${Aw(t)}`).join("")}(e.parameters)}`}const Nq=/^[^\/()?;#]+/;function xw(e){const n=e.match(Nq);return n?n[0]:""}const Oq=/^[^\/()?;=#]+/,Lq=/^[^=?&#]+/,Bq=/^[^&#]+/;class Uq{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[mt]=new Qt(n,t)),r}parseSegment(){const n=xw(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(n),new Im(Dv(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function Fq(e){const n=e.match(Oq);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=xw(this.remaining);i&&(r=i,this.capture(r))}n[Dv(t)]=Dv(r)}parseQueryParam(n){const t=function Vq(e){const n=e.match(Lq);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function jq(e){const n=e.match(Bq);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=dN(t),o=dN(r);if(n.hasOwnProperty(i)){let s=n[i];Array.isArray(s)||(s=[s],n[i]=s),s.push(o)}else n[i]=o}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xw(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=mt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[mt]:new Qt([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new H(4011,!1)}}function fN(e){return e.segments.length>0?new Qt([],{[mt]:e}):e}function pN(e){const n={};for(const[r,i]of Object.entries(e.children)){const o=pN(i);if(r===mt&&0===o.segments.length&&o.hasChildren())for(const[s,l]of Object.entries(o.children))n[s]=l;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}return function Hq(e){if(1===e.numberOfChildren&&e.children[mt]){const n=e.children[mt];return new Qt(e.segments.concat(n.segments),n.children)}return e}(new Qt(e.segments,n))}function Sh(e){return e instanceof Dh}function gN(e){let n;const i=fN(function t(o){const s={};for(const u of o.children){const h=t(u);s[u.outlet]=h}const l=new Qt(o.url,s);return o===e&&(n=l),l}(e.root));return n??i}function mN(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(0===n.length)return Pw(i,i,i,t,r);const o=function zq(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new yN(!0,0,e);let n=0,t=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const l={};return Object.entries(o.outlets).forEach(([u,h])=>{l[u]="string"==typeof h?h.split("/"):h}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?t=!0:".."===l?n++:""!=l&&i.push(l))}),i):[...i,o]},[]);return new yN(t,n,r)}(n);if(o.toRoot())return Pw(i,i,new Qt([],{}),t,r);const s=function Wq(e,n,t){if(e.isAbsolute)return new Sv(n,!0,0);if(!t)return new Sv(n,!1,NaN);if(null===t.parent)return new Sv(t,!0,0);const r=Iv(e.commands[0])?0:1;return function Gq(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Sv(r,!1,i-o)}(t,t.segments.length-1+r,e.numberOfDoubleDots)}(o,i,e),l=s.processChildren?Am(s.segmentGroup,s.index,o.commands):vN(s.segmentGroup,s.index,o.commands);return Pw(i,s.segmentGroup,l,t,r)}function Iv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Mm(e){return"object"==typeof e&&null!=e&&e.outlets}function Pw(e,n,t,r,i){let s,o={};r&&Object.entries(r).forEach(([u,h])=>{o[u]=Array.isArray(h)?h.map(g=>`${g}`):`${h}`}),s=e===n?t:_N(e,n,t);const l=fN(pN(s));return new Dh(l,o,i)}function _N(e,n,t){const r={};return Object.entries(e.children).forEach(([i,o])=>{r[i]=o===n?t:_N(o,n,t)}),new Qt(e.segments,r)}class yN{isAbsolute;numberOfDoubleDots;commands;constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Iv(r[0]))throw new H(4003,!1);const i=r.find(Mm);if(i&&i!==iN(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sv{segmentGroup;processChildren;index;constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function vN(e,n,t){if(e??=new Qt([],{}),0===e.segments.length&&e.hasChildren())return Am(e,n,t);const r=function Kq(e,n,t){let r=0,i=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;const s=e.segments[i],l=t[r];if(Mm(l))break;const u=`${l}`,h=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&h&&"object"==typeof h&&void 0===h.outlets){if(!CN(u,h,s))return o;r+=2}else{if(!CN(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new Qt(e.segments.slice(0,r.pathIndex),{});return o.children[mt]=new Qt(e.segments.slice(r.pathIndex),e.children),Am(o,0,i)}return r.match&&0===i.length?new Qt(e.segments,{}):r.match&&!e.hasChildren()?Rw(e,n,t):r.match?Am(e,0,i):Rw(e,n,t)}function Am(e,n,t){if(0===t.length)return new Qt(e.segments,{});{const r=function qq(e){return Mm(e[0])?e[0].outlets:{[mt]:e}}(t),i={};if(Object.keys(r).some(o=>o!==mt)&&e.children[mt]&&1===e.numberOfChildren&&0===e.children[mt].segments.length){const o=Am(e.children[mt],n,t);return new Qt(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=vN(e.children[o],n,s))}),Object.entries(e.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new Qt(e.segments,i)}}function Rw(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const o=t[i];if(Mm(o)){const u=Yq(o.outlets);return new Qt(r,u)}if(0===i&&Iv(t[0])){r.push(new Im(e.segments[n].path,bN(t[0]))),i++;continue}const s=Mm(o)?o.outlets[mt]:`${o}`,l=i<t.length-1?t[i+1]:null;s&&l&&Iv(l)?(r.push(new Im(s,bN(l))),i+=2):(r.push(new Im(s,{})),i++)}return new Qt(r,{})}function Yq(e){const n={};return Object.entries(e).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[t]=Rw(new Qt([],{}),0,r))}),n}function bN(e){const n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function CN(e,n,t){return e==t.path&&gl(n,t.parameters)}const Tv="imperative";var xt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(xt||{});class ml{id;url;constructor(n,t){this.id=n,this.url=t}}class Mv extends ml{type=xt.NavigationStart;navigationTrigger;restoredState;constructor(n,t,r="imperative",i=null){super(n,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xc extends ml{urlAfterRedirects;type=xt.NavigationEnd;constructor(n,t,r){super(n,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Xo=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Xo||{}),Av=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Av||{});class Th extends ml{reason;code;type=xt.NavigationCancel;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fp extends ml{reason;code;type=xt.NavigationSkipped;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}}class kw extends ml{error;target;type=xt.NavigationError;constructor(n,t,r,i){super(n,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class EN extends ml{urlAfterRedirects;state;type=xt.RoutesRecognized;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qq extends ml{urlAfterRedirects;state;type=xt.GuardsCheckStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zq extends ml{urlAfterRedirects;state;shouldActivate;type=xt.GuardsCheckEnd;constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xq extends ml{urlAfterRedirects;state;type=xt.ResolveStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jq extends ml{urlAfterRedirects;state;type=xt.ResolveEnd;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class e7{route;type=xt.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class t7{route;type=xt.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class n7{snapshot;type=xt.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r7{snapshot;type=xt.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i7{snapshot;type=xt.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o7{snapshot;type=xt.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wN{routerEvent;position;anchor;type=xt.Scroll;constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Nw{}class xv{url;navigationBehaviorOptions;constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}}function ga(e){return e.outlet||mt}function xm(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class d7{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xm(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Pm(this.rootInjector)}}let Pm=(()=>{class e{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new d7(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||e)(Te(Un))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class DN{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=Ow(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=Ow(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=Fw(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Fw(n,this._root).map(t=>t.value)}}function Ow(e,n){if(e===n.value)return n;for(const t of n.children){const r=Ow(e,t);if(r)return r}return null}function Fw(e,n){if(e===n.value)return[n];for(const t of n.children){const r=Fw(e,t);if(r.length)return r.unshift(n),r}return[]}class ma{value;children;constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function pp(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class IN extends DN{snapshot;constructor(n,t){super(n),this.snapshot=t,Lw(this,n)}toString(){return this.snapshot.toString()}}function SN(e){const n=function h7(e){const o=new Rv([],{},{},"",{},mt,e,null,{});return new TN("",new ma(o,[]))}(e),t=new O([new Im("",{})]),r=new O({}),i=new O({}),o=new O({}),s=new O(""),l=new Mh(t,r,o,s,i,mt,e,n.root);return l.snapshot=n.root,new IN(new ma(l,[]),n)}class Mh{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,t,r,i,o,s,l,u){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Ce(h=>h[Dm]))??Ze(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(n=>hp(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(n=>hp(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pv(e,n,t="emptyOnly"){let r;const{routeConfig:i}=e;return r=null===n||"always"!==t&&""!==i?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...e.params},data:{...e.data},resolve:{...e.data,...e._resolvedData??{}}}:{params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.data,...i?.data,...e._resolvedData}},i&&AN(i)&&(r.resolve[Dm]=i.title),r}class Rv{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Dm]}constructor(n,t,r,i,o,s,l,u,h){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=l,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hp(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class TN extends DN{url;constructor(n,t){super(t),this.url=n,Lw(this,t)}toString(){return MN(this._root)}}function Lw(e,n){n.value._routerState=e,n.children.forEach(t=>Lw(e,t))}function MN(e){const n=e.children.length>0?` { ${e.children.map(MN).join(", ")} } `:"";return`${e.value}${n}`}function Vw(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,gl(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),gl(n.params,t.params)||e.paramsSubject.next(t.params),function Dq(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!gl(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),gl(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Bw(e,n){const t=gl(e.params,n.params)&&function Mq(e,n){return Ih(e,n)&&e.every((t,r)=>gl(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||Bw(e.parent,n.parent))}function AN(e){return"string"==typeof e.title||null===e.title}const f7=new ce("");let jw=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=mt;activateEvents=new cr;deactivateEvents=new cr;attachEvents=new cr;detachEvents=new cr;routerOutletData=F2(void 0);parentContexts=X(Pm);location=X(aa);changeDetector=X(fm);inputBinder=X(kv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new p7(t,l,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=tt({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[vr]})}return e})();class p7{route;childContexts;parent;outletData;constructor(n,t,r,i){this.route=n,this.childContexts=t,this.parent=r,this.outletData=i}get(n,t){return n===Mh?this.route:n===Pm?this.childContexts:n===f7?this.outletData:this.parent.get(n,t)}}const kv=new ce("");let xN=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Dw([r.queryParams,r.params,r.data]).pipe(pa(([o,s,l],u)=>(l={...o,...s,...l},0===u?Ze(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function qW(e){const n=Ye(e);if(!n)return null;const t=new Gg(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(r.component);if(s)for(const{templateName:l}of s.inputs)t.activatedComponentRef.setInput(l,o[l]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})(),PN=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=_i({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&on(0,"router-outlet")},dependencies:[jw],encapsulation:2})}return e})();function Uw(e){const n=e.children&&e.children.map(Uw),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==mt&&(t.component=PN),t}function Rm(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function m7(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Rm(e,r,i);return Rm(e,r)})}(e,n,t);return new ma(r,i)}{if(e.shouldAttach(n.value)){const o=e.retrieve(n.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(l=>Rm(e,l)),s}}const r=function _7(e){return new Mh(new O(e.url),new O(e.params),new O(e.queryParams),new O(e.fragment),new O(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(o=>Rm(e,o));return new ma(r,i)}}class Hw{redirectTo;navigationBehaviorOptions;constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}}const RN="ngNavigationCancelingError";function Nv(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=Sh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=kN(!1,Xo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function kN(e,n){const t=new Error(`NavigationCancelingError: ${e||""}`);return t[RN]=!0,t.cancellationCode=n,t}function NN(e){return!!e&&e[RN]}class b7{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Vw(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=pp(t);n.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=pp(n);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:l})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=pp(n);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){const i=pp(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new o7(o.value.snapshot))}),n.children.length&&this.forwardEvent(new r7(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,o=t?t.value:null;if(Vw(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(l.contexts),s.attachRef=l.componentRef,s.route=l.route.value,s.outlet&&s.outlet.attach(l.componentRef,l.route.value),Vw(l.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,r)}}class ON{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Ov{component;route;constructor(n,t){this.component=n,this.route=t}}function C7(e,n,t){const r=e._root;return km(r,n?n._root:null,t,[r.value])}function gp(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function Ls(e){return null!==Tl(e)}(e)?n.get(e):e:r}function km(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=pp(n);return e.children.forEach(s=>{(function w7(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=n?n.value:null,l=t?t.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function D7(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Ih(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Ih(e.url,n.url)||!gl(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bw(e,n)||!gl(e.queryParams,n.queryParams);default:return!Bw(e,n)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ON(r)):(o.data=s.data,o._resolvedData=s._resolvedData),km(e,n,o.component?l?l.children:null:t,r,i),u&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Ov(l.outlet.component,s))}else s&&Nm(n,l,i),i.canActivateChecks.push(new ON(r)),km(e,null,o.component?l?l.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,l])=>Nm(l,t.getContext(s),i)),i}function Nm(e,n,t){const r=pp(e),i=e.value;Object.entries(r).forEach(([o,s])=>{Nm(s,i.component?n?n.children.getContext(o):null:n,t)}),t.canDeactivateChecks.push(new Ov(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function Om(e){return"function"==typeof e}function FN(e){return e instanceof _v||"EmptyError"===e?.name}const Fv=Symbol("INITIAL_VALUE");function mp(){return pa(e=>Dw(e.map(n=>n.pipe(cp(1),function hq(...e){const n=mv(e);return z((t,r)=>{(n?Iw(e,t,n):Iw(e,t)).subscribe(r)})}(Fv)))).pipe(Ce(n=>{for(const t of n)if(!0!==t){if(t===Fv)return Fv;if(!1===t||P7(t))return t}return!0}),Ac(n=>n!==Fv),cp(1)))}function P7(e){return Sh(e)||e instanceof Hw}function LN(e){return function Io(...e){return Vr(e)}(Wi(n=>{if("boolean"!=typeof n)throw Nv(0,n)}),Ce(n=>!0===n))}class $w{segmentGroup;constructor(n){this.segmentGroup=n||null}}class zw extends Error{urlTree;constructor(n){super(),this.urlTree=n}}function _p(e){return yv(new $w(e))}class z7{urlSerializer;urlTree;constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[mt])return yv(new H(4e3,!1));i=i.children[mt]}}applyRedirectCommands(n,t,r,i,o){if("string"!=typeof t){const l=t,{queryParams:u,fragment:h,routeConfig:g,url:y,outlet:b,params:C,data:w,title:D}=i,S=Hr(o,()=>l({params:C,data:w,queryParams:u,fragment:h,routeConfig:g,url:y,outlet:b,title:D}));if(S instanceof Dh)throw new zw(S);t=S}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r);if("/"===t[0])throw new zw(s);return s}applyRedirectCreateUrlTree(n,t,r,i){const o=this.createSegmentGroup(n,t.root,r,i);return new Dh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Object.entries(n).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const l=o.substring(1);r[i]=t[l]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){const o=this.createSegments(n,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([l,u])=>{s[l]=this.createSegmentGroup(n,u,r,i)}),new Qt(o,s)}createSegments(n,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}const Ww={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function W7(e,n,t,r,i){const o=VN(e,n,t);return o.matched?(r=function s7(e,n){return e.providers&&!e._injector&&(e._injector=Iy(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,r),function U7(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?Ze(i.map(s=>{const l=gp(s,e);return Xu(function x7(e){return e&&Om(e.canMatch)}(l)?l.canMatch(n,t):Hr(e,()=>l(n,t)))})).pipe(mp(),LN()):Ze(!0)}(r,n,t).pipe(Ce(s=>!0===s?o:{...Ww}))):Ze(o)}function VN(e,n,t){if("**"===n.path)return function G7(e){return{matched:!0,parameters:e.length>0?iN(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...Ww}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||wq)(t,e,n);if(!i)return{...Ww};const o={};Object.entries(i.posParams??{}).forEach(([l,u])=>{o[l]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BN(e,n,t,r){return t.length>0&&function Y7(e,n,t){return t.some(r=>Lv(e,n,r)&&ga(r)!==mt)}(e,t,r)?{segmentGroup:new Qt(n,K7(r,new Qt(t,e.children))),slicedSegments:[]}:0===t.length&&function Q7(e,n,t){return t.some(r=>Lv(e,n,r))}(e,t,r)?{segmentGroup:new Qt(e.segments,q7(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new Qt(e.segments,e.children),slicedSegments:t}}function q7(e,n,t,r){const i={};for(const o of t)if(Lv(e,n,o)&&!r[ga(o)]){const s=new Qt([],{});i[ga(o)]=s}return{...r,...i}}function K7(e,n){const t={};t[mt]=n;for(const r of e)if(""===r.path&&ga(r)!==mt){const i=new Qt([],{});t[ga(r)]=i}return t}function Lv(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class X7{}class t9{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,t,r,i,o,s,l){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=l,this.applyRedirects=new z7(this.urlSerializer,this.urlTree)}noMatchError(n){return new H(4002,`'${n.segmentGroup}'`)}recognize(){const n=BN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Ce(({children:t,rootSnapshot:r})=>{const i=new ma(r,t),o=new TN("",i),s=function $q(e,n,t=null,r=null){return mN(gN(e),n,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(n){const t=new Rv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),mt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,mt,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),dp(r=>{if(r instanceof zw)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $w?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r,o):this.processSegment(n,t,r,r.segments,i,!0,o).pipe(Ce(s=>s instanceof ma?[s]:[]))}processChildren(n,t,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return kr(o).pipe(up(s=>{const l=r.children[s],u=function u7(e,n){const t=e.filter(r=>ga(r)===n);return t.push(...e.filter(r=>ga(r)!==n)),t}(t,s);return this.processSegmentGroup(n,u,l,s,i)}),function gq(e,n){return z(function pq(e,n,t,r,i){return(o,s)=>{let l=t,u=n,h=0;o.subscribe(he(s,g=>{const y=h++;u=l?e(u,g,y):(l=!0,g),r&&s.next(u)},i&&(()=>{l&&s.next(u),s.complete()})))}}(e,n,arguments.length>=2,!0))}((s,l)=>(s.push(...l),s)),vv(null),function mq(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ac((i,o)=>e(i,o,r)):ki,Tw(1),t?vv(n):eN(()=>new _v))}(),vi(s=>{if(null===s)return _p(r);const l=jN(s);return function n9(e){e.sort((n,t)=>n.value.outlet===mt?-1:t.value.outlet===mt?1:n.value.outlet.localeCompare(t.value.outlet))}(l),Ze(l)}))}processSegment(n,t,r,i,o,s,l){return kr(t).pipe(up(u=>this.processSegmentAgainstRoute(u._injector??n,t,u,r,i,o,s,l).pipe(dp(h=>{if(h instanceof $w)return Ze(null);throw h}))),wh(u=>!!u),dp(u=>{if(FN(u))return function Z7(e,n,t){return 0===n.length&&!e.children[t]}(r,i,o)?Ze(new X7):_p(r);throw u}))}processSegmentAgainstRoute(n,t,r,i,o,s,l,u){return ga(r)===s||s!==mt&&Lv(i,o,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,i,r,o,s,u):this.allowRedirects&&l?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,s,u):_p(i):_p(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s,l){const{matched:u,parameters:h,consumedSegments:g,positionalParamSegments:y,remainingSegments:b}=VN(t,i,o);if(!u)return _p(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const C=new Rv(o,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UN(i),ga(i),i.component??i._loadedComponent??null,i,HN(i)),w=Pv(C,l,this.paramsInheritanceStrategy);C.params=Object.freeze(w.params),C.data=Object.freeze(w.data);const D=this.applyRedirects.applyRedirectCommands(g,i.redirectTo,y,C,n);return this.applyRedirects.lineralizeSegments(i,D).pipe(vi(S=>this.processSegment(n,r,t,S.concat(b),s,!1,l)))}matchSegmentAgainstRoute(n,t,r,i,o,s){const l=W7(t,r,i,n);return"**"===r.path&&(t.children={}),l.pipe(pa(u=>u.matched?this.getChildConfig(n=r._injector??n,r,i).pipe(pa(({routes:h})=>{const g=r._loadedInjector??n,{parameters:y,consumedSegments:b,remainingSegments:C}=u,w=new Rv(b,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UN(r),ga(r),r.component??r._loadedComponent??null,r,HN(r)),D=Pv(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(D.params),w.data=Object.freeze(D.data);const{segmentGroup:S,slicedSegments:x}=BN(t,b,C,h);if(0===x.length&&S.hasChildren())return this.processChildren(g,h,S,w).pipe(Ce(L=>new ma(w,L)));if(0===h.length&&0===x.length)return Ze(new ma(w,[]));const A=ga(r)===o;return this.processSegment(g,h,S,x,A?mt:o,!0,w).pipe(Ce(L=>new ma(w,L instanceof ma?[L]:[])))})):_p(t)))}getChildConfig(n,t,r){return t.children?Ze({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?Ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function j7(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?Ze(!0):Ze(i.map(s=>{const l=gp(s,e);return Xu(function S7(e){return e&&Om(e.canLoad)}(l)?l.canLoad(n,t):Hr(e,()=>l(n,t)))})).pipe(mp(),LN())}(n,t,r).pipe(vi(i=>i?this.configLoader.loadChildren(n,t).pipe(Wi(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function $7(){return yv(kN(!1,Xo.GuardRejected))}())):Ze({routes:[],injector:n})}}function r9(e){const n=e.value.routeConfig;return n&&""===n.path}function jN(e){const n=[],t=new Set;for(const r of e){if(!r9(r)){n.push(r);continue}const i=n.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=jN(r.children);n.push(new ma(r.value,i))}return n.filter(r=>!t.has(r))}function UN(e){return e.data||{}}function HN(e){return e.resolve||{}}function $N(e){const n=e.children.map(t=>$N(t)).flat();return[e,...n]}function Gw(e){return pa(n=>{const t=e(n);return t?kr(t).pipe(Ce(()=>n)):Ze(n)})}let zN=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===mt);return r}getResolvedTitleForRoute(t){return t.data[Dm]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>X(c9),providedIn:"root"})}return e})(),c9=(()=>{class e extends zN{title;constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(Te(yq))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Fm=new ce("",{providedIn:"root",factory:()=>({})}),Lm=new ce("");let qw=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=X(M8);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Xu(t.loadComponent()).pipe(Ce(WN),Wi(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Em(()=>{this.componentLoaders.delete(t)})),i=new Jk(r,()=>new R).pipe(Sw());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function u9(e,n,t,r){return Xu(e.loadChildren()).pipe(Ce(WN),vi(i=>i instanceof fA||Array.isArray(i)?Ze(i):kr(n.compileModuleAsync(i))),Ce(i=>{r&&r(e);let o,s,l=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(Lm,[],{optional:!0,self:!0}).flat()),{routes:s.map(Uw),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Em(()=>{this.childrenLoaders.delete(r)})),s=new Jk(o,()=>new R).pipe(Sw());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function WN(e){return function d9(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Kw=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>X(h9),providedIn:"root"})}return e})(),h9=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const GN=new ce(""),qN=new ce("");function f9(e,n,t){const r=e.get(qN),i=e.get(go);return e.get(kt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(h=>setTimeout(h));let o;const s=new Promise(h=>{o=h}),l=i.startViewTransition(()=>(o(),function p9(e){return new Promise(n=>{AC({read:()=>setTimeout(n)},{injector:e})})}(e))),{onViewTransitionCreated:u}=r;return u&&Hr(e,()=>u({transition:l,from:n,to:t})),s})}const KN=new ce("");let Yw=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new R;transitionAbortSubject=new R;configLoader=X(qw);environmentInjector=X(Un);destroyRef=X(ia);urlSerializer=X(Sm);rootContexts=X(Pm);location=X(gm);inputBindingEnabled=null!==X(kv,{optional:!0});titleStrategy=X(zN);options=X(Fm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=X(Kw);createViewTransition=X(GN,{optional:!0});navigationErrorHandler=X(KN,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>Ze(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new t7(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new e7(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r})}setupNavigations(t){return this.transitions=new O(null),this.transitions.pipe(Ac(r=>null!==r),pa(r=>{let i=!1,o=!1;return Ze(r).pipe(pa(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Xo.SupersededByNewNavigation),fa;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:"string"==typeof s.extras.browserUrl?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new fp(s.id,this.urlSerializer.serialize(s.rawUrl),h,Av.IgnoredSameUrlNavigation)),s.resolve(!1),fa}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Ze(s).pipe(pa(h=>(this.events.next(new Mv(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?fa:Promise.resolve(h))),function i9(e,n,t,r,i,o){return vi(s=>function J7(e,n,t,r,i,o,s="emptyOnly"){return new t9(e,n,t,r,i,s,o).recognize()}(e,n,t,r,s.extractedUrl,i,o).pipe(Ce(({state:l,tree:u})=>({...s,targetSnapshot:l,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Wi(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const g=new EN(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){const{id:h,extractedUrl:g,source:y,restoredState:b,extras:C}=s,w=new Mv(h,this.urlSerializer.serialize(g),y,b);this.events.next(w);const D=SN(this.rootComponentType).snapshot;return this.currentTransition=r={...s,targetSnapshot:D,urlAfterRedirects:g,extras:{...C,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=g,Ze(r)}{const h="";return this.events.next(new fp(s.id,this.urlSerializer.serialize(s.extractedUrl),h,Av.IgnoredByUrlHandlingStrategy)),s.resolve(!1),fa}}),Wi(s=>{const l=new Qq(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(l)}),Ce(s=>(this.currentTransition=r={...s,guards:C7(s.targetSnapshot,s.currentSnapshot,this.rootContexts)},r)),function R7(e,n){return vi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Ze({...t,guardsResult:!0}):function k7(e,n,t,r){return kr(e).pipe(vi(i=>function B7(e,n,t,r,i){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?Ze(o.map(l=>{const u=xm(n)??i,h=gp(l,u);return Xu(function A7(e){return e&&Om(e.canDeactivate)}(h)?h.canDeactivate(e,n,t,r):Hr(u,()=>h(e,n,t,r))).pipe(wh())})).pipe(mp()):Ze(!0)}(i.component,i.route,t,n,r)),wh(i=>!0!==i,!0))}(s,r,i,e).pipe(vi(l=>l&&function I7(e){return"boolean"==typeof e}(l)?function N7(e,n,t,r){return kr(n).pipe(up(i=>Iw(function F7(e,n){return null!==e&&n&&n(new n7(e)),Ze(!0)}(i.route.parent,r),function O7(e,n){return null!==e&&n&&n(new i7(e)),Ze(!0)}(i.route,r),function V7(e,n,t){const r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>function E7(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>Xk(()=>Ze(s.guards.map(u=>{const h=xm(s.node)??t,g=gp(u,h);return Xu(function M7(e){return e&&Om(e.canActivateChild)}(g)?g.canActivateChild(r,e):Hr(h,()=>g(r,e))).pipe(wh())})).pipe(mp())));return Ze(o).pipe(mp())}(e,i.path,t),function L7(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(o=>Xk(()=>{const s=xm(n)??t,l=gp(o,s);return Xu(function T7(e){return e&&Om(e.canActivate)}(l)?l.canActivate(n,e):Hr(s,()=>l(n,e))).pipe(wh())}));return Ze(i).pipe(mp())}(e,i.route,t))),wh(i=>!0!==i,!0))}(r,o,e,n):Ze(l)),Ce(l=>({...t,guardsResult:l})))})}(this.environmentInjector,s=>this.events.next(s)),Wi(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&"boolean"!=typeof s.guardsResult)throw Nv(0,s.guardsResult);const l=new Zq(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(l)}),Ac(s=>!!s.guardsResult||(this.cancelNavigationTransition(s,"",Xo.GuardRejected),!1)),Gw(s=>{if(0!==s.guards.canActivateChecks.length)return Ze(s).pipe(Wi(l=>{const u=new Xq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),pa(l=>{let u=!1;return Ze(l).pipe(function o9(e,n){return vi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ze(t);const o=new Set(i.map(u=>u.route)),s=new Set;for(const u of o)if(!s.has(u))for(const h of $N(u))s.add(h);let l=0;return kr(s).pipe(up(u=>o.has(u)?function s9(e,n,t,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!AN(i)&&(o[Dm]=i.title),function a9(e,n,t,r){const i=Mw(e);if(0===i.length)return Ze({});const o={};return kr(i).pipe(vi(s=>function l9(e,n,t,r){const i=xm(n)??r,o=gp(e,i);return Xu(o.resolve?o.resolve(n,t):Hr(i,()=>o(n,t)))}(e[s],n,t,r).pipe(wh(),Wi(l=>{if(l instanceof Hw)throw Nv(new Cv,l);o[s]=l}))),Tw(1),Ce(()=>o),dp(s=>FN(s)?fa:yv(s)))}(o,e,n,r).pipe(Ce(s=>(e._resolvedData=s,e.data=Pv(e,e.parent,t).resolve,null)))}(u,r,e,n):(u.data=Pv(u,u.parent,e).resolve,Ze(void 0))),Wi(()=>l++),Tw(1),vi(u=>l===s.size?Ze(t):fa))})}(this.paramsInheritanceStrategy,this.environmentInjector),Wi({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Xo.NoDataFromResolver)}}))}),Wi(l=>{const u=new Jq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Gw(s=>{const l=u=>{const h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(Wi(g=>{u.component=g}),Ce(()=>{})));for(const g of u.children)h.push(...l(g));return h};return Dw(l(s.targetSnapshot.root)).pipe(vv(null),cp(1))}),Gw(()=>this.afterPreactivation()),pa(()=>{const{currentSnapshot:s,targetSnapshot:l}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,l.root);return u?kr(u).pipe(Ce(()=>r)):Ze(r)}),Ce(s=>{const l=function g7(e,n,t){const r=Rm(e,n._root,t?t._root:void 0);return new IN(r,n)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r={...s,targetRouterState:l},this.currentNavigation.targetRouterState=l,r}),Wi(()=>{this.events.next(new Nw)}),((e,n,t,r)=>Ce(i=>(new b7(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),cp(1),Wi({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),function _q(e){return z((n,t)=>{pl(e).subscribe(he(t,()=>t.complete(),Ai)),!t.closed&&n.subscribe(t)})}(this.transitionAbortSubject.pipe(Wi(s=>{throw s}))),Em(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Xo.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),dp(s=>{if(this.destroyed)return r.resolve(!1),fa;if(o=!0,NN(s))this.events.next(new Th(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),function y7(e){return NN(e)&&Sh(e.url)}(s)?this.events.next(new xv(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{const l=new kw(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{const u=Hr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(!(u instanceof Hw))throw this.events.next(l),s;{const{message:h,cancellationCode:g}=Nv(0,u);this.events.next(new Th(r.id,this.urlSerializer.serialize(r.extractedUrl),h,g)),this.events.next(new xv(u.redirectTo,u.navigationBehaviorOptions))}}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return fa}))}))}cancelNavigationTransition(t,r,i){const o=new Th(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function g9(e){return e!==Tv}let m9=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>X(y9),providedIn:"root"})}return e})();class _9{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let y9=(()=>{class e extends _9{static \u0275fac=(()=>{let t;return function(i){return(t||(t=p(e)))(i||e)}})();static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),YN=(()=>{class e{urlSerializer=X(Sm);options=X(Fm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=X(gm);urlHandlingStrategy=X(Kw);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dh;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){const o=void 0!==t?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Dh?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=SN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:()=>X(v9),providedIn:"root"})}return e})(),v9=(()=>{class e extends YN{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Mv?this.updateStateMemento():t instanceof fp?this.commitTransition(r):t instanceof EN?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Nw?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Th&&(t.code===Xo.GuardRejected||t.code===Xo.NoDataFromResolver)?this.restoreHistory(r):t instanceof kw?this.restoreHistory(r,!0):t instanceof xc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){const{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){const l=this.browserPageId,u={...s,...this.generateNgRouterState(i,l)};this.location.replaceState(t,"",u)}else{const l={...s,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(t,"",l)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&0===o&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=p(e)))(i||e)}})();static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function QN(e,n){e.events.pipe(Ac(t=>t instanceof xc||t instanceof Th||t instanceof kw||t instanceof fp),Ce(t=>t instanceof xc||t instanceof fp?0:t instanceof Th&&(t.code===Xo.Redirect||t.code===Xo.SupersededByNewNavigation)?2:1),Ac(t=>2!==t),cp(1)).subscribe(()=>{n()})}const b9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=X(tE);stateManager=X(YN);options=X(Fm,{optional:!0})||{};pendingTasks=X(_c);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=X(Yw);urlSerializer=X(Sm);location=X(gm);urlHandlingStrategy=X(Kw);_events=new R;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=X(m9);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=X(Lm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!X(kv,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new un;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Th&&r.code!==Xo.Redirect&&r.code!==Xo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xc)this.navigated=!0;else if(r instanceof xv){const s=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||g9(i.source),...s};this.scheduleNavigation(l,Tv,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function w9(e){return!(e instanceof Nw||e instanceof xv)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Tv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const l=this.parseUrl(t);this.scheduleNavigation(l,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Uw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:l,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:s;let y,g=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":g={...this.currentUrlTree.queryParams,...o};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}null!==g&&(g=this.removeEmptyProps(g));try{y=gN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),y=this.currentUrlTree.root}return mN(y,t,g,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sh(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Tv,null,r)}navigate(t,r={skipLocationChange:!1}){return function E9(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new H(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...b9}:!1===r?{...C9}:r,Sh(t))return sN(this.currentUrlTree,t,i);const o=this.parseUrl(t);return sN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let l,u,h;s?(l=s.resolve,u=s.reject,h=s.promise):h=new Promise((y,b)=>{l=y,u=b});const g=this.pendingTasks.add();return QN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(y=>Promise.reject(y))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yp=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new R;constructor(t,r,i,o,s,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=l;const u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof xc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Sh(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){const l=this.urlTree;return!!(null===l||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(l,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function ET(e,n,t){return function wB(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?CT:Ag}(n,t)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.routerLinkInput?null:Sh(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(J(ri),J(Mh),function f(e){return function dc(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(pf(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===n)return t[i+1];i+=2}}}return null}(Qe(),e)}("tabindex"),J(wc),J(Go),J(Ch))};static \u0275dir=tt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ht("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&dl("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",sp],skipLocationChange:[2,"skipLocationChange","skipLocationChange",sp],replaceUrl:[2,"replaceUrl","replaceUrl",sp],routerLink:"routerLink"},features:[vr]})}return e})();class ZN{}let S9=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ac(t=>t instanceof xc),up(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Iy(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,l=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(l,o.children??o._loadedRoutes))}return kr(i).pipe(Cm())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ze(null);const o=i.pipe(vi(s=>null===s?Ze(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?kr([o,this.loader.loadComponent(r)]).pipe(Cm()):o})}static \u0275fac=function(r){return new(r||e)(Te(ri),Te(Un),Te(ZN),Te(qw))};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Qw=new ce("");let XN=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Mv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fp&&t.code===Av.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function FM(){throw new Error("invalid")}()};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();function JN(e){return e.routerState.root}function _l(e,n){return{\u0275kind:e,\u0275providers:n}}function eO(){const e=X(wn);return n=>{const t=e.get(qo);if(n!==t.components[0])return;const r=e.get(ri),i=e.get(tO);1===e.get(Zw)&&r.initialNavigation(),e.get(nO,null,et.Optional)?.setUpPreloading(),e.get(Qw,null,et.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const tO=new ce("",{factory:()=>new R}),Zw=new ce("",{providedIn:"root",factory:()=>1}),nO=new ce("");function P9(e){return _l(0,[{provide:nO,useExisting:S9},{provide:ZN,useExisting:e}])}function k9(e){return ji("NgRouterViewTransitions"),_l(9,[{provide:GN,useValue:f9},{provide:qN,useValue:{skipNextTransition:!!e?.skipInitialTransition,...e}}])}const N9=[gm,{provide:Sm,useClass:Cv},ri,Pm,{provide:Mh,useFactory:JN,deps:[ri]},qw,[]];let Vv=(()=>{class e{constructor(){}static forRoot(t,r){return{ngModule:e,providers:[N9,[],{provide:Lm,multi:!0,useValue:t},[],r?.errorHandler?{provide:KN,useValue:r.errorHandler}:[],{provide:Fm,useValue:r||{}},r?.useHash?{provide:Ch,useClass:o6}:{provide:Ch,useClass:HR},{provide:Qw,useFactory:()=>{const e=X(A5),n=X(kt),t=X(Fm),r=X(Yw),i=X(Sm);return t.scrollOffset&&e.setOffset(t.scrollOffset),new XN(i,r,e,n,t)}},r?.preloadingStrategy?P9(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?V9(r):[],r?.bindToComponentInputs?_l(8,[xN,{provide:kv,useExisting:xN}]).\u0275providers:[],r?.enableViewTransitions?k9().\u0275providers:[],[{provide:rO,useFactory:eO},{provide:zf,multi:!0,useExisting:rO}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Lm,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=$u({type:e});static \u0275inj=Je({})}return e})();function V9(e){return["disabled"===e.initialNavigation?_l(3,[jA(()=>{X(ri).setUpLocationChangeListener()}),{provide:Zw,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?_l(2,[{provide:Zw,useValue:0},jA(()=>{const n=X(wn);return n.get(QW,Promise.resolve()).then(()=>new Promise(r=>{const i=n.get(ri),o=n.get(tO);QN(i,()=>{r(!0)}),n.get(Yw).afterPreactivation=()=>(r(!0),o.closed?Ze(void 0):o),i.initialNavigation()}))})]).\u0275providers:[]]}const rO=new ce("");var Xe=function(e){return e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger",e}(Xe||{});const Pc="*";function iO(e){return{type:Xe.Style,styles:e,offset:null}}class Vm{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,t=0){this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class oO{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let t=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,l)=>Math.max(s,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function sO(e){return new H(3e3,!1)}function Ju(e){switch(e.length){case 0:return new Vm;case 1:return e[0];default:return new oO(e)}}function aO(e,n,t=new Map,r=new Map){const i=[],o=[];let s=-1,l=null;if(n.forEach(u=>{const h=u.get("offset"),g=h==s,y=g&&l||new Map;u.forEach((b,C)=>{let w=C,D=b;if("offset"!==C)switch(w=e.normalizePropertyName(w,i),D){case"!":D=t.get(C);break;case Pc:D=r.get(C);break;default:D=e.normalizeStyleValue(C,w,D,i)}y.set(w,D)}),g||o.push(y),l=y,s=h}),i.length)throw function aK(){return new H(3502,!1)}();return o}function Jw(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&eD(t,"start",e)));break;case"done":e.onDone(()=>r(t&&eD(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&eD(t,"destroy",e)))}}function eD(e,n,t){const o=tD(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),s=e._data;return null!=s&&(o._data=s),o}function tD(e,n,t,r,i="",o=0,s){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Jo(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function lO(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}const vK=typeof document>"u"?null:document.documentElement;function nD(e){const n=e.parentNode||e.host||null;return n===vK?null:n}let Ah=null,cO=!1;function uO(e,n){for(;n;){if(n===e)return!0;n=nD(n)}return!1}function dO(e,n,t){if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]}const fO="ng-enter",rD="ng-leave",Bv="ng-trigger",jv=".ng-trigger",pO="ng-animating",iD=".ng-animating";function Rc(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:oD(parseFloat(n[1]),n[2])}function oD(e,n){return"s"===n?1e3*e:e}function Uv(e,n,t){return e.hasOwnProperty("duration")?e:function IK(e,n,t){let i,o=0,s="";if("string"==typeof e){const l=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return n.push(sO()),{duration:0,delay:0,easing:""};i=oD(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(o=oD(parseFloat(u),l[4]));const h=l[5];h&&(s=h)}else i=e;if(!t){let l=!1,u=n.length;i<0&&(n.push(function U9(){return new H(3100,!1)}()),l=!0),o<0&&(n.push(function H9(){return new H(3101,!1)}()),l=!0),l&&n.splice(u,0,sO())}return{duration:i,delay:o,easing:s}}(e,n,t)}function yl(e,n,t){n.forEach((r,i)=>{const o=aD(i);t&&!t.has(i)&&t.set(i,e.style[o]),e.style[o]=r})}function xh(e,n){n.forEach((t,r)=>{const i=aD(r);e.style[i]=""})}function Bm(e){return Array.isArray(e)?1==e.length?e[0]:function j9(e,n=null){return{type:Xe.Sequence,steps:e,options:n}}(e):e}const sD=new RegExp("{{\\s*(.+?)\\s*}}","g");function gO(e){let n=[];if("string"==typeof e){let t;for(;t=sD.exec(e);)n.push(t[1]);sD.lastIndex=0}return n}function jm(e,n,t){const r=`${e}`,i=r.replace(sD,(o,s)=>{let l=n[s];return null==l&&(t.push(function z9(){return new H(3003,!1)}()),l=""),l.toString()});return i==r?e:i}const MK=/-+([a-z0-9])/g;function aD(e){return e.replace(MK,(...n)=>n[1].toUpperCase())}function es(e,n,t){switch(n.type){case Xe.Trigger:return e.visitTrigger(n,t);case Xe.State:return e.visitState(n,t);case Xe.Transition:return e.visitTransition(n,t);case Xe.Sequence:return e.visitSequence(n,t);case Xe.Group:return e.visitGroup(n,t);case Xe.Animate:return e.visitAnimate(n,t);case Xe.Keyframes:return e.visitKeyframes(n,t);case Xe.Style:return e.visitStyle(n,t);case Xe.Reference:return e.visitReference(n,t);case Xe.AnimateChild:return e.visitAnimateChild(n,t);case Xe.AnimateRef:return e.visitAnimateRef(n,t);case Xe.Query:return e.visitQuery(n,t);case Xe.Stagger:return e.visitStagger(n,t);default:throw function W9(){return new H(3004,!1)}()}}function lD(e,n){return window.getComputedStyle(e)[n]}let cD=(()=>{class e{validateStyleProperty(t){return function CK(e){Ah||(Ah=function EK(){return typeof document<"u"?document.body:null}()||{},cO=!!Ah.style&&"WebkitAppearance"in Ah.style);let n=!0;return Ah.style&&!function bK(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in Ah.style,!n&&cO&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in Ah.style)),n}(t)}containsElement(t,r){return uO(t,r)}getParentElement(t){return nD(t)}query(t,r,i){return dO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,l=[],u){return new Vm(i,o)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();class uD{static NOOP=new cD}class dD{}const RK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class mO extends dD{normalizePropertyName(n,t){return aD(n)}normalizeStyleValue(n,t,r,i){let o="";const s=r.toString().trim();if(RK.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const l=r.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&i.push(function G9(){return new H(3005,!1)}())}return s+o}}const $v=new Set(["true","1"]),zv=new Set(["false","0"]);function _O(e,n){const t=$v.has(e)||zv.has(e),r=$v.has(n)||zv.has(n);return(i,o)=>{let s="*"==e||e==i,l="*"==n||n==o;return!s&&t&&"boolean"==typeof i&&(s=i?$v.has(e):zv.has(e)),!l&&r&&"boolean"==typeof o&&(l=o?$v.has(n):zv.has(n)),s&&l}}const FK=new RegExp("s*:selfs*,?","g");function fD(e,n,t,r){return new LK(e).build(n,t,r)}class LK{_driver;constructor(n){this._driver=n}build(n,t,r){const i=new jK(t);return this._resetContextStyleTimingState(i),es(this,Bm(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],s=[];return"@"==n.name.charAt(0)&&t.errors.push(function q9(){return new H(3006,!1)}()),n.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),l.type==Xe.State){const u=l,h=u.name;h.toString().split(/\s*,\s*/).forEach(g=>{u.name=g,o.push(this.visitState(u,t))}),u.name=h}else if(l.type==Xe.Transition){const u=this.visitTransition(l,t);r+=u.queryCount,i+=u.depCount,s.push(u)}else t.errors.push(function K9(){return new H(3007,!1)}())}),{type:Xe.Trigger,name:n.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{gO(u).forEach(h=>{s.hasOwnProperty(h)||o.add(h)})})}),o.size&&t.errors.push(function Y9(){return new H(3008,!1)}(0,o.values()))}return{type:Xe.State,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=es(this,Bm(n.animation),t),i=function kK(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function NK(e,n,t){if(":"==e[0]){const u=function OK(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function oK(){return new H(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof u)return void n.push(u);e=u}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function iK(){return new H(3015,!1)}()),n;const i=r[1],o=r[2],s=r[3];n.push(_O(i,s)),"<"==o[0]&&("*"!=i||"*"!=s)&&n.push(_O(s,i))}(r,t,n)):t.push(e),t}(n.expr,t.errors);return{type:Xe.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ph(n.options)}}visitSequence(n,t){return{type:Xe.Sequence,steps:n.steps.map(r=>es(this,r,t)),options:Ph(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const o=n.steps.map(s=>{t.currentTime=r;const l=es(this,s,t);return i=Math.max(i,t.currentTime),l});return t.currentTime=i,{type:Xe.Group,steps:o,options:Ph(n.options)}}visitAnimate(n,t){const r=function HK(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return pD(Uv(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=pD(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=Uv(t,n);return pD(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,o=n.styles?n.styles:iO({});if(o.type==Xe.Keyframes)i=this.visitKeyframes(o,t);else{let s=n.styles,l=!1;if(!s){l=!0;const h={};r.easing&&(h.easing=r.easing),s=iO(h)}t.currentTime+=r.duration+r.delay;const u=this.visitStyle(s,t);u.isEmptyStep=l,i=u}return t.currentAnimateTimings=null,{type:Xe.Animate,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let l of i)"string"==typeof l?l===Pc?r.push(l):t.errors.push(new H(3002,!1)):r.push(new Map(Object.entries(l)));let o=!1,s=null;return r.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(s=l.get("easing"),l.delete("easing")),!o))for(let u of l.values())if(u.toString().indexOf("{{")>=0){o=!0;break}}),{type:Xe.Style,styles:r,easing:s,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),n.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,u)=>{const h=t.collectedStyles.get(t.currentQuerySelector),g=h.get(u);let y=!0;g&&(o!=i&&o>=g.startTime&&i<=g.endTime&&(t.errors.push(function Z9(){return new H(3010,!1)}()),y=!1),o=g.startTime),y&&h.set(u,{startTime:o,endTime:i}),t.options&&function TK(e,n,t){const r=n.params||{},i=gO(e);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function $9(){return new H(3001,!1)}())})}(l,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:Xe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function X9(){return new H(3011,!1)}()),r;let o=0;const s=[];let l=!1,u=!1,h=0;const g=n.steps.map(x=>{const A=this._makeStyleAst(x,t);let L=null!=A.offset?A.offset:function UK(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(A.styles),G=0;return null!=L&&(o++,G=A.offset=L),u=u||G<0||G>1,l=l||G<h,h=G,s.push(G),A});u&&t.errors.push(function J9(){return new H(3012,!1)}()),l&&t.errors.push(function eK(){return new H(3200,!1)}());const y=n.steps.length;let b=0;o>0&&o<y?t.errors.push(function tK(){return new H(3202,!1)}()):0==o&&(b=1/(y-1));const C=y-1,w=t.currentTime,D=t.currentAnimateTimings,S=D.duration;return g.forEach((x,A)=>{const L=b>0?A==C?1:b*A:s[A],G=L*S;t.currentTime=w+D.delay+G,D.duration=G,this._validateStyleAst(x,t),x.offset=L,r.styles.push(x)}),r}visitReference(n,t){return{type:Xe.Reference,animation:es(this,Bm(n.animation),t),options:Ph(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:Xe.AnimateChild,options:Ph(n.options)}}visitAnimateRef(n,t){return{type:Xe.AnimateRef,animation:this.visitReference(n.animation,t),options:Ph(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[o,s]=function VK(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(FK,"")),e=e.replace(/@\*/g,jv).replace(/@\w+/g,t=>jv+"-"+t.slice(1)).replace(/:animating/g,iD),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+o:o,Jo(t.collectedStyles,t.currentQuerySelector,new Map);const l=es(this,Bm(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:Xe.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:l,originalSelector:n.selector,options:Ph(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function nK(){return new H(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:Uv(n.timings,t.errors,!0);return{type:Xe.Stagger,animation:es(this,Bm(n.animation),t),timings:r,options:null}}}class jK{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}}function Ph(e){return e?(e={...e}).params&&(e.params=function BK(e){return e?{...e}:null}(e.params)):e={},e}function pD(e,n,t){return{duration:e,delay:n,easing:t}}function gD(e,n,t,r,i,o,s=null,l=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:l}}class Wv{_map=new Map;get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const WK=new RegExp(":enter","g"),qK=new RegExp(":leave","g");function mD(e,n,t,r,i,o=new Map,s=new Map,l,u,h=[]){return(new KK).buildKeyframes(e,n,t,r,i,o,s,l,u,h)}class KK{buildKeyframes(n,t,r,i,o,s,l,u,h,g=[]){h=h||new Wv;const y=new _D(n,t,h,i,o,g,[]);y.options=u;const b=u.delay?Rc(u.delay):0;y.currentTimeline.delayNextStep(b),y.currentTimeline.setStyles([s],null,y.errors,u),es(this,r,y);const C=y.timelines.filter(w=>w.containsAnimation());if(C.length&&l.size){let w;for(let D=C.length-1;D>=0;D--){const S=C[D];if(S.element===t){w=S;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([l],null,y.errors,u)}return C.length?C.map(w=>w.buildKeyframes()):[gD(t,[],[],[],0,b,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const o=i?.delay;if(o){const s="number"==typeof o?o:Rc(jm(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(n,t,r){let o=t.currentTimeline.currentTime;const s=null!=r.duration?Rc(r.duration):null,l=null!=r.delay?Rc(r.delay):null;return 0!==s&&n.forEach(u=>{const h=t.appendInstructionToTimeline(u,s,l);o=Math.max(o,h.duration+h.delay)}),o}visitReference(n,t){t.updateOptions(n.options,!0),es(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const o=n.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){i.previousNode.type==Xe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Gv);const s=Rc(o.delay);i.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>es(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const o=n.options&&n.options.delay?Rc(n.options.delay):0;n.steps.forEach(s=>{const l=t.createSubContext(n.options);o&&l.delayNextStep(o),es(this,s,l),i=Math.max(i,l.currentTimeline.currentTime),r.push(l.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return Uv(t.params?jm(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=n.style;o.type==Xe.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(o):r.setStyles(n.styles,o,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,l=t.createSubContext().currentTimeline;l.easing=r.easing,n.styles.forEach(u=>{l.forwardTime((u.offset||0)*o),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(i+o),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},o=i.delay?Rc(i.delay):0;o&&(t.previousNode.type===Xe.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Gv);let s=r;const l=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((h,g)=>{t.currentQueryIndex=g;const y=t.createSubContext(n.options,h);o&&y.delayNextStep(o),h===t.element&&(u=y.currentTimeline),es(this,n.animation,y),y.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,y.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,o=n.timings,s=Math.abs(o.duration),l=s*(t.currentQueryTotal-1);let u=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=l-u;break;case"full":u=r.currentStaggerTime}const g=t.currentTimeline;u&&g.delayNextStep(u);const y=g.currentTime;es(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-y+(i.startTime-r.currentTimeline.startTime)}}const Gv={};class _D{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Gv;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,t,r,i,o,s,l,u){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=l,this.currentTimeline=u||new qv(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=Rc(r.duration)),null!=r.delay&&(i.delay=Rc(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(l=>{(!t||!s.hasOwnProperty(l))&&(s[l]=jm(o[l],s,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,o=new _D(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=Gv,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},o=new YK(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,o,s){let l=[];if(i&&l.push(this.element),n.length>0){n=(n=n.replace(WK,"."+this._enterClassName)).replace(qK,"."+this._leaveClassName);let h=this._driver.query(this.element,n,1!=r);0!==r&&(h=r<0?h.slice(h.length+r,h.length):h.slice(0,r)),l.push(...h)}return!o&&0==l.length&&s.push(function rK(){return new H(3014,!1)}()),l}}class qv{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new qv(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Pc),this._currentKeyframe.set(t,Pc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},s=function QK(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r??=n.keys();for(let o of r)t.set(o,Pc)}else for(let[o,s]of i)t.set(o,s)}),t}(n,this._globalTimelineStyles);for(let[l,u]of s){const h=jm(u,o,r);this._pendingStyles.set(l,h),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Pc),this._updateStyle(l,h)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((l,u)=>{const h=new Map([...this._backFill,...l]);h.forEach((g,y)=>{"!"===g?n.add(y):g===Pc&&t.add(y)}),r||h.set("offset",u/this.duration),i.push(h)});const o=[...n.values()],s=[...t.values()];if(r){const l=i[0],u=new Map(l);l.set("offset",0),u.set("offset",1),i=[l,u]}return gD(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class YK extends qv{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,t,r,i,o,s,l=!1){super(n,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=l,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=r+t,l=t/s,u=new Map(n[0]);u.set("offset",0),o.push(u);const h=new Map(n[0]);h.set("offset",bO(l)),o.push(h);const g=n.length-1;for(let y=1;y<=g;y++){let b=new Map(n[y]);const C=b.get("offset");b.set("offset",bO((t+C*r)/s)),o.push(b)}r=s,t=0,i="",n=o}return gD(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function bO(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}function CO(e,n,t,r,i,o,s,l,u,h,g,y,b){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:l,queriedElements:u,preStyleProps:h,postStyleProps:g,totalTime:y,errors:b}}const yD={};class EO{_triggerName;ast;_stateStyles;constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function ZK(e,n,t,r,i){return e.some(o=>o(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,o,s,l,u,h,g){const y=[],b=this.ast.options&&this.ast.options.params||yD,w=this.buildStyles(r,l&&l.params||yD,y),D=u&&u.params||yD,S=this.buildStyles(i,D,y),x=new Set,A=new Map,L=new Map,G="void"===i,W={params:wO(D,b),delay:this.ast.options?.delay},te=g?[]:mD(n,t,this.ast.animation,o,s,w,S,W,h,y);let ae=0;return te.forEach(se=>{ae=Math.max(se.duration+se.delay,ae)}),y.length?CO(t,this._triggerName,r,i,G,w,S,[],[],A,L,ae,y):(te.forEach(se=>{const be=se.element,nt=Jo(A,be,new Set);se.preStyleProps.forEach(ut=>nt.add(ut));const ct=Jo(L,be,new Set);se.postStyleProps.forEach(ut=>ct.add(ut)),be!==t&&x.add(be)}),CO(t,this._triggerName,r,i,G,w,S,te,[...x.values()],A,L,ae))}}function wO(e,n){const t={...n};return Object.entries(e).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class XK{styles;defaultParams;normalizer;constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=wO(n,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,l)=>{s&&(s=jm(s,i,t));const u=this.normalizer.normalizePropertyName(l,t);s=this.normalizer.normalizeStyleValue(l,u,s,t),r.set(l,s)})}),r}}class eY{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,t.states.forEach(i=>{this.states.set(i.name,new XK(i.style,i.options&&i.options.params||{},r))}),DO(this.states,"true","1"),DO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new EO(n,i,this.states))}),this.fallbackTransition=function tY(e,n){return new EO(e,{type:Xe.Transition,animation:{type:Xe.Sequence,steps:[],options:null},matchers:[(s,l)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(s=>s.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function DO(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const nY=new Wv;class rY{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r}register(n,t){const r=[],o=fD(this._driver,t,r,[]);if(r.length)throw function lK(){return new H(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,t,r){const i=n.element,o=aO(this._normalizer,n.keyframes,t,r);return this._driver.animate(i,o,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],o=this._animations.get(n);let s;const l=new Map;if(o?(s=mD(this._driver,t,o,fO,rD,new Map,new Map,r,nY,i),s.forEach(g=>{const y=Jo(l,g.element,new Map);g.postStyleProps.forEach(b=>y.set(b,null))})):(i.push(function cK(){return new H(3300,!1)}()),s=[]),i.length)throw function uK(){return new H(3504,!1)}();l.forEach((g,y)=>{g.forEach((b,C)=>{g.set(C,this._driver.computeStyle(y,C,Pc))})});const h=Ju(s.map(g=>{const y=l.get(g.element);return this._buildPlayer(g,new Map,y)}));return this._playersById.set(n,h),h.onDestroy(()=>this.destroy(n)),this.players.push(h),h}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function dK(){return new H(3301,!1)}();return t}listen(n,t,r,i){const o=tD(t,"","","");return Jw(this._getPlayer(n),r,o,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const o=this._getPlayer(n);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const IO="ng-animate-queued",vD="ng-animate-disabled",lY=[],SO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cY={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_a="__ng_removed";class bD{namespaceId;value;options;get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function fY(e){return e??null}(r?n.value:n),r){const{value:o,...s}=n;this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Um="void",CD=new bD(Um);class uY{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+n,Ss(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function hK(){return new H(3302,!1)}();if(null==r||0==r.length)throw function fK(){return new H(3303,!1)}();if(!function pY(e){return"start"==e||"done"==e}(r))throw function pK(){return new H(3400,!1)}();const o=Jo(this._elementListeners,n,[]),s={name:t,phase:r,callback:i};o.push(s);const l=Jo(this._engine.statesByElement,n,new Map);return l.has(t)||(Ss(n,Bv),Ss(n,Bv+"-"+t),l.set(t,CD)),()=>{this._engine.afterFlush(()=>{const u=o.indexOf(s);u>=0&&o.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function gK(){return new H(3401,!1)}();return t}trigger(n,t,r,i=!0){const o=this._getTrigger(t),s=new ED(this.id,t,n);let l=this._engine.statesByElement.get(n);l||(Ss(n,Bv),Ss(n,Bv+"-"+t),this._engine.statesByElement.set(n,l=new Map));let u=l.get(t);const h=new bD(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&h.absorbOptions(u.options),l.set(t,h),u||(u=CD),h.value!==Um&&u.value===h.value){if(!function _Y(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!n.hasOwnProperty(o)||e[o]!==n[o])return!1}return!0}(u.params,h.params)){const D=[],S=o.matchStyles(u.value,u.params,D),x=o.matchStyles(h.value,h.params,D);D.length?this._engine.reportError(D):this._engine.afterFlush(()=>{xh(n,S),yl(n,x)})}return}const b=Jo(this._engine.playersByElement,n,[]);b.forEach(D=>{D.namespaceId==this.id&&D.triggerName==t&&D.queued&&D.destroy()});let C=o.matchTransition(u.value,h.value,n,h.params),w=!1;if(!C){if(!i)return;C=o.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:C,fromState:u,toState:h,player:s,isFallbackTransition:w}),w||(Ss(n,IO),s.onStart(()=>{vp(n,IO)})),s.onDone(()=>{let D=this.players.indexOf(s);D>=0&&this.players.splice(D,1);const S=this._engine.playersByElement.get(n);if(S){let x=S.indexOf(s);x>=0&&S.splice(x,1)}}),this.players.push(s),b.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,jv,!0);r.forEach(i=>{if(i[_a])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const o=this._engine.statesByElement.get(n),s=new Map;if(o){const l=[];if(o.forEach((u,h)=>{if(s.set(h,u.value),this._triggers.has(h)){const g=this.trigger(n,h,Um,i);g&&l.push(g)}}),l.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,s),r&&Ju(l).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const u=this._triggers.get(s).fallbackTransition,h=r.get(s)||CD,g=new bD(Um),y=new ED(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:u,fromState:h,toState:g,player:y,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(n):[];if(o&&o.length)i=!0;else{let s=n;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const o=n[_a];(!o||o===SO)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){Ss(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(l=>{if(l.name==r.triggerName){const u=tD(o,r.triggerName,r.fromState.value,r.toState.value);u._data=n,Jw(r.player,l.phase,u,l.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class dY{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,t)=>{};_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new uY(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,l=this.driver.getParentElement(t);for(;l;){const u=i.get(l);if(u){const h=r.indexOf(u);r.splice(h+1,0,n),s=!0;break}l=this.driver.getParentElement(l)}s||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(n,t,r,i){if(Kv(t)){const o=this._fetchNamespace(n);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!Kv(t))return;const o=t[_a];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){const s=this._fetchNamespace(n);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Ss(n,vD)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),vp(n,vD))}removeNode(n,t,r){if(Kv(t)){const i=n?this._fetchNamespace(n):null;i?i.removeNode(t,r):this.markElementAsRemoved(n,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==n&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(n,t,r,i,o){this.collectedLeaveElements.push(t),t[_a]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,t,r,i,o){return Kv(t)?this._fetchNamespace(n).listen(t,r,i,o):()=>{}}_buildInstruction(n,t,r,i,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,o)}destroyInnerAnimations(n){let t=this.driver.query(n,jv,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,iD,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Ju(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[_a];if(t&&t.setForRemoval){if(n[_a]=SO,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(vD)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ss(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ju(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function mK(){return new H(3402,!1)}()}_flushAnimations(n,t){const r=new Wv,i=[],o=new Map,s=[],l=new Map,u=new Map,h=new Map,g=new Set;this.disabledNodes.forEach(ge=>{g.add(ge);const _e=this.driver.query(ge,".ng-animate-queued",!0);for(let Re=0;Re<_e.length;Re++)g.add(_e[Re])});const y=this.bodyNode,b=Array.from(this.statesByElement.keys()),C=AO(b,this.collectedEnterElements),w=new Map;let D=0;C.forEach((ge,_e)=>{const Re=fO+D++;w.set(_e,Re),ge.forEach(qe=>Ss(qe,Re))});const S=[],x=new Set,A=new Set;for(let ge=0;ge<this.collectedLeaveElements.length;ge++){const _e=this.collectedLeaveElements[ge],Re=_e[_a];Re&&Re.setForRemoval&&(S.push(_e),x.add(_e),Re.hasAnimation?this.driver.query(_e,".ng-star-inserted",!0).forEach(qe=>x.add(qe)):A.add(_e))}const L=new Map,G=AO(b,Array.from(x));G.forEach((ge,_e)=>{const Re=rD+D++;L.set(_e,Re),ge.forEach(qe=>Ss(qe,Re))}),n.push(()=>{C.forEach((ge,_e)=>{const Re=w.get(_e);ge.forEach(qe=>vp(qe,Re))}),G.forEach((ge,_e)=>{const Re=L.get(_e);ge.forEach(qe=>vp(qe,Re))}),S.forEach(ge=>{this.processLeaveNode(ge)})});const W=[],te=[];for(let ge=this._namespaceList.length-1;ge>=0;ge--)this._namespaceList[ge].drainQueuedTransitions(t).forEach(Re=>{const qe=Re.player,Sn=Re.element;if(W.push(qe),this.collectedEnterElements.length){const Si=Sn[_a];if(Si&&Si.setForMove){if(Si.previousTriggersValues&&Si.previousTriggersValues.has(Re.triggerName)){const Yh=Si.previousTriggersValues.get(Re.triggerName),Ms=this.statesByElement.get(Re.element);if(Ms&&Ms.has(Re.triggerName)){const tC=Ms.get(Re.triggerName);tC.value=Yh,Ms.set(Re.triggerName,tC)}}return void qe.destroy()}}const qi=!y||!this.driver.containsElement(y,Sn),Dr=L.get(Sn),yo=w.get(Sn),Ut=this._buildInstruction(Re,r,yo,Dr,qi);if(Ut.errors&&Ut.errors.length)return void te.push(Ut);if(qi)return qe.onStart(()=>xh(Sn,Ut.fromStyles)),qe.onDestroy(()=>yl(Sn,Ut.toStyles)),void i.push(qe);if(Re.isFallbackTransition)return qe.onStart(()=>xh(Sn,Ut.fromStyles)),qe.onDestroy(()=>yl(Sn,Ut.toStyles)),void i.push(qe);const fd=[];Ut.timelines.forEach(Si=>{Si.stretchStartingKeyframe=!0,this.disabledNodes.has(Si.element)||fd.push(Si)}),Ut.timelines=fd,r.append(Sn,Ut.timelines),s.push({instruction:Ut,player:qe,element:Sn}),Ut.queriedElements.forEach(Si=>Jo(l,Si,[]).push(qe)),Ut.preStyleProps.forEach((Si,Yh)=>{if(Si.size){let Ms=u.get(Yh);Ms||u.set(Yh,Ms=new Set),Si.forEach((tC,zI)=>Ms.add(zI))}}),Ut.postStyleProps.forEach((Si,Yh)=>{let Ms=h.get(Yh);Ms||h.set(Yh,Ms=new Set),Si.forEach((tC,zI)=>Ms.add(zI))})});if(te.length){const ge=[];te.forEach(_e=>{ge.push(function _K(){return new H(3505,!1)}())}),W.forEach(_e=>_e.destroy()),this.reportError(ge)}const ae=new Map,se=new Map;s.forEach(ge=>{const _e=ge.element;r.has(_e)&&(se.set(_e,_e),this._beforeAnimationBuild(ge.player.namespaceId,ge.instruction,ae))}),i.forEach(ge=>{const _e=ge.element;this._getPreviousPlayers(_e,!1,ge.namespaceId,ge.triggerName,null).forEach(qe=>{Jo(ae,_e,[]).push(qe),qe.destroy()})});const be=S.filter(ge=>PO(ge,u,h)),nt=new Map;MO(nt,this.driver,A,h,Pc).forEach(ge=>{PO(ge,u,h)&&be.push(ge)});const ut=new Map;C.forEach((ge,_e)=>{MO(ut,this.driver,new Set(ge),u,"!")}),be.forEach(ge=>{const _e=nt.get(ge),Re=ut.get(ge);nt.set(ge,new Map([..._e?.entries()??[],...Re?.entries()??[]]))});const pr=[],Ii=[],jt={};s.forEach(ge=>{const{element:_e,player:Re,instruction:qe}=ge;if(r.has(_e)){if(g.has(_e))return Re.onDestroy(()=>yl(_e,qe.toStyles)),Re.disabled=!0,Re.overrideTotalTime(qe.totalTime),void i.push(Re);let Sn=jt;if(se.size>1){let Dr=_e;const yo=[];for(;Dr=Dr.parentNode;){const Ut=se.get(Dr);if(Ut){Sn=Ut;break}yo.push(Dr)}yo.forEach(Ut=>se.set(Ut,Sn))}const qi=this._buildAnimation(Re.namespaceId,qe,ae,o,ut,nt);if(Re.setRealPlayer(qi),Sn===jt)pr.push(Re);else{const Dr=this.playersByElement.get(Sn);Dr&&Dr.length&&(Re.parentPlayer=Ju(Dr)),i.push(Re)}}else xh(_e,qe.fromStyles),Re.onDestroy(()=>yl(_e,qe.toStyles)),Ii.push(Re),g.has(_e)&&i.push(Re)}),Ii.forEach(ge=>{const _e=o.get(ge.element);if(_e&&_e.length){const Re=Ju(_e);ge.setRealPlayer(Re)}}),i.forEach(ge=>{ge.parentPlayer?ge.syncPlayerEvents(ge.parentPlayer):ge.destroy()});for(let ge=0;ge<S.length;ge++){const _e=S[ge],Re=_e[_a];if(vp(_e,rD),Re&&Re.hasAnimation)continue;let qe=[];if(l.size){let qi=l.get(_e);qi&&qi.length&&qe.push(...qi);let Dr=this.driver.query(_e,iD,!0);for(let yo=0;yo<Dr.length;yo++){let Ut=l.get(Dr[yo]);Ut&&Ut.length&&qe.push(...Ut)}}const Sn=qe.filter(qi=>!qi.destroyed);Sn.length?gY(this,_e,Sn):this.processLeaveNode(_e)}return S.length=0,pr.forEach(ge=>{this.players.push(ge),ge.onDone(()=>{ge.destroy();const _e=this.players.indexOf(ge);this.players.splice(_e,1)}),ge.play()}),pr}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,o){let s=[];if(t){const l=this.playersByQueriedElement.get(n);l&&(s=l)}else{const l=this.playersByElement.get(n);if(l){const u=!o||o==Um;l.forEach(h=>{h.queued||!u&&h.triggerName!=i||s.push(h)})}}return(r||i)&&(s=s.filter(l=>!(r&&r!=l.namespaceId||i&&i!=l.triggerName))),s}_beforeAnimationBuild(n,t,r){const o=t.element,s=t.isRemovalTransition?void 0:n,l=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const h=u.element,g=h!==o,y=Jo(r,h,[]);this._getPreviousPlayers(h,g,s,l,t.toState).forEach(C=>{const w=C.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),C.destroy(),y.push(C)})}xh(o,t.fromStyles)}_buildAnimation(n,t,r,i,o,s){const l=t.triggerName,u=t.element,h=[],g=new Set,y=new Set,b=t.timelines.map(w=>{const D=w.element;g.add(D);const S=D[_a];if(S&&S.removedBeforeQueried)return new Vm(w.duration,w.delay);const x=D!==u,A=function mY(e){const n=[];return xO(e,n),n}((r.get(D)||lY).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===D),L=o.get(D),G=s.get(D),W=aO(this._normalizer,w.keyframes,L,G),te=this._buildPlayer(w,W,A);if(w.subTimeline&&i&&y.add(D),x){const ae=new ED(n,l,D);ae.setRealPlayer(te),h.push(ae)}return te});h.forEach(w=>{Jo(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>function hY(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,w.element,w))}),g.forEach(w=>Ss(w,pO));const C=Ju(b);return C.onDestroy(()=>{g.forEach(w=>vp(w,pO)),yl(u,t.toStyles)}),y.forEach(w=>{Jo(i,w,[]).push(C)}),C}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new Vm(n.duration,n.delay)}}class ED{namespaceId;triggerName;element;_player=new Vm;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Jw(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){Jo(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function Kv(e){return e&&1===e.nodeType}function TO(e,n){const t=e.style.display;return e.style.display=n??"none",t}function MO(e,n,t,r,i){const o=[];t.forEach(u=>o.push(TO(u)));const s=[];r.forEach((u,h)=>{const g=new Map;u.forEach(y=>{const b=n.computeStyle(h,y,i);g.set(y,b),(!b||0==b.length)&&(h[_a]=cY,s.push(h))}),e.set(h,g)});let l=0;return t.forEach(u=>TO(u,o[l++])),s}function AO(e,n){const t=new Map;if(e.forEach(l=>t.set(l,[])),0==n.length)return t;const i=new Set(n),o=new Map;function s(l){if(!l)return 1;let u=o.get(l);if(u)return u;const h=l.parentNode;return u=t.has(h)?h:i.has(h)?1:s(h),o.set(l,u),u}return n.forEach(l=>{const u=s(l);1!==u&&t.get(u).push(l)}),t}function Ss(e,n){e.classList?.add(n)}function vp(e,n){e.classList?.remove(n)}function gY(e,n,t){Ju(t).onDone(()=>e.processLeaveNode(n))}function xO(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof oO?xO(r.players,n):n.push(r)}}function PO(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(o=>i.add(o)):n.set(e,r),t.delete(e),!0}class Hm{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,t)=>{};constructor(n,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new dY(n.body,t,r),this._timelineEngine=new rY(n.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(n,t,r,i,o){const s=n+"-"+i;let l=this._triggerCache[s];if(!l){const u=[],g=fD(this._driver,o,u,[]);if(u.length)throw function sK(){return new H(3404,!1)}();l=function JK(e,n,t){return new eY(e,n,t)}(i,g,this._normalizer),this._triggerCache[s]=l}this._transitionEngine.registerTrigger(t,i,l)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r){this._transitionEngine.removeNode(n,t,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[o,s]=lO(r);this._timelineEngine.command(o,t,s,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,o){if("@"==r.charAt(0)){const[s,l]=lO(r);return this._timelineEngine.listen(s,t,l,o)}return this._transitionEngine.listen(n,t,r,i,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let vY=(()=>{class e{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=e.initialStylesByElement.get(t);o||e.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&yl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(yl(this._element,this._initialStyles),this._endStyles&&(yl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(xh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xh(this._element,this._endStyles),this._endStyles=null),yl(this._element,this._initialStyles),this._state=3)}}return e})();function wD(e){let n=null;return e.forEach((t,r)=>{(function bY(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class RO{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:lD(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class kO{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,t){return uO(n,t)}getParentElement(n){return nD(n)}query(n,t,r){return dO(n,t,r)}computeStyle(n,t,r){return lD(n,t)}animate(n,t,r,i,o,s=[]){const u={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(u.easing=o);const h=new Map,g=s.filter(C=>C instanceof RO);(function AK(e,n){return 0===e||0===n})(r,i)&&g.forEach(C=>{C.currentSnapshot.forEach((w,D)=>h.set(D,w))});let y=function SK(e){return e.length?e[0]instanceof Map?e:e.map(n=>new Map(Object.entries(n))):[]}(t).map(C=>new Map(C));y=function xK(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<n.length;o++){let s=n[o];i.forEach(l=>s.set(l,lD(e,l)))}}return n}(n,y,h);const b=function yY(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=wD(n[0]),n.length>1&&(r=wD(n[n.length-1]))):n instanceof Map&&(t=wD(n)),t||r?new vY(e,t,r):null}(n,y);return new RO(n,y,u,b)}}const NO="@.disabled";class OO{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,t,r,i){this.namespaceId=n,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==NO?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r,i){return this.delegate.listen(n,t,r,i)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class CY extends OO{factory;constructor(n,t,r,i,o){super(t,r,i,o),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==NO?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r,i){if("@"==t.charAt(0)){const o=function EY(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function wY(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,o,s,l,u=>{this.factory.scheduleListenerCallback(u._data||-1,r,u)})}return this.delegate.listen(n,t,r,i)}}class DY{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,t,r){this.delegate=n,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(n,t){const i=this.delegate.createRenderer(n,t);if(!n||!t?.data?.animation){const h=this._rendererCache;let g=h.get(i);return g||(g=new OO("",i,this.engine,()=>h.delete(i)),h.set(i,g)),g}const o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,s,n,h.name,h)};return t.data.animation.forEach(l),new CY(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,t,r){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{const[s,l]=o;s(l)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}}const AY=[{provide:uD,useFactory:()=>new kO},{provide:CS,useFactory:()=>"BrowserAnimations"},...[{provide:dD,useFactory:function SY(){return new mO}},{provide:Hm,useClass:(()=>{class e extends Hm{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||e)(Te(go),Te(uD),Te(dD))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})()},{provide:wy,useFactory:function TY(e,n,t){return new DY(e,n,t)},deps:[QE,Hm,kt]}]];let Qv=(()=>{class e{constructor(){this.carrito=[],this.carrito=this.cargarCarritoDesdeLocalStorage()}obtenerCantidadTotal(){return this.carrito.reduce((t,r)=>t+r.cantidad,0)}agregarProducto(t){const r=this.carrito.find(i=>i.id===t.id);r?r.cantidad+=1:this.carrito.push({...t,cantidad:1}),this.guardarCarritoEnLocalStorage()}modificarCantidad(t,r){const i=this.carrito.findIndex(o=>o.id===t);-1!==i&&(this.carrito[i].cantidad+=r,this.carrito[i].cantidad<=0&&this.carrito.splice(i,1),this.guardarCarritoEnLocalStorage())}restarProducto(t){const r=this.carrito.find(i=>i.id===t.id);r&&(r.cantidad-=1,r.cantidad<=0&&(this.carrito=this.carrito.filter(i=>i.id!==t.id)),this.guardarCarritoEnLocalStorage())}obtenerProductos(){return this.carrito}obtenerTotalPrecio(){return this.carrito.reduce((t,r)=>t+r.precio*r.cantidad,0)}guardarCarritoEnLocalStorage(){localStorage.setItem("carrito",JSON.stringify(this.carrito))}vaciarCarrito(){this.carrito=[],localStorage.removeItem("carrito")}cargarCarritoDesdeLocalStorage(){if(typeof window<"u"&&window.localStorage){const t=localStorage.getItem("carrito");return t?JSON.parse(t):[]}return[]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Bt=Fe(541),bp=Fe(364);const PY_firebase={apiKey:"AIzaSyCM_PQzPMtYWb0p5xoyf6hQeHH_F6iEpPI",authDomain:"chatfirebase-88715.firebaseapp.com",databaseURL:"https://chatfirebase-88715-default-rtdb.firebaseio.com",projectId:"chatfirebase-88715",storageBucket:"chatfirebase-88715.appspot.com",messagingSenderId:"505676883013",appId:"1:505676883013:web:9630e6c944afcf14806f2c",measurementId:"G-EYR1C2QYMH"};let Zv=null;function vl(){return DD.apply(this,arguments)}function DD(){return(DD=(0,P.A)(function*(){if(Zv)return Zv;const{getApps:e,getApp:n,initializeApp:t}=yield Fe.e(834).then(Fe.bind(Fe,834)),{getAuth:r}=yield Promise.resolve().then(Fe.bind(Fe,364)),{getDatabase:i}=yield Promise.resolve().then(Fe.bind(Fe,541)),o=e().length?n():t(PY_firebase);return Zv={app:o,auth:r(o),database:i(o)},Zv})).apply(this,arguments)}function $m(e){return ID.apply(this,arguments)}function ID(){return(ID=(0,P.A)(function*(e){const{ref:n}=yield Promise.resolve().then(Fe.bind(Fe,541)),{database:t}=yield vl();return n(t,e)})).apply(this,arguments)}function Xv(e){return SD.apply(this,arguments)}function SD(){return(SD=(0,P.A)(function*(e){const{get:n}=yield Promise.resolve().then(Fe.bind(Fe,541)),t=yield $m(e),r=yield n(t);return r.exists()?r.val():null})).apply(this,arguments)}function TD(){return(TD=(0,P.A)(function*(e,n){const{onValue:t}=yield Promise.resolve().then(Fe.bind(Fe,541)),i=t(yield $m(e),o=>{n(o.exists()?o.val():null)});return()=>i()})).apply(this,arguments)}let Jv=(()=>{class e{constructor(){var t=this;this.usuarioSubject=new O(null),this.usuario$=this.usuarioSubject.asObservable(),vl().then(({auth:r,database:i})=>{(0,bp.onAuthStateChanged)(r,function(){var o=(0,P.A)(function*(s){if(!s)return t.usuarioSubject.next(null),void(typeof localStorage<"u"&&localStorage.removeItem("usuarioActual"));let l="user";try{const h=yield(0,Bt.get)((0,Bt.ref)(i,`users/${s.uid}`));h.exists()&&(l=h.val()?.role??"user")}catch{l="user"}const u={uid:s.uid,email:s.email,role:l,displayName:s.displayName??s.email??""};t.usuarioSubject.next(u),typeof localStorage<"u"&&localStorage.setItem("usuarioActual",JSON.stringify(u))});return function(s){return o.apply(this,arguments)}}())})}login(t,r){var i=this;return(0,P.A)(function*(){const{auth:o,database:s}=yield vl(),u=(yield(0,bp.signInWithEmailAndPassword)(o,t,r)).user;let h="user";try{const y=yield(0,Bt.get)((0,Bt.ref)(s,`users/${u.uid}`));y.exists()&&(h=y.val()?.role??"user")}catch{h="user"}const g={uid:u.uid,email:u.email,role:h,displayName:u.displayName??u.email??""};return i.usuarioSubject.next(g),typeof localStorage<"u"&&localStorage.setItem("usuarioActual",JSON.stringify(g)),g})()}logout(){this.usuarioSubject.next(null),typeof localStorage<"u"&&localStorage.removeItem("usuarioActual")}getUsuarioActual(){return this.usuarioSubject.value}getCurrentAuthUser(){return(0,P.A)(function*(){const{auth:t}=yield vl();return t.currentUser?t.currentUser:new Promise(r=>{const i=(0,bp.onAuthStateChanged)(t,o=>{i(),r(o)})})})()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function kY(e,n){if(1&e&&(B(0,"span",12),q(1),j()),2&e){const t=ot(2);ne(),br(t.cantidadEnCarrito)}}function NY(e,n){1&e&&(B(0,"div",20)(1,"p"),q(2,"Tu carrito est\xe1 vac\xedo."),j()())}function OY(e,n){if(1&e){const t=Rr();B(0,"div",21),on(1,"img",22),B(2,"div",23)(3,"strong"),q(4),j(),B(5,"div",24)(6,"span"),q(7),dr(8,"number"),j(),B(9,"div",25)(10,"button",26),ht("click",function(){const i=rt(t).$implicit;return dt(ot(3).restarCantidad(i))}),q(11,"\u2212"),j(),B(12,"span"),q(13),j(),B(14,"button",26),ht("click",function(){const i=rt(t).$implicit;return dt(ot(3).sumarCantidad(i))}),q(15,"+"),j()()(),B(16,"div",27),q(17),dr(18,"number"),j()()()}if(2&e){const t=n.$implicit;ne(),wE("alt",t.nombre),Pe("src",t.imagen,Ag),ne(3),br(t.nombre),ne(3),mn("$ ",hr(8,6,t.precio,"1.0-0"),""),ne(6),br(t.cantidad),ne(4),mn(" Subtotal: $ ",hr(18,9,t.precio*t.cantidad,"1.0-0")," ")}}function FY(e,n){if(1&e){const t=Rr();B(0,"div",13)(1,"div",14)(2,"h4"),q(3,"Carrito de Compras"),j(),B(4,"button",15),ht("click",function(){return rt(t),dt(ot(2).toggleMiniCarrito())}),q(5,"\u2716"),j()(),yt(6,NY,3,0,"div",16)(7,OY,19,12,"div",17),B(8,"div",18)(9,"strong"),q(10,"Total:"),j(),q(11),dr(12,"number"),j(),B(13,"button",19),q(14,"Ver carrito"),j()()}if(2&e){const t=ot(2);ne(6),Pe("ngIf",0===t.carritoService.obtenerProductos().length),ne(),Pe("ngForOf",t.carritoService.obtenerProductos()),ne(4),mn(" $",hr(12,3,t.carritoService.obtenerTotalPrecio(),"1.0-0")," ")}}function LY(e,n){if(1&e){const t=Rr();B(0,"div",28)(1,"button",26),ht("click",function(){return rt(t),dt(ot(2).cerrarSesion())}),q(2,"Cerrar sesi\xf3n"),j()()}}function VY(e,n){if(1&e){const t=Rr();Ly(0),B(1,"div",6),ht("click",function(){return rt(t),dt(ot().toggleMiniCarrito())}),q(2," \u{1f6d2} "),yt(3,kY,2,1,"span",7),j(),yt(4,FY,15,6,"div",8),B(5,"div",9)(6,"div",10),ht("click",function(){return rt(t),dt(ot().toggleDropdown())}),q(7),j(),yt(8,LY,3,0,"div",11),j(),Vy()}if(2&e){const t=ot();ne(3),Pe("ngIf",t.cantidadEnCarrito>0),ne(),Pe("ngIf",t.mostrarMiniCarrito),ne(3),mn(" \u{1f464} ",t.usuarioActual.email," "),ne(),Pe("ngIf",t.mostrarDropdown)}}function BY(e,n){1&e&&(B(0,"div",29)(1,"a",30),q(2,"\u{1f510} Iniciar sesi\xf3n"),j(),B(3,"a",31),q(4,"\u{1f4dd} Registrarse"),j()())}function jY(e,n){1&e&&(B(0,"div",41)(1,"a",42),q(2,"Ver todo"),j(),B(3,"a",43),q(4,"Blazers"),j(),B(5,"a",44),q(6,"Pantalones"),j(),B(7,"a",45),q(8,"Sacos"),j(),B(9,"a",46),q(10,"Sweater"),j(),B(11,"a",47),q(12,"Remeras"),j(),B(13,"a",48),q(14,"Camisas"),j(),B(15,"a",49),q(16,"Mono"),j(),B(17,"a",50),q(18,"Blusa"),j()())}function UY(e,n){1&e&&(B(0,"a",51),q(1,"Ingresar producto"),j())}function HY(e,n){1&e&&(B(0,"li")(1,"a",52),q(2,"Ver facturas"),j()())}function $Y(e,n){if(1&e){const t=Rr();B(0,"div",32)(1,"a",33),q(2,"Inicio"),j(),B(3,"div",34)(4,"span",35),ht("click",function(){return rt(t),dt(ot().toggleCategorias())}),q(5,"Productos \u25bc"),j(),yt(6,jY,19,0,"div",36),j(),B(7,"a",37),q(8,"Contacto"),j(),yt(9,UY,2,0,"a",38)(10,HY,3,0,"li",39),B(11,"a",40),q(12,"\u{1f464} ChatGlobal"),j()()}if(2&e){const t=ot();ne(6),Pe("ngIf",t.mostrarCategorias),ne(3),Pe("ngIf","admin"===t.usuarioActual.role),ne(),Pe("ngIf","admin"===(null==t.usuarioActual?null:t.usuarioActual.role))}}let zY=(()=>{class e{constructor(){this.carritoService=X(Qv),this.router=X(ri),this.authService=X(Jv),this.usuarioActual=null,this.mostrarCategorias=!1,this.mostrarDropdown=!1,this.mostrarMiniCarrito=!1}refrescarRolDesdeRTDB(){var t=this;return(0,P.A)(function*(){if(!(typeof localStorage>"u"))try{const r=localStorage.getItem("usuarioActual");if(!r)return;const i=JSON.parse(r),o=i?.uid;if(!o)return;const{database:s}=yield vl(),l=yield(0,Bt.get)((0,Bt.ref)(s,`users/${o}`));if(!l.exists())return;const h=l.val()?.rol??"user",g={...i,rol:h};localStorage.setItem("usuarioActual",JSON.stringify(g)),t.usuarioActual=g,t.authService.usuarioSubject.next(g)}catch(r){console.error("\u274c Error al refrescar rol desde RTDB",r)}})()}ngOnInit(){if(this.authService.usuario$.subscribe(t=>{this.usuarioActual=t}),!this.usuarioActual&&typeof localStorage<"u")try{const t=localStorage.getItem("usuarioActual");if(t){const r=JSON.parse(t);this.usuarioActual={...r,role:r.role??"user"}}}catch{this.usuarioActual=null}this.refrescarRolDesdeRTDB()}get cantidadEnCarrito(){return this.carritoService.obtenerCantidadTotal()}toggleCategorias(){this.mostrarCategorias=!this.mostrarCategorias}toggleMiniCarrito(){this.mostrarMiniCarrito=!this.mostrarMiniCarrito}toggleDropdown(){this.mostrarDropdown=!this.mostrarDropdown}sumarCantidad(t){this.carritoService.agregarProducto(t)}restarCantidad(t){this.carritoService.restarProducto(t)}cerrarSesion(){this.authService.logout(),this.usuarioActual=null,typeof localStorage<"u"&&localStorage.removeItem("usuarioActual"),this.router.navigate(["/login"])}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=_i({type:e,selectors:[["app-navbar"]],decls:8,vars:3,consts:[["noLogueado",""],[1,"navbar-superior"],[1,"logo"],[1,"iconos"],[4,"ngIf","ngIfElse"],["class","navbar-inferior",4,"ngIf"],[1,"icono","carrito-icono",3,"click"],["class","contador",4,"ngIf"],["class","mini-carrito",4,"ngIf"],[1,"usuario-dropdown"],[1,"usuario-wrapper",3,"click"],["class","dropdown-usuario",4,"ngIf"],[1,"contador"],[1,"mini-carrito"],[1,"mini-carrito-header"],[1,"cerrar-mini",3,"click"],["class","mini-vacio",4,"ngIf"],["class","mini-producto",4,"ngFor","ngForOf"],[1,"mini-total"],["routerLink","/carrito",1,"btn-ver-carrito"],[1,"mini-vacio"],[1,"mini-producto"],[3,"src","alt"],[1,"mini-detalles"],[1,"mini-controles"],[1,"mini-cantidad"],[3,"click"],[1,"mini-subtotal"],[1,"dropdown-usuario"],[1,"login-links"],["routerLink","/login"],["routerLink","/registro"],[1,"navbar-inferior"],["routerLink","/"],[1,"dropdown"],[1,"dropdown-toggle",3,"click"],["class","dropdown-menu",4,"ngIf"],["routerLink","/contacto"],["routerLink","/ingresar-producto",4,"ngIf"],[4,"ngIf"],["routerLink","/chat"],[1,"dropdown-menu"],["routerLink","/categoria/ver-todo"],["routerLink","/categoria/blazers"],["routerLink","/categoria/pantalones"],["routerLink","/categoria/sacos"],["routerLink","/categoria/sweater"],["routerLink","/categoria/remeras"],["routerLink","/categoria/camisas"],["routerLink","/categoria/mono"],["routerLink","/categoria/blusa"],["routerLink","/ingresar-producto"],["routerLink","/facturas"]],template:function(r,i){if(1&r&&(B(0,"div",1)(1,"div",2),q(2,"ECOMMERCEGB"),j(),B(3,"div",3),yt(4,VY,9,4,"ng-container",4)(5,BY,5,0,"ng-template",null,0,cm),j()(),yt(7,$Y,13,3,"div",5)),2&r){const o=sm(6);ne(4),Pe("ngIf",i.usuarioActual)("ngIfElse",o),ne(3),Pe("ngIf",i.usuarioActual)}},dependencies:[Zo,Eh,Qo,lp,Vv,yp],styles:[".navbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#000;color:#fff;font-family:Segoe UI,Arial,sans-serif;font-size:.95rem}.navbar-superior[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 24px;background-color:#000}.logo[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#fff}.iconos[_ngcontent-%COMP%]{display:flex;align-items:center;gap:18px;position:relative}.icono[_ngcontent-%COMP%]{font-size:20px;color:#fff;text-decoration:none;position:relative;cursor:pointer}.contador[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-10px;background-color:red;color:#fff;border-radius:50%;padding:2px 6px;font-size:10px;font-weight:700}.mini-carrito[_ngcontent-%COMP%]{position:absolute;right:0;top:42px;width:320px;background-color:#fff;color:#000;border-radius:10px;box-shadow:0 5px 15px #0003;padding:16px;z-index:999;font-size:14px}.mini-carrito-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:700;margin-bottom:10px}.cerrar-mini[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer}.mini-producto[_ngcontent-%COMP%]{display:flex;margin-bottom:12px}.mini-producto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:cover;margin-right:10px;border-radius:6px}.mini-detalles[_ngcontent-%COMP%]{flex:1}.mini-controles[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.mini-cantidad[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.mini-cantidad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22px;height:22px;font-size:14px;background-color:#eee;border:1px solid #ccc;cursor:pointer;border-radius:4px}.mini-subtotal[_ngcontent-%COMP%]{font-size:13px;margin-top:4px;color:#444}.mini-total[_ngcontent-%COMP%]{border-top:1px solid #ddd;margin-top:10px;padding-top:10px;text-align:right;font-weight:700}.btn-ver-carrito[_ngcontent-%COMP%]{width:100%;margin-top:10px;padding:10px;background-color:#000;color:#fff;border:none;border-radius:6px;cursor:pointer}.btn-ver-carrito[_ngcontent-%COMP%]:hover{background-color:#222}.navbar-inferior[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:28px;padding:10px 0;background-color:#111}.navbar-inferior[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:14px;transition:color .2s ease}.navbar-inferior[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#ccc}.dropdown[_ngcontent-%COMP%]{position:relative;cursor:pointer}.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;-webkit-user-select:none;user-select:none}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;background-color:#111;padding:10px;display:flex;flex-direction:column;gap:5px;border:1px solid #444;border-radius:4px;z-index:999}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:13px;padding:4px 10px;border-radius:4px}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#222}.login-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;margin-left:10px;font-size:14px;text-decoration:none}.login-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ccc}.usuario-wrapper[_ngcontent-%COMP%]{position:relative;background-color:#222;padding:5px 10px;border-radius:6px;color:#fff;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:6px}.usuario-wrapper[_ngcontent-%COMP%]:hover{background-color:#333}.dropdown-usuario[_ngcontent-%COMP%]{position:absolute;top:115%;right:0;background-color:#fff;color:#000;border:1px solid #ccc;border-radius:6px;padding:8px;z-index:999;box-shadow:0 2px 8px #0003;min-width:140px}.dropdown-usuario[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;padding:8px 12px;cursor:pointer;width:100%;text-align:left;font-size:14px}.dropdown-usuario[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.iconos[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;position:relative}.usuario-dropdown[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:flex-end}.usuario-wrapper[_ngcontent-%COMP%]{background-color:#333;padding:6px 12px;border-radius:8px;cursor:pointer;font-weight:700}.dropdown-usuario[_ngcontent-%COMP%]{position:absolute;top:110%;right:0;background-color:#fff;color:#000;border:1px solid #ccc;border-radius:6px;padding:8px;z-index:999;box-shadow:0 2px 8px #0003}"]})}}return e})(),WY=(()=>{class e{constructor(t,r){this.platformId=t,this.authSvc=r,this.title="ecommersGB"}ngOnInit(){1}static{this.\u0275fac=function(r){return new(r||e)(J(H_),J(Jv))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(on(0,"app-navbar"),B(1,"main",0),on(2,"router-outlet"),j())},dependencies:[jw,zY],encapsulation:2})}}return e})(),LO=(()=>{class e{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||e)(J(wc),J(Go))};static \u0275dir=tt({type:e})}return e})(),Rh=(()=>{class e extends LO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=p(e)))(i||e)}})();static \u0275dir=tt({type:e,features:[Wt]})}return e})();const bl=new ce(""),KY={provide:bl,useExisting:Lt(()=>ya),multi:!0},QY=new ce("");let ya=(()=>{class e extends LO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,null==this._compositionMode&&(this._compositionMode=!function YY(){const e=Yu()?Yu().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||e)(J(wc),J(Go),J(QY,8))};static \u0275dir=tt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ht("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[On([KY]),Wt]})}return e})();function AD(e){return null==e||0===xD(e)}function xD(e){return null==e?null:Array.isArray(e)||"string"==typeof e?e.length:e instanceof Set?e.size:null}const bi=new ce(""),ed=new ce(""),ZY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nr{static min(n){return function BO(e){return n=>{if(null==n.value||null==e)return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}(n)}static max(n){return function jO(e){return n=>{if(null==n.value||null==e)return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}(n)}static required(n){return UO(n)}static requiredTrue(n){return function HO(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function $O(e){return AD(e.value)||ZY.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function zO(e){return n=>{const t=n.value?.length??xD(n.value);return null===t||0===t?null:t<e?{minlength:{requiredLength:e,actualLength:t}}:null}}(n)}static maxLength(n){return function WO(e){return n=>{const t=n.value?.length??xD(n.value);return null!==t&&t>e?{maxlength:{requiredLength:e,actualLength:t}}:null}}(n)}static pattern(n){return function GO(e){if(!e)return eb;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(AD(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return XO(n)}static composeAsync(n){return JO(n)}}function UO(e){return AD(e.value)?{required:!0}:null}function eb(e){return null}function qO(e){return null!=e}function KO(e){return Zg(e)?kr(e):e}function YO(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function QO(e,n){return n.map(t=>t(e))}function ZO(e){return e.map(n=>function XY(e){return!e.validate}(n)?n:t=>n.validate(t))}function XO(e){if(!e)return null;const n=e.filter(qO);return 0==n.length?null:function(t){return YO(QO(t,n))}}function PD(e){return null!=e?XO(ZO(e)):null}function JO(e){if(!e)return null;const n=e.filter(qO);return 0==n.length?null:function(t){return function GY(...e){const n=qk(e),{args:t,keys:r}=Kk(e),i=new Rt(o=>{const{length:s}=t;if(!s)return void o.complete();const l=new Array(s);let u=s,h=s;for(let g=0;g<s;g++){let y=!1;pl(t[g]).subscribe(he(o,b=>{y||(y=!0,h--),l[g]=b},()=>u--,void 0,()=>{(!u||!y)&&(h||o.next(r?Qk(r,l):l),o.complete())}))}});return n?i.pipe(Yk(n)):i}(QO(t,n).map(KO)).pipe(Ce(YO))}}function RD(e){return null!=e?JO(ZO(e)):null}function e1(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function t1(e){return e._rawValidators}function n1(e){return e._rawAsyncValidators}function kD(e){return e?Array.isArray(e)?e:[e]:[]}function tb(e,n){return Array.isArray(e)?e.includes(n):e===n}function r1(e,n){const t=kD(n);return kD(e).forEach(i=>{tb(t,i)||t.push(i)}),t}function i1(e,n){return kD(n).filter(t=>!tb(e,t))}class o1{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=PD(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=RD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class Gi extends o1{name;get formDirective(){return null}get path(){return null}}class td extends o1{_parent=null;name=null;valueAccessor=null}class s1{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let kc=(()=>{class e extends s1{constructor(t){super(t)}static \u0275fac=function(r){return new(r||e)(J(td,2))};static \u0275dir=tt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&la("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Wt]})}return e})(),kh=(()=>{class e extends s1{constructor(t){super(t)}static \u0275fac=function(r){return new(r||e)(J(Gi,10))};static \u0275dir=tt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&la("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Wt]})}return e})();const zm="VALID",rb="INVALID",Cp="PENDING",Wm="DISABLED";class Ep{}class l1 extends Ep{value;source;constructor(n,t){super(),this.value=n,this.source=t}}class FD extends Ep{pristine;source;constructor(n,t){super(),this.pristine=n,this.source=t}}class LD extends Ep{touched;source;constructor(n,t){super(),this.touched=n,this.source=t}}class ib extends Ep{status;source;constructor(n,t){super(),this.status=n,this.source=t}}class c1 extends Ep{source;constructor(n){super(),this.source=n}}class u1 extends Ep{source;constructor(n){super(),this.source=n}}function VD(e){return(ob(e)?e.validators:e)||null}function BD(e,n){return(ob(n)?n.asyncValidators:e)||null}function ob(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function d1(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new H(1e3,"");if(!r[t])throw new H(1001,"")}function h1(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new H(1002,"")})}class sb{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,t){this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Cr(this.statusReactive)}set status(n){Cr(()=>this.statusReactive.set(n))}_status=Ic(()=>this.statusReactive());statusReactive=sl(void 0);get valid(){return this.status===zm}get invalid(){return this.status===rb}get pending(){return this.status==Cp}get disabled(){return this.status===Wm}get enabled(){return this.status!==Wm}errors;get pristine(){return Cr(this.pristineReactive)}set pristine(n){Cr(()=>this.pristineReactive.set(n))}_pristine=Ic(()=>this.pristineReactive());pristineReactive=sl(!0);get dirty(){return!this.pristine}get touched(){return Cr(this.touchedReactive)}set touched(n){Cr(()=>this.touchedReactive.set(n))}_touched=Ic(()=>this.touchedReactive());touchedReactive=sl(!1);get untouched(){return!this.touched}_events=new R;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(r1(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(r1(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(i1(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(i1(n,this._rawAsyncValidators))}hasValidator(n){return tb(this._rawValidators,n)}hasAsyncValidator(n){return tb(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){const t=!1===this.touched;this.touched=!0;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched({...n,sourceControl:r}),t&&!1!==n.emitEvent&&this._events.next(new LD(!0,r))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=n.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:r})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,r),t&&!1!==n.emitEvent&&this._events.next(new LD(!1,r))}markAsDirty(n={}){const t=!0===this.pristine;this.pristine=!1;const r=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty({...n,sourceControl:r}),t&&!1!==n.emitEvent&&this._events.next(new FD(!1,r))}markAsPristine(n={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=n.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,r),t&&!1!==n.emitEvent&&this._events.next(new FD(!0,r))}markAsPending(n={}){this.status=Cp;const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new ib(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending({...n,sourceControl:t})}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Wm,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue();const r=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new l1(this.value,r)),this._events.next(new ib(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=zm,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zm||this.status===Cp)&&this._runAsyncValidator(r,n.emitEvent)}const t=n.sourceControl??this;!1!==n.emitEvent&&(this._events.next(new l1(this.value,t)),this._events.next(new ib(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity({...n,sourceControl:t})}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wm:zm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=Cp,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=KO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,r){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||r)&&this._events.next(new ib(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,r)}_initObservables(){this.valueChanges=new cr,this.statusChanges=new cr}_calculateStatus(){return this._allControlsDisabled()?Wm:this.errors?rb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cp)?Cp:this._anyControlsHaveStatus(rb)?rb:zm}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),i&&this._events.next(new FD(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new LD(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ob(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function oQ(e){return Array.isArray(e)?PD(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function sQ(e){return Array.isArray(e)?RD(e):e||null}(this._rawAsyncValidators)}}class Gm extends sb{constructor(n,t,r){super(VD(t),BD(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){h1(this,0,n),Object.keys(n).forEach(r=>{d1(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n?n[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class f1 extends Gm{}const Nh=new ce("",{providedIn:"root",factory:()=>qm}),qm="always";function ab(e,n){return[...n.path,e]}function Km(e,n,t=qm){jD(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function lQ(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&p1(e,n)})}(e,n),function uQ(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function cQ(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&p1(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function aQ(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function lb(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),ub(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function cb(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function jD(e,n){const t=t1(e);null!==n.validator?e.setValidators(e1(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=n1(e);null!==n.asyncValidator?e.setAsyncValidators(e1(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();cb(n._rawValidators,i),cb(n._rawAsyncValidators,i)}function ub(e,n){let t=!1;if(null!==e){if(null!==n.validator){const i=t1(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==n.validator);o.length!==i.length&&(t=!0,e.setValidators(o))}}if(null!==n.asyncValidator){const i=n1(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==n.asyncValidator);o.length!==i.length&&(t=!0,e.setAsyncValidators(o))}}}const r=()=>{};return cb(n._rawValidators,r),cb(n._rawAsyncValidators,r),t}function p1(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function g1(e,n){jD(e,n)}function HD(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}function m1(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $D(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(o=>{o.constructor===ya?t=o:function fQ(e){return Object.getPrototypeOf(e.constructor)===Rh}(o)?r=o:i=o}),i||r||t||null}const gQ={provide:Gi,useExisting:Lt(()=>wp)},Ym=Promise.resolve();let wp=(()=>{class e extends Gi{callSetDisabledState;get submitted(){return Cr(this.submittedReactive)}_submitted=Ic(()=>this.submittedReactive());submittedReactive=sl(!1);_directives=new Set;form;ngSubmit=new cr;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Gm({},PD(t),RD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ym.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Km(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ym.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ym.then(()=>{const r=this._findContainer(t.path),i=new Gm({});g1(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ym.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ym.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),m1(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new c1(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new u1(this.form))}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||e)(J(bi,10),J(ed,10),J(Nh,8))};static \u0275dir=tt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&ht("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[On([gQ]),Wt]})}return e})();function _1(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function y1(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Qm=class extends sb{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,t,r){super(VD(t),BD(r,t)),this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ob(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=y1(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){_1(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){_1(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){y1(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},bQ={provide:td,useExisting:Lt(()=>Dp)},v1=Promise.resolve();let Dp=(()=>{class e extends td{_changeDetectorRef;callSetDisabledState;control=new Qm;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new cr;constructor(t,r,i,o,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$D(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),HD(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Km(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){v1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&sp(r);v1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ab(t,this._parent):[t]}static \u0275fac=function(r){return new(r||e)(J(Gi,9),J(bi,10),J(ed,10),J(bl,10),J(fm,8),J(Nh,8))};static \u0275dir=tt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[On([bQ]),Wt,vr]})}return e})(),Oh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=tt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();const CQ={provide:bl,useExisting:Lt(()=>Zm),multi:!0};let Zm=(()=>{class e extends Rh{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=p(e)))(i||e)}})();static \u0275dir=tt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&ht("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[On([CQ]),Wt]})}return e})();const zD=new ce(""),SQ={provide:Gi,useExisting:Lt(()=>nd)};let nd=(()=>{class e extends Gi{callSetDisabledState;get submitted(){return Cr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Ic(()=>this._submittedReactive());_submittedReactive=sl(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new cr;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ub(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Km(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){lb(t.control||null,t,!1),function pQ(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),m1(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new c1(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new u1(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(lb(r||null,t),(e=>e instanceof Qm)(i)&&(Km(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);g1(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function dQ(e,n){return ub(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jD(this.form,this),this._oldForm&&ub(this._oldForm,this)}static \u0275fac=function(r){return new(r||e)(J(bi,10),J(ed,10),J(Nh,8))};static \u0275dir=tt({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&ht("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[On([SQ]),Wt,vr]})}return e})();const AQ={provide:td,useExisting:Lt(()=>Ip)};let Ip=(()=>{class e extends td{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new cr;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$D(0,o)}ngOnChanges(t){this._added||this._setUpControl(),HD(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ab(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||e)(J(Gi,13),J(bi,10),J(ed,10),J(bl,10),J(zD,8))};static \u0275dir=tt({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[On([AQ]),Wt,vr]})}return e})(),Fh=(()=>{class e{_validator=eb;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):eb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static \u0275fac=function(r){return new(r||e)};static \u0275dir=tt({type:e,features:[vr]})}return e})();const VQ={provide:bi,useExisting:Lt(()=>Jm),multi:!0};let Jm=(()=>{class e extends Fh{required;inputName="required";normalizeInput=sp;createValidator=t=>UO;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=p(e)))(i||e)}})();static \u0275dir=tt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&dl("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[On([VQ]),Wt]})}return e})(),O1=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$u({type:e});static \u0275inj=Je({})}return e})();class F1 extends sb{constructor(n,t,r){super(VD(t),BD(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,r={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,r={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){h1(this,0,n),n.forEach((r,i)=>{d1(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(n.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,r)=>{n(t,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function L1(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let pb=(()=>{class e{useNonNullable=!1;get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return L1(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Gm(i,o)}record(t,r=null){const i=this._reduceControls(t);return new f1(i,r)}control(t,r,i){let o={};return this.useNonNullable?(L1(r)?o=r:(o.validators=r,o.asyncValidators=i),new Qm(t,{...o,nonNullable:!0})):new Qm(t,r,i)}array(t,r,i){const o=t.map(s=>this._createControl(s));return new F1(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Qm||t instanceof sb?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gb=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Nh,useValue:t.callSetDisabledState??qm}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=$u({type:e});static \u0275inj=Je({imports:[O1]})}return e})(),mb=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:zD,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Nh,useValue:t.callSetDisabledState??qm}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=$u({type:e});static \u0275inj=Je({imports:[O1]})}return e})(),zQ=(()=>{class e{transform(t,r){if(!r)return t;const i=r.toLowerCase();return t.filter(o=>o.nombre.toLowerCase().includes(i))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275pipe=yi({name:"filtroNombre",type:e,pure:!0})}}return e})(),_b=(()=>{class e{obtenerProductos(){return new Rt(t=>{let r;return Xv("/productos").then(i=>t.next(this.mapColeccion(i))).catch(i=>t.error(i)),function RY(e,n){return TD.apply(this,arguments)}("/productos",i=>{t.next(this.mapColeccion(i))}).then(i=>r=i).catch(i=>t.error(i)),()=>r?.()})}crearProducto(t){return(0,P.A)(function*(){const r=yield Xv("/productos"),o=Object.keys(r??{}).map(g=>Number(g)).filter(g=>!isNaN(g)),s=(o.length?Math.max(...o):0)+1,l=yield $m("/"),{update:u}=yield Promise.resolve().then(Fe.bind(Fe,541)),h={id:s,nombre:t.nombre??"",descripcion:t.descripcion??"",precio:Number(t.precio??0),stock:Number(t.stock??0),imagen:t.imagen??""};return yield u(l,{[`productos/${s}`]:{nombre:h.nombre,descripcion:h.descripcion,precio:h.precio,stock:h.stock,imagen:h.imagen}}),s})()}obtenerProductoPorId(t){var r=this;return(0,P.A)(function*(){const i=yield Xv(`/productos/${t}`);return i?r.mapProducto(String(t),i):null})()}actualizarProducto(t){return(0,P.A)(function*(){const r=yield $m(`/productos/${t.id}`),{update:i}=yield Promise.resolve().then(Fe.bind(Fe,541));yield i(r,{nombre:t.nombre,descripcion:t.descripcion,precio:Number(t.precio??0),stock:Number(t.stock??0),imagen:t.imagen??""})})()}eliminarProducto(t){return(0,P.A)(function*(){const r=yield $m(`/productos/${t}`),{remove:i}=yield Promise.resolve().then(Fe.bind(Fe,541));yield i(r)})()}mapColeccion(t){return Object.entries(t??{}).map(([r,i])=>this.mapProducto(r,i))}mapProducto(t,r){return{id:Number(t),nombre:r?.nombre??"",descripcion:r?.descripcion??"",precio:Number(r?.precio??0),stock:Number(r?.stock??0),imagen:r?.imagen??""}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const WQ=e=>["/editar-producto",e];function GQ(e,n){if(1&e){const t=Rr();B(0,"div",14)(1,"a",15),q(2,"\u270f\ufe0f Editar"),j(),B(3,"button",16),ht("click",function(){rt(t);const i=ot().$implicit;return dt(ot().confirmarEliminar(i.id))}),q(4,"\u{1f5d1}\ufe0f Eliminar"),j()()}if(2&e){const t=ot().$implicit;ne(),Pe("routerLink",PP(1,WQ,t.id))}}function qQ(e,n){1&e&&(B(0,"div",17),q(1," \xa1\xdaltimas unidades! "),j())}function KQ(e,n){if(1&e){const t=Rr();B(0,"div",7),on(1,"img",8),yt(2,GQ,5,3,"div",9),B(3,"div",10)(4,"h3"),q(5),j(),B(6,"p",11),q(7),dr(8,"number"),j(),yt(9,qQ,2,0,"div",12),B(10,"button",13),ht("click",function(){const i=rt(t).$implicit;return dt(ot().agregarAlCarrito(i))}),q(11," A\xf1adir al carrito "),j()()()}if(2&e){const t=n.$implicit,r=ot();ne(),Pe("src",t.imagen,Ag)("alt",t.nombre),ne(),Pe("ngIf","admin"===(null==r.usuarioActual?null:r.usuarioActual.rol)),ne(3),br(t.nombre),ne(2),mn("$ ",hr(8,6,t.precio,"1.0-2"),""),ne(2),Pe("ngIf",t.stock<3)}}function YQ(e,n){if(1&e&&(B(0,"div",18),q(1," \u2705 "),B(2,"strong"),q(3),j(),q(4," fue agregado al carrito\n"),j()),2&e){const t=ot();ne(3),br(t.productoAgregado)}}function QQ(e,n){if(1&e){const t=Rr();B(0,"div",19)(1,"div",20)(2,"h3"),q(3,"\xbfEliminar producto?"),j(),B(4,"p"),q(5,"\xbfEst\xe1s seguro de que quer\xe9s eliminar este producto?"),j(),B(6,"div",21)(7,"button",22),ht("click",function(){return rt(t),dt(ot().eliminarConfirmado())}),q(8,"S\xed, eliminar"),j(),B(9,"button",23),ht("click",function(){return rt(t),dt(ot().cancelarEliminar())}),q(10,"Cancelar"),j()()()()}}let ZQ=(()=>{class e{constructor(t,r){this.productosService=t,this.carritoService=r,this.productos=[],this.filtro="",this.mostrarConfirmacion=!1,this.productoAgregado="",this.idProductoAEliminar=null,this.mostrarModalEliminar=!1,this.usuarioActual=null}ngOnInit(){if(this.productosService.obtenerProductos().subscribe(t=>{this.productos=t.map(r=>({...r,stock:r.stock??0}))}),typeof window<"u"){const t=localStorage.getItem("usuarioActual");this.usuarioActual=t?JSON.parse(t):null}}agregarAlCarrito(t){this.carritoService.agregarProducto(t),this.productoAgregado=t.nombre,this.mostrarConfirmacion=!0,setTimeout(()=>{this.mostrarConfirmacion=!1},2500)}confirmarEliminar(t){this.idProductoAEliminar=t,this.mostrarModalEliminar=!0}cancelarEliminar(){this.idProductoAEliminar=null,this.mostrarModalEliminar=!1}eliminarConfirmado(){var t=this;return(0,P.A)(function*(){if(null!==t.idProductoAEliminar)try{yield t.productosService.eliminarProducto(t.idProductoAEliminar),t.productos=t.productos.filter(r=>r.id!==t.idProductoAEliminar),t.mostrarModalEliminar=!1}catch(r){console.error("Error eliminando producto en RTDB",r),alert("No se pudo eliminar el producto.")}})()}static{this.\u0275fac=function(r){return new(r||e)(J(_b),J(Qv))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-productos"]],decls:9,vars:7,consts:[[1,"titulo"],[1,"buscador"],["type","text","placeholder","\u{1f50d} Buscar producto...",1,"form-control",3,"ngModelChange","ngModel"],[1,"grid-productos"],["class","tarjeta",4,"ngFor","ngForOf"],["class","modal-confirmacion",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"tarjeta"],[1,"imagen-producto",3,"src","alt"],["class","botones-abm",4,"ngIf"],[1,"contenido-tarjeta"],[1,"precio"],["class","ultimas-unidades",4,"ngIf"],[1,"btn-agregar",3,"click"],[1,"botones-abm"],[1,"btn-editar",3,"routerLink"],[1,"btn-eliminar",3,"click"],[1,"ultimas-unidades"],[1,"modal-confirmacion"],[1,"modal-overlay"],[1,"modal-contenido"],[1,"modal-botones"],[1,"btn-confirmar",3,"click"],[1,"btn-cancelar",3,"click"]],template:function(r,i){1&r&&(B(0,"h2",0),q(1,"Productos disponibles"),j(),B(2,"div",1)(3,"input",2),po("ngModelChange",function(s){return Ko(i.filtro,s)||(i.filtro=s),s}),j()(),B(4,"div",3),yt(5,KQ,12,9,"div",4),dr(6,"filtroNombre"),j(),yt(7,YQ,5,1,"div",5)(8,QQ,11,0,"div",6)),2&r&&(ne(3),fo("ngModel",i.filtro),ne(2),Pe("ngForOf",hr(6,4,i.productos,i.filtro)),ne(2),Pe("ngIf",i.mostrarConfirmacion),ne(),Pe("ngIf",i.mostrarModalEliminar))},dependencies:[Zo,Eh,Qo,lp,Vv,yp,gb,ya,kc,Dp,zQ],styles:[".titulo[_ngcontent-%COMP%]{text-align:center;margin:2.2rem 0 1.2rem;font-size:2rem;font-weight:800}.buscador[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:0 32px 18px 0}.buscador[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #0ea5e9;border-radius:10px;font-size:1rem;width:280px;box-shadow:0 2px 8px #0284c71f;transition:border-color .2s ease,box-shadow .2s ease}.buscador[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#0369a1;outline:none;box-shadow:0 0 0 4px #0ea5e926}.grid-productos[_ngcontent-%COMP%]{--card-min: 240px;display:grid;grid-template-columns:repeat(auto-fit,minmax(var(--card-min),1fr));gap:22px;padding:0 24px 48px}.tarjeta[_ngcontent-%COMP%]{background:#fff;border-radius:14px;overflow:hidden;border:1px solid #eaeaea;box-shadow:0 10px 24px #0000000f;transition:transform .15s ease,box-shadow .15s ease,border-color .15s ease}.tarjeta[_ngcontent-%COMP%]:hover{transform:translateY(-3px);border-color:#dbeafe;box-shadow:0 16px 36px #1e40af1f}.imagen-producto[_ngcontent-%COMP%], .tarjeta[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:180px;object-fit:cover;background:#f8fafc}.contenido-tarjeta[_ngcontent-%COMP%]{padding:14px 14px 16px;text-align:center}.contenido-tarjeta[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.05rem;margin:4px 0 6px;font-weight:700}.precio[_ngcontent-%COMP%]{font-weight:800;font-size:1.05rem;margin:2px 0 8px}.ultimas-unidades[_ngcontent-%COMP%]{display:inline-block;background:#fef2f2;color:#b91c1c;font-weight:700;font-size:.85rem;padding:4px 8px;border-radius:999px;margin-bottom:10px}.btn-agregar[_ngcontent-%COMP%]{display:inline-block;margin-top:6px;background:linear-gradient(180deg,#2563eb,#1d4ed8);color:#fff;border:none;padding:10px 14px;cursor:pointer;border-radius:10px;font-weight:700;letter-spacing:.2px;transition:transform .1s ease,filter .2s ease,box-shadow .2s ease;box-shadow:0 8px 18px #2563eb40}.btn-agregar[_ngcontent-%COMP%]:hover{filter:brightness(1.05);box-shadow:0 10px 22px #1d4ed859}.btn-agregar[_ngcontent-%COMP%]:active{transform:scale(.96)}.botones-abm[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center;padding:10px;background:#f8fafc;border-bottom:1px solid #eef2ff}.btn-editar[_ngcontent-%COMP%], .btn-eliminar[_ngcontent-%COMP%]{padding:6px 10px;border-radius:8px;font-weight:700;border:none;cursor:pointer;text-decoration:none}.btn-editar[_ngcontent-%COMP%]{background:#fde68a;color:#7c2d12}.btn-eliminar[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-eliminar[_ngcontent-%COMP%]:hover{filter:brightness(1.05)}.modal-confirmacion[_ngcontent-%COMP%]{position:fixed;top:16px;right:16px;background:#dcfce7;color:#065f46;padding:12px 16px;border-radius:12px;font-weight:800;box-shadow:0 12px 28px #10b98140;animation:_ngcontent-%COMP%_fadein .25s ease;z-index:1000}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073;display:grid;place-items:center;z-index:1000}.modal-contenido[_ngcontent-%COMP%]{width:320px;background:#fff;border-radius:14px;padding:20px;text-align:center;box-shadow:0 24px 48px #0003}.modal-botones[_ngcontent-%COMP%]{margin-top:14px;display:flex;gap:10px;justify-content:center}.btn-confirmar[_ngcontent-%COMP%], .btn-cancelar[_ngcontent-%COMP%]{border:none;padding:8px 12px;border-radius:10px;font-weight:700}.btn-confirmar[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-cancelar[_ngcontent-%COMP%]{background:#9ca3af;color:#fff}@keyframes _ngcontent-%COMP%_fadein{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 420px){.buscador[_ngcontent-%COMP%]{justify-content:center;margin:0 0 16px}.buscador[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.imagen-producto[_ngcontent-%COMP%], .tarjeta[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:160px}}"]})}}return e})();class yb{}class vb{}class va{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof va?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new va;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof va?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=n.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(l=>-1===o.indexOf(l)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}addHeaderEntry(n,t){const r=n.toLowerCase();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(n,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=n.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(n,i)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class XQ{encodeKey(n){return V1(n)}encodeValue(n){return V1(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const eZ=/%(\d[a-f0-9])/gi,tZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function V1(e){return encodeURIComponent(e).replace(eZ,(n,t)=>tZ[t]??n)}function bb(e){return`${e}`}class rd{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new XQ,n.fromString){if(n.fromObject)throw new H(2805,!1);this.map=function JQ(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,l]=-1==o?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,o)),n.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(l),t.set(s,u)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(bb):[bb(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new rd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(bb(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(bb(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class nZ{map=new Map;set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function B1(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function j1(e){return typeof Blob<"u"&&e instanceof Blob}function U1(e){return typeof FormData<"u"&&e instanceof FormData}const e_="Content-Type",qD="X-Request-URL",H1="text/plain",$1="application/json",z1=`${$1}, ${H1}, */*`;class t_{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,t,r,i){let o;if(this.url=t,this.method=n.toUpperCase(),function rZ(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new va,this.context??=new nZ,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+s}}else this.params=new rd,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||B1(this.body)||j1(this.body)||U1(this.body)||function iZ(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)?this.body:this.body instanceof rd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||U1(this.body)?null:j1(this.body)?this.body.type||null:B1(this.body)?null:"string"==typeof this.body?H1:this.body instanceof rd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?$1:null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,o=n.transferCache??this.transferCache,s=void 0!==n.body?n.body:this.body,l=n.withCredentials??this.withCredentials,u=n.reportProgress??this.reportProgress;let h=n.headers||this.headers,g=n.params||this.params;const y=n.context??this.context;return void 0!==n.setHeaders&&(h=Object.keys(n.setHeaders).reduce((b,C)=>b.set(C,n.setHeaders[C]),h)),n.setParams&&(g=Object.keys(n.setParams).reduce((b,C)=>b.set(C,n.setParams[C]),g)),new t_(t,r,s,{params:g,headers:h,context:y,reportProgress:u,responseType:i,withCredentials:l,transferCache:o})}}var id=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(id||{});class KD{headers;status;statusText;url;ok;type;constructor(n,t=200,r="OK"){this.headers=n.headers||new va,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Eb extends KD{constructor(n={}){super(n)}type=id.ResponseHeader;clone(n={}){return new Eb({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class n_ extends KD{body;constructor(n={}){super(n),this.body=void 0!==n.body?n.body:null}type=id.Response;clone(n={}){return new n_({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Sp extends KD{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function YD(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}let r_=(()=>{class e{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof t_)o=t;else{let u,h;u=i.headers instanceof va?i.headers:new va(i.headers),i.params&&(h=i.params instanceof rd?i.params:new rd({fromObject:i.params})),o=new t_(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:h,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=Ze(o).pipe(up(u=>this.handler.handle(u)));if(t instanceof t_||"events"===i.observe)return s;const l=s.pipe(Ac(u=>u instanceof n_));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Ce(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new H(2806,!1);return u.body}));case"blob":return l.pipe(Ce(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new H(2807,!1);return u.body}));case"text":return l.pipe(Ce(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new H(2808,!1);return u.body}));default:return l.pipe(Ce(u=>u.body))}case"response":return l;default:throw new H(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new rd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,YD(i,r))}post(t,r,i={}){return this.request("POST",t,YD(i,r))}put(t,r,i={}){return this.request("PUT",t,YD(i,r))}static \u0275fac=function(r){return new(r||e)(Te(yb))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();const q1=new ce("");function K1(e,n){return n(e)}function uZ(e,n){return(t,r)=>n.intercept(t,{handle:i=>e(i,r)})}const hZ=new ce(""),i_=new ce(""),fZ=new ce(""),Y1=new ce("",{providedIn:"root",factory:()=>!0});function pZ(){let e=null;return(n,t)=>{null===e&&(e=(X(hZ,{optional:!0})??[]).reduceRight(uZ,K1));const r=X(_c);if(X(Y1)){const o=r.add();return e(n,t).pipe(Em(()=>r.remove(o)))}return e(n,t)}}let Q1=(()=>{class e extends yb{backend;injector;chain=null;pendingTasks=X(_c);contributeToStability=X(Y1);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(i_),...this.injector.get(fZ,[])]));this.chain=r.reduceRight((i,o)=>function dZ(e,n,t){return(r,i)=>Hr(t,()=>n(r,o=>e(o,i)))}(i,o,this.injector),K1)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Em(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(Te(vb),Te(Un))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();const yZ=/^\)\]\}',?\n/,vZ=RegExp(`^${qD}:`,"m");let X1=(()=>{class e{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new H(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?kr(r.\u0275loadImpl()):Ze(null)).pipe(pa(()=>new Rt(o=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((D,S)=>s.setRequestHeader(D,S.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept",z1),!t.headers.has(e_)){const D=t.detectContentTypeHeader();null!==D&&s.setRequestHeader(e_,D)}if(t.responseType){const D=t.responseType.toLowerCase();s.responseType="json"!==D?D:"text"}const l=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const D=s.statusText||"OK",S=new va(s.getAllResponseHeaders()),x=function bZ(e){return"responseURL"in e&&e.responseURL?e.responseURL:vZ.test(e.getAllResponseHeaders())?e.getResponseHeader(qD):null}(s)||t.url;return u=new Eb({headers:S,status:s.status,statusText:D,url:x}),u},g=()=>{let{headers:D,status:S,statusText:x,url:A}=h(),L=null;204!==S&&(L=typeof s.response>"u"?s.responseText:s.response),0===S&&(S=L?200:0);let G=S>=200&&S<300;if("json"===t.responseType&&"string"==typeof L){const W=L;L=L.replace(yZ,"");try{L=""!==L?JSON.parse(L):null}catch(te){L=W,G&&(G=!1,L={error:te,text:L})}}G?(o.next(new n_({body:L,headers:D,status:S,statusText:x,url:A||void 0})),o.complete()):o.error(new Sp({error:L,headers:D,status:S,statusText:x,url:A||void 0}))},y=D=>{const{url:S}=h(),x=new Sp({error:D,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});o.error(x)};let b=!1;const C=D=>{b||(o.next(h()),b=!0);let S={type:id.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(S.total=D.total),"text"===t.responseType&&s.responseText&&(S.partialText=s.responseText),o.next(S)},w=D=>{let S={type:id.UploadProgress,loaded:D.loaded};D.lengthComputable&&(S.total=D.total),o.next(S)};return s.addEventListener("load",g),s.addEventListener("error",y),s.addEventListener("timeout",y),s.addEventListener("abort",y),t.reportProgress&&(s.addEventListener("progress",C),null!==l&&s.upload&&s.upload.addEventListener("progress",w)),s.send(l),o.next({type:id.Sent}),()=>{s.removeEventListener("error",y),s.removeEventListener("abort",y),s.removeEventListener("load",g),s.removeEventListener("timeout",y),t.reportProgress&&(s.removeEventListener("progress",C),null!==l&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(Te(qR))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();const XD=new ce(""),J1=new ce("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),eF=new ce("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class tF{}let wZ=(()=>{class e{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=zR(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||e)(Te(go),Te(J1))};static \u0275prov=pe({token:e,factory:e.\u0275fac})}return e})();function DZ(e,n){const t=e.url.toLowerCase();if(!X(XD)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=X(tF).getToken(),i=X(eF);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}var od=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(od||{});function nF(...e){const n=[r_,X1,Q1,{provide:yb,useExisting:Q1},{provide:vb,useFactory:()=>X(q1,{optional:!0})??X(X1)},{provide:i_,useValue:DZ,multi:!0},{provide:XD,useValue:!0},{provide:tF,useClass:wZ}];for(const t of e)n.push(...t.\u0275providers);return Mr(n)}const rF=new ce("");function IZ(){return function Lh(e,n){return{\u0275kind:e,\u0275providers:n}}(od.LegacyInterceptors,[{provide:rF,useFactory:pZ},{provide:i_,useExisting:rF,multi:!0}])}let JD=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$u({type:e});static \u0275inj=Je({providers:[nF(IZ())]})}return e})(),wb=(()=>{class e{constructor(t){this.auth=t,this.ROOT="facturas"}facturas$(){return new Rt(t=>{vl().then(({database:r})=>{const i=(0,Bt.ref)(r,this.ROOT),o=s=>{const l=s.val()||{},u=Object.entries(l).map(([h,g])=>this.mapFactura(h,g));t.next(u.sort((h,g)=>g.ts-h.ts))};(0,Bt.onValue)(i,o,s=>t.error(s)),t.add(()=>(0,Bt.off)(i,"value",o))}).catch(r=>t.error(r))})}facturasOnce(){var t=this;return(0,P.A)(function*(){const{database:r}=yield vl(),i=(0,Bt.ref)(r,t.ROOT),s=(yield(0,Bt.get)(i)).val()||{};return Object.entries(s).map(([u,h])=>t.mapFactura(u,h)).sort((u,h)=>h.ts-u.ts)})()}crearFactura(t){var r=this;return(0,P.A)(function*(){const i=Date.now(),o=`${i}-${Math.random().toString(36).slice(2,8)}`,s=yield r.auth.getUsuarioActual(),l=s?.uid??null,u=s?.email??null,h=s?.displayName??s?.email??null,g={ts:i,fechaISO:new Date(i).toISOString(),totalARS:t.totalARS,totalUSD:t.totalUSD,tipo_cambio:t.tipo_cambio,estado:"PAGADA",userId:l,cliente_email:u,cliente_nombre:h,items:t.items??[]},{database:y}=yield vl();return yield(0,Bt.set)((0,Bt.ref)(y,`${r.ROOT}/${o}`),g),o})()}actualizarEstado(t,r){var i=this;return(0,P.A)(function*(){const{database:o}=yield vl();yield(0,Bt.update)((0,Bt.ref)(o,`${i.ROOT}/${t}`),{estado:r})})()}generarCSVDesdeFacturas(t){const o=[["ID","Fecha","Total_ARS","Total_USD","Tipo_Cambio","Estado","Cliente_Email","Cliente_Nombre","Detalle"],...t.map(s=>[s.id,this.formatFechaLocal(s.ts),this.formatMoneyARS(s.totalARS),null!=s.totalUSD?this.formatMoneyUSD(s.totalUSD):"",s.tipo_cambio??"",s.estado,s.cliente_email??"",s.cliente_nombre??"",this.buildDetalle(s)])].map(s=>s.map(l=>this.csvEscape(String(l??""))).join(",")).join("\n");return new Blob([o],{type:"text/csv;charset=utf-8;"})}csvEscape(t){return t.includes('"')||t.includes(",")||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t}formatFechaLocal(t){try{return new Date(t).toLocaleString()}catch{return""}}formatMoneyARS(t){try{return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",maximumFractionDigits:2}).format(t)}catch{return String(t)}}formatMoneyUSD(t){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(t)}catch{return String(t)}}mapFactura(t,r){return{id:t,ts:Number(r?.ts??0),fechaISO:String(r?.fechaISO??""),totalARS:Number(r?.totalARS??0),totalUSD:r?.totalUSD??null,tipo_cambio:r?.tipo_cambio??null,estado:r?.estado??"PAGADA",userId:r?.userId??null,cliente_email:r?.cliente_email??null,cliente_nombre:r?.cliente_nombre??null,items:r?.items??void 0}}buildDetalle(t){const r=Array.isArray(t?.items)?t.items:[];return r.length?r.map(o=>{const s=o.producto_nombre??"(sin nombre)",l=Number(o.cantidad??1),u=Number(o.precio_unitario??0),h=null!=o.subtotal_ars?Number(o.subtotal_ars):u*(isNaN(l)?0:l),g=isNaN(h)?"":h.toFixed(2);return`${s} x${isNaN(l)?"":l} @${(o=>{const s=Number(o);return isNaN(s)?"":s.toFixed(2)})(u)} = ${g}`}).join(" | "):""}static{this.\u0275fac=function(r){return new(r||e)(Te(Jv))}}static{this.\u0275prov=pe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function SZ(e,n){1&e&&(B(0,"div")(1,"p"),q(2,"No hay productos en el carrito."),j()())}function TZ(e,n){if(1&e){const t=Rr();B(0,"div",6),on(1,"img",7),B(2,"div",8)(3,"h4"),q(4),j(),B(5,"div",9)(6,"button",10),ht("click",function(){const i=rt(t).$implicit;return dt(ot(3).disminuirCantidad(i))}),q(7,"\u2212"),j(),q(8),B(9,"button",10),ht("click",function(){const i=rt(t).$implicit;return dt(ot(3).aumentarCantidad(i))}),q(10,"+"),j()(),B(11,"p"),q(12),dr(13,"number"),j(),B(14,"p")(15,"strong"),q(16,"Subtotal:"),j(),q(17),dr(18,"number"),j()()()}if(2&e){const t=n.$implicit;ne(),Pe("src",t.imagen,Ag)("alt",t.nombre),ne(3),br(t.nombre),ne(4),mn(" Cantidad: ",t.cantidad," "),ne(4),mn("Precio unitario: $",hr(13,6,t.precio,"1.0-0"),""),ne(5),mn(" $",hr(18,9,t.precio*t.cantidad,"1.0-0"),"")}}function MZ(e,n){if(1&e){const t=Rr();B(0,"div"),yt(1,TZ,19,12,"div",3),on(2,"hr"),B(3,"p",4)(4,"strong"),q(5,"Total a pagar:"),j(),q(6),dr(7,"number"),j(),B(8,"button",5),ht("click",function(){return rt(t),dt(ot(2).irAFinalizarCompra())}),q(9," \u{1f9fe} Finalizar compra\n"),j()()}if(2&e){const t=ot(2);ne(),Pe("ngForOf",t.productosEnCarrito),ne(5),mn(" $",hr(7,2,t.obtenerTotal(),"1.0-0")," ")}}function AZ(e,n){if(1&e&&(B(0,"div"),yt(1,SZ,3,0,"div",1)(2,MZ,10,5,"div",1),j()),2&e){const t=ot();ne(),Pe("ngIf",0===t.productosEnCarrito.length),ne(),Pe("ngIf",t.productosEnCarrito.length>0)}}function xZ(e,n){if(1&e){const t=Rr();B(0,"div",11)(1,"button",12),ht("click",function(){return rt(t),dt(ot().irAProductos())}),q(2," \u{1f6cd}\ufe0f Volver a la tienda "),j(),B(3,"button",13),ht("click",function(){return rt(t),dt(ot().irAFacturas())}),q(4," \u{1f4c4} Ver mis facturas "),j()()}}let PZ=(()=>{class e{constructor(t,r,i,o){this.carritoService=t,this.router=r,this.facturaSrv=i,this.http=o,this.productosEnCarrito=[],this.compraRealizada=!1,this.cotizacionUSD=null,this.cargandoCotizacion=!1}ngOnInit(){this.productosEnCarrito=this.carritoService.obtenerProductos(),this.obtenerCotizacionUSD()}obtenerTotal(){return this.productosEnCarrito.reduce((t,r)=>t+r.precio*r.cantidad,0)}aumentarCantidad(t){this.carritoService.modificarCantidad(t.id,1),this.productosEnCarrito=this.carritoService.obtenerProductos()}disminuirCantidad(t){this.carritoService.modificarCantidad(t.id,-1),this.productosEnCarrito=this.carritoService.obtenerProductos()}irAProductos(){this.router.navigate(["/productos"])}irAFacturas(){this.router.navigate(["/facturas"])}irAFinalizarCompra(){this.router.navigate(["/finalizar-compra"])}obtenerCotizacionUSD(){var t=this;return(0,P.A)(function*(){try{t.cargandoCotizacion=!0;const r=yield t.http.get("https://dolarapi.com/v1/dolares/oficial").toPromise();t.cotizacionUSD=Number(r?.venta)||null}catch(r){console.error("Error al obtener cotizaci\xf3n DolarApi:",r),t.cotizacionUSD=null}finally{t.cargandoCotizacion=!1}})()}finalizarCompra(){var t=this;return(0,P.A)(function*(){const r=t.carritoService.obtenerProductos();if(0===r.length)return void alert("El carrito est\xe1 vac\xedo.");const i=r.reduce((u,h)=>u+h.precio*h.cantidad,0),o=r.map(u=>({producto_id:u.id,producto_nombre:u.nombre,cantidad:u.cantidad,precio_unitario:u.precio,subtotal_ars:u.cantidad*u.precio})),s=t.cotizacionUSD??null,l=s&&s>0?Number((i/s).toFixed(2)):null;try{yield t.facturaSrv.crearFactura({items:o,totalARS:i,totalUSD:l,tipo_cambio:s}),t.carritoService.vaciarCarrito(),t.productosEnCarrito=[],t.compraRealizada=!0,setTimeout(()=>t.compraRealizada=!1,3e3)}catch(u){console.error("Error al generar la factura en RTDB",u),alert("Ocurri\xf3 un error al guardar la factura.")}})()}static{this.\u0275fac=function(r){return new(r||e)(J(Qv),J(ri),J(wb),J(r_))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-carrito"]],decls:5,vars:2,consts:[[1,"contenedor-carrito"],[4,"ngIf"],["class","acciones-post-compra",4,"ngIf"],["class","item-carrito",4,"ngFor","ngForOf"],[1,"total"],[1,"btn-finalizar",3,"click"],[1,"item-carrito"],[1,"imagen-carrito",3,"src","alt"],[1,"info-carrito"],[1,"cantidad-control"],[3,"click"],[1,"acciones-post-compra"],[1,"btn-volver",3,"click"],[1,"btn-facturas",3,"click"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"h2"),q(2,"Carrito de Compras"),j(),yt(3,AZ,3,2,"div",1)(4,xZ,5,0,"div",2),j()),2&r&&(ne(3),Pe("ngIf",!i.compraRealizada),ne(),Pe("ngIf",i.compraRealizada))},dependencies:[Zo,Eh,Qo,lp,JD],styles:[".contenedor-carrito[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:16px;background:#f8f9fa;border-radius:10px}.item-carrito[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;background:#fff;border:1px solid #ddd;border-radius:8px;padding:12px}.imagen-carrito[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;margin-right:16px}.info-carrito[_ngcontent-%COMP%]{flex-grow:1}.cantidad-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:8px}.cantidad-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:4px 8px;border-radius:4px;cursor:pointer}.cantidad-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.eliminar[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:4px 10px;border-radius:4px;cursor:pointer;margin-top:8px}.eliminar[_ngcontent-%COMP%]:hover{background-color:#b02a37}.total[_ngcontent-%COMP%]{font-size:1.2rem;text-align:right;margin-top:16px}.cantidad-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px;padding:3px 8px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.cantidad-control[_ngcontent-%COMP%]{margin:5px 0;display:flex;align-items:center;gap:10px}.mensaje-confirmado[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background-color:#d4edda;color:#155724;border:1px solid #c3e6cb;border-radius:5px;font-size:1rem}.acciones-post-compra[_ngcontent-%COMP%]{margin-top:1rem}.acciones-post-compra[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;gap:1rem}.acciones-post-compra[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 16px;border-radius:6px;text-decoration:none;color:#fff;font-weight:700;transition:background-color .2s ease}.btn-volver[_ngcontent-%COMP%]{background-color:#007bff}.btn-facturas[_ngcontent-%COMP%]{background-color:#17a2b8}.btn-facturas[_ngcontent-%COMP%]:hover{background-color:#117a8b}.toast-exito[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background-color:#28a745;color:#fff;padding:12px 20px;border-radius:8px;box-shadow:0 0 10px #0003;animation:_ngcontent-%COMP%_fadeInOut 3s ease-in-out forwards;z-index:1000}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translateY(20px)}10%{opacity:1;transform:translateY(0)}90%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(20px)}}.acciones-post-compra[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:2rem;align-items:center}.btn-volver[_ngcontent-%COMP%], .btn-facturas[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .2s ease;width:80%;max-width:300px;text-align:center}.btn-volver[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-volver[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-facturas[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-facturas[_ngcontent-%COMP%]:hover{background-color:#1e7e34}.btn-finalizar[_ngcontent-%COMP%]{display:inline-block;background-color:#28a745;color:#fff;font-size:1rem;font-weight:500;padding:10px 20px;border:none;border-radius:6px;cursor:pointer;text-decoration:none;transition:background-color .2s ease,transform .1s ease}.btn-finalizar[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-finalizar[_ngcontent-%COMP%]:active{transform:scale(.97)}"]})}}return e})();function RZ(e,n){if(1&e&&(B(0,"div",10),q(1),j()),2&e){const t=ot();ne(),mn(" \u2705 ",t.mensaje," ")}}let kZ=(()=>{class e{constructor(t,r){this.productosService=t,this.router=r,this.producto={nombre:"",descripcion:"",precio:0,stock:0,imagen:""},this.mensaje="",this.guardando=!1}crearProducto(){var t=this;return(0,P.A)(function*(){t.guardando=!0,t.mensaje="";try{console.log("Producto a guardar:",t.producto);const r=yield t.productosService.crearProducto(t.producto);console.log("\u2705 Producto creado con ID:",r),t.mensaje="Producto creado correctamente",setTimeout(()=>{t.mensaje="",t.router.navigate(["/productos"])},2e3)}catch(r){console.error("\u274c Error al crear el producto:",r),t.mensaje="Error al crear el producto"}finally{t.guardando=!1}})()}static{this.\u0275fac=function(r){return new(r||e)(J(_b),J(ri))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-alta-producto"]],decls:13,vars:6,consts:[["form","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],["type","text","placeholder","Nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Descripci\xf3n","name","descripcion",3,"ngModelChange","ngModel"],["type","number","placeholder","Precio","name","precio","required","",3,"ngModelChange","ngModel"],["type","number","placeholder","Stock","name","stock","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Ruta imagen (assets/...)","name","imagen",3,"ngModelChange","ngModel"],["type","submit"],["class","confirmacion",4,"ngIf"],[1,"confirmacion"]],template:function(r,i){if(1&r){const o=Rr();B(0,"div",1)(1,"h2"),q(2,"Alta de Producto"),j(),B(3,"form",2,0),ht("ngSubmit",function(){return rt(o),dt(i.crearProducto())}),B(5,"input",3),po("ngModelChange",function(l){return rt(o),Ko(i.producto.nombre,l)||(i.producto.nombre=l),dt(l)}),j(),B(6,"input",4),po("ngModelChange",function(l){return rt(o),Ko(i.producto.descripcion,l)||(i.producto.descripcion=l),dt(l)}),j(),B(7,"input",5),po("ngModelChange",function(l){return rt(o),Ko(i.producto.precio,l)||(i.producto.precio=l),dt(l)}),j(),B(8,"input",6),po("ngModelChange",function(l){return rt(o),Ko(i.producto.stock,l)||(i.producto.stock=l),dt(l)}),j(),B(9,"input",7),po("ngModelChange",function(l){return rt(o),Ko(i.producto.imagen,l)||(i.producto.imagen=l),dt(l)}),j(),B(10,"button",8),q(11,"Crear producto"),j()(),yt(12,RZ,2,1,"div",9),j()}2&r&&(ne(5),fo("ngModel",i.producto.nombre),ne(),fo("ngModel",i.producto.descripcion),ne(),fo("ngModel",i.producto.precio),ne(),fo("ngModel",i.producto.stock),ne(),fo("ngModel",i.producto.imagen),ne(3),Pe("ngIf",i.mensaje))},dependencies:[Zo,Qo,gb,Oh,ya,Zm,kc,kh,Jm,Dp,wp],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:300px;gap:10px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:6px;border:none;border-radius:4px;cursor:pointer}.confirmacion[_ngcontent-%COMP%]{margin-top:10px;color:green;font-weight:700}"]})}}return e})();function NZ(e,n){if(1&e&&(B(0,"div",10),q(1),j()),2&e){const t=ot();ne(),mn(" \u2705 ",t.mensaje," ")}}let OZ=(()=>{class e{constructor(t,r,i){this.route=t,this.router=r,this.productosService=i,this.producto={id:0,nombre:"",descripcion:"",precio:0,stock:0,imagen:""},this.mensaje="",this.cargando=!1,this.guardando=!1}ngOnInit(){var t=this;return(0,P.A)(function*(){t.cargando=!0;const r=Number(t.route.snapshot.paramMap.get("id"));try{const i=yield t.productosService.obtenerProductoPorId(r);i?t.producto=i:t.mensaje="Producto no encontrado"}catch(i){console.error("Error al cargar producto:",i),t.mensaje="Error al cargar el producto"}finally{t.cargando=!1}})()}guardarCambios(){var t=this;return(0,P.A)(function*(){t.guardando=!0,t.mensaje="";try{yield t.productosService.actualizarProducto(t.producto),t.mensaje="Producto actualizado correctamente",setTimeout(()=>{t.mensaje="",t.router.navigate(["/productos"])},2e3)}catch(r){console.error("Error al actualizar producto:",r),t.mensaje="Error al actualizar el producto"}finally{t.guardando=!1}})()}static{this.\u0275fac=function(r){return new(r||e)(J(Mh),J(ri),J(_b))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-editar-producto"]],decls:13,vars:6,consts:[["form","ngForm"],[1,"container","mt-4"],[3,"ngSubmit"],["type","text","name","nombre","placeholder","Nombre","required","",3,"ngModelChange","ngModel"],["type","text","name","descripcion","placeholder","Descripci\xf3n",3,"ngModelChange","ngModel"],["type","number","name","precio","placeholder","Precio","required","",3,"ngModelChange","ngModel"],["type","number","name","stock","placeholder","Stock disponible","required","",3,"ngModelChange","ngModel"],["type","text","name","imagen","placeholder","URL de imagen",3,"ngModelChange","ngModel"],["type","submit"],["class","confirmacion",4,"ngIf"],[1,"confirmacion"]],template:function(r,i){if(1&r){const o=Rr();B(0,"div",1)(1,"h2"),q(2,"Editar Producto"),j(),B(3,"form",2,0),ht("ngSubmit",function(){return rt(o),dt(i.guardarCambios())}),B(5,"input",3),po("ngModelChange",function(l){return rt(o),Ko(i.producto.nombre,l)||(i.producto.nombre=l),dt(l)}),j(),B(6,"input",4),po("ngModelChange",function(l){return rt(o),Ko(i.producto.descripcion,l)||(i.producto.descripcion=l),dt(l)}),j(),B(7,"input",5),po("ngModelChange",function(l){return rt(o),Ko(i.producto.precio,l)||(i.producto.precio=l),dt(l)}),j(),B(8,"input",6),po("ngModelChange",function(l){return rt(o),Ko(i.producto.stock,l)||(i.producto.stock=l),dt(l)}),j(),B(9,"input",7),po("ngModelChange",function(l){return rt(o),Ko(i.producto.imagen,l)||(i.producto.imagen=l),dt(l)}),j(),B(10,"button",8),q(11,"Guardar cambios"),j()(),yt(12,NZ,2,1,"div",9),j()}2&r&&(ne(5),fo("ngModel",i.producto.nombre),ne(),fo("ngModel",i.producto.descripcion),ne(),fo("ngModel",i.producto.precio),ne(),fo("ngModel",i.producto.stock),ne(),fo("ngModel",i.producto.imagen),ne(3),Pe("ngIf",i.mensaje))},dependencies:[Zo,Qo,gb,Oh,ya,Zm,kc,kh,Jm,Dp,wp],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:40px auto;padding:24px;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 10px #00000014;font-family:Segoe UI,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;color:#222;font-size:24px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}input[_ngcontent-%COMP%]{padding:10px 14px;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .2s ease}input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}button[type=submit][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;padding:12px;border:none;border-radius:8px;cursor:pointer;transition:background-color .2s ease,transform .1s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0056b3}button[type=submit][_ngcontent-%COMP%]:active{transform:scale(.98)}.confirmacion[_ngcontent-%COMP%]{margin-top:16px;color:#155724;font-weight:700;text-align:center}"]})}}return e})(),FZ=(()=>{class e{transform(t,r){return r?t.filter(i=>i.id.toString().includes(r.trim())):t}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275pipe=yi({name:"filtroFactura",type:e,pure:!0})}}return e})();const LZ=()=>["/estadisticas"];function VZ(e,n){if(1&e&&(B(0,"td"),q(1),dr(2,"number"),j()),2&e){const t=ot().$implicit;ne(),mn(" $ ",hr(2,1,t.totalUSD,"1.2-2")," ")}}function BZ(e,n){1&e&&(B(0,"td"),q(1,"\u2014"),j())}function jZ(e,n){if(1&e&&(B(0,"tr")(1,"td"),q(2),j(),B(3,"td"),q(4),dr(5,"date"),j(),B(6,"td"),q(7),dr(8,"number"),j(),yt(9,VZ,3,4,"td",11)(10,BZ,2,0,"ng-template",null,1,cm),B(12,"td"),q(13),j()()),2&e){const t=n.$implicit,r=sm(11);ne(2),br(t.id),ne(2),br(hr(5,6,t.fechaISO,"short")),ne(3),mn("$ ",hr(8,9,t.totalARS,"1.2-2"),""),ne(2),Pe("ngIf",null!=t.totalUSD)("ngIfElse",r),ne(4),br(t.cliente_nombre||"\u2014")}}function UZ(e,n){if(1&e&&(B(0,"table",9)(1,"thead")(2,"tr")(3,"th"),q(4,"ID"),j(),B(5,"th"),q(6,"Fecha"),j(),B(7,"th"),q(8,"Total (ARS)"),j(),B(9,"th"),q(10,"Total (USD)"),j(),B(11,"th"),q(12,"Cliente"),j()()(),B(13,"tbody"),yt(14,jZ,14,12,"tr",10),dr(15,"filtroFactura"),j()()),2&e){const t=ot();ne(14),Pe("ngForOf",hr(15,1,t.facturas,t.filtroFactura))}}function HZ(e,n){1&e&&(B(0,"p"),q(1,"No hay facturas registradas."),j())}let $Z=(()=>{class e{constructor(t){this.facturasSrv=t,this.filtroFactura="",this.facturas=[],this.descargandoCsv=!1}ngOnInit(){this.sub=this.facturasSrv.facturas$().subscribe(t=>{this.facturas=t})}ngOnDestroy(){this.sub?.unsubscribe()}exportarCSV(){if(this.facturas?.length){this.descargandoCsv=!0;try{const t=this.facturasSrv.generarCSVDesdeFacturas(this.facturas),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`facturas-${(new Date).toISOString().slice(0,10)}.csv`,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)}finally{this.descargandoCsv=!1}}}static{this.\u0275fac=function(r){return new(r||e)(J(wb))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-facturas"]],decls:12,vars:6,consts:[["sinDatos",""],["sinUSD",""],[1,"titulo"],[1,"toolbar"],[1,"buscador"],["type","text","placeholder","\u{1f50d} Buscar por ID...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-outline-success","csv-btn",3,"routerLink"],["type","button",1,"csv-btn",3,"click","disabled"],["class","tabla-facturas",4,"ngIf","ngIfElse"],[1,"tabla-facturas"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"]],template:function(r,i){if(1&r){const o=Rr();B(0,"h2",2),q(1,"Facturas generadas"),j(),B(2,"div",3)(3,"div",4)(4,"input",5),po("ngModelChange",function(l){return rt(o),Ko(i.filtroFactura,l)||(i.filtroFactura=l),dt(l)}),j()(),B(5,"button",6),q(6,"Estad\xedsticas"),j(),B(7,"button",7),ht("click",function(){return rt(o),dt(i.exportarCSV())}),q(8," Exportar CSV "),j()(),yt(9,UZ,16,4,"table",8)(10,HZ,2,0,"ng-template",null,0,cm)}if(2&r){const o=sm(11);ne(4),fo("ngModel",i.filtroFactura),ne(),Pe("routerLink",function xP(e,n,t){const r=ar()+e,i=K();return i[r]===it?ul(i,r,t?n.call(t):n()):function Kg(e,n){return e[n]}(i,r)}(5,LZ)),ne(2),Pe("disabled",i.descargandoCsv),ne(2),Pe("ngIf",i.facturas.length>0)("ngIfElse",o)}},dependencies:[Zo,Eh,Qo,lp,gw,gb,ya,kc,Dp,FZ,Vv,yp],styles:[".titulo[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1rem}.tabla-facturas[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}.tabla-facturas[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla-facturas[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:center}.tabla-facturas[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f4f4f4}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin:12px 0}.toolbar[_ngcontent-%COMP%]   .buscador[_ngcontent-%COMP%]{flex:1}.buscador[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:44px;padding:0 12px;font-size:14px;border:1px solid #ced4da;border-radius:8px;transition:border-color .15s,box-shadow .15s}.buscador[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:0;border-color:#86b7fe;box-shadow:0 0 0 .2rem #0d6efd40}.csv-btn[_ngcontent-%COMP%]{height:44px;min-width:170px;padding:0 16px;border-radius:8px;border:1px solid #0d6efd;background:#0d6efd;color:#fff;font-size:14px;font-weight:600;line-height:1;display:inline-flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;box-shadow:0 1px 2px #0000000f;transition:background .15s,border-color .15s,box-shadow .15s}.csv-btn[_ngcontent-%COMP%]:hover{background:#0b62e5;border-color:#0b62e5}.csv-btn[_ngcontent-%COMP%]:focus-visible{outline:0;box-shadow:0 0 0 .2rem #0d6efd40}.csv-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}}return e})();function zZ(e,n){if(1&e&&(B(0,"tr")(1,"td"),q(2),j(),B(3,"td"),q(4),dr(5,"number"),j(),B(6,"td"),q(7),dr(8,"number"),j(),B(9,"td"),q(10),j(),B(11,"td"),q(12),dr(13,"number"),j(),B(14,"td"),q(15),dr(16,"number"),j()()),2&e){const t=n.$implicit,r=ot();ne(2),br(t.nombre),ne(2),mn("$ ",hr(5,6,t.precio,"1.2-2"),""),ne(3),mn("U$D ",hr(8,9,t.precio/r.cotizacionUSD,"1.2-2"),""),ne(3),br(t.cantidad),ne(2),mn("$ ",hr(13,12,r.obtenerSubtotal(t),"1.2-2"),""),ne(3),mn("U$D ",hr(16,15,r.obtenerSubtotalUSD(t),"1.2-2"),"")}}function WZ(e,n){if(1&e){const t=Rr();B(0,"div",4)(1,"p"),q(2," \u{1f4b1} Cotizaci\xf3n oficial del BCRA: "),B(3,"strong"),q(4),dr(5,"number"),j(),q(6," ARS/USD"),on(7,"br"),q(8," \xbfQuer\xe9s pagar en d\xf3lares? "),on(9,"br"),B(10,"a",5),q(11,"\u{1f4f2} Contactanos por WhatsApp"),j()(),B(12,"button",6),ht("click",function(){return rt(t),dt(ot().confirmar())}),q(13,"\u2705 Confirmar compra"),j()()}if(2&e){const t=ot();ne(4),mn("$ ",hr(5,1,t.cotizacionUSD,"1.2-2"),"")}}let GZ=(()=>{class e{constructor(t){this.http=t,this.confirmarCompra=new cr,this.productos=[],this.cotizacionUSD=0}ngOnInit(){this.http.get("https://dolarapi.com/v1/dolares/oficial").subscribe({next:t=>{console.log("\u{1f4ca} Cotizaci\xf3n oficial:",t),this.cotizacionUSD=Number(t.venta)||0},error:t=>{console.error("\u274c Error al obtener cotizaci\xf3n DolarApi:",t),this.cotizacionUSD=0}})}round2(t){return Math.round(100*(t+Number.EPSILON))/100}obtenerSubtotal(t){return t.precio*t.cantidad}obtenerSubtotalUSD(t){return this.cotizacionUSD?this.obtenerSubtotal(t)/this.cotizacionUSD:0}obtenerTotal(){return this.productos.reduce((t,r)=>t+this.obtenerSubtotal(r),0)}obtenerTotalUSD(){return this.cotizacionUSD?this.obtenerTotal()/this.cotizacionUSD:0}confirmar(){const t=this.cotizacionUSD||0,r=this.productos.map(o=>{const s=this.obtenerSubtotal(o),l=t?o.precio/t:0,u=t?s/t:0;return{producto_id:"number"==typeof o.id?o.id:null,producto_nombre:o.nombre,cantidad:o.cantidad,precio_unit_ars:this.round2(o.precio),subtotal_ars:this.round2(s),precio_unit_usd:this.round2(l),subtotal_usd:this.round2(u)}}),i={fecha:(new Date).toISOString(),cliente_id:null,cliente_nombre:null,tipo_cambio:t,total_ars:this.round2(this.obtenerTotal()),total_usd:this.round2(this.obtenerTotalUSD()),items:r};console.log("[FacturaPreview] Payload listo para confirmar:",i),this.confirmarCompra.emit(i)}static{this.\u0275fac=function(r){return new(r||e)(J(r_))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-factura-preview"]],inputs:{productos:"productos"},outputs:{confirmarCompra:"confirmarCompra"},decls:31,vars:10,consts:[[1,"tabla"],[4,"ngFor","ngForOf"],[1,"total"],["class","compra-usd",4,"ngIf"],[1,"compra-usd"],["href","https://wa.me/5491123456789","target","_blank"],[1,"btn","btn-success",3,"click"]],template:function(r,i){1&r&&(B(0,"h3"),q(1,"\u{1f9fe} Detalle de la factura"),j(),B(2,"table",0)(3,"thead")(4,"tr")(5,"th"),q(6,"Producto"),j(),B(7,"th"),q(8,"Precio ARS"),j(),B(9,"th"),q(10,"Precio USD"),j(),B(11,"th"),q(12,"Cantidad"),j(),B(13,"th"),q(14,"Subtotal ARS"),j(),B(15,"th"),q(16,"Subtotal USD"),j()()(),B(17,"tbody"),yt(18,zZ,17,18,"tr",1),j()(),B(19,"div",2)(20,"p")(21,"strong"),q(22,"Total ARS:"),j(),q(23),dr(24,"number"),j(),B(25,"p")(26,"strong"),q(27,"Total USD:"),j(),q(28),dr(29,"number"),j()(),yt(30,WZ,14,4,"div",3)),2&r&&(ne(18),Pe("ngForOf",i.productos),ne(5),mn(" $ ",hr(24,4,i.obtenerTotal(),"1.2-2"),""),ne(5),mn(" U$D ",hr(29,7,i.obtenerTotalUSD(),"1.2-2"),""),ne(2),Pe("ngIf",i.cotizacionUSD))},dependencies:[Zo,Eh,Qo,lp,JD],styles:[".tabla[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem}.tabla[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;text-align:center}.tabla[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0}.total[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.2rem}.compra-usd[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f0f8ff;border:1px solid #ccc;border-radius:6px}.compra-usd[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.btn-confirmar[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1rem;background-color:green;color:#fff;border:none;border-radius:5px;cursor:pointer}h3[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.4rem;color:#333}.tabla[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.tabla[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f0f0f0}.tabla[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tabla[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;border:1px solid #ccc}.total[_ngcontent-%COMP%]{margin-top:15px;font-size:1.1rem;font-weight:700}.compra-usd[_ngcontent-%COMP%]{margin-top:20px;background-color:#eef8ff;padding:15px;border:1px solid #a8d1ff;border-radius:8px;font-size:.95rem;color:#333}.compra-usd[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#07c;font-weight:700;text-decoration:none}.compra-usd[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button.btn-success[_ngcontent-%COMP%]{margin-top:15px;padding:10px 16px;font-size:1rem;border:none;border-radius:6px;background-color:#28a745;color:#fff;cursor:pointer}button.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return e})(),qZ=(()=>{class e{constructor(t,r,i){this.carritoService=t,this.facturaService=r,this.router=i,this.productosSeleccionados=[],this.guardando=!1}ngOnInit(){this.productosSeleccionados=this.carritoService.obtenerProductos()}confirmarCompra(t){var r=this;return(0,P.A)(function*(){if(console.log("[Padre] Recib\xed payload:",t),!t||!t.items?.length)return void alert("No hay \xedtems para facturar.");if(!t.tipo_cambio||t.tipo_cambio<=0)return void alert("No se pudo obtener la cotizaci\xf3n del d\xf3lar. Intenta nuevamente.");const i={totalARS:t.total_ars,totalUSD:t.total_usd,tipo_cambio:t.tipo_cambio,items:t.items.map(o=>({producto_id:o.producto_id??0,producto_nombre:o.producto_nombre,cantidad:o.cantidad,precio_unitario:o.precio_unit_ars,subtotal_ars:o.subtotal_ars}))};r.guardando=!0;try{const o=yield r.facturaService.crearFactura(i);console.log("\u2705 Factura guardada:",o),r.carritoService.vaciarCarrito(),r.productosSeleccionados=[],setTimeout(()=>r.router.navigate(["/"]),800)}catch(o){console.error("\u274c Error guardando factura:",o?.error||o),alert(o?.error?.message||"\u274c Hubo un error al guardar la factura")}finally{r.guardando=!1}})()}static{this.\u0275fac=function(r){return new(r||e)(J(Qv),J(wb),J(ri))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-finalizar-compra"]],decls:3,vars:1,consts:[[3,"confirmarCompra","productos"]],template:function(r,i){1&r&&(B(0,"h2"),q(1,"Confirmar compra"),j(),B(2,"app-factura-preview",0),ht("confirmarCompra",function(s){return i.confirmarCompra(s)}),j()),2&r&&(ne(2),Pe("productos",i.productosSeleccionados))},dependencies:[Zo,GZ],styles:["h2[_ngcontent-%COMP%]{margin-bottom:20px}"]})}}return e})();function KZ(e,n){1&e&&(B(0,"div",9),q(1," \u26a0\ufe0f El nombre es obligatorio. "),j())}function YZ(e,n){1&e&&(B(0,"div",9),q(1," \u26a0\ufe0f El precio es obligatorio y debe ser mayor a 0. "),j())}function QZ(e,n){1&e&&(B(0,"div",9),q(1," \u26a0\ufe0f Deb\xe9s ingresar una URL de imagen. "),j())}function ZZ(e,n){if(1&e&&(B(0,"p"),q(1),j()),2&e){const t=ot();ne(),br(t.mensaje)}}let XZ=(()=>{class e{constructor(t,r,i){this.fb=t,this.productosSrv=r,this.router=i,this.mensaje="",this.guardando=!1,this.formulario=this.fb.group({nombre:["",[Nr.required,Nr.minLength(2)]],precio:[null,[Nr.required,Nr.min(.01)]],imagen:["",[Nr.required]],descripcion:[""],stock:[0,[Nr.min(0)]]})}campoInvalido(t){const r=this.formulario.get(t);return!!r&&r.invalid&&(r.dirty||r.touched)}guardarProducto(){var t=this;return(0,P.A)(function*(){if(t.mensaje="",t.formulario.invalid)return void t.formulario.markAllAsTouched();t.guardando=!0;const r=t.formulario.value;try{const i=yield t.productosSrv.crearProducto(r);t.mensaje=`\u2705 Producto creado (ID ${i}).`,t.formulario.reset()}catch(i){console.error("Error al crear producto en RTDB",i),t.mensaje="\u274c No se pudo crear el producto."}finally{t.guardando=!1}})()}static{this.\u0275fac=function(r){return new(r||e)(J(pb),J(_b),J(ri))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-ingresar-producto"]],decls:22,vars:11,consts:[[1,"form-wrapper"],[3,"ngSubmit","formGroup"],["type","text","formControlName","nombre"],["class","error",4,"ngIf"],["type","number","formControlName","precio"],["type","text","formControlName","imagen"],["formControlName","descripcion"],["type","submit",1,"btn","btn-success"],[4,"ngIf"],[1,"error"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"h2"),q(2,"Ingresar nuevo producto"),j(),B(3,"form",1),ht("ngSubmit",function(){return i.guardarProducto()}),B(4,"label"),q(5,"Nombre:"),j(),on(6,"input",2),yt(7,KZ,2,0,"div",3),B(8,"label"),q(9,"Precio:"),j(),on(10,"input",4),yt(11,YZ,2,0,"div",3),B(12,"label"),q(13,"Imagen (URL):"),j(),on(14,"input",5),yt(15,QZ,2,0,"div",3),B(16,"label"),q(17,"Descripci\xf3n:"),j(),on(18,"textarea",6),B(19,"button",7),q(20,"Guardar producto"),j()(),yt(21,ZZ,2,1,"p",8),j()),2&r&&(ne(3),Pe("formGroup",i.formulario),ne(3),la("invalido",i.campoInvalido("nombre")),ne(),Pe("ngIf",i.campoInvalido("nombre")),ne(3),la("invalido",i.campoInvalido("precio")),ne(),Pe("ngIf",i.campoInvalido("precio")),ne(3),la("invalido",i.campoInvalido("imagen")),ne(),Pe("ngIf",i.campoInvalido("imagen")),ne(6),Pe("ngIf",i.mensaje))},dependencies:[Zo,Qo,mb,Oh,ya,Zm,kc,kh,nd,Ip],styles:["form[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:24px;border-radius:12px;box-shadow:0 4px 10px #00000014;max-width:500px;margin:20px auto;display:flex;flex-direction:column;gap:15px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:5px;color:#333}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px 12px;font-size:1rem;border:1px solid #ccc;border-radius:6px;transition:border-color .2s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#28a745;outline:none}button[type=submit][_ngcontent-%COMP%]{background-color:#28a745;color:#fff;font-weight:700;border:none;padding:12px;border-radius:8px;cursor:pointer;transition:background-color .2s ease,transform .1s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}button[type=submit][_ngcontent-%COMP%]:active{transform:scale(.98)}p[_ngcontent-%COMP%]{margin-top:15px;font-weight:700;color:#155724}.invalido[_ngcontent-%COMP%]{border-color:#dc3545!important}.error[_ngcontent-%COMP%]{color:#dc3545;font-size:.9rem;margin-top:-10px;margin-bottom:5px}.form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:40px;padding:0 16px}h2[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin-bottom:24px;color:#222}"]})}}return e})();function JZ(e,n){1&e&&(B(0,"div",9),q(1,"\u26a0\ufe0f Email inv\xe1lido"),j())}function eX(e,n){1&e&&(B(0,"div",9),q(1,"\u26a0\ufe0f Contrase\xf1a requerida"),j())}function tX(e,n){if(1&e&&(B(0,"p",9),q(1),j()),2&e){const t=ot();ne(),br(t.mensaje)}}function nX(e,n){1&e&&(B(0,"div",10),q(1," \u2705 Usuario creado con \xe9xito\n"),j())}let rX=(()=>{class e{constructor(t,r,i){this.fb=t,this.http=r,this.router=i,this.mensaje="",this.mostrarToast=!1,this.formulario=this.fb.group({email:["",[Nr.required,Nr.email]],password:["",[Nr.required,Nr.minLength(4)]],rol:["usuario"]})}campoInvalido(t){const r=this.formulario.get(t);return!(!r||!r.invalid||!r.dirty&&!r.touched)}registrarUsuario(){if(this.formulario.invalid)return void(this.mensaje="\u26a0\ufe0f Complet\xe1 todos los campos correctamente.");const t=this.formulario.value;console.log("\u{1f4e4} Enviando usuario al backend:",t),this.http.post("http://localhost:4000/api/usuarios",t).subscribe({next:r=>{console.log("\u2705 Usuario registrado con \xe9xito:",r),this.mensaje="",this.mostrarToast=!0,setTimeout(()=>{this.mostrarToast=!1,this.router.navigate(["/login"])},4e3)},error:r=>{console.error("\u274c Error al registrar usuario:",r),this.mensaje=r.error?.message||"\u274c Error al registrar el usuario."}})}static{this.\u0275fac=function(r){return new(r||e)(J(pb),J(r_),J(ri))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-registro"]],decls:16,vars:5,consts:[[1,"registro-container"],[3,"ngSubmit","formGroup"],["for","email"],["id","email","type","email","formControlName","email"],["class","error",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit"],["class","toast-exito",4,"ngIf"],[1,"error"],[1,"toast-exito"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"h2"),q(2,"\u{1f4dd} Crear cuenta"),j(),B(3,"form",1),ht("ngSubmit",function(){return i.registrarUsuario()}),B(4,"label",2),q(5,"Email:"),j(),on(6,"input",3),yt(7,JZ,2,0,"div",4),B(8,"label",5),q(9,"Contrase\xf1a:"),j(),on(10,"input",6),yt(11,eX,2,0,"div",4),B(12,"button",7),q(13,"Crear cuenta"),j()(),yt(14,tX,2,1,"p",4),j(),yt(15,nX,2,0,"div",8)),2&r&&(ne(3),Pe("formGroup",i.formulario),ne(4),Pe("ngIf",i.campoInvalido("email")),ne(4),Pe("ngIf",i.campoInvalido("password")),ne(3),Pe("ngIf",i.mensaje),ne(),Pe("ngIf",i.mostrarToast))},dependencies:[Zo,Qo,mb,Oh,ya,kc,kh,nd,Ip],styles:["form[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;background-color:#111;padding:24px;border-radius:10px;box-shadow:0 4px 15px #0000004d;color:#fff;font-family:Segoe UI,sans-serif}label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;font-size:14px}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #444;border-radius:6px;background-color:#1a1a1a;color:#fff;font-size:14px}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#28a745}.invalido[_ngcontent-%COMP%]{border-color:#dc3545!important}.error[_ngcontent-%COMP%]{color:#dc3545;font-size:.85rem;margin-top:-6px;margin-bottom:10px}button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#28a745;border:none;color:#fff;font-weight:700;font-size:15px;border-radius:6px;cursor:pointer;transition:background-color .2s ease}button[_ngcontent-%COMP%]:hover{background-color:#218838}p[_ngcontent-%COMP%]{margin-top:12px;text-align:center;font-weight:700;color:#000}"]})}}return e})();function iX(e,n){1&e&&(B(0,"div",9),q(1," \u26a0\ufe0f Ingres\xe1 un email v\xe1lido "),j())}function oX(e,n){1&e&&(B(0,"div",9),q(1," \u26a0\ufe0f La contrase\xf1a es obligatoria "),j())}function sX(e,n){if(1&e&&(B(0,"p",9),q(1),j()),2&e){const t=ot();ne(),br(t.mensaje)}}function aX(e,n){1&e&&(B(0,"div",10),q(1," \u2705 Sesi\xf3n iniciada correctamente "),j())}let lX=(()=>{class e{constructor(t,r,i){this.fb=t,this.auth=r,this.router=i,this.mensaje="",this.mostrarToast=!1,this.cargando=!1,this.formulario=this.fb.group({email:["",[Nr.required,Nr.email]],password:["",Nr.required]})}campoInvalido(t){const r=this.formulario.get(t);return!!r&&r.invalid&&(r.dirty||r.touched)}iniciarSesion(){var t=this;return(0,P.A)(function*(){if(t.mensaje="",t.formulario.invalid)return void t.formulario.markAllAsTouched();t.cargando=!0;const{email:r,password:i}=t.formulario.value;try{yield t.auth.login(r,i),t.mostrarToast=!0,setTimeout(()=>t.mostrarToast=!1,2e3),setTimeout(()=>t.router.navigate(["/productos"]),0)}catch(o){console.error("Error de login (componente):",o?.code||o),t.mensaje=t.mapError(o)}finally{t.cargando=!1}})()}mapError(t){switch(t?.code||t?.error?.message){case"auth/invalid-email":case"INVALID_EMAIL":return"El email no es v\xe1lido.";case"auth/missing-password":case"MISSING_PASSWORD":return"Ingres\xe1 la contrase\xf1a.";case"auth/user-not-found":case"EMAIL_NOT_FOUND":return"No existe un usuario con ese email.";case"auth/wrong-password":case"INVALID_PASSWORD":return"Contrase\xf1a incorrecta.";case"auth/invalid-api-key":case"INVALID_API_KEY":return"API key inv\xe1lida en environment.";default:return"No se pudo iniciar sesi\xf3n. Revis\xe1 los datos."}}static{this.\u0275fac=function(r){return new(r||e)(J(pb),J(Jv),J(ri))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-login"]],decls:16,vars:5,consts:[[1,"login-container"],[3,"ngSubmit","formGroup"],["for","email"],["id","email","type","email","formControlName","email"],["class","error",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit",1,"btn","btn-primary"],["class","toast-exito",4,"ngIf"],[1,"error"],[1,"toast-exito"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"h2"),q(2,"\u{1f510} Iniciar sesi\xf3n"),j(),B(3,"form",1),ht("ngSubmit",function(){return i.iniciarSesion()}),B(4,"label",2),q(5,"Email:"),j(),on(6,"input",3),yt(7,iX,2,0,"div",4),B(8,"label",5),q(9,"Contrase\xf1a:"),j(),on(10,"input",6),yt(11,oX,2,0,"div",4),B(12,"button",7),q(13,"Ingresar"),j()(),yt(14,sX,2,1,"p",4)(15,aX,2,0,"div",8),j()),2&r&&(ne(3),Pe("formGroup",i.formulario),ne(4),Pe("ngIf",i.campoInvalido("email")),ne(4),Pe("ngIf",i.campoInvalido("password")),ne(3),Pe("ngIf",i.mensaje),ne(),Pe("ngIf",i.mostrarToast))},dependencies:[Zo,Qo,mb,Oh,ya,kc,kh,nd,Ip],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;background:#f9f9f9;border-radius:12px;box-shadow:0 0 10px #0000001a;font-family:Arial,sans-serif}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:700}input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:4px;border-radius:6px;border:1px solid #ccc}button[_ngcontent-%COMP%]{margin-top:20px;width:100%;padding:10px;background-color:#222;color:#fff;border:none;border-radius:6px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#000}.error[_ngcontent-%COMP%]{color:red;font-size:13px;margin-top:4px}.toast-exito[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background-color:#28a745;color:#fff;padding:12px 20px;border-radius:6px;box-shadow:0 4px 12px #0003;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out;font-weight:700}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"]})}}return e})();const cX=["historyRef"],uX=(e,n)=>({me:e,other:n});function dX(e,n){if(1&e&&(B(0,"div",10),q(1),j()),2&e){const t=ot(2);ne(),br(t.loginErrorMsg)}}function hX(e,n){if(1&e){const t=Rr();B(0,"div")(1,"div",3)(2,"h3"),q(3,"Iniciar sesi\xf3n"),j(),B(4,"form",4),ht("ngSubmit",function(){return rt(t),dt(ot().login())}),B(5,"label"),q(6,"Email"),j(),on(7,"input",5),B(8,"label"),q(9,"Contrase\xf1a"),j(),on(10,"input",6),B(11,"label"),q(12,"Nombre a mostrar en el chat"),j(),on(13,"input",7),yt(14,dX,2,1,"div",8),B(15,"button",9),q(16),j()()()()}if(2&e){const t=ot();ne(4),Pe("formGroup",t.loginForm),ne(10),Pe("ngIf",t.loginErrorMsg),ne(),Pe("disabled",t.loadingLogin||t.loginForm.invalid),ne(),mn(" ",t.loadingLogin?"Ingresando\u2026":"Iniciar sesi\xf3n"," ")}}function fX(e,n){if(1&e&&(B(0,"div",22)(1,"div",23)(2,"div",24)(3,"b"),q(4),j(),B(5,"span",25),q(6,"\xb7"),j(),B(7,"span",26),q(8),j(),B(9,"span",25),q(10,"\xb7"),j(),B(11,"span",27),q(12),dr(13,"date"),j()(),B(14,"div",28),q(15),j()()()),2&e){const t=n.$implicit,r=ot(2);Pe("ngClass",function RP(e,n,t,r,i){return NP(K(),ar(),e,n,t,r,i)}(9,uX,t.uid===r.currentUid,t.uid!==r.currentUid)),ne(4),br(r.nombreDe(t.uid)),ne(3),Pe("ngClass",r.rolDe(t.uid)),ne(),mn(" ",r.rolDe(t.uid)," "),ne(4),br(hr(13,6,t.timestamp,"short")),ne(3),br(t.text)}}function pX(e,n){if(1&e){const t=Rr();B(0,"div",11)(1,"div",12)(2,"div",13),q(3,"Sala global"),j(),on(4,"span",14),B(5,"button",15),ht("click",function(){return rt(t),dt(ot().logout())}),q(6,"Salir"),j()(),B(7,"div",16,1),yt(9,fX,16,12,"div",17),j(),B(10,"form",18),ht("ngSubmit",function(){return rt(t),dt(ot().send())}),B(11,"div",19),on(12,"input",20),B(13,"button",21),q(14," Enviar "),j()()()()}if(2&e){const t=ot();ne(9),Pe("ngForOf",t.chats)("ngForTrackBy",t.trackById),ne(),Pe("formGroup",t.form),ne(3),Pe("disabled",t.form.invalid||!(null!=t.form.value.message&&t.form.value.message.trim()))}}let gX=(()=>{class e{constructor(t){this.fb=t,this.isLoggedIn=!1,this.currentUid=null,this.loadingLogin=!1,this.loginErrorMsg="",this.chats=[],this.usersMap={},this.db=null,this.authUnsub=null,this.usersOff=null,this.msgsOff=null,this.loginForm=this.fb.group({email:["",[Nr.required,Nr.email]],password:["",[Nr.required]],username:["",[Nr.minLength(3),Nr.maxLength(24)]]}),this.form=this.fb.group({message:["",[Nr.required]]})}ngOnInit(){var t=this;return(0,P.A)(function*(){const{auth:r,database:i}=yield vl();t.auth=r,t.db=i,t.authUnsub=(0,bp.onAuthStateChanged)(t.auth,function(){var o=(0,P.A)(function*(s){t.isLoggedIn=!!s,t.currentUid=s?.uid??null,t.isLoggedIn?(yield t.ensureDefaultRole(),t.subUsers(),t.subMensajes()):(t.unsubUsers(),t.unsubMensajes(),t.chats=[])});return function(s){return o.apply(this,arguments)}}())})()}ngAfterViewInit(){this.scrollToBottom()}ngOnDestroy(){this.authUnsub?.(),this.unsubUsers(),this.unsubMensajes()}subUsers(){if(!this.db)return;const t=(0,Bt.ref)(this.db,"users"),r=i=>{this.usersMap=i.val()??{},this.chats=[...this.chats]};(0,Bt.onValue)(t,r),this.usersOff=()=>(0,Bt.off)(t,"value",r)}unsubUsers(){this.usersOff?.(),this.usersOff=null}subMensajes(){if(!this.db)return;const t=(0,Bt.query)((0,Bt.ref)(this.db,"rooms/global/messages"),(0,Bt.orderByChild)("timestamp")),r=i=>{const o=[];i.forEach(s=>{const l=s.val();o.push({id:s.key,uid:l.uid,text:l.text,timestamp:"number"==typeof l.timestamp?l.timestamp:Date.now()})}),this.chats=o,this.scrollToBottom()};(0,Bt.onValue)(t,r),this.msgsOff=()=>(0,Bt.off)(t,"value",r)}unsubMensajes(){this.msgsOff?.(),this.msgsOff=null}login(){var t=this;return(0,P.A)(function*(){if(!t.db||t.loginForm.invalid)return;t.loadingLogin=!0,t.loginErrorMsg="";const{email:r,password:i,username:o}=t.loginForm.value;try{const l=(yield(0,bp.signInWithEmailAndPassword)(t.auth,r,i)).user.uid,u=(o??"").toString().trim(),h={email:r};u.length>=3&&u.length<=24&&(h.displayName=u,localStorage.setItem("chatAlias",u)),yield(0,Bt.update)((0,Bt.ref)(t.db,`users/${l}`),h),yield t.ensureDefaultRole(l)}catch(s){t.loginErrorMsg=s?.message??"Error al iniciar sesi\xf3n"}finally{t.loadingLogin=!1}})()}logout(){var t=this;return(0,P.A)(function*(){yield(0,bp.signOut)(t.auth)})()}send(){var t=this;return(0,P.A)(function*(){if(!t.db||!t.currentUid||t.form.invalid)return;const r=(t.form.value.message??"").toString().trim();r&&(yield(0,Bt.push)((0,Bt.ref)(t.db,"rooms/global/messages"),{uid:t.currentUid,text:r,timestamp:Date.now()}),t.form.patchValue({message:""}),t.scrollToBottom())})()}trackById(t,r){return r.id}nombreDe(t){return this.usersMap[t]?.displayName||"Anon"}rolDe(t){const r=this.usersMap[t]?.role;return"admin"===r||"moderator"===r?r:"user"}ensureDefaultRole(t){var r=this;return(0,P.A)(function*(){if(!r.db)return;const i=t??r.currentUid;i&&((yield(0,Bt.get)((0,Bt.ref)(r.db,`users/${i}/role`))).exists()||(yield(0,Bt.update)((0,Bt.ref)(r.db,`users/${i}`),{role:"user"})))})()}scrollToBottom(){setTimeout(()=>{if(this.historyRef?.nativeElement){const t=this.historyRef.nativeElement;t.scrollTop=t.scrollHeight}},50)}static{this.\u0275fac=function(r){return new(r||e)(J(pb))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-chat"]],viewQuery:function(r,i){if(1&r&&om(cX,5),2&r){let o;rp(o=ip())&&(i.historyRef=o.first)}},decls:3,vars:2,consts:[["chatUI",""],["historyRef",""],[4,"ngIf","ngIfElse"],["id","loginCard"],[1,"login",3,"ngSubmit","formGroup"],["type","email","formControlName","email","placeholder","nombre@correo.com"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","text","formControlName","username","placeholder","Tu alias"],["class","alert",4,"ngIf"],["type","submit",1,"login-btn",3,"disabled"],[1,"alert"],[1,"chat-shell"],[1,"chat-header"],[1,"title"],[1,"spacer"],[1,"logout",3,"click"],["id","history",1,"history"],["class","msg",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["id","message",1,"composer",3,"ngSubmit","formGroup"],[1,"send-box"],["type","text","formControlName","message","placeholder","Escribe un mensaje\u2026","autocomplete","off"],["type","submit",1,"send-box",3,"disabled"],[1,"msg",3,"ngClass"],[1,"bubble"],[1,"msg-meta"],[1,"sep"],[1,"role-badge",3,"ngClass"],[1,"time"],[1,"msg-text"]],template:function(r,i){if(1&r&&yt(0,hX,17,4,"div",2)(1,pX,15,4,"ng-template",null,0,cm),2&r){const o=sm(2);Pe("ngIf",!i.isLoggedIn)("ngIfElse",o)}},dependencies:[Zo,Dk,Eh,Qo,gw,mb,Oh,ya,kc,kh,nd,Ip],styles:['[_ngcontent-%COMP%]:root{--bg: #f2f4f7;--card: #ffffff;--text: #0f172a;--muted:#475569;--primary:#1976d2;--primary-700:#125aa0;--border:#e5e7eb;--ring:#cfe6ff}*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%], body[_ngcontent-%COMP%]{background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}.chat-shell[_ngcontent-%COMP%]{height:min(92vh,860px);max-width:920px;margin:16px auto;background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 8px 24px #10182812;display:flex;flex-direction:column;overflow:hidden}.chat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 14px;background:var(--primary);color:#fff;font-weight:700}.chat-header[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{margin-left:auto;background:#fff;color:var(--primary);border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}.chat-header[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]:hover{background:#f6f7fb}.history[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:12px 14px 8px;background:#eef2f7}.history[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cfd5dd;border-radius:6px}.msg[_ngcontent-%COMP%]{display:flex;margin:6px 0}.msg.me[_ngcontent-%COMP%]{justify-content:flex-end}.msg.other[_ngcontent-%COMP%]{justify-content:flex-start}.bubble[_ngcontent-%COMP%]{max-width:76%;padding:8px 12px;border-radius:12px;background:#fff;border:1px solid var(--border);box-shadow:0 1px 2px #1018280d;color:var(--text)!important}.msg.other[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{border-bottom-left-radius:6px}.msg.me[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background:var(--primary);border-color:transparent;color:#fff!important;border-bottom-right-radius:6px}.msg-meta[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:6px;font-size:.82rem;margin-bottom:3px;opacity:.95;color:var(--muted)!important}.sep[_ngcontent-%COMP%]{opacity:.45}.role-badge[_ngcontent-%COMP%]{padding:2px 8px;border-radius:999px;font-size:11px;line-height:1;background:#eef2ff;color:#4338ca;border:1px solid rgba(67,56,202,.15)}.role-badge.admin[_ngcontent-%COMP%]{background:#ffe8e8;color:#b91c1c;border-color:#f9c8c8}.role-badge.moderator[_ngcontent-%COMP%]{background:#efe3ff;color:#6d28d9;border-color:#dec7ff}.msg.me[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:#ffffff2e;color:#fff;border-color:#ffffff40}.msg-text[_ngcontent-%COMP%]{line-height:1.42;word-wrap:break-word;white-space:pre-wrap;color:inherit!important}.composer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:var(--card);border-top:1px solid var(--border);padding:8px 10px}.send-box[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:8px}.send-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:11px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text)}.send-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring);outline:0}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;border-radius:10px;padding:11px 16px;background:var(--primary);color:#fff;font-weight:800;cursor:pointer;transition:background .15s ease,transform .06s ease}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:enabled{background:var(--primary-700)}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:enabled{transform:translateY(1px)}.send-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#aeb5bd;cursor:not-allowed}#loginCard[_ngcontent-%COMP%]{background:var(--card);width:min(92vw,520px);margin:24px auto;padding:18px 20px 24px;border:1px solid var(--border);border-radius:14px;box-shadow:0 8px 24px #0000000f}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:2px 0 10px;font-size:1.25rem;font-weight:800;color:var(--text)}.login[_ngcontent-%COMP%]{display:grid;gap:12px}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text);font-weight:700;margin-top:2px}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-top:6px;padding:11px 12px;border:1px solid var(--border);border-radius:10px;background:#fff;color:var(--text);outline:none}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px var(--ring)}.login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;display:block;width:92%;text-align:center;padding:11px 12px;border-radius:10px;background:var(--primary);color:#fff;font-weight:800;margin:6px auto 0;cursor:pointer}.login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-700)}.alert[_ngcontent-%COMP%]{margin-top:4px;padding:9px 11px;border:1px solid #f5bcbc;background:#ffe8e8;color:#b00020;border-radius:10px;font-weight:700;font-size:.92rem}@media (max-width:600px){.chat-shell[_ngcontent-%COMP%]{height:calc(100dvh - 16px);margin:8px}.bubble[_ngcontent-%COMP%]{max-width:88%}}.msg.me[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background:#1976d2!important;color:#fff!important;border-color:transparent!important;box-shadow:0 2px 8px #0000002e!important;opacity:1!important}.msg.me[_ngcontent-%COMP%]   .msg-meta[_ngcontent-%COMP%]{color:#ffffffe6!important}.msg.me[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{color:#fff!important;border-color:#ffffff40!important}.msg.me[_ngcontent-%COMP%]   .msg-text[_ngcontent-%COMP%]{color:#fff!important}.bubble[_ngcontent-%COMP%]{background:#fff!important;color:#0f172a!important}[_nghost-%COMP%]     .composer .send-box button{background:#1976d2!important;color:#fff!important;border:0!important;border-radius:10px!important;padding:11px 16px!important;font-weight:800!important;box-shadow:0 4px 14px #1976d24d!important}[_nghost-%COMP%]     .composer .send-box button:hover:enabled{background:#125aa0!important}[_nghost-%COMP%]     .composer .send-box button:disabled{background:#9aa4b2!important;color:#f1f5f9!important;box-shadow:none!important}.msg.me[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{background:#eef2ff!important;color:#4338ca!important;border:1px solid rgba(67,56,202,.15)!important}.msg.me[_ngcontent-%COMP%]   .role-badge.admin[_ngcontent-%COMP%]{background:#ffe8e8!important;color:#b91c1c!important;border-color:#f9c8c8!important}.msg.me[_ngcontent-%COMP%]   .role-badge.moderator[_ngcontent-%COMP%]{background:#efe3ff!important;color:#6d28d9!important;border-color:#dec7ff!important}[_nghost-%COMP%]     .chat-header .logout{background:#1976d2!important;color:#fff!important;font-weight:700!important;border:0!important;border-radius:8px!important;padding:8px 14px!important;cursor:pointer!important;box-shadow:0 4px 12px #1976d240!important}[_nghost-%COMP%]     .chat-header .logout:hover{background:#125aa0!important}[_nghost-%COMP%]     .chat-header .logout:disabled{background:#9aa4b2!important;color:#f1f5f9!important;box-shadow:none!important;cursor:not-allowed!important}#loginCard[_ngcontent-%COMP%]{width:min(92vw,460px)!important;margin:32px auto!important;padding:20px 22px 24px!important;border:1px solid var(--border)!important;border-radius:16px!important;background:var(--card)!important;box-shadow:0 14px 40px #10182814!important}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 14px!important;font-size:1.35rem!important;font-weight:800!important;color:var(--text)!important}.login[_ngcontent-%COMP%]{display:grid!important;gap:14px!important}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem!important;font-weight:700!important;color:var(--text)!important;margin-top:2px!important}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-top:6px!important;padding:12px 14px!important;border:1px solid var(--border)!important;border-radius:12px!important;background:#fff!important;color:var(--text)!important;outline:none!important}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8!important}.login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary)!important;box-shadow:0 0 0 3px var(--ring)!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;padding:12px 14px!important;border-radius:12px!important;border:0!important;background:#1976d2!important;color:#fff!important;font-weight:800!important;text-align:center!important;cursor:pointer!important;box-shadow:0 6px 18px #1976d247!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background:#125aa0!important}.title[_ngcontent-%COMP%]{color:#000}#loginCard[_ngcontent-%COMP%]{width:min(92vw,460px)!important;margin:32px auto!important;padding:22px 20px 20px!important;border:1px solid var(--border)!important;border-radius:18px!important;background:#fff!important;box-shadow:0 16px 48px #1018281a!important;position:relative!important;overflow:hidden!important}#loginCard[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0 auto auto 0;height:84px;width:100%;background:linear-gradient(135deg,#1976d2,#7c4dff,#00b7ff);opacity:.95}#loginCard[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;height:84px;width:100%;background-image:radial-gradient(rgba(255,255,255,.35) 1px,transparent 1.5px);background-size:12px 12px}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{position:relative;z-index:1;margin:0 0 14px!important;padding-top:50px;font-size:1.35rem!important;font-weight:800!important;color:#0f172a!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem!important;font-weight:700!important;color:#0f172a!important;margin-top:2px!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#7c4dff!important;box-shadow:0 0 0 4px #7c4dff2e!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;padding:12px 14px!important;border-radius:999px!important;border:0!important;background:linear-gradient(90deg,#1976d2,#7c4dff,#00b7ff)!important;background-size:200% 100%!important;color:#fff!important;font-weight:800!important;text-align:center!important;cursor:pointer!important;box-shadow:0 8px 22px #1976d247!important;transition:background-position .35s ease}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{background-position:100% 0!important}#loginCard.chat-shell[_ngcontent-%COMP%]{height:auto!important;max-height:none!important;display:block!important;box-shadow:0 16px 48px #1018281a!important}#loginCard[_ngcontent-%COMP%]:before, #loginCard[_ngcontent-%COMP%]:after{content:none!important;display:none!important}#loginCard[_ngcontent-%COMP%]{width:min(92vw,460px)!important;margin:32px auto!important;padding:20px 22px 22px!important;border:1px solid var(--border)!important;border-radius:16px!important;background:#fff!important;box-shadow:0 14px 40px #10182814!important}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px!important;padding:0!important;font-size:1.32rem!important;font-weight:800!important;color:#0f172a!important;position:relative!important}#loginCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:""!important;position:absolute!important;left:0;bottom:-8px;width:64px;height:4px;border-radius:999px;background:linear-gradient(90deg,#1976d2,#7c4dff)!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{display:grid!important;gap:14px!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.95rem!important;font-weight:700!important;color:#0f172a!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-top:6px!important;padding:12px 14px!important;border:1px solid var(--border)!important;border-radius:12px!important;background:#fff!important;color:#0f172a!important;outline:none!important;transition:box-shadow .15s,border-color .15s}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#94a3b8!important}#loginCard[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1976d2!important;box-shadow:0 0 0 3px #1976d22e!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:100%!important;padding:12px 14px!important;border-radius:999px!important;border:0!important;background:linear-gradient(90deg,#1976d2,#7c4dff)!important;color:#fff!important;font-weight:800!important;text-align:center!important;cursor:pointer!important;box-shadow:0 8px 22px #1976d23d!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover{filter:brightness(.95)!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:disabled{background:#9aa4b2!important;color:#f1f5f9!important;box-shadow:none!important;cursor:not-allowed!important}#loginCard[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{margin-top:4px!important;padding:10px 12px!important;border:1px solid #f5bcbc!important;background:#ffe8e8!important;color:#b00020!important;border-radius:10px!important;font-weight:700!important;font-size:.95rem!important}#loginCard[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{display:inline-block!important;width:calc(100% - 20px)!important;margin:12px auto 6px!important;padding:12px 16px!important;border-radius:999px!important}.chat-shell[_ngcontent-%COMP%]{height:72vh!important;max-height:72vh!important;margin:12px auto!important}.history[_ngcontent-%COMP%]{flex:1 1 auto!important;overflow-y:auto!important;max-height:none!important;padding:10px 12px 8px!important}@media (max-height: 800px){.chat-shell[_ngcontent-%COMP%]{height:68vh!important;max-height:68vh!important}}']})}}return e})();function Tp(e){return e+.5|0}const Nc=(e,n,t)=>Math.max(Math.min(e,t),n);function o_(e){return Nc(Tp(2.55*e),0,255)}function sd(e){return Nc(Tp(255*e),0,255)}function Oc(e){return Nc(Tp(e/2.55)/100,0,1)}function iF(e){return Nc(Tp(100*e),0,100)}const Ts={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},eI=[..."0123456789ABCDEF"],mX=e=>eI[15&e],_X=e=>eI[(240&e)>>4]+eI[15&e],Db=e=>(240&e)>>4==(15&e);const EX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oF(e,n,t){const r=n*Math.min(t,1-t),i=(o,s=(o+e/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function wX(e,n,t){const r=(i,o=(i+e/60)%6)=>t-t*n*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function DX(e,n,t){const r=oF(e,1,.5);let i;for(n+t>1&&(i=1/(n+t),n*=i,t*=i),i=0;i<3;i++)r[i]*=1-n-t,r[i]+=n;return r}function tI(e){const t=e.r/255,r=e.g/255,i=e.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),l=(o+s)/2;let u,h,g;return o!==s&&(g=o-s,h=l>.5?g/(2-o-s):g/(o+s),u=function IX(e,n,t,r,i){return e===i?(n-t)/r+(n<t?6:0):n===i?(t-e)/r+2:(e-n)/r+4}(t,r,i,g,o),u=60*u+.5),[0|u,h||0,l]}function nI(e,n,t,r){return(Array.isArray(n)?e(n[0],n[1],n[2]):e(n,t,r)).map(sd)}function rI(e,n,t){return nI(oF,e,n,t)}function sF(e){return(e%360+360)%360}const aF={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lF={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ib;const kX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,iI=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Mp=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Sb(e,n,t){if(e){let r=tI(e);r[n]=Math.max(0,Math.min(r[n]+r[n]*t,0===n?360:1)),r=rI(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function cF(e,n){return e&&Object.assign(n||{},e)}function uF(e){var n={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(n={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(n.a=sd(e[3]))):(n=cF(e,{r:0,g:0,b:0,a:1})).a=sd(n.a),n}function LX(e){return"r"===e.charAt(0)?function NX(e){const n=kX.exec(e);let r,i,o,t=255;if(n){if(n[7]!==r){const s=+n[7];t=n[8]?o_(s):Nc(255*s,0,255)}return r=+n[1],i=+n[3],o=+n[5],r=255&(n[2]?o_(r):Nc(r,0,255)),i=255&(n[4]?o_(i):Nc(i,0,255)),o=255&(n[6]?o_(o):Nc(o,0,255)),{r,g:i,b:o,a:t}}}(e):function MX(e){const n=EX.exec(e);let r,t=255;if(!n)return;n[5]!==r&&(t=n[6]?o_(+n[5]):sd(+n[5]));const i=sF(+n[2]),o=+n[3]/100,s=+n[4]/100;return r="hwb"===n[1]?function SX(e,n,t){return nI(DX,e,n,t)}(i,o,s):"hsv"===n[1]?function TX(e,n,t){return nI(wX,e,n,t)}(i,o,s):rI(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}(e)}class Ap{constructor(n){if(n instanceof Ap)return n;const t=typeof n;let r;"object"===t?r=uF(n):"string"===t&&(r=function vX(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Ts[e[1]],g:255&17*Ts[e[2]],b:255&17*Ts[e[3]],a:5===n?17*Ts[e[4]]:255}:(7===n||9===n)&&(t={r:Ts[e[1]]<<4|Ts[e[2]],g:Ts[e[3]]<<4|Ts[e[4]],b:Ts[e[5]]<<4|Ts[e[6]],a:9===n?Ts[e[7]]<<4|Ts[e[8]]:255})),t}(n)||function RX(e){Ib||(Ib=function PX(){const e={},n=Object.keys(lF),t=Object.keys(aF);let r,i,o,s,l;for(r=0;r<n.length;r++){for(s=l=n[r],i=0;i<t.length;i++)o=t[i],l=l.replace(o,aF[o]);o=parseInt(lF[s],16),e[l]=[o>>16&255,o>>8&255,255&o]}return e}(),Ib.transparent=[0,0,0,0]);const n=Ib[e.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:4===n.length?n[3]:255}}(n)||LX(n)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var n=cF(this._rgb);return n&&(n.a=Oc(n.a)),n}set rgb(n){this._rgb=uF(n)}rgbString(){return this._valid?function OX(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Oc(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?function CX(e){var n=(e=>Db(e.r)&&Db(e.g)&&Db(e.b)&&Db(e.a))(e)?mX:_X;return e?"#"+n(e.r)+n(e.g)+n(e.b)+((e,n)=>e<255?n(e):"")(e.a,n):void 0}(this._rgb):void 0}hslString(){return this._valid?function xX(e){if(!e)return;const n=tI(e),t=n[0],r=iF(n[1]),i=iF(n[2]);return e.a<255?`hsla(${t}, ${r}%, ${i}%, ${Oc(e.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(n,t){if(n){const r=this.rgb,i=n.rgb;let o;const s=t===o?.5:t,l=2*s-1,u=r.a-i.a,h=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;o=1-h,r.r=255&h*r.r+o*i.r+.5,r.g=255&h*r.g+o*i.g+.5,r.b=255&h*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(n,t){return n&&(this._rgb=function FX(e,n,t){const r=Mp(Oc(e.r)),i=Mp(Oc(e.g)),o=Mp(Oc(e.b));return{r:sd(iI(r+t*(Mp(Oc(n.r))-r))),g:sd(iI(i+t*(Mp(Oc(n.g))-i))),b:sd(iI(o+t*(Mp(Oc(n.b))-o))),a:e.a+t*(n.a-e.a)}}(this._rgb,n._rgb,t)),this}clone(){return new Ap(this.rgb)}alpha(n){return this._rgb.a=sd(n),this}clearer(n){return this._rgb.a*=1-n,this}greyscale(){const n=this._rgb,t=Tp(.3*n.r+.59*n.g+.11*n.b);return n.r=n.g=n.b=t,this}opaquer(n){return this._rgb.a*=1+n,this}negate(){const n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return Sb(this._rgb,2,n),this}darken(n){return Sb(this._rgb,2,-n),this}saturate(n){return Sb(this._rgb,1,n),this}desaturate(n){return Sb(this._rgb,1,-n),this}rotate(n){return function AX(e,n){var t=tI(e);t[0]=sF(t[0]+n),t=rI(t),e.r=t[0],e.g=t[1],e.b=t[2]}(this._rgb,n),this}}function Fc(){}const VX=(()=>{let e=0;return()=>e++})();function Ct(e){return null==e}function Dn(e){if(Array.isArray&&Array.isArray(e))return!0;const n=Object.prototype.toString.call(e);return"[object"===n.slice(0,7)&&"Array]"===n.slice(-6)}function St(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function er(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function ts(e,n){return er(e)?e:n}function lt(e,n){return typeof e>"u"?n:e}const dF=(e,n)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*n:+e;function yn(e,n,t){if(e&&"function"==typeof e.call)return e.apply(t,n)}function Gt(e,n,t,r){let i,o,s;if(Dn(e))if(o=e.length,r)for(i=o-1;i>=0;i--)n.call(t,e[i],i);else for(i=0;i<o;i++)n.call(t,e[i],i);else if(St(e))for(s=Object.keys(e),o=s.length,i=0;i<o;i++)n.call(t,e[s[i]],s[i])}function Tb(e,n){let t,r,i,o;if(!e||!n||e.length!==n.length)return!1;for(t=0,r=e.length;t<r;++t)if(i=e[t],o=n[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Mb(e){if(Dn(e))return e.map(Mb);if(St(e)){const n=Object.create(null),t=Object.keys(e),r=t.length;let i=0;for(;i<r;++i)n[t[i]]=Mb(e[t[i]]);return n}return e}function hF(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function jX(e,n,t,r){if(!hF(e))return;const i=n[e],o=t[e];St(i)&&St(o)?s_(i,o,r):n[e]=Mb(o)}function s_(e,n,t){const r=Dn(n)?n:[n],i=r.length;if(!St(e))return e;const o=(t=t||{}).merger||jX;let s;for(let l=0;l<i;++l){if(s=r[l],!St(s))continue;const u=Object.keys(s);for(let h=0,g=u.length;h<g;++h)o(u[h],e,s,t)}return e}function a_(e,n){return s_(e,n,{merger:UX})}function UX(e,n,t){if(!hF(e))return;const r=n[e],i=t[e];St(r)&&St(i)?a_(r,i):Object.prototype.hasOwnProperty.call(n,e)||(n[e]=Mb(i))}const fF={"":e=>e,x:e=>e.x,y:e=>e.y};function ad(e,n){return(fF[n]||(fF[n]=function $X(e){const n=function HX(e){const n=e.split("."),t=[];let r="";for(const i of n)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(e);return t=>{for(const r of n){if(""===r)break;t=t&&t[r]}return t}}(n)))(e)}function oI(e){return e.charAt(0).toUpperCase()+e.slice(1)}const l_=e=>typeof e<"u",ld=e=>"function"==typeof e,pF=(e,n)=>{if(e.size!==n.size)return!1;for(const t of e)if(!n.has(t))return!1;return!0},Ot=Math.PI,In=2*Ot,WX=In+Ot,Ab=Number.POSITIVE_INFINITY,GX=Ot/180,fr=Ot/2,Vh=Ot/4,gF=2*Ot/3,cd=Math.log10,Cl=Math.sign;function c_(e,n,t){return Math.abs(e-n)<t}function mF(e){const n=Math.round(e);e=c_(e,n,e/1e3)?n:e;const t=Math.pow(10,Math.floor(cd(e))),r=e/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function xp(e){return!function KX(e){return"symbol"==typeof e||"object"==typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function _F(e,n,t){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][t],isNaN(o)||(n.min=Math.min(n.min,o),n.max=Math.max(n.max,o))}function ba(e){return e*(Ot/180)}function sI(e){return e*(180/Ot)}function yF(e){if(!er(e))return;let n=1,t=0;for(;Math.round(e*n)/n!==e;)n*=10,t++;return t}function vF(e,n){const t=n.x-e.x,r=n.y-e.y,i=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*Ot&&(o+=In),{angle:o,distance:i}}function aI(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function QX(e,n){return(e-n+WX)%In-Ot}function Ci(e){return(e%In+In)%In}function u_(e,n,t,r){const i=Ci(e),o=Ci(n),s=Ci(t),l=Ci(o-i),u=Ci(s-i),h=Ci(i-o),g=Ci(i-s);return i===o||i===s||r&&o===s||l>u&&h<g}function Kr(e,n,t){return Math.max(n,Math.min(t,e))}function Lc(e,n,t,r=1e-6){return e>=Math.min(n,t)-r&&e<=Math.max(n,t)+r}function lI(e,n,t){t=t||(s=>e[s]<n);let o,r=e.length-1,i=0;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}const Vc=(e,n,t,r)=>lI(e,t,r?i=>{const o=e[i][n];return o<t||o===t&&e[i+1][n]===t}:i=>e[i][n]<t),XX=(e,n,t)=>lI(e,t,r=>e[r][n]>=t),bF=["push","pop","shift","splice","unshift"];function CF(e,n){const t=e._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(n);-1!==i&&r.splice(i,1),!(r.length>0)&&(bF.forEach(o=>{delete e[o]}),delete e._chartjs)}function EF(e){const n=new Set(e);return n.size===e.length?e:Array.from(n)}const wF=typeof window>"u"?function(e){return e()}:window.requestAnimationFrame;function DF(e,n){let t=[],r=!1;return function(...i){t=i,r||(r=!0,wF.call(window,()=>{r=!1,e.apply(n,t)}))}}const cI=e=>"start"===e?"left":"end"===e?"right":"center",Ei=(e,n,t)=>"start"===e?n:"end"===e?t:(n+t)/2;function IF(e,n,t){const r=n.length;let i=0,o=r;if(e._sorted){const{iScale:s,vScale:l,_parsed:u}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,g=s.axis,{min:y,max:b,minDefined:C,maxDefined:w}=s.getUserBounds();if(C){if(i=Math.min(Vc(u,g,y).lo,t?r:Vc(n,g,s.getPixelForValue(y)).lo),h){const D=u.slice(0,i+1).reverse().findIndex(S=>!Ct(S[l.axis]));i-=Math.max(0,D)}i=Kr(i,0,r-1)}if(w){let D=Math.max(Vc(u,s.axis,b,!0).hi+1,t?0:Vc(n,g,s.getPixelForValue(b),!0).hi+1);if(h){const S=u.slice(D-1).findIndex(x=>!Ct(x[l.axis]));D+=Math.max(0,S)}o=Kr(D,i,r)-i}else o=r-i}return{start:i,count:o}}function SF(e){const{xScale:n,yScale:t,_scaleRanges:r}=e,i={xmin:n.min,xmax:n.max,ymin:t.min,ymax:t.max};if(!r)return e._scaleRanges=i,!0;const o=r.xmin!==n.min||r.xmax!==n.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}const xb=e=>0===e||1===e,TF=(e,n,t)=>-Math.pow(2,10*(e-=1))*Math.sin((e-n)*In/t),MF=(e,n,t)=>Math.pow(2,-10*e)*Math.sin((e-n)*In/t)+1,d_={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*fr),easeOutSine:e=>Math.sin(e*fr),easeInOutSine:e=>-.5*(Math.cos(Ot*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>xb(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>xb(e)?e:TF(e,.075,.3),easeOutElastic:e=>xb(e)?e:MF(e,.075,.3),easeInOutElastic:e=>xb(e)?e:e<.5?.5*TF(2*e,.1125,.45):.5+.5*MF(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let n=1.70158;return(e/=.5)<1?e*e*((1+(n*=1.525))*e-n)*.5:.5*((e-=2)*e*((1+(n*=1.525))*e+n)+2)},easeInBounce:e=>1-d_.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?.5*d_.easeInBounce(2*e):.5*d_.easeOutBounce(2*e-1)+.5};function uI(e){if(e&&"object"==typeof e){const n=e.toString();return"[object CanvasPattern]"===n||"[object CanvasGradient]"===n}return!1}function AF(e){return uI(e)?e:new Ap(e)}function dI(e){return uI(e)?e:new Ap(e).saturate(.5).darken(.1).hexString()}const rJ=["x","y","borderWidth","radius","tension"],iJ=["color","borderColor","backgroundColor"],xF=new Map;function h_(e,n,t){return function aJ(e,n){n=n||{};const t=e+JSON.stringify(n);let r=xF.get(t);return r||(r=new Intl.NumberFormat(e,n),xF.set(t,r)),r}(n,t).format(e)}const PF={values:e=>Dn(e)?e:""+e,numeric(e,n,t){if(0===e)return"0";const r=this.chart.options.locale;let i,o=e;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),o=function lJ(e,n){let t=n.length>3?n[2].value-n[1].value:n[1].value-n[0].value;return Math.abs(t)>=1&&e!==Math.floor(e)&&(t=e-Math.floor(e)),t}(e,t)}const s=cd(Math.abs(o)),l=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),u={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),h_(e,r,u)},logarithmic(e,n,t){if(0===e)return"0";const r=t[n].significand||e/Math.pow(10,Math.floor(cd(e)));return[1,2,3,5,10,15].includes(r)||n>.8*t.length?PF.numeric.call(this,e,n,t):""}};var Pb={formatters:PF};const Bh=Object.create(null),hI=Object.create(null);function f_(e,n){if(!n)return e;const t=n.split(".");for(let r=0,i=t.length;r<i;++r){const o=t[r];e=e[o]||(e[o]=Object.create(null))}return e}function fI(e,n,t){return"string"==typeof n?s_(f_(e,n),t):s_(f_(e,""),n)}class uJ{constructor(n,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>dI(i.backgroundColor),this.hoverBorderColor=(r,i)=>dI(i.borderColor),this.hoverColor=(r,i)=>dI(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(n),this.apply(t)}set(n,t){return fI(this,n,t)}get(n){return f_(this,n)}describe(n,t){return fI(hI,n,t)}override(n,t){return fI(Bh,n,t)}route(n,t,r,i){const o=f_(this,n),s=f_(this,r),l="_"+t;Object.defineProperties(o,{[l]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const u=this[l],h=s[i];return St(u)?Object.assign({},h,u):lt(u,h)},set(u){this[l]=u}}})}apply(n){n.forEach(t=>t(this))}}var Ln=new uJ({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function oJ(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n}),e.set("animations",{colors:{type:"color",properties:iJ},numbers:{type:"number",properties:rJ}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}})},function sJ(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function cJ(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n&&"dash"!==n}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n})}]);function Rb(e,n,t,r,i){let o=n[i];return o||(o=n[i]=e.measureText(i).width,t.push(i)),o>r&&(r=o),r}function hJ(e,n,t,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==n&&(i=r.data={},o=r.garbageCollect=[],r.font=n),e.save(),e.font=n;let s=0;const l=t.length;let u,h,g,y,b;for(u=0;u<l;u++)if(y=t[u],null==y||Dn(y)){if(Dn(y))for(h=0,g=y.length;h<g;h++)b=y[h],null!=b&&!Dn(b)&&(s=Rb(e,i,o,s,b))}else s=Rb(e,i,o,s,y);e.restore();const C=o.length/2;if(C>t.length){for(u=0;u<C;u++)delete i[o[u]];o.splice(0,C)}return s}function jh(e,n,t){const r=e.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((n-i)*r)/r+i}function RF(e,n){!n&&!e||((n=n||e.getContext("2d")).save(),n.resetTransform(),n.clearRect(0,0,e.width,e.height),n.restore())}function pI(e,n,t,r){kF(e,n,t,r,null)}function kF(e,n,t,r,i){let o,s,l,u,h,g,y,b;const C=n.pointStyle,w=n.rotation,D=n.radius;let S=(w||0)*GX;if(C&&"object"==typeof C&&(o=C.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(t,r),e.rotate(S),e.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),void e.restore();if(!(isNaN(D)||D<=0)){switch(e.beginPath(),C){default:i?e.ellipse(t,r,i/2,D,0,0,In):e.arc(t,r,D,0,In),e.closePath();break;case"triangle":g=i?i/2:D,e.moveTo(t+Math.sin(S)*g,r-Math.cos(S)*D),S+=gF,e.lineTo(t+Math.sin(S)*g,r-Math.cos(S)*D),S+=gF,e.lineTo(t+Math.sin(S)*g,r-Math.cos(S)*D),e.closePath();break;case"rectRounded":h=.516*D,u=D-h,s=Math.cos(S+Vh)*u,y=Math.cos(S+Vh)*(i?i/2-h:u),l=Math.sin(S+Vh)*u,b=Math.sin(S+Vh)*(i?i/2-h:u),e.arc(t-y,r-l,h,S-Ot,S-fr),e.arc(t+b,r-s,h,S-fr,S),e.arc(t+y,r+l,h,S,S+fr),e.arc(t-b,r+s,h,S+fr,S+Ot),e.closePath();break;case"rect":if(!w){u=Math.SQRT1_2*D,g=i?i/2:u,e.rect(t-g,r-u,2*g,2*u);break}S+=Vh;case"rectRot":y=Math.cos(S)*(i?i/2:D),s=Math.cos(S)*D,l=Math.sin(S)*D,b=Math.sin(S)*(i?i/2:D),e.moveTo(t-y,r-l),e.lineTo(t+b,r-s),e.lineTo(t+y,r+l),e.lineTo(t-b,r+s),e.closePath();break;case"crossRot":S+=Vh;case"cross":y=Math.cos(S)*(i?i/2:D),s=Math.cos(S)*D,l=Math.sin(S)*D,b=Math.sin(S)*(i?i/2:D),e.moveTo(t-y,r-l),e.lineTo(t+y,r+l),e.moveTo(t+b,r-s),e.lineTo(t-b,r+s);break;case"star":y=Math.cos(S)*(i?i/2:D),s=Math.cos(S)*D,l=Math.sin(S)*D,b=Math.sin(S)*(i?i/2:D),e.moveTo(t-y,r-l),e.lineTo(t+y,r+l),e.moveTo(t+b,r-s),e.lineTo(t-b,r+s),S+=Vh,y=Math.cos(S)*(i?i/2:D),s=Math.cos(S)*D,l=Math.sin(S)*D,b=Math.sin(S)*(i?i/2:D),e.moveTo(t-y,r-l),e.lineTo(t+y,r+l),e.moveTo(t+b,r-s),e.lineTo(t-b,r+s);break;case"line":s=i?i/2:Math.cos(S)*D,l=Math.sin(S)*D,e.moveTo(t-s,r-l),e.lineTo(t+s,r+l);break;case"dash":e.moveTo(t,r),e.lineTo(t+Math.cos(S)*(i?i/2:D),r+Math.sin(S)*D);break;case!1:e.closePath()}e.fill(),n.borderWidth>0&&e.stroke()}}function Bc(e,n,t){return t=t||.5,!n||e&&e.x>n.left-t&&e.x<n.right+t&&e.y>n.top-t&&e.y<n.bottom+t}function kb(e,n){e.save(),e.beginPath(),e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()}function Nb(e){e.restore()}function fJ(e,n,t,r,i){if(!n)return e.lineTo(t.x,t.y);if("middle"===i){const o=(n.x+t.x)/2;e.lineTo(o,n.y),e.lineTo(o,t.y)}else"after"===i!=!!r?e.lineTo(n.x,t.y):e.lineTo(t.x,n.y);e.lineTo(t.x,t.y)}function pJ(e,n,t,r){if(!n)return e.lineTo(t.x,t.y);e.bezierCurveTo(r?n.cp1x:n.cp2x,r?n.cp1y:n.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function mJ(e,n,t,r,i){if(i.strikethrough||i.underline){const o=e.measureText(r),s=n-o.actualBoundingBoxLeft,l=n+o.actualBoundingBoxRight,h=t+o.actualBoundingBoxDescent,g=i.strikethrough?(t-o.actualBoundingBoxAscent+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,g),e.lineTo(l,g),e.stroke()}}function _J(e,n){const t=e.fillStyle;e.fillStyle=n.color,e.fillRect(n.left,n.top,n.width,n.height),e.fillStyle=t}function Uh(e,n,t,r,i,o={}){const s=Dn(n)?n:[n],l=o.strokeWidth>0&&""!==o.strokeColor;let u,h;for(e.save(),e.font=i.string,function gJ(e,n){n.translation&&e.translate(n.translation[0],n.translation[1]),Ct(n.rotation)||e.rotate(n.rotation),n.color&&(e.fillStyle=n.color),n.textAlign&&(e.textAlign=n.textAlign),n.textBaseline&&(e.textBaseline=n.textBaseline)}(e,o),u=0;u<s.length;++u)h=s[u],o.backdrop&&_J(e,o.backdrop),l&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),Ct(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(h,t,r,o.maxWidth)),e.fillText(h,t,r,o.maxWidth),mJ(e,t,r,h,o),r+=Number(i.lineHeight);e.restore()}function p_(e,n){const{x:t,y:r,w:i,h:o,radius:s}=n;e.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*Ot,Ot,!0),e.lineTo(t,r+o-s.bottomLeft),e.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,Ot,fr,!0),e.lineTo(t+i-s.bottomRight,r+o),e.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,fr,0,!0),e.lineTo(t+i,r+s.topRight),e.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-fr,!0),e.lineTo(t+s.topLeft,r)}const yJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bJ(e,n){const t=(""+e).match(yJ);if(!t||"normal"===t[1])return 1.2*n;switch(e=+t[2],t[3]){case"px":return e;case"%":e/=100}return n*e}const CJ=e=>+e||0;function gI(e,n){const t={},r=St(n),i=r?Object.keys(n):n,o=St(e)?r?s=>lt(e[s],e[n[s]]):s=>e[s]:()=>e;for(const s of i)t[s]=CJ(o(s));return t}function NF(e){return gI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Hh(e){return gI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function wi(e){const n=NF(e);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Or(e,n){let t=lt((e=e||{}).size,(n=n||Ln.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=lt(e.style,n.style);r&&!(""+r).match(vJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:lt(e.family,n.family),lineHeight:bJ(lt(e.lineHeight,n.lineHeight),t),size:t,style:r,weight:lt(e.weight,n.weight),string:""};return i.string=function dJ(e){return!e||Ct(e.size)||Ct(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function g_(e,n,t,r){let o,s,l,i=!0;for(o=0,s=e.length;o<s;++o)if(l=e[o],void 0!==l&&(void 0!==n&&"function"==typeof l&&(l=l(n),i=!1),void 0!==t&&Dn(l)&&(l=l[t%l.length],i=!1),void 0!==l))return r&&!i&&(r.cacheable=!1),l}function ud(e,n){return Object.assign(Object.create(e),n)}function mI(e,n=[""],t,r,i=()=>e[0]){const o=t||e;typeof r>"u"&&(r=BF("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:r,_getTarget:i,override:l=>mI([l,...e],n,o,r)};return new Proxy(s,{deleteProperty:(l,u)=>(delete l[u],delete l._keys,delete e[0][u],!0),get:(l,u)=>FF(l,u,()=>function xJ(e,n,t,r){let i;for(const o of n)if(i=BF(wJ(o,e),t),typeof i<"u")return _I(e,i)?yI(t,r,e,i):i}(u,n,e,l)),getOwnPropertyDescriptor:(l,u)=>Reflect.getOwnPropertyDescriptor(l._scopes[0],u),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(l,u)=>jF(l).includes(u),ownKeys:l=>jF(l),set(l,u,h){const g=l._storage||(l._storage=i());return l[u]=g[u]=h,delete l._keys,!0}})}function Pp(e,n,t,r){const i={_cacheable:!1,_proxy:e,_context:n,_subProxy:t,_stack:new Set,_descriptors:OF(e,r),setContext:o=>Pp(e,o,t,r),override:o=>Pp(e.override(o),n,t,r)};return new Proxy(i,{deleteProperty:(o,s)=>(delete o[s],delete e[s],!0),get:(o,s,l)=>FF(o,s,()=>function DJ(e,n,t){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e;let l=r[n];return ld(l)&&s.isScriptable(n)&&(l=function IJ(e,n,t,r){const{_proxy:i,_context:o,_subProxy:s,_stack:l}=t;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let u=n(o,s||r);return l.delete(e),_I(e,u)&&(u=yI(i._scopes,i,e,u)),u}(n,l,e,t)),Dn(l)&&l.length&&(l=function SJ(e,n,t,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:l}=t;if(typeof o.index<"u"&&r(e))return n[o.index%n.length];if(St(n[0])){const u=n,h=i._scopes.filter(g=>g!==u);n=[];for(const g of u){const y=yI(h,i,e,g);n.push(Pp(y,o,s&&s[e],l))}}return n}(n,l,e,s.isIndexable)),_I(n,l)&&(l=Pp(l,i,o&&o[n],s)),l}(o,s,l)),getOwnPropertyDescriptor:(o,s)=>o._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(o,s)=>Reflect.has(e,s),ownKeys:()=>Reflect.ownKeys(e),set:(o,s,l)=>(e[s]=l,delete o[s],!0)})}function OF(e,n={scriptable:!0,indexable:!0}){const{_scriptable:t=n.scriptable,_indexable:r=n.indexable,_allKeys:i=n.allKeys}=e;return{allKeys:i,scriptable:t,indexable:r,isScriptable:ld(t)?t:()=>t,isIndexable:ld(r)?r:()=>r}}const wJ=(e,n)=>e?e+oI(n):n,_I=(e,n)=>St(n)&&"adapters"!==e&&(null===Object.getPrototypeOf(n)||n.constructor===Object);function FF(e,n,t){if(Object.prototype.hasOwnProperty.call(e,n)||"constructor"===n)return e[n];const r=t();return e[n]=r,r}function LF(e,n,t){return ld(e)?e(n,t):e}const TJ=(e,n)=>!0===e?n:"string"==typeof e?ad(n,e):void 0;function MJ(e,n,t,r,i){for(const o of n){const s=TJ(t,o);if(s){e.add(s);const l=LF(s._fallback,t,i);if(typeof l<"u"&&l!==t&&l!==r)return l}else if(!1===s&&typeof r<"u"&&t!==r)return null}return!1}function yI(e,n,t,r){const i=n._rootScopes,o=LF(n._fallback,t,r),s=[...e,...i],l=new Set;l.add(r);let u=VF(l,s,t,o||t,r);return!(null===u||typeof o<"u"&&o!==t&&(u=VF(l,s,o,u,r),null===u))&&mI(Array.from(l),[""],i,o,()=>function AJ(e,n,t){const r=e._getTarget();n in r||(r[n]={});const i=r[n];return Dn(i)&&St(t)?t:i||{}}(n,t,r))}function VF(e,n,t,r,i){for(;t;)t=MJ(e,n,t,r,i);return t}function BF(e,n){for(const t of n){if(!t)continue;const r=t[e];if(typeof r<"u")return r}}function jF(e){let n=e._keys;return n||(n=e._keys=function PJ(e){const n=new Set;for(const t of e)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))n.add(r);return Array.from(n)}(e._scopes)),n}function UF(e,n,t,r){const{iScale:i}=e,{key:o="r"}=this._parsing,s=new Array(r);let l,u,h,g;for(l=0,u=r;l<u;++l)h=l+t,g=n[h],s[l]={r:i.parse(ad(g,o),h)};return s}const RJ=Number.EPSILON||1e-14,Rp=(e,n)=>n<e.length&&!e[n].skip&&e[n],HF=e=>"x"===e?"y":"x";function kJ(e,n,t,r){const i=e.skip?n:e,o=n,s=t.skip?n:t,l=aI(o,i),u=aI(s,o);let h=l/(l+u),g=u/(l+u);h=isNaN(h)?0:h,g=isNaN(g)?0:g;const y=r*h,b=r*g;return{previous:{x:o.x-y*(s.x-i.x),y:o.y-y*(s.y-i.y)},next:{x:o.x+b*(s.x-i.x),y:o.y+b*(s.y-i.y)}}}function Ob(e,n,t){return Math.max(Math.min(e,t),n)}function VJ(e,n,t,r,i){let o,s,l,u;if(n.spanGaps&&(e=e.filter(h=>!h.skip)),"monotone"===n.cubicInterpolationMode)!function FJ(e,n="x"){const t=HF(n),r=e.length,i=Array(r).fill(0),o=Array(r);let s,l,u,h=Rp(e,0);for(s=0;s<r;++s)if(l=u,u=h,h=Rp(e,s+1),u){if(h){const g=h[n]-u[n];i[s]=0!==g?(h[t]-u[t])/g:0}o[s]=l?h?Cl(i[s-1])!==Cl(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}(function NJ(e,n,t){const r=e.length;let i,o,s,l,u,h=Rp(e,0);for(let g=0;g<r-1;++g)if(u=h,h=Rp(e,g+1),u&&h){if(c_(n[g],0,RJ)){t[g]=t[g+1]=0;continue}i=t[g]/n[g],o=t[g+1]/n[g],l=Math.pow(i,2)+Math.pow(o,2),!(l<=9)&&(s=3/Math.sqrt(l),t[g]=i*s*n[g],t[g+1]=o*s*n[g])}})(e,i,o),function OJ(e,n,t="x"){const r=HF(t),i=e.length;let o,s,l,u=Rp(e,0);for(let h=0;h<i;++h){if(s=l,l=u,u=Rp(e,h+1),!l)continue;const g=l[t],y=l[r];s&&(o=(g-s[t])/3,l[`cp1${t}`]=g-o,l[`cp1${r}`]=y-o*n[h]),u&&(o=(u[t]-g)/3,l[`cp2${t}`]=g+o,l[`cp2${r}`]=y+o*n[h])}}(e,o,n)}(e,i);else{let h=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)l=e[o],u=kJ(h,l,e[Math.min(o+1,s-(r?0:1))%s],n.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,h=l}n.capBezierPoints&&function LJ(e,n){let t,r,i,o,s,l=Bc(e[0],n);for(t=0,r=e.length;t<r;++t)s=o,o=l,l=t<r-1&&Bc(e[t+1],n),o&&(i=e[t],s&&(i.cp1x=Ob(i.cp1x,n.left,n.right),i.cp1y=Ob(i.cp1y,n.top,n.bottom)),l&&(i.cp2x=Ob(i.cp2x,n.left,n.right),i.cp2y=Ob(i.cp2y,n.top,n.bottom)))}(e,t)}function vI(){return typeof window<"u"&&typeof document<"u"}function bI(e){let n=e.parentNode;return n&&"[object ShadowRoot]"===n.toString()&&(n=n.host),n}function Fb(e,n,t){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*n.parentNode[t])):r=e,r}const Lb=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),jJ=["top","right","bottom","left"];function $h(e,n,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const o=jJ[i];r[o]=parseFloat(e[n+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function zh(e,n){if("native"in e)return e;const{canvas:t,currentDevicePixelRatio:r}=n,i=Lb(t),o="border-box"===i.boxSizing,s=$h(i,"padding"),l=$h(i,"border","width"),{x:u,y:h,box:g}=function HJ(e,n){const t=e.touches,r=t&&t.length?t[0]:e,{offsetX:i,offsetY:o}=r;let l,u,s=!1;if(((e,n,t)=>(e>0||n>0)&&(!t||!t.shadowRoot))(i,o,e.target))l=i,u=o;else{const h=n.getBoundingClientRect();l=r.clientX-h.left,u=r.clientY-h.top,s=!0}return{x:l,y:u,box:s}}(e,t),y=s.left+(g&&l.left),b=s.top+(g&&l.top);let{width:C,height:w}=n;return o&&(C-=s.width+l.width,w-=s.height+l.height),{x:Math.round((u-y)/C*t.width/r),y:Math.round((h-b)/w*t.height/r)}}const Vb=e=>Math.round(10*e)/10;function $F(e,n,t){const r=n||1,i=Math.floor(e.height*r),o=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const s=e.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0)}const WJ=function(){let e=!1;try{const n={get passive(){return e=!0,!1}};vI()&&(window.addEventListener("test",null,n),window.removeEventListener("test",null,n))}catch{}return e}();function zF(e,n){const t=function BJ(e,n){return Lb(e).getPropertyValue(n)}(e,n),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Wh(e,n,t,r){return{x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)}}function GJ(e,n,t,r){return{x:e.x+t*(n.x-e.x),y:"middle"===r?t<.5?e.y:n.y:"after"===r?t<1?e.y:n.y:t>0?n.y:e.y}}function qJ(e,n,t,r){const i={x:e.cp2x,y:e.cp2y},o={x:n.cp1x,y:n.cp1y},s=Wh(e,i,t),l=Wh(i,o,t),u=Wh(o,n,t),h=Wh(s,l,t),g=Wh(l,u,t);return Wh(h,g,t)}function kp(e,n,t){return e?function(e,n){return{x:t=>e+e+n-t,setWidth(t){n=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}}(n,t):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,n)=>e+n,leftForLtr:(e,n)=>e}}function WF(e,n){let t,r;("ltr"===n||"rtl"===n)&&(t=e.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",n,"important"),e.prevTextDirection=r)}function GF(e,n){void 0!==n&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",n[0],n[1]))}function qF(e){return"angle"===e?{between:u_,compare:QX,normalize:Ci}:{between:Lc,compare:(n,t)=>n-t,normalize:n=>n}}function KF({start:e,end:n,count:t,loop:r,style:i}){return{start:e%t,end:n%t,loop:r&&(n-e+1)%t==0,style:i}}function YF(e,n,t){if(!t)return[e];const{property:r,start:i,end:o}=t,s=n.length,{compare:l,between:u,normalize:h}=qF(r),{start:g,end:y,loop:b,style:C}=function QJ(e,n,t){const{property:r,start:i,end:o}=t,{between:s,normalize:l}=qF(r),u=n.length;let b,C,{start:h,end:g,loop:y}=e;if(y){for(h+=u,g+=u,b=0,C=u;b<C&&s(l(n[h%u][r]),i,o);++b)h--,g--;h%=u,g%=u}return g<h&&(g+=u),{start:h,end:g,loop:y,style:e.style}}(e,n,t),w=[];let x,A,L,D=!1,S=null;for(let se=g,be=g;se<=y;++se)A=n[se%s],!A.skip&&(x=h(A[r]),x!==L&&(D=u(x,i,o),null===S&&(D||u(i,L,x)&&0!==l(i,L))&&(S=0===l(x,i)?se:be),null!==S&&(!D||0===l(o,x)||u(o,L,x))&&(w.push(KF({start:S,end:se,loop:b,count:s,style:C})),S=null),be=se,L=x));return null!==S&&w.push(KF({start:S,end:y,loop:b,count:s,style:C})),w}function QF(e,n){const t=[],r=e.segments;for(let i=0;i<r.length;i++){const o=YF(r[i],e.points,n);o.length&&t.push(...o)}return t}function XF(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function tee(e,n){if(!n)return!1;const t=[],r=function(i,o){return uI(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(e,r)!==JSON.stringify(n,r)}function Bb(e,n,t){return e.options.clip?e[t]:n[t]}function JF(e,n){const t=n._clip;if(t.disabled)return!1;const r=function nee(e,n){const{xScale:t,yScale:r}=e;return t&&r?{left:Bb(t,n,"left"),right:Bb(t,n,"right"),top:Bb(r,n,"top"),bottom:Bb(r,n,"bottom")}:n}(n,e.chartArea);return{left:!1===t.left?0:r.left-(!0===t.left?0:t.left),right:!1===t.right?e.width:r.right+(!0===t.right?0:t.right),top:!1===t.top?0:r.top-(!0===t.top?0:t.top),bottom:!1===t.bottom?e.height:r.bottom+(!0===t.bottom?0:t.bottom)}}class ree{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(n,t,r,i){const s=t.duration;t.listeners[i].forEach(l=>l({chart:n,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=wF.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const o=r.items;let u,s=o.length-1,l=!1;for(;s>=0;--s)u=o[s],u._active?(u._total>r.duration&&(r.duration=u._total),u.tick(n),l=!0):(o[s]=o[o.length-1],o.pop());l&&(i.draw(),this._notify(i,r,n,"progress")),o.length||(r.running=!1,this._notify(i,r,n,"complete"),r.initial=!1),t+=o.length}),this._lastDate=n,0===t&&(this._running=!1)}_getAnims(n){const t=this._charts;let r=t.get(n);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(n,r)),r}listen(n,t,r){this._getAnims(n).listeners[t].push(r)}add(n,t){!t||!t.length||this._getAnims(n).items.push(...t)}has(n){return this._getAnims(n).items.length>0}start(n){const t=this._charts.get(n);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(n){if(!this._running)return!1;const t=this._charts.get(n);return!(!t||!t.running||!t.items.length)}stop(n){const t=this._charts.get(n);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(n,t,Date.now(),"complete")}remove(n){return this._charts.delete(n)}}var jc=new ree;const eL="transparent",iee={boolean:(e,n,t)=>t>.5?n:e,color(e,n,t){const r=AF(e||eL),i=r.valid&&AF(n||eL);return i&&i.valid?i.mix(r,t).hexString():n},number:(e,n,t)=>e+(n-e)*t};class oee{constructor(n,t,r,i){const o=t[r];i=g_([n.to,i,o,n.from]);const s=g_([n.from,o,i]);this._active=!0,this._fn=n.fn||iee[n.type||typeof s],this._easing=d_[n.easing]||d_.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(n,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,n.duration)),this._total+=o,this._loop=!!n.loop,this._to=g_([n.to,t,i,n.from]),this._from=g_([n.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){const t=n-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,l=this._to;let u;if(this._active=o!==l&&(s||t<r),!this._active)return this._target[i]=l,void this._notify(!0);t<0?this._target[i]=o:(u=t/r%2,u=s&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(o,l,u))}wait(){const n=this._promises||(this._promises=[]);return new Promise((t,r)=>{n.push({res:t,rej:r})})}_notify(n){const t=n?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class tL{constructor(n,t){this._chart=n,this._properties=new Map,this.configure(t)}configure(n){if(!St(n))return;const t=Object.keys(Ln.animation),r=this._properties;Object.getOwnPropertyNames(n).forEach(i=>{const o=n[i];if(!St(o))return;const s={};for(const l of t)s[l]=o[l];(Dn(o.properties)&&o.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,s)})})}_animateOptions(n,t){const r=t.options,i=function aee(e,n){if(!n)return;let t=e.options;if(t)return t.$shared&&(e.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;e.options=n}(n,r);if(!i)return[];const o=this._createAnimations(i,r);return r.$shared&&function see(e,n){const t=[],r=Object.keys(n);for(let i=0;i<r.length;i++){const o=e[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}(n.options.$animations,r).then(()=>{n.options=r},()=>{}),o}_createAnimations(n,t){const r=this._properties,i=[],o=n.$animations||(n.$animations={}),s=Object.keys(t),l=Date.now();let u;for(u=s.length-1;u>=0;--u){const h=s[u];if("$"===h.charAt(0))continue;if("options"===h){i.push(...this._animateOptions(n,t));continue}const g=t[h];let y=o[h];const b=r.get(h);if(y){if(b&&y.active()){y.update(b,g,l);continue}y.cancel()}b&&b.duration?(o[h]=y=new oee(b,n,h,g),i.push(y)):n[h]=g}return i}update(n,t){if(0===this._properties.size)return void Object.assign(n,t);const r=this._createAnimations(n,t);return r.length?(jc.add(this._chart,r),!0):void 0}}function nL(e,n){const t=e&&e.options||{},r=t.reverse,i=void 0===t.min?n:0,o=void 0===t.max?n:0;return{start:r?o:i,end:r?i:o}}function rL(e,n){const t=[],r=e._getSortedDatasetMetas(n);let i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function iL(e,n,t,r={}){const i=e.keys,o="single"===r.mode;let s,l,u,h;if(null===n)return;let g=!1;for(s=0,l=i.length;s<l;++s){if(u=+i[s],u===t){if(g=!0,r.all)continue;break}h=e.values[u],er(h)&&(o||0===n||Cl(n)===Cl(h))&&(n+=h)}return g||r.all?n:0}function CI(e,n){const t=e&&e.options.stacked;return t||void 0===t&&void 0!==n.stack}function fee(e,n,t){const r=e[n]||(e[n]={});return r[t]||(r[t]={})}function oL(e,n,t,r){for(const i of n.getMatchingVisibleMetas(r).reverse()){const o=e[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function sL(e,n){const{chart:t,_cachedMeta:r}=e,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:l}=r,u=o.axis,h=s.axis,g=function dee(e,n,t){return`${e.id}.${n.id}.${t.stack||t.type}`}(o,s,r),y=n.length;let b;for(let C=0;C<y;++C){const w=n[C],{[u]:D,[h]:S}=w;b=(w._stacks||(w._stacks={}))[h]=fee(i,g,D),b[l]=S,b._top=oL(b,s,!0,r.type),b._bottom=oL(b,s,!1,r.type),(b._visualValues||(b._visualValues={}))[l]=S}}function EI(e,n){const t=e.scales;return Object.keys(t).filter(r=>t[r].axis===n).shift()}function m_(e,n){const t=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){n=n||e._parsed;for(const i of n){const o=i._stacks;if(!o||void 0===o[r]||void 0===o[r][t])return;delete o[r][t],void 0!==o[r]._visualValues&&void 0!==o[r]._visualValues[t]&&delete o[r]._visualValues[t]}}}const wI=e=>"reset"===e||"none"===e,aL=(e,n)=>n?e:Object.assign({},e);let dd=(()=>class e{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=CI(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&m_(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),o=(b,C,w,D)=>"x"===b?C:"r"===b?D:w,s=r.xAxisID=lt(i.xAxisID,EI(t,"x")),l=r.yAxisID=lt(i.yAxisID,EI(t,"y")),u=r.rAxisID=lt(i.rAxisID,EI(t,"r")),h=r.indexAxis,g=r.iAxisID=o(h,s,l,u),y=r.vAxisID=o(h,l,s,u);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(l),r.rScale=this.getScaleForId(u),r.iScale=this.getScaleForId(g),r.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&CF(this._data,this),t._stacked&&m_(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(St(r))this._data=function uee(e,n){const{iScale:t,vScale:r}=n,i="x"===t.axis?"x":"y",o="x"===r.axis?"x":"y",s=Object.keys(e),l=new Array(s.length);let u,h,g;for(u=0,h=s.length;u<h;++u)g=s[u],l[u]={[i]:g,[o]:e[g]};return l}(r,this._cachedMeta);else if(i!==r){if(i){CF(i,this);const o=this._cachedMeta;m_(o),o._parsed=[]}r&&Object.isExtensible(r)&&function eJ(e,n){e._chartjs?e._chartjs.listeners.push(n):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),bF.forEach(t=>{const r="_onData"+oI(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...o){const s=i.apply(this,o);return e._chartjs.listeners.forEach(l=>{"function"==typeof l[r]&&l[r](...o)}),s}})}))}(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const s=r._stacked;r._stacked=CI(r.vScale,r),r.stack!==i.stack&&(o=!0,m_(r),r.stack=i.stack),this._resyncElements(t),(o||s!==r._stacked)&&(sL(this,r._parsed),r._stacked=CI(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:l}=i,u=s.axis;let y,b,C,h=0===t&&r===o.length||i._sorted,g=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=o,i._sorted=!0,C=o;else{C=Dn(o[t])?this.parseArrayData(i,o,t,r):St(o[t])?this.parseObjectData(i,o,t,r):this.parsePrimitiveData(i,o,t,r);const w=()=>null===b[u]||g&&b[u]<g[u];for(y=0;y<r;++y)i._parsed[y+t]=b=C[y],h&&(w()&&(h=!1),g=b);i._sorted=h}l&&sL(this,C)}parsePrimitiveData(t,r,i,o){const{iScale:s,vScale:l}=t,u=s.axis,h=l.axis,g=s.getLabels(),y=s===l,b=new Array(o);let C,w,D;for(C=0,w=o;C<w;++C)D=C+i,b[C]={[u]:y||s.parse(g[D],D),[h]:l.parse(r[D],D)};return b}parseArrayData(t,r,i,o){const{xScale:s,yScale:l}=t,u=new Array(o);let h,g,y,b;for(h=0,g=o;h<g;++h)y=h+i,b=r[y],u[h]={x:s.parse(b[0],y),y:l.parse(b[1],y)};return u}parseObjectData(t,r,i,o){const{xScale:s,yScale:l}=t,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,g=new Array(o);let y,b,C,w;for(y=0,b=o;y<b;++y)C=y+i,w=r[C],g[y]={x:s.parse(ad(w,u),C),y:l.parse(ad(w,h),C)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const s=this._cachedMeta,l=r[t.axis];return iL({keys:rL(this.chart,!0),values:r._stacks[t.axis]._visualValues},l,s.index,{mode:i})}updateRangeFromParsed(t,r,i,o){const s=i[r.axis];let l=null===s?NaN:s;const u=o&&i._stacks[r.axis];o&&u&&(o.values=u,l=iL(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,r){const i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,l=o.length,u=this._getOtherScale(t),h=((e,n)=>e&&!n.hidden&&n._stacked&&{keys:rL(this.chart,!0),values:null})(r,i),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:b}=function hee(e){const{min:n,max:t,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?n:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(u);let C,w;function D(){w=o[C];const S=w[u.axis];return!er(w[t.axis])||y>S||b<S}for(C=0;C<l&&(D()||(this.updateRangeFromParsed(g,t,w,h),!s));++C);if(s)for(C=l-1;C>=0;--C)if(!D()){this.updateRangeFromParsed(g,t,w,h);break}return g}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let o,s,l;for(o=0,s=r.length;o<s;++o)l=r[o][t.axis],er(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,o=r.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=function cee(e){let n,t,r,i;return St(e)?(n=e.top,t=e.right,r=e.bottom,i=e.left):n=t=r=i=e,{top:n,right:t,bottom:r,left:i,disabled:!1===e}}(lt(this.options.clip,function lee(e,n,t){if(!1===t)return!1;const r=nL(e,t),i=nL(n,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this._cachedMeta,o=i.data||[],s=this.chart.chartArea,l=[],u=this._drawStart||0,h=this._drawCount||o.length-u,g=this.options.drawActiveElementsOnTop;let y;for(i.dataset&&i.dataset.draw(t,s,u,h),y=u;y<u+h;++y){const b=o[y];b.hidden||(b.active&&g?l.push(b):b.draw(t,s))}for(y=0;y<l.length;++y)l[y].draw(t,s)}getStyle(t,r){const i=r?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const o=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];s=l.$context||(l.$context=function gee(e,n,t){return ud(e,{active:!1,dataIndex:n,parsed:void 0,raw:void 0,element:t,index:n,mode:"default",type:"data"})}(this.getContext(),t,l)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=function pee(e,n){return ud(e,{active:!1,dataset:void 0,datasetIndex:n,index:n,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const o="active"===r,s=this._cachedDataOpts,l=t+"-"+r,u=s[l],h=this.enableOptionSharing&&l_(i);if(u)return aL(u,h);const g=this.chart.config,y=g.datasetElementScopeKeys(this._type,t),b=o?[`${t}Hover`,"hover",t,""]:[t,""],C=g.getOptionScopes(this.getDataset(),y),w=Object.keys(Ln.elements[t]),S=g.resolveNamedOptions(C,w,()=>this.getContext(i,o,r),b);return S.$shared&&(S.$shared=h,s[l]=Object.freeze(aL(S,h))),S}_resolveAnimations(t,r,i){const o=this.chart,s=this._cachedDataOpts,l=`animation-${r}`,u=s[l];if(u)return u;let h;if(!1!==o.options.animation){const y=this.chart.config,b=y.datasetAnimationScopeKeys(this._type,r),C=y.getOptionScopes(this.getDataset(),b);h=y.createResolver(C,this.getContext(t,i,r))}const g=new tL(o,h&&h.animations);return h&&h._cacheable&&(s[l]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||wI(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),o=this._sharedOptions,s=this.getSharedOptions(i),l=this.includeOptions(r,s)||s!==o;return this.updateSharedOptions(s,r,i),{sharedOptions:s,includeOptions:l}}updateElement(t,r,i,o){wI(o)?Object.assign(t,i):this._resolveAnimations(r,o).update(t,i)}updateSharedOptions(t,r,i){t&&!wI(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,o){t.active=o;const s=this.getStyle(r,o);this._resolveAnimations(r,i,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[u,h,g]of this._syncList)this[u](h,g);this._syncList=[];const o=i.length,s=r.length,l=Math.min(s,o);l&&this.parse(0,l),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,r,i=!0){const o=this._cachedMeta,s=o.data,l=t+r;let u;const h=g=>{for(g.length+=r,u=g.length-1;u>=l;u--)g[u]=g[u-r]};for(h(s),u=t;u<l;++u)s[u]=new this.dataElementType;this._parsing&&h(o._parsed),this.parse(t,r),i&&this.updateElements(s,t,r,"reset")}updateElements(t,r,i,o){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(t,r);i._stacked&&m_(i,o)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,o]=t;this[r](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function yee(e){const n=e.iScale,t=function _ee(e,n){if(!e._cache.$bar){const t=e.getMatchingVisibleMetas(n);let r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(e));e._cache.$bar=EF(r.sort((i,o)=>i-o))}return e._cache.$bar}(n,e.type);let i,o,s,l,r=n._length;const u=()=>{32767===s||-32768===s||(l_(l)&&(r=Math.min(r,Math.abs(s-l)||r)),l=s)};for(i=0,o=t.length;i<o;++i)s=n.getPixelForValue(t[i]),u();for(l=void 0,i=0,o=n.ticks.length;i<o;++i)s=n.getPixelForTick(i),u();return r}function lL(e,n,t,r){return Dn(e)?function Cee(e,n,t,r){const i=t.parse(e[0],r),o=t.parse(e[1],r),s=Math.min(i,o),l=Math.max(i,o);let u=s,h=l;Math.abs(s)>Math.abs(l)&&(u=l,h=s),n[t.axis]=h,n._custom={barStart:u,barEnd:h,start:i,end:o,min:s,max:l}}(e,n,t,r):n[t.axis]=t.parse(e,r),n}function cL(e,n,t,r){const i=e.iScale,o=e.vScale,s=i.getLabels(),l=i===o,u=[];let h,g,y,b;for(h=t,g=t+r;h<g;++h)b=n[h],y={},y[i.axis]=l||i.parse(s[h],h),u.push(lL(b,y,o,h));return u}function DI(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Dee(e,n,t,r){let i=n.borderSkipped;const o={};if(!i)return void(e.borderSkipped=o);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:l,reverse:u,top:h,bottom:g}=function wee(e){let n,t,r,i,o;return e.horizontal?(n=e.base>e.x,t="left",r="right"):(n=e.base<e.y,t="bottom",r="top"),n?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:n,top:i,bottom:o}}(e);"middle"===i&&t&&(e.enableBorderRadius=!0,(t._top||0)===r?i=h:(t._bottom||0)===r?i=g:(o[uL(g,s,l,u)]=!0,i=h)),o[uL(i,s,l,u)]=!0,e.borderSkipped=o}function uL(e,n,t,r){return r?(e=function Iee(e,n,t){return e===n?t:e===t?n:e}(e,n,t),e=dL(e,t,n)):e=dL(e,n,t),e}function dL(e,n,t){return"start"===e?n:"end"===e?t:e}function See(e,{inflateAmount:n},t){e.inflateAmount="auto"===n?1===t?.33:0:n}let Tee=(()=>class e extends dd{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,o){return cL(t,r,i,o)}parseArrayData(t,r,i,o){return cL(t,r,i,o)}parseObjectData(t,r,i,o){const{iScale:s,vScale:l}=t,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,g="x"===s.axis?u:h,y="x"===l.axis?u:h,b=[];let C,w,D,S;for(C=i,w=i+o;C<w;++C)S=r[C],D={},D[s.axis]=s.parse(ad(S,g),C),b.push(lL(ad(S,y),D,l,C));return b}updateRangeFromParsed(t,r,i,o){super.updateRangeFromParsed(t,r,i,o);const s=i._custom;s&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:o}=r,s=this.getParsed(t),l=s._custom,u=DI(l)?"["+l.start+", "+l.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,o){const s="reset"===o,{index:l,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),g=u.isHorizontal(),y=this._getRuler(),{sharedOptions:b,includeOptions:C}=this._getSharedOptions(r,o);for(let w=r;w<r+i;w++){const D=this.getParsed(w),S=s||Ct(D[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(w),x=this._calculateBarIndexPixels(w,y),A=(D._stacks||{})[u.axis],L={horizontal:g,base:S.base,enableBorderRadius:!A||DI(D._custom)||l===A._top||l===A._bottom,x:g?S.head:x.center,y:g?x.center:S.head,height:g?x.size:Math.abs(S.size),width:g?Math.abs(S.size):x.size};C&&(L.options=b||this.resolveDataElementOptions(w,t[w].active?"active":o));const G=L.options||t[w].options;Dee(L,G,A,l),See(L,G,y.ratio),this.updateElement(t[w],w,L,o)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),s=i.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(r),h=u&&u[i.axis],g=y=>{const b=y._parsed.find(w=>w[i.axis]===h),C=b&&b[y.vScale.axis];if(Ct(C)||isNaN(C))return!0};for(const y of o)if((void 0===r||!g(y))&&((!1===s||-1===l.indexOf(y.stack)||void 0===s&&void 0===y.stack)&&l.push(y.stack),y.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[lt("x"===this.chart.options.indexAxis?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){const o=this._getStacks(t,i),s=void 0!==r?o.indexOf(r):-1;return-1===s?o.length-1:s}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,o=[];let s,l;for(s=0,l=r.data.length;s<l;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const u=t.barThickness;return{min:u||yee(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i,index:o},options:{base:s,minBarLength:l}}=this,u=s||0,h=this.getParsed(t),g=h._custom,y=DI(g);let D,S,b=h[r.axis],C=0,w=i?this.applyStack(r,h,i):b;w!==b&&(C=w-b,w=b),y&&(b=g.barStart,w=g.barEnd-g.barStart,0!==b&&Cl(b)!==Cl(g.barEnd)&&(C=0),C+=b);const x=Ct(s)||y?C:s;let A=r.getPixelForValue(x);if(D=this.chart.getDataVisibility(t)?r.getPixelForValue(C+w):A,S=D-A,Math.abs(S)<l){S=function Eee(e,n,t){return 0!==e?Cl(e):(n.isHorizontal()?1:-1)*(n.min>=t?1:-1)}(S,r,u)*l,b===u&&(A-=S/2);const L=r.getPixelForDecimal(0),G=r.getPixelForDecimal(1),W=Math.min(L,G),te=Math.max(L,G);A=Math.max(Math.min(A,te),W),D=A+S,i&&!y&&(h._stacks[r.axis]._visualValues[o]=r.getValueForPixel(D)-r.getValueForPixel(A))}if(A===r.getPixelForValue(u)){const L=Cl(S)*r.getLineWidthForValue(u)/2;A+=L,S-=L}return{size:S,base:A,head:D,center:D+S/2}}_calculateBarIndexPixels(t,r){const i=r.scale,o=this.options,s=o.skipNull,l=lt(o.maxBarThickness,1/0);let u,h;const g=this._getAxisCount();if(r.grouped){const y=s?this._getStackCount(t):r.stackCount,b="flex"===o.barThickness?function bee(e,n,t,r){const i=n.pixels,o=i[e];let s=e>0?i[e-1]:null,l=e<i.length-1?i[e+1]:null;const u=t.categoryPercentage;null===s&&(s=o-(null===l?n.end-n.start:l-o)),null===l&&(l=o+o-s);const h=o-(o-Math.min(s,l))/2*u;return{chunk:Math.abs(l-s)/2*u/r,ratio:t.barPercentage,start:h}}(t,r,o,y*g):function vee(e,n,t,r){const i=t.barThickness;let o,s;return Ct(i)?(o=n.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:n.pixels[e]-o/2}}(t,r,o,y*g),C="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf(lt(C,this.getFirstScaleIdForIndexAxis())),D=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+w;u=b.start+b.chunk*D+b.chunk/2,h=Math.min(l,b.chunk*b.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),h=Math.min(l,r.min*r.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,o=i.length;let s=0;for(;s<o;++s)null!==this.getParsed(s)[r.axis]&&!i[s].hidden&&i[s].draw(this._ctx)}})(),Mee=(()=>class e extends dd{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,o){const s=super.parsePrimitiveData(t,r,i,o);for(let l=0;l<s.length;l++)s[l]._custom=this.resolveDataElementOptions(l+i).radius;return s}parseArrayData(t,r,i,o){const s=super.parseArrayData(t,r,i,o);for(let l=0;l<s.length;l++)s[l]._custom=lt(r[i+l][2],this.resolveDataElementOptions(l+i).radius);return s}parseObjectData(t,r,i,o){const s=super.parseObjectData(t,r,i,o);for(let l=0;l<s.length;l++){const u=r[i+l];s[l]._custom=lt(u&&u.r&&+u.r,this.resolveDataElementOptions(l+i).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,l=this.getParsed(t),u=o.getLabelForValue(l.x),h=s.getLabelForValue(l.y),g=l._custom;return{label:i[t]||"",value:"("+u+", "+h+(g?", "+g:"")+")"}}update(t){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,o){const s="reset"===o,{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:h,includeOptions:g}=this._getSharedOptions(r,o),y=l.axis,b=u.axis;for(let C=r;C<r+i;C++){const w=t[C],D=!s&&this.getParsed(C),S={},x=S[y]=s?l.getPixelForDecimal(.5):l.getPixelForValue(D[y]),A=S[b]=s?u.getBasePixel():u.getPixelForValue(D[b]);S.skip=isNaN(x)||isNaN(A),g&&(S.options=h||this.resolveDataElementOptions(C,w.active?"active":o),s&&(S.options.radius=0)),this.updateElement(w,C,S,o)}}resolveDataElementOptions(t,r){const i=this.getParsed(t);let o=super.resolveDataElementOptions(t,r);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const s=o.radius;return"active"!==r&&(o.radius=0),o.radius+=lt(i&&i._custom,s),o}})(),II=(()=>class e extends dd{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,l)=>{const h=t.getDatasetMeta(0).controller.getStyle(l);return{text:s,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,o=this._cachedMeta;if(!1===this._parsing)o._parsed=i;else{let l,u,s=h=>+i[h];if(St(i[t])){const{key:h="value"}=this._parsing;s=g=>+ad(i[g],h)}for(l=t,u=t+r;l<u;++l)o._parsed[l]=s(l)}}_getRotation(){return ba(this.options.rotation-90)}_getCircumference(){return ba(this.options.circumference)}_getRotationExtents(){let t=In,r=-In;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),l=o._getCircumference();t=Math.min(t,s),r=Math.max(r,s+l)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,o=this._cachedMeta,s=o.data,l=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(((e,n)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/n)(this.options.cutout,u),1),g=this._getRingWeight(this.index),{circumference:y,rotation:b}=this._getRotationExtents(),{ratioX:C,ratioY:w,offsetX:D,offsetY:S}=function Aee(e,n,t){let r=1,i=1,o=0,s=0;if(n<In){const l=e,u=l+n,h=Math.cos(l),g=Math.sin(l),y=Math.cos(u),b=Math.sin(u),C=(L,G,W)=>u_(L,l,u,!0)?1:Math.max(G,G*t,W,W*t),w=(L,G,W)=>u_(L,l,u,!0)?-1:Math.min(G,G*t,W,W*t),D=C(0,h,y),S=C(fr,g,b),x=w(Ot,h,y),A=w(Ot+fr,g,b);r=(D-x)/2,i=(S-A)/2,o=-(D+x)/2,s=-(S+A)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}(b,y,h),L=Math.max(Math.min((i.width-l)/C,(i.height-l)/w)/2,0),G=dF(this.options.radius,L),te=(G-Math.max(G*h,0))/this._getVisibleDatasetWeightTotal();this.offsetX=D*G,this.offsetY=S*G,o.total=this.calculateTotal(),this.outerRadius=G-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*g,0),this.updateElements(s,0,s.length,t)}_circumference(t,r){const i=this.options,o=this._cachedMeta,s=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===o._parsed[t]||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/In)}updateElements(t,r,i,o){const s="reset"===o,l=this.chart,u=l.chartArea,y=(u.left+u.right)/2,b=(u.top+u.bottom)/2,C=s&&l.options.animation.animateScale,w=C?0:this.innerRadius,D=C?0:this.outerRadius,{sharedOptions:S,includeOptions:x}=this._getSharedOptions(r,o);let L,A=this._getRotation();for(L=0;L<r;++L)A+=this._circumference(L,s);for(L=r;L<r+i;++L){const G=this._circumference(L,s),W=t[L],te={x:y+this.offsetX,y:b+this.offsetY,startAngle:A,endAngle:A+G,circumference:G,outerRadius:D,innerRadius:w};x&&(te.options=S||this.resolveDataElementOptions(L,W.active?"active":o)),A+=G,this.updateElement(W,L,te,o)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let o,i=0;for(o=0;o<r.length;o++){const s=t._parsed[o];null!==s&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?In*(Math.abs(t)/r):0}getLabelAndValue(t){const i=this.chart,o=i.data.labels||[],s=h_(this._cachedMeta._parsed[t],i.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let r=0;const i=this.chart;let o,s,l,u,h;if(!t)for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){l=i.getDatasetMeta(o),t=l.data,u=l.controller;break}if(!t)return 0;for(o=0,s=t.length;o<s;++o)h=u.resolveDataElementOptions(o),"inner"!==h.borderAlign&&(r=Math.max(r,h.borderWidth||0,h.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,o=t.length;i<o;++i){const s=this.resolveDataElementOptions(i);r=Math.max(r,s.offset||0,s.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(lt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),xee=(()=>class e extends dd{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=r,l=this.chart._animationsDisabled;let{start:u,count:h}=IF(r,o,l);this._drawStart=u,this._drawCount=h,SF(r)&&(u=0,h=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:g},t),this.updateElements(o,u,h,t)}updateElements(t,r,i,o){const s="reset"===o,{iScale:l,vScale:u,_stacked:h,_dataset:g}=this._cachedMeta,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(r,o),C=l.axis,w=u.axis,{spanGaps:D,segment:S}=this.options,x=xp(D)?D:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||"none"===o,L=r+i,G=t.length;let W=r>0&&this.getParsed(r-1);for(let te=0;te<G;++te){const ae=t[te],se=A?ae:{};if(te<r||te>=L){se.skip=!0;continue}const be=this.getParsed(te),nt=Ct(be[w]),ct=se[C]=l.getPixelForValue(be[C],te),ut=se[w]=s||nt?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,be,h):be[w],te);se.skip=isNaN(ct)||isNaN(ut)||nt,se.stop=te>0&&Math.abs(be[C]-W[C])>x,S&&(se.parsed=be,se.raw=g.data[te]),b&&(se.options=y||this.resolveDataElementOptions(te,ae.active?"active":o)),A||this.updateElement(ae,te,se,o),W=be}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return i;const s=o[0].size(this.resolveDataElementOptions(0)),l=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}})(),hL=(()=>class e extends dd{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,l)=>{const h=t.getDatasetMeta(0).controller.getStyle(l);return{text:s,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this.chart,o=i.data.labels||[],s=h_(this._cachedMeta._parsed[t].r,i.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,r,i,o){return UF.bind(this)(t,r,i,o)}update(t){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){const r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((i,o)=>{const s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<r.min&&(r.min=s),s>r.max&&(r.max=s))}),r}_updateRadius(){const t=this.chart,r=t.chartArea,i=t.options,o=Math.min(r.right-r.left,r.bottom-r.top),s=Math.max(o/2,0),u=(s-Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=s-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(t,r,i,o){const s="reset"===o,l=this.chart,h=l.options.animation,g=this._cachedMeta.rScale,y=g.xCenter,b=g.yCenter,C=g.getIndexAngle(0)-.5*Ot;let D,w=C;const S=360/this.countVisibleElements();for(D=0;D<r;++D)w+=this._computeAngle(D,o,S);for(D=r;D<r+i;D++){const x=t[D];let A=w,L=w+this._computeAngle(D,o,S),G=l.getDataVisibility(D)?g.getDistanceFromCenterForValue(this.getParsed(D).r):0;w=L,s&&(h.animateScale&&(G=0),h.animateRotate&&(A=L=C));const W={x:y,y:b,innerRadius:0,outerRadius:G,startAngle:A,endAngle:L,options:this.resolveDataElementOptions(D,x.active?"active":o)};this.updateElement(x,D,W,o)}}countVisibleElements(){let r=0;return this._cachedMeta.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?ba(this.resolveDataElementOptions(t,r).angle||i):0}})();var Pee=Object.freeze({__proto__:null,BarController:Tee,BubbleController:Mee,DoughnutController:II,LineController:xee,PieController:(()=>class e extends II{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:hL,RadarController:(()=>class e extends dd{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,o){return UF.bind(this)(t,r,i,o)}update(t){const r=this._cachedMeta,i=r.dataset,o=r.data||[],s=r.iScale.getLabels();if(i.points=o,"resize"!==t){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),this.updateElement(i,void 0,{_loop:!0,_fullLoop:s.length===o.length,options:l},t)}this.updateElements(o,0,o.length,t)}updateElements(t,r,i,o){const s=this._cachedMeta.rScale,l="reset"===o;for(let u=r;u<r+i;u++){const h=t[u],g=this.resolveDataElementOptions(u,h.active?"active":o),y=s.getPointPositionForValue(u,this.getParsed(u).r),b=l?s.xCenter:y.x,C=l?s.yCenter:y.y,w={x:b,y:C,angle:y.angle,skip:isNaN(b)||isNaN(C),options:g};this.updateElement(h,u,w,o)}}})(),ScatterController:(()=>class e extends dd{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,l=this.getParsed(t),u=o.getLabelForValue(l.x),h=s.getLabelForValue(l.y);return{label:i[t]||"",value:"("+u+", "+h+")"}}update(t){const r=this._cachedMeta,{data:i=[]}=r,o=this.chart._animationsDisabled;let{start:s,count:l}=IF(r,i,o);if(this._drawStart=s,this._drawCount=l,SF(r)&&(s=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:h}=r;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!h._decimated,u.points=i;const g=this.resolveDatasetElementOptions(t);g.segment=this.options.segment,this.updateElement(u,void 0,{animated:!o,options:g},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,s,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,o){const s="reset"===o,{iScale:l,vScale:u,_stacked:h,_dataset:g}=this._cachedMeta,y=this.resolveDataElementOptions(r,o),b=this.getSharedOptions(y),C=this.includeOptions(o,b),w=l.axis,D=u.axis,{spanGaps:S,segment:x}=this.options,A=xp(S)?S:Number.POSITIVE_INFINITY,L=this.chart._animationsDisabled||s||"none"===o;let G=r>0&&this.getParsed(r-1);for(let W=r;W<r+i;++W){const te=t[W],ae=this.getParsed(W),se=L?te:{},be=Ct(ae[D]),nt=se[w]=l.getPixelForValue(ae[w],W),ct=se[D]=s||be?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,ae,h):ae[D],W);se.skip=isNaN(nt)||isNaN(ct)||be,se.stop=W>0&&Math.abs(ae[w]-G[w])>A,x&&(se.parsed=ae,se.raw=g.data[W]),C&&(se.options=b||this.resolveDataElementOptions(W,te.active?"active":o)),L||this.updateElement(te,W,se,o),G=ae}this.updateSharedOptions(b,o,y)}getMaxOverflow(){const t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let u=0;for(let h=r.length-1;h>=0;--h)u=Math.max(u,r[h].size(this.resolveDataElementOptions(h))/2);return u>0&&u}const i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!r.length)return o;const s=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,s,l)/2}})()});function Gh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class SI{static override(n){Object.assign(SI.prototype,n)}options;constructor(n){this.options=n||{}}init(){}formats(){return Gh()}parse(){return Gh()}format(){return Gh()}add(){return Gh()}diff(){return Gh()}startOf(){return Gh()}endOf(){return Gh()}}var Ree__date=SI;function kee(e,n,t,r){const{controller:i,data:o,_sorted:s}=e,l=i._cachedMeta.iScale,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&n===l.axis&&"r"!==n&&s&&o.length){const h=l._reversePixels?XX:Vc;if(!r){const g=h(o,n,t);if(u){const{vScale:y}=i._cachedMeta,{_parsed:b}=e,C=b.slice(0,g.lo+1).reverse().findIndex(D=>!Ct(D[y.axis]));g.lo-=Math.max(0,C);const w=b.slice(g.hi).findIndex(D=>!Ct(D[y.axis]));g.hi+=Math.max(0,w)}return g}if(i._sharedOptions){const g=o[0],y="function"==typeof g.getRange&&g.getRange(n);if(y){const b=h(o,n,t-y),C=h(o,n,t+y);return{lo:b.lo,hi:C.hi}}}}return{lo:0,hi:o.length-1}}function __(e,n,t,r,i){const o=e.getSortedVisibleDatasetMetas(),s=t[n];for(let l=0,u=o.length;l<u;++l){const{index:h,data:g}=o[l],{lo:y,hi:b}=kee(o[l],n,s,i);for(let C=y;C<=b;++C){const w=g[C];w.skip||r(w,h,C)}}}function TI(e,n,t,r,i){const o=[];return!i&&!e.isPointInArea(n)||__(e,t,n,function(l,u,h){!i&&!Bc(l,e.chartArea,0)||l.inRange(n.x,n.y,r)&&o.push({element:l,datasetIndex:u,index:h})},!0),o}function MI(e,n,t,r,i,o){return o||e.isPointInArea(n)?"r"!==t||r?function Fee(e,n,t,r,i,o){let s=[];const l=function Nee(e){const n=-1!==e.indexOf("x"),t=-1!==e.indexOf("y");return function(r,i){const o=n?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}(t);let u=Number.POSITIVE_INFINITY;return __(e,t,n,function h(g,y,b){const C=g.inRange(n.x,n.y,i);if(r&&!C)return;const w=g.getCenterPoint(i);if(!o&&!e.isPointInArea(w)&&!C)return;const S=l(n,w);S<u?(s=[{element:g,datasetIndex:y,index:b}],u=S):S===u&&s.push({element:g,datasetIndex:y,index:b})}),s}(e,n,t,r,i,o):function Oee(e,n,t,r){let i=[];return __(e,t,n,function o(s,l,u){const{startAngle:h,endAngle:g}=s.getProps(["startAngle","endAngle"],r),{angle:y}=vF(s,{x:n.x,y:n.y});u_(y,h,g)&&i.push({element:s,datasetIndex:l,index:u})}),i}(e,n,t,i):[]}function fL(e,n,t,r,i){const o=[],s="x"===t?"inXRange":"inYRange";let l=!1;return __(e,t,n,(u,h,g)=>{u[s]&&u[s](n[t],i)&&(o.push({element:u,datasetIndex:h,index:g}),l=l||u.inRange(n.x,n.y,i))}),r&&!l?[]:o}var Lee={evaluateInteractionItems:__,modes:{index(e,n,t,r){const i=zh(n,e),o=t.axis||"x",s=t.includeInvisible||!1,l=t.intersect?TI(e,i,o,r,s):MI(e,i,o,!1,r,s),u=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const g=l[0].index,y=h.data[g];y&&!y.skip&&u.push({element:y,datasetIndex:h.index,index:g})}),u):[]},dataset(e,n,t,r){const i=zh(n,e),o=t.axis||"xy",s=t.includeInvisible||!1;let l=t.intersect?TI(e,i,o,r,s):MI(e,i,o,!1,r,s);if(l.length>0){const u=l[0].datasetIndex,h=e.getDatasetMeta(u).data;l=[];for(let g=0;g<h.length;++g)l.push({element:h[g],datasetIndex:u,index:g})}return l},point:(e,n,t,r)=>TI(e,zh(n,e),t.axis||"xy",r,t.includeInvisible||!1),nearest:(e,n,t,r)=>MI(e,zh(n,e),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(e,n,t,r)=>fL(e,zh(n,e),"x",t.intersect,r),y:(e,n,t,r)=>fL(e,zh(n,e),"y",t.intersect,r)}};const pL=["left","top","right","bottom"];function y_(e,n){return e.filter(t=>t.pos===n)}function gL(e,n){return e.filter(t=>-1===pL.indexOf(t.pos)&&t.box.axis===n)}function v_(e,n){return e.sort((t,r)=>{const i=n?r:t,o=n?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function mL(e,n,t,r){return Math.max(e[t],n[t])+Math.max(e[r],n[r])}function _L(e,n){e.top=Math.max(e.top,n.top),e.left=Math.max(e.left,n.left),e.bottom=Math.max(e.bottom,n.bottom),e.right=Math.max(e.right,n.right)}function Hee(e,n,t,r){const{pos:i,box:o}=t,s=e.maxPadding;if(!St(i)){t.size&&(e[i]-=t.size);const y=r[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?o.height:o.width),t.size=y.size/y.count,e[i]+=t.size}o.getPadding&&_L(s,o.getPadding());const l=Math.max(0,n.outerWidth-mL(s,e,"left","right")),u=Math.max(0,n.outerHeight-mL(s,e,"top","bottom")),h=l!==e.w,g=u!==e.h;return e.w=l,e.h=u,t.horizontal?{same:h,other:g}:{same:g,other:h}}function zee(e,n){const t=n.maxPadding;return function r(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(n[s],t[s])}),o}(e?["left","right"]:["top","bottom"])}function b_(e,n,t,r){const i=[];let o,s,l,u,h,g;for(o=0,s=e.length,h=0;o<s;++o){l=e[o],u=l.box,u.update(l.width||n.w,l.height||n.h,zee(l.horizontal,n));const{same:y,other:b}=Hee(n,t,l,r);h|=y&&i.length,g=g||b,u.fullSize||i.push(l)}return h&&b_(i,n,t,r)||g}function jb(e,n,t,r,i){e.top=t,e.left=n,e.right=n+r,e.bottom=t+i,e.width=r,e.height=i}function yL(e,n,t,r){const i=t.padding;let{x:o,y:s}=n;for(const l of e){const u=l.box,h=r[l.stack]||{count:1,placed:0,weight:1},g=l.stackWeight/h.weight||1;if(l.horizontal){const y=n.w*g,b=h.size||u.height;l_(h.start)&&(s=h.start),u.fullSize?jb(u,i.left,s,t.outerWidth-i.right-i.left,b):jb(u,n.left+h.placed,s,y,b),h.start=s,h.placed+=y,s=u.bottom}else{const y=n.h*g,b=h.size||u.width;l_(h.start)&&(o=h.start),u.fullSize?jb(u,o,i.top,b,t.outerHeight-i.bottom-i.top):jb(u,o,n.top+h.placed,b,y),h.start=o,h.placed+=y,o=u.right}}n.x=o,n.y=s}var Di={addBox(e,n){e.boxes||(e.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(t){n.draw(t)}}]},e.boxes.push(n)},removeBox(e,n){const t=e.boxes?e.boxes.indexOf(n):-1;-1!==t&&e.boxes.splice(t,1)},configure(e,n,t){n.fullSize=t.fullSize,n.position=t.position,n.weight=t.weight},update(e,n,t,r){if(!e)return;const i=wi(e.options.layout.padding),o=Math.max(n-i.width,0),s=Math.max(t-i.height,0),l=function Uee(e){const n=function Vee(e){const n=[];let t,r,i,o,s,l;for(t=0,r=(e||[]).length;t<r;++t)i=e[t],({position:o,options:{stack:s,stackWeight:l=1}}=i),n.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:l});return n}(e),t=v_(n.filter(h=>h.box.fullSize),!0),r=v_(y_(n,"left"),!0),i=v_(y_(n,"right")),o=v_(y_(n,"top"),!0),s=v_(y_(n,"bottom")),l=gL(n,"x"),u=gL(n,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(u).concat(s).concat(l),chartArea:y_(n,"chartArea"),vertical:r.concat(i).concat(u),horizontal:o.concat(s).concat(l)}}(e.boxes),u=l.vertical,h=l.horizontal;Gt(e.boxes,D=>{"function"==typeof D.beforeLayout&&D.beforeLayout()});const g=u.reduce((D,S)=>S.box.options&&!1===S.box.options.display?D:D+1,0)||1,y=Object.freeze({outerWidth:n,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/g,hBoxMaxHeight:s/2}),b=Object.assign({},i);_L(b,wi(r));const C=Object.assign({maxPadding:b,w:o,h:s,x:i.left,y:i.top},i),w=function jee(e,n){const t=function Bee(e){const n={};for(const t of e){const{stack:r,pos:i,stackWeight:o}=t;if(!r||!pL.includes(i))continue;const s=n[r]||(n[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return n}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=n;let o,s,l;for(o=0,s=e.length;o<s;++o){l=e[o];const{fullSize:u}=l.box,h=t[l.stack],g=h&&l.stackWeight/h.weight;l.horizontal?(l.width=g?g*r:u&&n.availableWidth,l.height=i):(l.width=r,l.height=g?g*i:u&&n.availableHeight)}return t}(u.concat(h),y);b_(l.fullSize,C,y,w),b_(u,C,y,w),b_(h,C,y,w)&&b_(u,C,y,w),function $ee(e){const n=e.maxPadding;function t(r){const i=Math.max(n[r]-e[r],0);return e[r]+=i,i}e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}(C),yL(l.leftAndTop,C,y,w),C.x+=C.w,C.y+=C.h,yL(l.rightAndBottom,C,y,w),e.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Gt(l.chartArea,D=>{const S=D.box;Object.assign(S,e.chartArea),S.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class vL{acquireContext(n,t){}releaseContext(n){return!1}addEventListener(n,t,r){}removeEventListener(n,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(n,t,r,i){return t=Math.max(0,t||n.width),r=r||n.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(n){return!0}updateConfig(n){}}class Wee extends vL{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}}const Ub="$chartjs",Gee={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bL=e=>null===e||""===e,CL=!!WJ&&{passive:!0};function Yee(e,n,t){e&&e.canvas&&e.canvas.removeEventListener(n,t,CL)}function Hb(e,n){for(const t of e)if(t===n||t.contains(n))return!0}function Zee(e,n,t){const r=e.canvas,i=new MutationObserver(o=>{let s=!1;for(const l of o)s=s||Hb(l.addedNodes,r),s=s&&!Hb(l.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Xee(e,n,t){const r=e.canvas,i=new MutationObserver(o=>{let s=!1;for(const l of o)s=s||Hb(l.removedNodes,r),s=s&&!Hb(l.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const C_=new Map;let EL=0;function wL(){const e=window.devicePixelRatio;e!==EL&&(EL=e,C_.forEach((n,t)=>{t.currentDevicePixelRatio!==e&&n()}))}function tte(e,n,t){const r=e.canvas,i=r&&bI(r);if(!i)return;const o=DF((l,u)=>{const h=i.clientWidth;t(l,u),h<i.clientWidth&&t()},window),s=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,g=u.contentRect.height;0===h&&0===g||o(h,g)});return s.observe(i),function Jee(e,n){C_.size||window.addEventListener("resize",wL),C_.set(e,n)}(e,o),s}function AI(e,n,t){t&&t.disconnect(),"resize"===n&&function ete(e){C_.delete(e),C_.size||window.removeEventListener("resize",wL)}(e)}function nte(e,n,t){const r=e.canvas,i=DF(o=>{null!==e.ctx&&t(function Qee(e,n){const t=Gee[e.type]||e.type,{x:r,y:i}=zh(e,n);return{type:t,chart:n,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(o,e))},e);return function Kee(e,n,t){e&&e.addEventListener(n,t,CL)}(r,n,i),i}class rte extends vL{acquireContext(n,t){const r=n&&n.getContext&&n.getContext("2d");return r&&r.canvas===n?(function qee(e,n){const t=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[Ub]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",bL(i)){const o=zF(e,"width");void 0!==o&&(e.width=o)}if(bL(r))if(""===e.style.height)e.height=e.width/(n||2);else{const o=zF(e,"height");void 0!==o&&(e.height=o)}}(n,t),r):null}releaseContext(n){const t=n.canvas;if(!t[Ub])return!1;const r=t[Ub].initial;["height","width"].forEach(o=>{const s=r[o];Ct(s)?t.removeAttribute(o):t.setAttribute(o,s)});const i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[Ub],!0}addEventListener(n,t,r){this.removeEventListener(n,t),(n.$proxies||(n.$proxies={}))[t]=({attach:Zee,detach:Xee,resize:tte}[t]||nte)(n,t,r)}removeEventListener(n,t){const r=n.$proxies||(n.$proxies={}),i=r[t];i&&(({attach:AI,detach:AI,resize:AI}[t]||Yee)(n,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,t,r,i){return function zJ(e,n,t,r){const i=Lb(e),o=$h(i,"margin"),s=Fb(i.maxWidth,e,"clientWidth")||Ab,l=Fb(i.maxHeight,e,"clientHeight")||Ab,u=function $J(e,n,t){let r,i;if(void 0===n||void 0===t){const o=e&&bI(e);if(o){const s=o.getBoundingClientRect(),l=Lb(o),u=$h(l,"border","width"),h=$h(l,"padding");n=s.width-h.width-u.width,t=s.height-h.height-u.height,r=Fb(l.maxWidth,o,"clientWidth"),i=Fb(l.maxHeight,o,"clientHeight")}else n=e.clientWidth,t=e.clientHeight}return{width:n,height:t,maxWidth:r||Ab,maxHeight:i||Ab}}(e,n,t);let{width:h,height:g}=u;if("content-box"===i.boxSizing){const b=$h(i,"border","width"),C=$h(i,"padding");h-=C.width+b.width,g-=C.height+b.height}return h=Math.max(0,h-o.width),g=Math.max(0,r?h/r:g-o.height),h=Vb(Math.min(h,s,u.maxWidth)),g=Vb(Math.min(g,l,u.maxHeight)),h&&!g&&(g=Vb(h/2)),(void 0!==n||void 0!==t)&&r&&u.height&&g>u.height&&(g=u.height,h=Vb(Math.floor(g*r))),{width:h,height:g}}(n,t,r,i)}isAttached(n){const t=n&&bI(n);return!(!t||!t.isConnected)}}class Uc{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(n){const{x:t,y:r}=this.getProps(["x","y"],n);return{x:t,y:r}}hasValue(){return xp(this.x)&&xp(this.y)}getProps(n,t){const r=this.$animations;if(!t||!r)return this;const i={};return n.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}}function $b(e,n,t,r,i){const o=lt(r,0),s=Math.min(lt(i,e.length),e.length);let u,h,g,l=0;for(t=Math.ceil(t),i&&(u=i-r,t=u/Math.floor(u/t)),g=o;g<0;)l++,g=Math.round(o+l*t);for(h=Math.max(o,0);h<s;h++)h===g&&(n.push(e[h]),l++,g=Math.round(o+l*t))}const DL=(e,n,t)=>"top"===n||"left"===n?e[n]+t:e[n]-t,IL=(e,n)=>Math.min(n||e,e);function SL(e,n){const t=[],r=e.length/n,i=e.length;let o=0;for(;o<i;o+=r)t.push(e[Math.floor(o)]);return t}function hte(e,n,t){const r=e.ticks.length,i=Math.min(n,r-1),o=e._startPixel,s=e._endPixel,l=1e-6;let h,u=e.getPixelForTick(i);if(!(t&&(h=1===r?Math.max(u-o,s-u):0===n?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(i-1))/2,u+=i<n?h:-h,u<o-l||u>s+l)))return u}function E_(e){return e.drawTicks?e.tickLength:0}function TL(e,n){if(!e.display)return 0;const t=Or(e.font,n),r=wi(e.padding);return(Dn(e.text)?e.text.length:1)*t.lineHeight+r.height}function mte(e,n,t){let r=cI(e);return(t&&"right"!==n||!t&&"right"===n)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class qh extends Uc{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,t){return n}getUserBounds(){let{_userMin:n,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return n=ts(n,Number.POSITIVE_INFINITY),t=ts(t,Number.NEGATIVE_INFINITY),r=ts(r,Number.POSITIVE_INFINITY),i=ts(i,Number.NEGATIVE_INFINITY),{min:ts(n,r),max:ts(t,i),minDefined:er(n),maxDefined:er(t)}}getMinMax(n){let s,{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:t,max:r};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)s=l[u].controller.getMinMax(this,n),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:ts(t,ts(r,t)),max:ts(r,ts(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}getLabelItems(n=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(n))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){yn(this.options.beforeUpdate,[this])}update(n,t,r){const{beginAtZero:i,grace:o,ticks:s}=this.options,l=s.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function EJ(e,n,t){const{min:r,max:i}=e,o=dF(n,(i-r)/2),s=(l,u)=>t&&0===l?0:l+u;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?SL(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=function ote(e,n){const t=e.options.ticks,r=function ste(e){const n=e.options.offset,t=e._tickSize();return Math.floor(Math.min(e._length/t+(n?0:1),e._maxLength/t))}(e),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?function lte(e){const n=[];let t,r;for(t=0,r=e.length;t<r;t++)e[t].major&&n.push(t);return n}(n):[],s=o.length,l=o[0],u=o[s-1],h=[];if(s>i)return function cte(e,n,t,r){let s,i=0,o=t[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===o&&(n.push(e[s]),i++,o=t[i*r])}(n,h,o,s/i),h;const g=function ate(e,n,t){const r=function ute(e){const n=e.length;let t,r;if(n<2)return!1;for(r=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==r)return!1;return r}(e),i=n.length/t;if(!r)return Math.max(i,1);const o=function qX(e){const n=[],t=Math.sqrt(e);let r;for(r=1;r<t;r++)e%r==0&&(n.push(r),n.push(e/r));return t===(0|t)&&n.push(t),n.sort((i,o)=>i-o).pop(),n}(r);for(let s=0,l=o.length-1;s<l;s++){const u=o[s];if(u>i)return u}return Math.max(i,1)}(o,n,i);if(s>0){let y,b;const C=s>1?Math.round((u-l)/(s-1)):null;for($b(n,h,g,Ct(C)?0:l-C,l),y=0,b=s-1;y<b;y++)$b(n,h,g,o[y],o[y+1]);return $b(n,h,g,u,Ct(C)?n.length:u+C),h}return $b(n,h,g),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,n=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,n=!n),this._startPixel=t,this._endPixel=r,this._reversePixels=n,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){yn(this.options.afterUpdate,[this])}beforeSetDimensions(){yn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){yn(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),yn(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){yn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){const t=this.options.ticks;let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r],o.label=yn(t.callback,[o.value,r,n],this)}afterTickToLabelConversion(){yn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){yn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const n=this.options,t=n.ticks,r=IL(this.ticks.length,n.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation;let l,u,h,s=i;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const g=this._getLabelSizes(),y=g.widest.width,b=g.highest.height,C=Kr(this.chart.width-y,0,this.maxWidth);l=n.offset?this.maxWidth/r:C/(r-1),y+6>l&&(l=C/(r-(n.offset?.5:1)),u=this.maxHeight-E_(n.grid)-t.padding-TL(n.title,this.chart.options.font),h=Math.sqrt(y*y+b*b),s=sI(Math.min(Math.asin(Kr((g.highest.height+6)/l,-1,1)),Math.asin(Kr(u/h,-1,1))-Math.asin(Kr(b/h,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){yn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){yn(this.options.beforeFit,[this])}fit(){const n={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),l=this.isHorizontal();if(s){const u=TL(i,t.options.font);if(l?(n.width=this.maxWidth,n.height=E_(o)+u):(n.height=this.maxHeight,n.width=E_(o)+u),r.display&&this.ticks.length){const{first:h,last:g,widest:y,highest:b}=this._getLabelSizes(),C=2*r.padding,w=ba(this.labelRotation),D=Math.cos(w),S=Math.sin(w);l?n.height=Math.min(this.maxHeight,n.height+(r.mirror?0:S*y.width+D*b.height)+C):n.width=Math.min(this.maxWidth,n.width+(r.mirror?0:D*y.width+S*b.height)+C),this._calculatePadding(h,g,S,D)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,t,r,i){const{ticks:{align:o,padding:s},position:l}=this.options,u=0!==this.labelRotation,h="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,C=0;u?h?(b=i*n.width,C=r*t.height):(b=r*n.height,C=i*t.width):"start"===o?C=t.width:"end"===o?b=n.width:"inner"!==o&&(b=n.width/2,C=t.width/2),this.paddingLeft=Math.max((b-g+s)*this.width/(this.width-g),0),this.paddingRight=Math.max((C-y+s)*this.width/(this.width-y),0)}else{let g=t.height/2,y=n.height/2;"start"===o?(g=0,y=n.height):"end"===o&&(g=t.height,y=0),this.paddingTop=g+s,this.paddingBottom=y+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){yn(this.options.afterFit,[this])}isHorizontal(){const{axis:n,position:t}=this.options;return"top"===t||"bottom"===t||"x"===n}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(n),t=0,r=n.length;t<r;t++)Ct(n[t].label)&&(n.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=SL(r,t)),this._labelSizes=n=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return n}_computeLabelSizes(n,t,r){const{ctx:i,_longestTextCache:o}=this,s=[],l=[],u=Math.floor(t/IL(t,r));let y,b,C,w,D,S,x,A,L,G,W,h=0,g=0;for(y=0;y<t;y+=u){if(w=n[y].label,D=this._resolveTickFontOptions(y),i.font=S=D.string,x=o[S]=o[S]||{data:{},gc:[]},A=D.lineHeight,L=G=0,Ct(w)||Dn(w)){if(Dn(w))for(b=0,C=w.length;b<C;++b)W=w[b],!Ct(W)&&!Dn(W)&&(L=Rb(i,x.data,x.gc,L,W),G+=A)}else L=Rb(i,x.data,x.gc,L,w),G=A;s.push(L),l.push(G),h=Math.max(L,h),g=Math.max(G,g)}!function fte(e,n){Gt(e,t=>{const r=t.gc,i=r.length/2;let o;if(i>n){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}(o,t);const te=s.indexOf(h),ae=l.indexOf(g),se=be=>({width:s[be]||0,height:l[be]||0});return{first:se(0),last:se(t-1),widest:se(te),highest:se(ae),widths:s,heights:l}}getLabelForValue(n){return n}getPixelForValue(n,t){return NaN}getValueForPixel(n){}getPixelForTick(n){const t=this.ticks;return n<0||n>t.length-1?null:this.getPixelForValue(t[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);const t=this._startPixel+n*this._length;return function ZX(e){return Kr(e,-32768,32767)}(this._alignToPixels?jh(this.chart,t,0):t)}getDecimalForPixel(n){const t=(n-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:n,max:t}=this;return n<0&&t<0?t:n>0&&t>0?n:0}getContext(n){const t=this.ticks||[];if(n>=0&&n<t.length){const r=t[n];return r.$context||(r.$context=function gte(e,n,t){return ud(e,{tick:t,index:n,type:"tick"})}(this.getContext(),n,r))}return this.$context||(this.$context=function pte(e,n){return ud(e,{scale:n,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const n=this.options.ticks,t=ba(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=n.autoSkipPadding||0,l=o?o.widest.width+s:0,u=o?o.highest.height+s:0;return this.isHorizontal()?u*r>l*i?l/r:u/i:u*i<l*r?u/r:l/i}_isVisible(){const n=this.options.display;return"auto"!==n?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){const t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:l}=i,u=o.offset,h=this.isHorizontal(),y=this.ticks.length+(u?1:0),b=E_(o),C=[],w=l.setContext(this.getContext()),D=w.display?w.width:0,S=D/2,x=function(ge){return jh(r,ge,D)};let A,L,G,W,te,ae,se,be,nt,ct,ut,pr;if("top"===s)A=x(this.bottom),ae=this.bottom-b,be=A-S,ct=x(n.top)+S,pr=n.bottom;else if("bottom"===s)A=x(this.top),ct=n.top,pr=x(n.bottom)-S,ae=A+S,be=this.top+b;else if("left"===s)A=x(this.right),te=this.right-b,se=A-S,nt=x(n.left)+S,ut=n.right;else if("right"===s)A=x(this.left),nt=n.left,ut=x(n.right)-S,te=A+S,se=this.left+b;else if("x"===t){if("center"===s)A=x((n.top+n.bottom)/2+.5);else if(St(s)){const ge=Object.keys(s)[0];A=x(this.chart.scales[ge].getPixelForValue(s[ge]))}ct=n.top,pr=n.bottom,ae=A+S,be=ae+b}else if("y"===t){if("center"===s)A=x((n.left+n.right)/2);else if(St(s)){const ge=Object.keys(s)[0];A=x(this.chart.scales[ge].getPixelForValue(s[ge]))}te=A-S,se=te-b,nt=n.left,ut=n.right}const Ii=lt(i.ticks.maxTicksLimit,y),jt=Math.max(1,Math.ceil(y/Ii));for(L=0;L<y;L+=jt){const ge=this.getContext(L),_e=o.setContext(ge),Re=l.setContext(ge),qe=_e.lineWidth,Sn=_e.color,qi=Re.dash||[],Dr=Re.dashOffset,yo=_e.tickWidth,Ut=_e.tickColor,fd=_e.tickBorderDash||[],$c=_e.tickBorderDashOffset;G=hte(this,L,u),void 0!==G&&(W=jh(r,G,qe),h?te=se=nt=ut=W:ae=be=ct=pr=W,C.push({tx1:te,ty1:ae,tx2:se,ty2:be,x1:nt,y1:ct,x2:ut,y2:pr,width:qe,color:Sn,borderDash:qi,borderDashOffset:Dr,tickWidth:yo,tickColor:Ut,tickBorderDash:fd,tickBorderDashOffset:$c}))}return this._ticksLength=y,this._borderValue=A,C}_computeLabelItems(n){const t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:g,mirror:y}=o,b=E_(r.grid),C=b+g,w=y?-g:C,D=-ba(this.labelRotation),S=[];let x,A,L,G,W,te,ae,se,be,nt,ct,ut,pr="middle";if("top"===i)te=this.bottom-w,ae=this._getXAxisLabelAlignment();else if("bottom"===i)te=this.top+w,ae=this._getXAxisLabelAlignment();else if("left"===i){const jt=this._getYAxisLabelAlignment(b);ae=jt.textAlign,W=jt.x}else if("right"===i){const jt=this._getYAxisLabelAlignment(b);ae=jt.textAlign,W=jt.x}else if("x"===t){if("center"===i)te=(n.top+n.bottom)/2+C;else if(St(i)){const jt=Object.keys(i)[0];te=this.chart.scales[jt].getPixelForValue(i[jt])+C}ae=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)W=(n.left+n.right)/2-C;else if(St(i)){const jt=Object.keys(i)[0];W=this.chart.scales[jt].getPixelForValue(i[jt])}ae=this._getYAxisLabelAlignment(b).textAlign}"y"===t&&("start"===u?pr="top":"end"===u&&(pr="bottom"));const Ii=this._getLabelSizes();for(x=0,A=l.length;x<A;++x){L=l[x],G=L.label;const jt=o.setContext(this.getContext(x));se=this.getPixelForTick(x)+o.labelOffset,be=this._resolveTickFontOptions(x),nt=be.lineHeight,ct=Dn(G)?G.length:1;const ge=ct/2,_e=jt.color,Re=jt.textStrokeColor,qe=jt.textStrokeWidth;let qi,Sn=ae;if(s?(W=se,"inner"===ae&&(Sn=x===A-1?this.options.reverse?"left":"right":0===x?this.options.reverse?"right":"left":"center"),ut="top"===i?"near"===h||0!==D?-ct*nt+nt/2:"center"===h?-Ii.highest.height/2-ge*nt+nt:nt/2-Ii.highest.height:"near"===h||0!==D?nt/2:"center"===h?Ii.highest.height/2-ge*nt:Ii.highest.height-ct*nt,y&&(ut*=-1),0!==D&&!jt.showLabelBackdrop&&(W+=nt/2*Math.sin(D))):(te=se,ut=(1-ct)*nt/2),jt.showLabelBackdrop){const Dr=wi(jt.backdropPadding),yo=Ii.heights[x],Ut=Ii.widths[x];let fd=ut-Dr.top,$c=0-Dr.left;switch(pr){case"middle":fd-=yo/2;break;case"bottom":fd-=yo}switch(ae){case"center":$c-=Ut/2;break;case"right":$c-=Ut;break;case"inner":x===A-1?$c-=Ut:x>0&&($c-=Ut/2)}qi={left:$c,top:fd,width:Ut+Dr.width,height:yo+Dr.height,color:jt.backdropColor}}S.push({label:G,font:be,textOffset:ut,options:{rotation:D,color:_e,strokeColor:Re,strokeWidth:qe,textAlign:Sn,textBaseline:pr,translation:[W,te],backdrop:qi}})}return S}_getXAxisLabelAlignment(){const{position:n,ticks:t}=this.options;if(-ba(this.labelRotation))return"top"===n?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(n){const{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,l=n+o,u=this._getLabelSizes().widest.width;let h,g;return"left"===t?i?(g=this.right+o,"near"===r?h="left":"center"===r?(h="center",g+=u/2):(h="right",g+=u)):(g=this.right-l,"near"===r?h="right":"center"===r?(h="center",g-=u/2):(h="left",g=this.left)):"right"===t?i?(g=this.left+o,"near"===r?h="right":"center"===r?(h="center",g-=u/2):(h="left",g-=u)):(g=this.left+l,"near"===r?h="left":"center"===r?(h="center",g+=u/2):(h="right",g=this.right)):h="right",{textAlign:h,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const n=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:n.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:n.width}:void 0}drawBackground(){const{ctx:n,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(n.save(),n.fillStyle=t,n.fillRect(r,i,o,s),n.restore())}getLineWidthForValue(n){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(o=>o.value===n);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(n){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n));let o,s;const l=(u,h,g)=>{!g.width||!g.color||(r.save(),r.lineWidth=g.width,r.strokeStyle=g.color,r.setLineDash(g.borderDash||[]),r.lineDashOffset=g.borderDashOffset,r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){const u=i[o];t.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:n,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;const l=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,g,y,b;this.isHorizontal()?(h=jh(n,this.left,s)-s/2,g=jh(n,this.right,l)+l/2,y=b=u):(y=jh(n,this.top,s)-s/2,b=jh(n,this.bottom,l)+l/2,h=g=u),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(h,y),t.lineTo(g,b),t.stroke(),t.restore()}drawLabels(n){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&kb(r,i);const o=this.getLabelItems(n);for(const s of o)Uh(r,s.label,0,s.textOffset,s.font,s.options);i&&Nb(r)}drawTitle(){const{ctx:n,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const o=Or(r.font),s=wi(r.padding),l=r.align;let u=o.lineHeight/2;"bottom"===t||"center"===t||St(t)?(u+=s.bottom,Dn(r.text)&&(u+=o.lineHeight*(r.text.length-1))):u+=s.top;const{titleX:h,titleY:g,maxWidth:y,rotation:b}=function _te(e,n,t,r){const{top:i,left:o,bottom:s,right:l,chart:u}=e,{chartArea:h,scales:g}=u;let b,C,w,y=0;const D=s-i,S=l-o;if(e.isHorizontal()){if(C=Ei(r,o,l),St(t)){const x=Object.keys(t)[0];w=g[x].getPixelForValue(t[x])+D-n}else w="center"===t?(h.bottom+h.top)/2+D-n:DL(e,t,n);b=l-o}else{if(St(t)){const x=Object.keys(t)[0];C=g[x].getPixelForValue(t[x])-S+n}else C="center"===t?(h.left+h.right)/2-S+n:DL(e,t,n);w=Ei(r,s,i),y="left"===t?-fr:fr}return{titleX:C,titleY:w,maxWidth:b,rotation:y}}(this,u,t,l);Uh(n,r.text,0,0,o,{color:r.color,maxWidth:y,rotation:b,textAlign:mte(l,t,i),textBaseline:"middle",translation:[h,g]})}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){const n=this.options,t=n.ticks&&n.ticks.z||0,r=lt(n.grid&&n.grid.z,-1),i=lt(n.border&&n.border.z,0);return this._isVisible()&&this.draw===qh.prototype.draw?[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]:[{z:t,draw:o=>{this.draw(o)}}]}getMatchingVisibleMetas(n){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let o,s;for(o=0,s=t.length;o<s;++o){const l=t[o];l[r]===this.id&&(!n||l.type===n)&&i.push(l)}return i}_resolveTickFontOptions(n){return Or(this.options.ticks.setContext(this.getContext(n)).font)}_maxDigits(){const n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}}class zb{constructor(n,t,r){this.type=n,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){const t=Object.getPrototypeOf(n);let r;(function bte(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const i=this.items,o=n.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+n);return o in i||(i[o]=n,function yte(e,n,t){const r=s_(Object.create(null),[t?Ln.get(t):{},Ln.get(n),e.defaults]);Ln.set(n,r),e.defaultRoutes&&function vte(e,n){Object.keys(n).forEach(t=>{const r=t.split("."),i=r.pop(),o=[e].concat(r).join("."),s=n[t].split("."),l=s.pop(),u=s.join(".");Ln.route(o,i,u,l)})}(n,e.defaultRoutes),e.descriptors&&Ln.describe(n,e.descriptors)}(n,s,r),this.override&&Ln.override(n.id,n.overrides)),s}get(n){return this.items[n]}unregister(n){const t=this.items,r=n.id,i=this.scope;r in t&&delete t[r],i&&r in Ln[i]&&(delete Ln[i][r],this.override&&delete Bh[r])}}class Cte{constructor(){this.controllers=new zb(dd,"datasets",!0),this.elements=new zb(Uc,"elements"),this.plugins=new zb(Object,"plugins"),this.scales=new zb(qh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,t,r){[...t].forEach(i=>{const o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(n,o,i):Gt(i,s=>{const l=r||this._getRegistryForType(s);this._exec(n,l,s)})})}_exec(n,t,r){const i=oI(n);yn(r["before"+i],[],r),t[n](r),yn(r["after"+i],[],r)}_getRegistryForType(n){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(n))return r}return this.plugins}_get(n,t,r){const i=t.get(n);if(void 0===i)throw new Error('"'+n+'" is not a registered '+r+".");return i}}var El=new Cte;class Ete{constructor(){this._init=[]}notify(n,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install"));const o=i?this._descriptors(n).filter(i):this._descriptors(n),s=this._notify(o,n,t,r);return"afterDestroy"===t&&(this._notify(o,n,"stop"),this._notify(this._init,n,"uninstall")),s}_notify(n,t,r,i){i=i||{};for(const o of n){const s=o.plugin;if(!1===yn(s[r],[t,i,o.options],s)&&i.cancelable)return!1}return!0}invalidate(){Ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),t}_createDescriptors(n,t){const r=n&&n.config,i=lt(r.options&&r.options.plugins,{}),o=function wte(e){const n={},t=[],r=Object.keys(El.plugins.items);for(let o=0;o<r.length;o++)t.push(El.getPlugin(r[o]));const i=e.plugins||[];for(let o=0;o<i.length;o++){const s=i[o];-1===t.indexOf(s)&&(t.push(s),n[s.id]=!0)}return{plugins:t,localIds:n}}(r);return!1!==i||t?function Ite(e,{plugins:n,localIds:t},r,i){const o=[],s=e.getContext();for(const l of n){const u=l.id,h=Dte(r[u],i);null!==h&&o.push({plugin:l,options:Ste(e.config,{plugin:l,local:t[u]},h,s)})}return o}(n,o,i,t):[]}_notifyStateChanges(n){const t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(l=>!s.some(u=>l.plugin.id===u.plugin.id));this._notify(i(t,r),n,"stop"),this._notify(i(r,t),n,"start")}}function Dte(e,n){return n||!1!==e?!0===e?{}:e:null}function Ste(e,{plugin:n,local:t},r,i){const o=e.pluginScopeKeys(n),s=e.getOptionScopes(r,o);return t&&n.defaults&&s.push(n.defaults),e.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xI(e,n){return((n.datasets||{})[e]||{}).indexAxis||n.indexAxis||(Ln.datasets[e]||{}).indexAxis||"x"}function ML(e){if("x"===e||"y"===e||"r"===e)return e}function Ate(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function PI(e,...n){if(ML(e))return e;for(const t of n){const r=t.axis||Ate(t.position)||e.length>1&&ML(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function AL(e,n,t){if(t[n+"AxisID"]===e)return{axis:n}}function xL(e){const n=e.options||(e.options={});n.plugins=lt(n.plugins,{}),n.scales=function Pte(e,n){const t=Bh[e.type]||{scales:{}},r=n.scales||{},i=xI(e.type,n),o=Object.create(null);return Object.keys(r).forEach(s=>{const l=r[s];if(!St(l))return console.error(`Invalid scale configuration for scale: ${s}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const u=PI(s,l,function xte(e,n){if(n.data&&n.data.datasets){const t=n.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(t.length)return AL(e,"x",t[0])||AL(e,"y",t[0])}return{}}(s,e),Ln.scales[l.type]),h=function Mte(e,n){return e===n?"_index_":"_value_"}(u,i),g=t.scales||{};o[s]=a_(Object.create(null),[{axis:u},l,g[u],g[h]])}),e.data.datasets.forEach(s=>{const l=s.type||e.type,u=s.indexAxis||xI(l,n),g=(Bh[l]||{}).scales||{};Object.keys(g).forEach(y=>{const b=function Tte(e,n){let t=e;return"_index_"===e?t=n:"_value_"===e&&(t="x"===n?"y":"x"),t}(y,u),C=s[b+"AxisID"]||b;o[C]=o[C]||Object.create(null),a_(o[C],[{axis:b},r[C],g[y]])})}),Object.keys(o).forEach(s=>{const l=o[s];a_(l,[Ln.scales[l.type],Ln.scale])}),o}(e,n)}function PL(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const RL=new Map,kL=new Set;function Wb(e,n){let t=RL.get(e);return t||(t=n(),RL.set(e,t),kL.add(t)),t}const w_=(e,n,t)=>{const r=ad(n,t);void 0!==r&&e.add(r)};class kte{constructor(n){this._config=function Rte(e){return(e=e||{}).data=PL(e.data),xL(e),e}(n),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=PL(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){const n=this._config;this.clearCache(),xL(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return Wb(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,t){return Wb(`${n}.transition.${t}`,()=>[[`datasets.${n}.transitions.${t}`,`transitions.${t}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,t){return Wb(`${n}-${t}`,()=>[[`datasets.${n}.elements.${t}`,`datasets.${n}`,`elements.${t}`,""]])}pluginScopeKeys(n){const t=n.id;return Wb(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,t){const r=this._scopeCache;let i=r.get(n);return(!i||t)&&(i=new Map,r.set(n,i)),i}getOptionScopes(n,t,r){const{options:i,type:o}=this,s=this._cachedScopes(n,r),l=s.get(t);if(l)return l;const u=new Set;t.forEach(g=>{n&&(u.add(n),g.forEach(y=>w_(u,n,y))),g.forEach(y=>w_(u,i,y)),g.forEach(y=>w_(u,Bh[o]||{},y)),g.forEach(y=>w_(u,Ln,y)),g.forEach(y=>w_(u,hI,y))});const h=Array.from(u);return 0===h.length&&h.push(Object.create(null)),kL.has(t)&&s.set(t,h),h}chartOptionScopes(){const{options:n,type:t}=this;return[n,Bh[t]||{},Ln.datasets[t]||{},{type:t},Ln,hI]}resolveNamedOptions(n,t,r,i=[""]){const o={$shared:!0},{resolver:s,subPrefixes:l}=NL(this._resolverCache,n,i);let u=s;(function Ote(e,n){const{isScriptable:t,isIndexable:r}=OF(e);for(const i of n){const o=t(i),s=r(i),l=(s||o)&&e[i];if(o&&(ld(l)||Nte(l))||s&&Dn(l))return!0}return!1})(s,t)&&(o.$shared=!1,u=Pp(s,r=ld(r)?r():r,this.createResolver(n,r,l)));for(const h of t)o[h]=u[h];return o}createResolver(n,t,r=[""],i){const{resolver:o}=NL(this._resolverCache,n,r);return St(t)?Pp(o,t,void 0,i):o}}function NL(e,n,t){let r=e.get(n);r||(r=new Map,e.set(n,r));const i=t.join();let o=r.get(i);return o||(o={resolver:mI(n,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,o)),o}const Nte=e=>St(e)&&Object.getOwnPropertyNames(e).some(n=>ld(e[n])),Lte=["top","bottom","left","right","chartArea"];function OL(e,n){return"top"===e||"bottom"===e||-1===Lte.indexOf(e)&&"x"===n}function FL(e,n){return function(t,r){return t[e]===r[e]?t[n]-r[n]:t[e]-r[e]}}function LL(e){const n=e.chart,t=n.options.animation;n.notifyPlugins("afterRender"),yn(t&&t.onComplete,[e],n)}function Vte(e){const n=e.chart,t=n.options.animation;yn(t&&t.onProgress,[e],n)}function VL(e){return vI()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Gb={},BL=e=>{const n=VL(e);return Object.values(Gb).filter(t=>t.canvas===n).pop()};function Bte(e,n,t){const r=Object.keys(e);for(const i of r){const o=+i;if(o>=n){const s=e[i];delete e[i],(t>0||o>n)&&(e[o+t]=s)}}}let RI=(()=>class e{static defaults=Ln;static instances=Gb;static overrides=Bh;static registry=El;static version="4.5.0";static getChart=BL;static register(...t){El.add(...t),jL()}static unregister(...t){El.remove(...t),jL()}constructor(t,r){const i=this.config=new kte(r),o=VL(t),s=BL(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function ite(e){return!vI()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Wee:rte}(o)),this.platform.updateConfig(i);const u=this.platform.acquireContext(o,l.aspectRatio),h=u&&u.canvas,g=h&&h.height,y=h&&h.width;this.id=VX(),this.ctx=u,this.canvas=h,this.width=y,this.height=g,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ete,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function tJ(e,n){let t;return function(...r){return n?(clearTimeout(t),t=setTimeout(e,n,r)):e.apply(this,r),n}}(b=>this.update(b),l.resizeDelay||0),this._dataChanges=[],Gb[this.id]=this,u&&h?(jc.listen(this,"complete",LL),jc.listen(this,"progress",Vte),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:o,_aspectRatio:s}=this;return Ct(t)?r&&s?s:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return El}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$F(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return RF(this.canvas,this.ctx),this}stop(){return jc.stop(this),this}resize(t,r){jc.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const i=this.options,l=this.platform.getMaximumSize(this.canvas,t,r,i.maintainAspectRatio&&this.aspectRatio),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,$F(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),yn(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){Gt(this.options.scales||{},(i,o)=>{i.id=o})}buildOrUpdateScales(){const t=this.options,r=t.scales,i=this.scales,o=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let s=[];r&&(s=s.concat(Object.keys(r).map(l=>{const u=r[l],h=PI(l,u),g="r"===h,y="x"===h;return{options:u,dposition:g?"chartArea":y?"bottom":"left",dtype:g?"radialLinear":y?"category":"linear"}}))),Gt(s,l=>{const u=l.options,h=u.id,g=PI(h,u),y=lt(u.type,l.dtype);(void 0===u.position||OL(u.position,g)!==OL(l.dposition))&&(u.position=l.dposition),o[h]=!0;let b=null;h in i&&i[h].type===y?b=i[h]:(b=new(El.getScale(y))({id:h,type:y,ctx:this.ctx,chart:this}),i[b.id]=b),b.init(u,t)}),Gt(o,(l,u)=>{l||delete i[u]}),Gt(i,l=>{Di.configure(this,l,l.options),Di.addBox(this,l)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((o,s)=>o.index-s.index),i>r){for(let o=r;o<i;++o)this._destroyDatasetMeta(o);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(FL("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,o)=>{0===r.filter(s=>s===i._dataset).length&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=r.length;i<o;i++){const s=r[i];let l=this.getDatasetMeta(i);const u=s.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=s.indexAxis||xI(u,this.options),l.order=s.order||0,l.index=i,l.label=""+s.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=El.getController(u),{datasetElementType:g,dataElementType:y}=Ln.datasets[u];Object.assign(h,{dataElementType:El.getElement(y),datasetElementType:g&&El.getElement(g)}),l.controller=new h(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Gt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let g=0,y=this.data.datasets.length;g<y;g++){const{controller:b}=this.getDatasetMeta(g),C=!o&&-1===s.indexOf(b);b.buildOrUpdateElements(C),l=Math.max(+b.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),o||Gt(s,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(FL("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Gt(this.scales,t=>{Di.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!pF(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:s}of r)Bte(t,o,"_removeElements"===i?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=s=>new Set(t.filter(l=>l[0]===s).map((l,u)=>u+","+l.splice(1).join(","))),o=i(0);for(let s=1;s<r;s++)if(!pF(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Di.update(this,this.width,this.height,t);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Gt(this.boxes,o=>{i&&"chartArea"===o.position||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,ld(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const i=this.getDatasetMeta(t),o={meta:i,index:t,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",o)&&(i.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(jc.has(this)?this.attached&&!jc.running(this)&&jc.start(this):(this.draw(),LL({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,i=[];let o,s;for(o=0,s=r.length;o<s;++o){const l=r[o];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=JF(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(o&&kb(r,o),t.controller.draw(),o&&Nb(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Bc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,o){const s=Lee.modes[r];return"function"==typeof s?s(this,t,i,o):[]}getDatasetMeta(t){const r=this.data.datasets[t],i=this._metasets;let o=i.filter(s=>s&&s._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=ud(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!r.hidden}setDatasetVisibility(t,r){this.getDatasetMeta(t).hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){const o=i?"show":"hide",s=this.getDatasetMeta(t),l=s.controller._resolveAnimations(void 0,o);l_(r)?(s.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(s,{visible:i}),this.update(u=>u.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),jc.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),RF(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Gb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,i=(s,l)=>{r.addEventListener(this,s,l),t[s]=l},o=(s,l,u)=>{s.offsetX=l,s.offsetY=u,this._eventHandler(s)};Gt(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,i=(h,g)=>{r.addEventListener(this,h,g),t[h]=g},o=(h,g)=>{t[h]&&(r.removeEventListener(this,h,g),delete t[h])},s=(h,g)=>{this.canvas&&this.resize(h,g)};let l;const u=()=>{o("attach",u),this.attached=!0,this.resize(),i("resize",s),i("detach",l)};l=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",u)},r.isAttached(this.canvas)?u():l()}unbindEvents(){Gt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Gt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){const o=i?"set":"remove";let s,l,u,h;for("dataset"===r&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),u=0,h=t.length;u<h;++u){l=t[u];const g=l&&this.getDatasetMeta(l.datasetIndex).controller;g&&g[o+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],i=t.map(({datasetIndex:s,index:l})=>{const u=this.getDatasetMeta(s);if(!u)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:u.data[l],index:l}});!Tb(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(r=>r.plugin.id===t).length}_updateHoverStyles(t,r,i){const o=this.options.hover,s=(h,g)=>h.filter(y=>!g.some(b=>y.datasetIndex===b.datasetIndex&&y.index===b.index)),l=s(r,t),u=i?t:s(t,r);l.length&&this.updateHoverStyle(l,o.mode,!1),u.length&&o.mode&&this.updateHoverStyle(u,o.mode,!0)}_eventHandler(t,r){const i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=l=>(l.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,o))return;const s=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(t,r,i){const{_active:o=[],options:s}=this,u=this._getActiveElements(t,o,i,r),h=function zX(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(t),g=function jte(e,n,t,r){return t&&"mouseout"!==e.type?r?n:e:null}(t,this._lastEvent,i,h);i&&(this._lastEvent=null,yn(s.onHover,[t,u,this],this),h&&yn(s.onClick,[t,u,this],this));const y=!Tb(u,o);return(y||r)&&(this._active=u,this._updateHoverStyles(u,o,r)),this._lastEvent=g,y}_getActiveElements(t,r,i,o){if("mouseout"===t.type)return[];if(!i)return r;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}})();function jL(){return Gt(RI.instances,e=>e._plugins.invalidate())}function Np(e,n,t,r){return{x:t+e*Math.cos(n),y:r+e*Math.sin(n)}}function qb(e,n,t,r,i,o){const{x:s,y:l,startAngle:u,pixelMargin:h,innerRadius:g}=n,y=Math.max(n.outerRadius+r+t-h,0),b=g>0?g+r+t+h:0;let C=0;const w=i-u;if(r){const _e=((g>0?g-r:0)+(y>0?y-r:0))/2;C=(w-(0!==_e?w*_e/(_e+r):w))/2}const S=(w-Math.max(.001,w*y-t/Ot)/y)/2,x=u+S+C,A=i-S-C,{outerStart:L,outerEnd:G,innerStart:W,innerEnd:te}=function zte(e,n,t,r){const i=function $te(e){return gI(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),o=(t-n)/2,s=Math.min(o,r*n/2),l=u=>{const h=(t-Math.min(o,u))*r/2;return Kr(u,0,Math.min(o,h))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:Kr(i.innerStart,0,s),innerEnd:Kr(i.innerEnd,0,s)}}(n,b,y,A-x),ae=y-L,se=y-G,be=x+L/ae,nt=A-G/se,ct=b+W,ut=b+te,pr=x+W/ct,Ii=A-te/ut;if(e.beginPath(),o){const jt=(be+nt)/2;if(e.arc(s,l,y,be,jt),e.arc(s,l,y,jt,nt),G>0){const qe=Np(se,nt,s,l);e.arc(qe.x,qe.y,G,nt,A+fr)}const ge=Np(ut,A,s,l);if(e.lineTo(ge.x,ge.y),te>0){const qe=Np(ut,Ii,s,l);e.arc(qe.x,qe.y,te,A+fr,Ii+Math.PI)}const _e=(A-te/b+(x+W/b))/2;if(e.arc(s,l,b,A-te/b,_e,!0),e.arc(s,l,b,_e,x+W/b,!0),W>0){const qe=Np(ct,pr,s,l);e.arc(qe.x,qe.y,W,pr+Math.PI,x-fr)}const Re=Np(ae,x,s,l);if(e.lineTo(Re.x,Re.y),L>0){const qe=Np(ae,be,s,l);e.arc(qe.x,qe.y,L,x-fr,be)}}else{e.moveTo(s,l);const jt=Math.cos(be)*y+s,ge=Math.sin(be)*y+l;e.lineTo(jt,ge);const _e=Math.cos(nt)*y+s,Re=Math.sin(nt)*y+l;e.lineTo(_e,Re)}e.closePath()}function UL(e,n,t=n){e.lineCap=lt(t.borderCapStyle,n.borderCapStyle),e.setLineDash(lt(t.borderDash,n.borderDash)),e.lineDashOffset=lt(t.borderDashOffset,n.borderDashOffset),e.lineJoin=lt(t.borderJoinStyle,n.borderJoinStyle),e.lineWidth=lt(t.borderWidth,n.borderWidth),e.strokeStyle=lt(t.borderColor,n.borderColor)}function Kte(e,n,t){e.lineTo(t.x,t.y)}function HL(e,n,t={}){const r=e.length,{start:i=0,end:o=r-1}=t,{start:s,end:l}=n,u=Math.max(i,s),h=Math.min(o,l);return{count:r,start:u,loop:n.loop,ilen:h<u&&!(i<s&&o<s||i>l&&o>l)?r+h-u:h-u}}function Qte(e,n,t,r){const{points:i,options:o}=n,{count:s,start:l,loop:u,ilen:h}=HL(i,t,r),g=function Yte(e){return e.stepped?fJ:e.tension||"monotone"===e.cubicInterpolationMode?pJ:Kte}(o);let C,w,D,{move:y=!0,reverse:b}=r||{};for(C=0;C<=h;++C)w=i[(l+(b?h-C:C))%s],!w.skip&&(y?(e.moveTo(w.x,w.y),y=!1):g(e,D,w,b,o.stepped),D=w);return u&&(w=i[(l+(b?h:0))%s],g(e,D,w,b,o.stepped)),!!u}function Zte(e,n,t,r){const i=n.points,{count:o,start:s,ilen:l}=HL(i,t,r),{move:u=!0,reverse:h}=r||{};let b,C,w,D,S,x,g=0,y=0;const A=G=>(s+(h?l-G:G))%o,L=()=>{D!==S&&(e.lineTo(g,S),e.lineTo(g,D),e.lineTo(g,x))};for(u&&(C=i[A(0)],e.moveTo(C.x,C.y)),b=0;b<=l;++b){if(C=i[A(b)],C.skip)continue;const G=C.x,W=C.y,te=0|G;te===w?(W<D?D=W:W>S&&(S=W),g=(y*g+G)/++y):(L(),e.lineTo(G,W),w=te,y=0,D=S=W),x=W}L()}function kI(e){const n=e.options;return e._decimated||e._loop||n.tension||"monotone"===n.cubicInterpolationMode||n.stepped||n.borderDash&&n.borderDash.length?Qte:Zte}const tne="function"==typeof Path2D;let Kb=(()=>class e extends Uc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;!i.tension&&"monotone"!==i.cubicInterpolationMode||i.stepped||this._pointsUpdated||(VJ(this._points,i,t,i.spanGaps?this._loop:this._fullLoop,r),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function JJ(e,n){const t=e.points,r=e.options.spanGaps,i=t.length;if(!i)return[];const o=!!e._loop,{start:s,end:l}=function ZJ(e,n,t,r){let i=0,o=n-1;if(t&&!r)for(;i<n&&!e[i].skip;)i++;for(;i<n&&e[i].skip;)i++;for(i%=n,t&&(o+=i);o>i&&e[o%n].skip;)o--;return o%=n,{start:i,end:o}}(t,i,o,r);return function ZF(e,n,t,r){return r&&r.setContext&&t?function eee(e,n,t,r){const i=e._chart.getContext(),o=XF(e.options),{_datasetIndex:s,options:{spanGaps:l}}=e,u=t.length,h=[];let g=o,y=n[0].start,b=y;function C(w,D,S,x){const A=l?-1:1;if(w!==D){for(w+=u;t[w%u].skip;)w-=A;for(;t[D%u].skip;)D+=A;w%u!=D%u&&(h.push({start:w%u,end:D%u,loop:S,style:x}),g=x,y=D%u)}}for(const w of n){y=l?y:w.start;let S,D=t[y%u];for(b=y+1;b<=w.end;b++){const x=t[b%u];S=XF(r.setContext(ud(i,{type:"segment",p0:D,p1:x,p0DataIndex:(b-1)%u,p1DataIndex:b%u,datasetIndex:s}))),tee(S,g)&&C(y,b-1,w.loop,g),D=x,g=S}y<b-1&&C(y,b-1,w.loop,g)}return h}(e,n,t,r):n}(e,!0===r?[{start:s,end:l,loop:o}]:function XJ(e,n,t,r){const i=e.length,o=[];let u,s=n,l=e[n];for(u=n+1;u<=t;++u){const h=e[u%i];h.skip||h.stop?l.skip||(o.push({start:n%i,end:(u-1)%i,loop:r=!1}),n=s=h.stop?u:null):(s=u,l.skip&&(n=u)),l=h}return null!==s&&o.push({start:n%i,end:s%i,loop:r}),o}(t,s,l<s?l+i:l,!!e._fullLoop&&0===s&&l===i-1),t,n)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,i=t.length;return i&&this.points[t[i-1].end]}interpolate(t,r){const i=this.options,o=t[r],s=this.points,l=QF(this,{property:r,start:o,end:o});if(!l.length)return;const u=[],h=function Xte(e){return e.stepped?GJ:e.tension||"monotone"===e.cubicInterpolationMode?qJ:Wh}(i);let g,y;for(g=0,y=l.length;g<y;++g){const{start:b,end:C}=l[g],w=s[b],D=s[C];if(w===D){u.push(w);continue}const x=h(w,D,Math.abs((o-w[r])/(D[r]-w[r])),i.stepped);x[r]=t[r],u.push(x)}return 1===u.length?u[0]:u}pathSegment(t,r,i){return kI(this)(t,this,r,i)}path(t,r,i){const o=this.segments,s=kI(this);let l=this._loop;r=r||0,i=i||this.points.length-r;for(const u of o)l&=s(t,this,u,{start:r,end:r+i-1});return!!l}draw(t,r,i,o){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function nne(e,n,t,r){tne&&!n.options.segment?function Jte(e,n,t,r){let i=n._path;i||(i=n._path=new Path2D,n.path(i,t,r)&&i.closePath()),UL(e,n.options),e.stroke(i)}(e,n,t,r):function ene(e,n,t,r){const{segments:i,options:o}=n,s=kI(n);for(const l of i)UL(e,o,l.style),e.beginPath(),s(e,n,l,{start:t,end:t+r-1})&&e.closePath(),e.stroke()}(e,n,t,r)}(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function $L(e,n,t,r){const i=e.options,{[t]:o}=e.getProps([t],r);return Math.abs(n-o)<i.radius+i.hitRadius}let rne=(()=>class e extends Uc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const o=this.options,{x:s,y:l}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(r-l,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return $L(this,t,"x",r)}inYRange(t,r){return $L(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!Bc(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,pI(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}})();function zL(e,n){const{x:t,y:r,base:i,width:o,height:s}=e.getProps(["x","y","base","width","height"],n);let l,u,h,g,y;return e.horizontal?(y=s/2,l=Math.min(t,i),u=Math.max(t,i),h=r-y,g=r+y):(y=o/2,l=t-y,u=t+y,h=Math.min(r,i),g=Math.max(r,i)),{left:l,top:h,right:u,bottom:g}}function hd(e,n,t,r){return e?0:Kr(n,t,r)}function NI(e,n,t,r){const i=null===n,o=null===t,l=e&&!(i&&o)&&zL(e,r);return l&&(i||Lc(n,l.left,l.right))&&(o||Lc(t,l.top,l.bottom))}function lne(e,n){e.rect(n.x,n.y,n.w,n.h)}function OI(e,n,t={}){const r=e.x!==t.x?-n:0,i=e.y!==t.y?-n:0;return{x:e.x+r,y:e.y+i,w:e.w+((e.x+e.w!==t.x+t.w?n:0)-r),h:e.h+((e.y+e.h!==t.y+t.h?n:0)-i),radius:e.radius}}var une=Object.freeze({__proto__:null,ArcElement:class qte extends Uc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:n=>"borderDash"!==n};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,t,r){const i=this.getProps(["x","y"],r),{angle:o,distance:s}=vF(i,{x:n,y:t}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:g,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),b=(this.options.spacing+this.options.borderWidth)/2,C=lt(y,u-l),w=u_(o,l,u)&&l!==u,D=C>=In||w,S=Lc(s,h+b,g+b);return D&&S}getCenterPoint(n){const{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:h}=this.options,g=(i+o)/2,y=(s+l+h+u)/2;return{x:t+Math.cos(g)*y,y:r+Math.sin(g)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>In?Math.floor(r/In):0,0===r||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const h=i*(1-Math.sin(Math.min(Ot,r||0)));n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,function Wte(e,n,t,r,i){const{fullCircles:o,startAngle:s,circumference:l}=n;let u=n.endAngle;if(o){qb(e,n,t,r,u,i);for(let h=0;h<o;++h)e.fill();isNaN(l)||(u=s+(l%In||In))}qb(e,n,t,r,u,i),e.fill()}(n,this,h,o,s),function Gte(e,n,t,r,i){const{fullCircles:o,startAngle:s,circumference:l,options:u}=n,{borderWidth:h,borderJoinStyle:g,borderDash:y,borderDashOffset:b,borderRadius:C}=u,w="inner"===u.borderAlign;if(!h)return;e.setLineDash(y||[]),e.lineDashOffset=b,w?(e.lineWidth=2*h,e.lineJoin=g||"round"):(e.lineWidth=h,e.lineJoin=g||"bevel");let D=n.endAngle;if(o){qb(e,n,t,r,D,i);for(let S=0;S<o;++S)e.stroke();isNaN(l)||(D=s+(l%In||In))}w&&function Hte(e,n,t){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:l,innerRadius:u}=n;let h=i/l;e.beginPath(),e.arc(o,s,l,r-h,t+h),u>i?(h=i/u,e.arc(o,s,u,t+h,r-h,!0)):e.arc(o,s,i,t+fr,r-fr),e.closePath(),e.clip()}(e,n,D),u.selfJoin&&D-s>=Ot&&0===C&&"miter"!==g&&function Ute(e,n,t){const{startAngle:r,x:i,y:o,outerRadius:s,innerRadius:l,options:u}=n,{borderWidth:h,borderJoinStyle:g}=u,y=Math.min(h/s,Ci(r-t));if(e.beginPath(),e.arc(i,o,s-h/2,r+y/2,t-y/2),l>0){const b=Math.min(h/l,Ci(r-t));e.arc(i,o,l+h/2,t-b/2,r+b/2,!0)}else{const b=Math.min(h/2,s*Ci(r-t));if("round"===g)e.arc(i,o,b,t-Ot/2,r+Ot/2,!0);else if("bevel"===g){const C=2*b*b,w=-C*Math.cos(t+Ot/2)+i,D=-C*Math.sin(t+Ot/2)+o,S=C*Math.cos(r+Ot/2)+i,x=C*Math.sin(r+Ot/2)+o;e.lineTo(w,D),e.lineTo(S,x)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,n,D),o||(qb(e,n,t,r,D,i),e.stroke())}(n,this,h,o,s),n.restore()}},BarElement:class cne extends Uc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=function sne(e){const n=zL(e),t=n.right-n.left,r=n.bottom-n.top,i=function ine(e,n,t){const i=e.borderSkipped,o=NF(e.options.borderWidth);return{t:hd(i.top,o.top,0,t),r:hd(i.right,o.right,0,n),b:hd(i.bottom,o.bottom,0,t),l:hd(i.left,o.left,0,n)}}(e,t/2,r/2),o=function one(e,n,t){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=Hh(i),s=Math.min(n,t),l=e.borderSkipped,u=r||St(i);return{topLeft:hd(!u||l.top||l.left,o.topLeft,0,s),topRight:hd(!u||l.top||l.right,o.topRight,0,s),bottomLeft:hd(!u||l.bottom||l.left,o.bottomLeft,0,s),bottomRight:hd(!u||l.bottom||l.right,o.bottomRight,0,s)}}(e,t/2,r/2);return{outer:{x:n.left,y:n.top,w:t,h:r,radius:o},inner:{x:n.left+i.l,y:n.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}(this),l=function ane(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}(s.radius)?p_:lne;n.save(),(s.w!==o.w||s.h!==o.h)&&(n.beginPath(),l(n,OI(s,t,o)),n.clip(),l(n,OI(o,-t,s)),n.fillStyle=r,n.fill("evenodd")),n.beginPath(),l(n,OI(o,t)),n.fillStyle=i,n.fill(),n.restore()}inRange(n,t,r){return NI(this,n,t,r)}inXRange(n,t){return NI(this,n,null,t)}inYRange(n,t){return NI(this,null,n,t)}getCenterPoint(n){const{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],n);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(n){return"x"===n?this.width/2:this.height/2}},LineElement:Kb,PointElement:rne});const FI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],WL=FI.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function GL(e){return FI[e%FI.length]}function qL(e){return WL[e%WL.length]}function KL(e){let n;for(n in e)if(e[n].borderColor||e[n].backgroundColor)return!0;return!1}var _ne={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,n,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:o}=i,s=KL(r)||function gne(e){return e&&(e.borderColor||e.backgroundColor)}(i)||o&&KL(o)||function mne(){return"rgba(0,0,0,0.1)"!==Ln.borderColor||"rgba(0,0,0,0.1)"!==Ln.backgroundColor}();if(!t.forceOverride&&s)return;const l=function pne(e){let n=0;return(t,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof II?n=function hne(e,n){return e.backgroundColor=e.data.map(()=>GL(n++)),n}(t,n):i instanceof hL?n=function fne(e,n){return e.backgroundColor=e.data.map(()=>qL(n++)),n}(t,n):i&&(n=function dne(e,n){return e.borderColor=GL(n),e.backgroundColor=qL(n),++n}(t,n))}}(e);r.forEach(l)}};function YL(e){if(e._decimated){const n=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:n})}}function QL(e){e.data.datasets.forEach(n=>{YL(n)})}var Cne={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,n,t)=>{if(!t.enabled)return void QL(e);const r=e.width;e.data.datasets.forEach((i,o)=>{const{_data:s,indexAxis:l}=i,u=e.getDatasetMeta(o),h=s||i.data;if("y"===g_([l,e.options.indexAxis])||!u.controller.supportsDecimation)return;const g=e.scales[u.xAxisID];if("linear"!==g.type&&"time"!==g.type||e.options.parsing)return;let w,{start:y,count:b}=function bne(e,n){const t=n.length;let i,r=0;const{iScale:o}=e,{min:s,max:l,minDefined:u,maxDefined:h}=o.getUserBounds();return u&&(r=Kr(Vc(n,o.axis,s).lo,0,t-1)),i=h?Kr(Vc(n,o.axis,l).hi+1,r,t)-r:t-r,{start:r,count:i}}(u,h);if(b<=(t.threshold||4*r))YL(i);else{switch(Ct(s)&&(i._data=h,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(D){this._data=D}})),t.algorithm){case"lttb":w=function yne(e,n,t,r,i){const o=i.samples||r;if(o>=t)return e.slice(n,n+t);const s=[],l=(t-2)/(o-2);let u=0;const h=n+t-1;let y,b,C,w,D,g=n;for(s[u++]=e[g],y=0;y<o-2;y++){let A,S=0,x=0;const L=Math.floor((y+1)*l)+1+n,G=Math.min(Math.floor((y+2)*l)+1,t)+n,W=G-L;for(A=L;A<G;A++)S+=e[A].x,x+=e[A].y;S/=W,x/=W;const te=Math.floor(y*l)+1+n,ae=Math.min(Math.floor((y+1)*l)+1,t)+n,{x:se,y:be}=e[g];for(C=w=-1,A=te;A<ae;A++)w=.5*Math.abs((se-S)*(e[A].y-be)-(se-e[A].x)*(x-be)),w>C&&(C=w,b=e[A],D=A);s[u++]=b,g=D}return s[u++]=e[h],s}(h,y,b,r,t);break;case"min-max":w=function vne(e,n,t,r){let s,l,u,h,g,y,b,C,w,D,i=0,o=0;const S=[],A=e[n].x,G=e[n+t-1].x-A;for(s=n;s<n+t;++s){l=e[s],u=(l.x-A)/G*r,h=l.y;const W=0|u;if(W===g)h<w?(w=h,y=s):h>D&&(D=h,b=s),i=(o*i+l.x)/++o;else{const te=s-1;if(!Ct(y)&&!Ct(b)){const ae=Math.min(y,b),se=Math.max(y,b);ae!==C&&ae!==te&&S.push({...e[ae],x:i}),se!==C&&se!==te&&S.push({...e[se],x:i})}s>0&&te!==C&&S.push(e[te]),S.push(l),g=W,o=0,w=D=h,y=b=C=s}}return S}(h,y,b,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=w}})},destroy(e){QL(e)}};function LI(e,n,t,r){if(r)return;let i=n[e],o=t[e];return"angle"===e&&(i=Ci(i),o=Ci(o)),{property:e,start:i,end:o}}function Yb(e,n,t){for(;n>e;n--){const r=t[n];if(!isNaN(r.x)&&!isNaN(r.y))break}return n}function ZL(e,n,t,r){return e&&n?r(e[t],n[t]):e?e[t]:n?n[t]:0}function XL(e,n){let t=[],r=!1;return Dn(e)?(r=!0,t=e):t=function wne(e,n){const{x:t=null,y:r=null}=e||{},i=n.points,o=[];return n.segments.forEach(({start:s,end:l})=>{l=Yb(s,l,i);const u=i[s],h=i[l];null!==r?(o.push({x:u.x,y:r}),o.push({x:h.x,y:r})):null!==t&&(o.push({x:t,y:u.y}),o.push({x:t,y:h.y}))}),o}(e,n),t.length?new Kb({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function JL(e){return e&&!1!==e.fill}function Dne(e,n,t){let i=e[n].fill;const o=[n];let s;if(!t)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!er(i))return i;if(s=e[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function Ine(e,n,t){const r=function Ane(e){const n=e.options,t=n.fill;let r=lt(t&&t.target,t);return void 0===r&&(r=!!n.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(e);if(St(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return er(i)&&Math.floor(i)===i?function Sne(e,n,t,r){return("-"===e||"+"===e)&&(t=n+t),!(t===n||t<0||t>=r)&&t}(r[0],n,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Rne(e,n,t){const r=[];for(let i=0;i<t.length;i++){const o=t[i],{first:s,last:l,point:u}=kne(o,n,"x");if(!(!u||s&&l))if(s)r.unshift(u);else if(e.push(u),!l)break}e.push(...r)}function kne(e,n,t){const r=e.interpolate(n,t);if(!r)return{};const i=r[t],o=e.segments,s=e.points;let l=!1,u=!1;for(let h=0;h<o.length;h++){const g=o[h],y=s[g.start][t],b=s[g.end][t];if(Lc(i,y,b)){l=i===y,u=i===b;break}}return{first:l,last:u,point:r}}class e2{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,t,r){const{x:i,y:o,radius:s}=this;return n.arc(i,o,s,(t=t||{start:0,end:In}).end,t.start,!0),!r.bounds}interpolate(n){const{x:t,y:r,radius:i}=this,o=n.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}}function VI(e,n,t){const r=function Nne(e){const{chart:n,fill:t,line:r}=e;if(er(t))return function One(e,n){const t=e.getDatasetMeta(n);return t&&e.isDatasetVisible(n)?t.dataset:null}(n,t);if("stack"===t)return function xne(e){const{scale:n,index:t,line:r}=e,i=[],o=r.segments,s=r.points,l=function Pne(e,n){const t=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const o=r[i];if(o.index===n)break;o.hidden||t.unshift(o.dataset)}return t}(n,t);l.push(XL({x:null,y:n.bottom},r));for(let u=0;u<o.length;u++){const h=o[u];for(let g=h.start;g<=h.end;g++)Rne(i,s[g],l)}return new Kb({points:i,options:{}})}(e);if("shape"===t)return!0;const i=function Fne(e){return(e.scale||{}).getPointPositionForValue?function Vne(e){const{scale:n,fill:t}=e,r=n.options,i=n.getLabels().length,o=r.reverse?n.max:n.min,s=function Mne(e,n,t){let r;return r="start"===e?t:"end"===e?n.options.reverse?n.min:n.max:St(e)?e.value:n.getBaseValue(),r}(t,n,o),l=[];if(r.grid.circular){const u=n.getPointPositionForValue(0,o);return new e2({x:u.x,y:u.y,radius:n.getDistanceFromCenterForValue(s)})}for(let u=0;u<i;++u)l.push(n.getPointPositionForValue(u,s));return l}(e):function Lne(e){const{scale:n={},fill:t}=e,r=function Tne(e,n){let t=null;return"start"===e?t=n.bottom:"end"===e?t=n.top:St(e)?t=n.getPixelForValue(e.value):n.getBasePixel&&(t=n.getBasePixel()),t}(t,n);if(er(r)){const i=n.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(e)}(e);return i instanceof e2?i:XL(i,r)}(n),{chart:i,index:o,line:s,scale:l,axis:u}=n,h=s.options,g=h.fill,y=h.backgroundColor,{above:b=y,below:C=y}=g||{},w=i.getDatasetMeta(o),D=JF(i,w);r&&s.points.length&&(kb(e,t),function Bne(e,n){const{line:t,target:r,above:i,below:o,area:s,scale:l,clip:u}=n,h=t._loop?"angle":n.axis;e.save();let g=o;o!==i&&("x"===h?(t2(e,r,s.top),BI(e,{line:t,target:r,color:i,scale:l,property:h,clip:u}),e.restore(),e.save(),t2(e,r,s.bottom)):"y"===h&&(n2(e,r,s.left),BI(e,{line:t,target:r,color:o,scale:l,property:h,clip:u}),e.restore(),e.save(),n2(e,r,s.right),g=i)),BI(e,{line:t,target:r,color:g,scale:l,property:h,clip:u}),e.restore()}(e,{line:s,target:r,above:b,below:C,area:t,scale:l,axis:u,clip:D}),Nb(e))}function t2(e,n,t){const{segments:r,points:i}=n;let o=!0,s=!1;e.beginPath();for(const l of r){const{start:u,end:h}=l,g=i[u],y=i[Yb(u,h,i)];o?(e.moveTo(g.x,g.y),o=!1):(e.lineTo(g.x,t),e.lineTo(g.x,g.y)),s=!!n.pathSegment(e,l,{move:s}),s?e.closePath():e.lineTo(y.x,t)}e.lineTo(n.first().x,t),e.closePath(),e.clip()}function n2(e,n,t){const{segments:r,points:i}=n;let o=!0,s=!1;e.beginPath();for(const l of r){const{start:u,end:h}=l,g=i[u],y=i[Yb(u,h,i)];o?(e.moveTo(g.x,g.y),o=!1):(e.lineTo(t,g.y),e.lineTo(g.x,g.y)),s=!!n.pathSegment(e,l,{move:s}),s?e.closePath():e.lineTo(t,y.y)}e.lineTo(t,n.first().y),e.closePath(),e.clip()}function BI(e,n){const{line:t,target:r,property:i,color:o,scale:s,clip:l}=n,u=function Ene(e,n,t){const r=e.segments,i=e.points,o=n.points,s=[];for(const l of r){let{start:u,end:h}=l;h=Yb(u,h,i);const g=LI(t,i[u],i[h],l.loop);if(!n.segments){s.push({source:l,target:g,start:i[u],end:i[h]});continue}const y=QF(n,g);for(const b of y){const C=LI(t,o[b.start],o[b.end],b.loop),w=YF(l,i,C);for(const D of w)s.push({source:D,target:b,start:{[t]:ZL(g,C,"start",Math.max)},end:{[t]:ZL(g,C,"end",Math.min)}})}}return s}(t,r,i);for(const{source:h,target:g,start:y,end:b}of u){const{style:{backgroundColor:C=o}={}}=h,w=!0!==r;e.save(),e.fillStyle=C,jne(e,s,l,w&&LI(i,y,b)),e.beginPath();const D=!!t.pathSegment(e,h);let S;if(w){D?e.closePath():r2(e,r,b,i);const x=!!r.pathSegment(e,g,{move:D,reverse:!0});S=D&&x,S||r2(e,r,y,i)}e.closePath(),e.fill(S?"evenodd":"nonzero"),e.restore()}}function jne(e,n,t,r){const i=n.chart.chartArea,{property:o,start:s,end:l}=r||{};if("x"===o||"y"===o){let u,h,g,y;"x"===o?(u=s,h=i.top,g=l,y=i.bottom):(u=i.left,h=s,g=i.right,y=l),e.beginPath(),t&&(u=Math.max(u,t.left),g=Math.min(g,t.right),h=Math.max(h,t.top),y=Math.min(y,t.bottom)),e.rect(u,h,g-u,y-h),e.clip()}}function r2(e,n,t,r){const i=n.interpolate(t,r);i&&e.lineTo(i.x,i.y)}var Une={id:"filler",afterDatasetsUpdate(e,n,t){const r=(e.data.datasets||[]).length,i=[];let o,s,l,u;for(s=0;s<r;++s)o=e.getDatasetMeta(s),l=o.dataset,u=null,l&&l.options&&l instanceof Kb&&(u={visible:e.isDatasetVisible(s),index:s,fill:Ine(l,s,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:l}),o.$filler=u,i.push(u);for(s=0;s<r;++s)u=i[s],u&&!1!==u.fill&&(u.fill=Dne(i,s,t.propagate))},beforeDraw(e,n,t){const r="beforeDraw"===t.drawTime,i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let s=i.length-1;s>=0;--s){const l=i[s].$filler;l&&(l.line.updateControlPoints(o,l.axis),r&&l.fill&&VI(e.ctx,l,o))}},beforeDatasetsDraw(e,n,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const o=r[i].$filler;JL(o)&&VI(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,n,t){const r=n.meta.$filler;!JL(r)||"beforeDatasetDraw"!==t.drawTime||VI(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const i2=(e,n)=>{let{boxHeight:t=n,boxWidth:r=n}=e;return e.usePointStyle&&(t=Math.min(t,n),r=e.pointStyleWidth||Math.min(r,n)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(n,t)}};class o2 extends Uc{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t,r){this.maxWidth=n,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const n=this.options.labels||{};let t=yn(n.generateLabels,[this.chart],this)||[];n.filter&&(t=t.filter(r=>n.filter(r,this.chart.data))),n.sort&&(t=t.sort((r,i)=>n.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:n,ctx:t}=this;if(!n.display)return void(this.width=this.height=0);const r=n.labels,i=Or(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=i2(r,o);let h,g;t.font=i.string,this.isHorizontal()?(h=this.maxWidth,g=this._fitRows(s,o,l,u)+10):(g=this.maxHeight,h=this._fitCols(s,i,l,u)+10),this.width=Math.min(h,n.maxWidth||this.maxWidth),this.height=Math.min(g,n.maxHeight||this.maxHeight)}_fitRows(n,t,r,i){const{ctx:o,maxWidth:s,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],g=i+l;let y=n;o.textAlign="left",o.textBaseline="middle";let b=-1,C=-g;return this.legendItems.forEach((w,D)=>{const S=r+t/2+o.measureText(w.text).width;(0===D||h[h.length-1]+S+2*l>s)&&(y+=g,h[h.length-(D>0?0:1)]=0,C+=g,b++),u[D]={left:0,top:C,row:b,width:S,height:i},h[h.length-1]+=S+l}),y}_fitCols(n,t,r,i){const{ctx:o,maxHeight:s,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],g=s-n;let y=l,b=0,C=0,w=0,D=0;return this.legendItems.forEach((S,x)=>{const{itemWidth:A,itemHeight:L}=function $ne(e,n,t,r,i){const o=function zne(e,n,t,r){let i=e.text;return i&&"string"!=typeof i&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),n+t.size/2+r.measureText(i).width}(r,e,n,t),s=function Wne(e,n,t){let r=e;return"string"!=typeof n.text&&(r=s2(n,t)),r}(i,r,n.lineHeight);return{itemWidth:o,itemHeight:s}}(r,t,o,S,i);x>0&&C+L+2*l>g&&(y+=b+l,h.push({width:b,height:C}),w+=b+l,D++,b=C=0),u[x]={left:w,top:C,col:D,width:A,height:L},b=Math.max(b,A),C+=L+l}),y+=b,h.push({width:b,height:C}),y}adjustHitBoxes(){if(!this.options.display)return;const n=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=kp(o,this.left,this.width);if(this.isHorizontal()){let l=0,u=Ei(r,this.left+i,this.right-this.lineWidths[l]);for(const h of t)l!==h.row&&(l=h.row,u=Ei(r,this.left+i,this.right-this.lineWidths[l])),h.top+=this.top+n+i,h.left=s.leftForLtr(s.x(u),h.width),u+=h.width+i}else{let l=0,u=Ei(r,this.top+n+i,this.bottom-this.columnSizes[l].height);for(const h of t)h.col!==l&&(l=h.col,u=Ei(r,this.top+n+i,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+i,h.left=s.leftForLtr(s.x(h.left),h.width),u+=h.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const n=this.ctx;kb(n,this),this._draw(),Nb(n)}}_draw(){const{options:n,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=n,l=Ln.color,u=kp(n.rtl,this.left,this.width),h=Or(s.font),{padding:g}=s,y=h.size,b=y/2;let C;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:w,boxHeight:D,itemHeight:S}=i2(s,y),L=this.isHorizontal(),G=this._computeTitleHeight();C=L?{x:Ei(o,this.left+g,this.right-r[0]),y:this.top+g+G,line:0}:{x:this.left+g,y:Ei(o,this.top+G+g,this.bottom-t[0].height),line:0},WF(this.ctx,n.textDirection);const W=S+g;this.legendItems.forEach((te,ae)=>{i.strokeStyle=te.fontColor,i.fillStyle=te.fontColor;const se=i.measureText(te.text).width,be=u.textAlign(te.textAlign||(te.textAlign=s.textAlign)),nt=w+b+se;let ct=C.x,ut=C.y;u.setWidth(this.width),L?ae>0&&ct+nt+g>this.right&&(ut=C.y+=W,C.line++,ct=C.x=Ei(o,this.left+g,this.right-r[C.line])):ae>0&&ut+W>this.bottom&&(ct=C.x=ct+t[C.line].width+g,C.line++,ut=C.y=Ei(o,this.top+G+g,this.bottom-t[C.line].height)),function(te,ae,se){if(isNaN(w)||w<=0||isNaN(D)||D<0)return;i.save();const be=lt(se.lineWidth,1);if(i.fillStyle=lt(se.fillStyle,l),i.lineCap=lt(se.lineCap,"butt"),i.lineDashOffset=lt(se.lineDashOffset,0),i.lineJoin=lt(se.lineJoin,"miter"),i.lineWidth=be,i.strokeStyle=lt(se.strokeStyle,l),i.setLineDash(lt(se.lineDash,[])),s.usePointStyle){const nt={radius:D*Math.SQRT2/2,pointStyle:se.pointStyle,rotation:se.rotation,borderWidth:be},ct=u.xPlus(te,w/2);kF(i,nt,ct,ae+b,s.pointStyleWidth&&w)}else{const nt=ae+Math.max((y-D)/2,0),ct=u.leftForLtr(te,w),ut=Hh(se.borderRadius);i.beginPath(),Object.values(ut).some(pr=>0!==pr)?p_(i,{x:ct,y:nt,w,h:D,radius:ut}):i.rect(ct,nt,w,D),i.fill(),0!==be&&i.stroke()}i.restore()}(u.x(ct),ut,te),ct=((e,n,t,r)=>e===(r?"left":"right")?t:"center"===e?(n+t)/2:n)(be,ct+w+b,L?ct+nt:this.right,n.rtl),function(te,ae,se){Uh(i,se.text,te,ae+S/2,h,{strikethrough:se.hidden,textAlign:u.textAlign(se.textAlign)})}(u.x(ct),ut,te),L?C.x+=nt+g:C.y+="string"!=typeof te.text?s2(te,h.lineHeight)+g:W}),GF(this.ctx,n.textDirection)}drawTitle(){const n=this.options,t=n.title,r=Or(t.font),i=wi(t.padding);if(!t.display)return;const o=kp(n.rtl,this.left,this.width),s=this.ctx,l=t.position,h=i.top+r.size/2;let g,y=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),g=this.top+h,y=Ei(n.align,y,this.right-b);else{const w=this.columnSizes.reduce((D,S)=>Math.max(D,S.height),0);g=h+Ei(n.align,this.top,this.bottom-w-n.labels.padding-this._computeTitleHeight())}const C=Ei(l,y,y+b);s.textAlign=o.textAlign(cI(l)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,Uh(s,t.text,C,g,r)}_computeTitleHeight(){const n=this.options.title,t=Or(n.font),r=wi(n.padding);return n.display?t.lineHeight+r.height:0}_getLegendItemAt(n,t){let r,i,o;if(Lc(n,this.left,this.right)&&Lc(t,this.top,this.bottom))for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],Lc(n,i.left,i.left+i.width)&&Lc(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(n){const t=this.options;if(!function Gne(e,n){return!(("mousemove"!==e&&"mouseout"!==e||!n.onHover&&!n.onLeave)&&(!n.onClick||"click"!==e&&"mouseup"!==e))}(n.type,t))return;const r=this._getLegendItemAt(n.x,n.y);if("mousemove"===n.type||"mouseout"===n.type){const i=this._hoveredItem,o=((e,n)=>null!==e&&null!==n&&e.datasetIndex===n.datasetIndex&&e.index===n.index)(i,r);i&&!o&&yn(t.onLeave,[n,i,this],this),this._hoveredItem=r,r&&!o&&yn(t.onHover,[n,r,this],this)}else r&&yn(t.onClick,[n,r,this],this)}}function s2(e,n){return n*(e.text?e.text.length:0)}var qne={id:"legend",_element:o2,start(e,n,t){const r=e.legend=new o2({ctx:e.ctx,options:t,chart:e});Di.configure(e,r,t),Di.addBox(e,r)},stop(e){Di.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,n,t){const r=e.legend;Di.configure(e,r,t),r.options=t},afterUpdate(e){const n=e.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(e,n){n.replay||e.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,n,t){const r=n.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),n.hidden=!0):(i.show(r),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const n=e.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(t?0:void 0),g=wi(h.borderWidth);return{text:n[u.index].label,fillStyle:h.backgroundColor,fontColor:o,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:s&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class jI extends Uc{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=n,this.height=this.bottom=t;const i=Dn(r.text)?r.text.length:1;this._padding=wi(r.padding);const o=i*Or(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const n=this.options.position;return"top"===n||"bottom"===n}_drawArgs(n){const{top:t,left:r,bottom:i,right:o,options:s}=this,l=s.align;let h,g,y,u=0;return this.isHorizontal()?(g=Ei(l,r,o),y=t+n,h=o-r):("left"===s.position?(g=r+n,y=Ei(l,i,t),u=-.5*Ot):(g=o-n,y=Ei(l,t,i),u=.5*Ot),h=i-t),{titleX:g,titleY:y,maxWidth:h,rotation:u}}draw(){const n=this.ctx,t=this.options;if(!t.display)return;const r=Or(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:l,maxWidth:u,rotation:h}=this._drawArgs(o);Uh(n,t.text,0,0,r,{color:t.color,maxWidth:u,rotation:h,textAlign:cI(t.align),textBaseline:"middle",translation:[s,l]})}}var Yne={id:"title",_element:jI,start(e,n,t){!function Kne(e,n){const t=new jI({ctx:e.ctx,options:n,chart:e});Di.configure(e,t,n),Di.addBox(e,t),e.titleBlock=t}(e,t)},stop(e){Di.removeBox(e,e.titleBlock),delete e.titleBlock},beforeUpdate(e,n,t){const r=e.titleBlock;Di.configure(e,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qb=new WeakMap;var Qne={id:"subtitle",start(e,n,t){const r=new jI({ctx:e.ctx,options:t,chart:e});Di.configure(e,r,t),Di.addBox(e,r),Qb.set(e,r)},stop(e){Di.removeBox(e,Qb.get(e)),Qb.delete(e)},beforeUpdate(e,n,t){const r=Qb.get(e);Di.configure(e,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const D_={average(e){if(!e.length)return!1;let n,t,r=new Set,i=0,o=0;for(n=0,t=e.length;n<t;++n){const l=e[n].element;if(l&&l.hasValue()){const u=l.tooltipPosition();r.add(u.x),i+=u.y,++o}}return 0!==o&&0!==r.size&&{x:[...r].reduce((l,u)=>l+u)/r.size,y:i/o}},nearest(e,n){if(!e.length)return!1;let o,s,l,t=n.x,r=n.y,i=Number.POSITIVE_INFINITY;for(o=0,s=e.length;o<s;++o){const u=e[o].element;if(u&&u.hasValue()){const g=aI(n,u.getCenterPoint());g<i&&(i=g,l=u)}}if(l){const u=l.tooltipPosition();t=u.x,r=u.y}return{x:t,y:r}}};function wl(e,n){return n&&(Dn(n)?Array.prototype.push.apply(e,n):e.push(n)),e}function Hc(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Zne(e,n){const{element:t,datasetIndex:r,index:i}=n,o=e.getDatasetMeta(r).controller,{label:s,value:l}=o.getLabelAndValue(i);return{chart:e,label:s,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:l,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function a2(e,n){const t=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:s,boxHeight:l}=n,u=Or(n.bodyFont),h=Or(n.titleFont),g=Or(n.footerFont),y=o.length,b=i.length,C=r.length,w=wi(n.padding);let D=w.height,S=0,x=r.reduce((G,W)=>G+W.before.length+W.lines.length+W.after.length,0);x+=e.beforeBody.length+e.afterBody.length,y&&(D+=y*h.lineHeight+(y-1)*n.titleSpacing+n.titleMarginBottom),x&&(D+=C*(n.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(x-C)*u.lineHeight+(x-1)*n.bodySpacing),b&&(D+=n.footerMarginTop+b*g.lineHeight+(b-1)*n.footerSpacing);let A=0;const L=function(G){S=Math.max(S,t.measureText(G).width+A)};return t.save(),t.font=h.string,Gt(e.title,L),t.font=u.string,Gt(e.beforeBody.concat(e.afterBody),L),A=n.displayColors?s+2+n.boxPadding:0,Gt(r,G=>{Gt(G.before,L),Gt(G.lines,L),Gt(G.after,L)}),A=0,t.font=g.string,Gt(e.footer,L),t.restore(),S+=w.width,{width:S,height:D}}function ere(e,n,t,r){const{x:i,width:o}=t,{width:s,chartArea:{left:l,right:u}}=e;let h="center";return"center"===r?h=i<=(l+u)/2?"left":"right":i<=o/2?h="left":i>=s-o/2&&(h="right"),function Jne(e,n,t,r){const{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if("left"===e&&i+o+s>n.width||"right"===e&&i-o-s<0)return!0}(h,e,n,t)&&(h="center"),h}function l2(e,n,t){const r=t.yAlign||n.yAlign||function Xne(e,n){const{y:t,height:r}=n;return t<r/2?"top":t>e.height-r/2?"bottom":"center"}(e,t);return{xAlign:t.xAlign||n.xAlign||ere(e,n,t,r),yAlign:r}}function c2(e,n,t,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=e,{xAlign:l,yAlign:u}=t,h=i+o,{topLeft:g,topRight:y,bottomLeft:b,bottomRight:C}=Hh(s);let w=function tre(e,n){let{x:t,width:r}=e;return"right"===n?t-=r:"center"===n&&(t-=r/2),t}(n,l);const D=function nre(e,n,t){let{y:r,height:i}=e;return"top"===n?r+=t:r-="bottom"===n?i+t:i/2,r}(n,u,h);return"center"===u?"left"===l?w+=h:"right"===l&&(w-=h):"left"===l?w-=Math.max(g,b)+i:"right"===l&&(w+=Math.max(y,C)+i),{x:Kr(w,0,r.width-n.width),y:Kr(D,0,r.height-n.height)}}function Zb(e,n,t){const r=wi(t.padding);return"center"===n?e.x+e.width/2:"right"===n?e.x+e.width-r.right:e.x+r.left}function u2(e){return wl([],Hc(e))}function d2(e,n){const t=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return t?e.override(t):e}const h2={beforeTitle:Fc,title(e){if(e.length>0){const n=e[0],t=n.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return n.dataset.label||"";if(n.label)return n.label;if(r>0&&n.dataIndex<r)return t[n.dataIndex]}return""},afterTitle:Fc,beforeBody:Fc,beforeLabel:Fc,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let n=e.dataset.label||"";n&&(n+=": ");const t=e.formattedValue;return Ct(t)||(n+=t),n},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Fc,afterBody:Fc,beforeFooter:Fc,footer:Fc,afterFooter:Fc};function mo(e,n,t,r){const i=e[n].call(t,r);return typeof i>"u"?h2[n].call(t,r):i}let f2=(()=>class e extends Uc{static positioners=D_;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&r.options.animation&&i.animations,s=new tL(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=function rre(e,n,t){return ud(e,{tooltip:n,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,o=mo(i,"beforeTitle",this,t),s=mo(i,"title",this,t),l=mo(i,"afterTitle",this,t);let u=[];return u=wl(u,Hc(o)),u=wl(u,Hc(s)),u=wl(u,Hc(l)),u}getBeforeBody(t,r){return u2(mo(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:i}=r,o=[];return Gt(t,s=>{const l={before:[],lines:[],after:[]},u=d2(i,s);wl(l.before,Hc(mo(u,"beforeLabel",this,s))),wl(l.lines,mo(u,"label",this,s)),wl(l.after,Hc(mo(u,"afterLabel",this,s))),o.push(l)}),o}getAfterBody(t,r){return u2(mo(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:i}=r,o=mo(i,"beforeFooter",this,t),s=mo(i,"footer",this,t),l=mo(i,"afterFooter",this,t);let u=[];return u=wl(u,Hc(o)),u=wl(u,Hc(s)),u=wl(u,Hc(l)),u}_createItems(t){const r=this._active,i=this.chart.data,o=[],s=[],l=[];let h,g,u=[];for(h=0,g=r.length;h<g;++h)u.push(Zne(this.chart,r[h]));return t.filter&&(u=u.filter((y,b,C)=>t.filter(y,b,C,i))),t.itemSort&&(u=u.sort((y,b)=>t.itemSort(y,b,i))),Gt(u,y=>{const b=d2(t.callbacks,y);o.push(mo(b,"labelColor",this,y)),s.push(mo(b,"labelPointStyle",this,y)),l.push(mo(b,"labelTextColor",this,y))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=l,this.dataPoints=u,u}update(t,r){const i=this.options.setContext(this.getContext()),o=this._active;let s,l=[];if(o.length){const u=D_[i.position].call(this,o,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=a2(this,i),g=Object.assign({},u,h),y=l2(this.chart,i,g),b=c2(i,g,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,s={opacity:1,x:b.x,y:b.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=l,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,o){const s=this.getCaretPosition(t,i,o);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(t,r,i){const{xAlign:o,yAlign:s}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:h,topRight:g,bottomLeft:y,bottomRight:b}=Hh(u),{x:C,y:w}=t,{width:D,height:S}=r;let x,A,L,G,W,te;return"center"===s?(W=w+S/2,"left"===o?(x=C,A=x-l,G=W+l,te=W-l):(x=C+D,A=x+l,G=W-l,te=W+l),L=x):(A="left"===o?C+Math.max(h,y)+l:"right"===o?C+D-Math.max(g,b)-l:this.caretX,"top"===s?(G=w,W=G-l,x=A-l,L=A+l):(G=w+S,W=G+l,x=A+l,L=A-l),te=G),{x1:x,x2:A,x3:L,y1:G,y2:W,y3:te}}drawTitle(t,r,i){const o=this.title,s=o.length;let l,u,h;if(s){const g=kp(i.rtl,this.x,this.width);for(t.x=Zb(this,i.titleAlign,i),r.textAlign=g.textAlign(i.titleAlign),r.textBaseline="middle",l=Or(i.titleFont),u=i.titleSpacing,r.fillStyle=i.titleColor,r.font=l.string,h=0;h<s;++h)r.fillText(o[h],g.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,h+1===s&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,r,i,o,s){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:h,boxWidth:g}=s,y=Or(s.bodyFont),b=Zb(this,"left",s),C=o.x(b),D=r.y+(h<y.lineHeight?(y.lineHeight-h)/2:0);if(s.usePointStyle){const S={radius:Math.min(g,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},x=o.leftForLtr(C,g)+g/2,A=D+h/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,pI(t,S,x,A),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,pI(t,S,x,A)}else{t.lineWidth=St(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const S=o.leftForLtr(C,g),x=o.leftForLtr(o.xPlus(C,1),g-2),A=Hh(l.borderRadius);Object.values(A).some(L=>0!==L)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,p_(t,{x:S,y:D,w:g,h,radius:A}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),p_(t,{x,y:D+1,w:g-2,h:h-2,radius:A}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(S,D,g,h),t.strokeRect(S,D,g,h),t.fillStyle=l.backgroundColor,t.fillRect(x,D+1,g-2,h-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:o}=this,{bodySpacing:s,bodyAlign:l,displayColors:u,boxHeight:h,boxWidth:g,boxPadding:y}=i,b=Or(i.bodyFont);let C=b.lineHeight,w=0;const D=kp(i.rtl,this.x,this.width),S=function(be){r.fillText(be,D.x(t.x+w),t.y+C/2),t.y+=C+s},x=D.textAlign(l);let A,L,G,W,te,ae,se;for(r.textAlign=l,r.textBaseline="middle",r.font=b.string,t.x=Zb(this,x,i),r.fillStyle=i.bodyColor,Gt(this.beforeBody,S),w=u&&"right"!==x?"center"===l?g/2+y:g+2+y:0,W=0,ae=o.length;W<ae;++W){for(A=o[W],L=this.labelTextColors[W],r.fillStyle=L,Gt(A.before,S),G=A.lines,u&&G.length&&(this._drawColorBox(r,t,W,D,i),C=Math.max(b.lineHeight,h)),te=0,se=G.length;te<se;++te)S(G[te]),C=b.lineHeight;Gt(A.after,S)}w=0,C=b.lineHeight,Gt(this.afterBody,S),t.y-=s}drawFooter(t,r,i){const o=this.footer,s=o.length;let l,u;if(s){const h=kp(i.rtl,this.x,this.width);for(t.x=Zb(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=h.textAlign(i.footerAlign),r.textBaseline="middle",l=Or(i.footerFont),r.fillStyle=i.footerColor,r.font=l.string,u=0;u<s;++u)r.fillText(o[u],h.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,r,i,o){const{xAlign:s,yAlign:l}=this,{x:u,y:h}=t,{width:g,height:y}=i,{topLeft:b,topRight:C,bottomLeft:w,bottomRight:D}=Hh(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(u+b,h),"top"===l&&this.drawCaret(t,r,i,o),r.lineTo(u+g-C,h),r.quadraticCurveTo(u+g,h,u+g,h+C),"center"===l&&"right"===s&&this.drawCaret(t,r,i,o),r.lineTo(u+g,h+y-D),r.quadraticCurveTo(u+g,h+y,u+g-D,h+y),"bottom"===l&&this.drawCaret(t,r,i,o),r.lineTo(u+w,h+y),r.quadraticCurveTo(u,h+y,u,h+y-w),"center"===l&&"left"===s&&this.drawCaret(t,r,i,o),r.lineTo(u,h+b),r.quadraticCurveTo(u,h,u+b,h),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){const l=D_[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=a2(this,t),h=Object.assign({},l,this._size),g=l2(r,t,h),y=c2(t,h,g,r);(o._to!==y.x||s._to!==y.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=wi(r.padding);r.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,o,r),WF(t,r.textDirection),s.y+=l.top,this.drawTitle(s,t,r),this.drawBody(s,t,r),this.drawFooter(s,t,r),GF(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,o=t.map(({datasetIndex:u,index:h})=>{const g=this.chart.getDatasetMeta(u);if(!g)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:g.data[h],index:h}}),s=!Tb(i,o),l=this._positionChanged(o,r);(s||l)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,s=this._active||[],l=this._getActiveElements(t,s,r,i),u=this._positionChanged(l,t),h=r||!Tb(l,s)||u;return h&&(this._active=l,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),h}_getActiveElements(t,r,i,o){const s=this.options;if("mouseout"===t.type)return[];if(!o)return r.filter(u=>this.chart.data.datasets[u.datasetIndex]&&void 0!==this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index));const l=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&l.reverse(),l}_positionChanged(t,r){const{caretX:i,caretY:o,options:s}=this,l=D_[s.position].call(this,t,r);return!1!==l&&(i!==l.x||o!==l.y)}})();var ore=Object.freeze({__proto__:null,Colors:_ne,Decimation:Cne,Filler:Une,Legend:qne,SubTitle:Qne,Title:Yne,Tooltip:{id:"tooltip",_element:f2,positioners:D_,afterInit(e,n,t){t&&(e.tooltip=new f2({chart:e,options:t}))},beforeUpdate(e,n,t){e.tooltip&&e.tooltip.initialize(t)},reset(e,n,t){e.tooltip&&e.tooltip.initialize(t)},afterDraw(e){const n=e.tooltip;if(n&&n._willRender()){const t={tooltip:n};if(!1===e.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;n.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",t)}},afterEvent(e,n){e.tooltip&&e.tooltip.handleEvent(n.event,n.replay,n.inChartArea)&&(n.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,n)=>n.bodyFont.size,boxWidth:(e,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:h2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});function p2(e){const n=this.getLabels();return e>=0&&e<n.length?n[e]:e}let cre=(()=>class e extends qh{static id="category";static defaults={ticks:{callback:p2}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:o,label:s}of r)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ct(t))return null;const i=this.getLabels();return((e,n)=>null===e?null:Kr(Math.round(e),0,n))(r=isFinite(r)&&i[r]===t?r:function are(e,n,t,r){const i=e.indexOf(n);return-1===i?((e,n,t,r)=>("string"==typeof n?(t=e.push(n)-1,r.unshift({index:t,label:n})):isNaN(n)&&(t=null),t))(e,n,t,r):i!==e.lastIndexOf(n)?t:i}(i,t,lt(r,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),r||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const t=this.min,r=this.max,i=this.options.offset,o=[];let s=this.getLabels();s=0===t&&r===s.length-1?s:s.slice(t,r+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=r;l++)o.push({value:l});return o}getLabelForValue(t){return p2.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}})();function g2(e,n,{horizontal:t,minRotation:r}){const i=ba(r),o=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(n/o,.75*n*(""+e).length)}class Xb extends qh{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,t){return Ct(n)||("number"==typeof n||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){const{beginAtZero:n}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this;const s=u=>i=t?i:u,l=u=>o=r?o:u;if(n){const u=Cl(i),h=Cl(o);u<0&&h<0?l(0):u>0&&h>0&&s(0)}if(i===o){let u=0===o?1:Math.abs(.05*o);l(o+u),n||s(i-u)}this.min=i,this.max=o}getTickLimit(){const n=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=n;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const n=this.options,t=n.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s=function ure(e,n){const t=[],{bounds:i,step:o,min:s,max:l,precision:u,count:h,maxTicks:g,maxDigits:y,includeBounds:b}=e,C=o||1,w=g-1,{min:D,max:S}=n,x=!Ct(s),A=!Ct(l),L=!Ct(h),G=(S-D)/(y+1);let te,ae,se,be,W=mF((S-D)/w/C)*C;if(W<1e-14&&!x&&!A)return[{value:D},{value:S}];be=Math.ceil(S/W)-Math.floor(D/W),be>w&&(W=mF(be*W/w/C)*C),Ct(u)||(te=Math.pow(10,u),W=Math.ceil(W*te)/te),"ticks"===i?(ae=Math.floor(D/W)*W,se=Math.ceil(S/W)*W):(ae=D,se=S),x&&A&&o&&function YX(e,n){const t=Math.round(e);return t-n<=e&&t+n>=e}((l-s)/o,W/1e3)?(be=Math.round(Math.min((l-s)/W,g)),W=(l-s)/be,ae=s,se=l):L?(ae=x?s:ae,se=A?l:se,be=h-1,W=(se-ae)/be):(be=(se-ae)/W,be=c_(be,Math.round(be),W/1e3)?Math.round(be):Math.ceil(be));const nt=Math.max(yF(W),yF(ae));te=Math.pow(10,Ct(u)?nt:u),ae=Math.round(ae*te)/te,se=Math.round(se*te)/te;let ct=0;for(x&&(b&&ae!==s?(t.push({value:s}),ae<s&&ct++,c_(Math.round((ae+ct*W)*te)/te,s,g2(s,G,e))&&ct++):ae<s&&ct++);ct<be;++ct){const ut=Math.round((ae+ct*W)*te)/te;if(A&&ut>l)break;t.push({value:ut})}return A&&b&&se!==l?t.length&&c_(t[t.length-1].value,l,g2(l,G,e))?t[t.length-1].value=l:t.push({value:l}):(!A||se===l)&&t.push({value:se}),t}({maxTicks:r,bounds:n.bounds,min:n.min,max:n.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===n.bounds&&_F(s,this,"value"),n.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const n=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&n.length){const i=(r-t)/Math.max(n.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(n){return h_(n,this.chart.options.locale,this.options.ticks.format)}}const I_=e=>Math.floor(cd(e)),Kh=(e,n)=>Math.pow(10,I_(e)+n);function m2(e){return e/Math.pow(10,I_(e))==1}function _2(e,n,t){const r=Math.pow(10,t),i=Math.floor(e/r);return Math.ceil(n/r)-i}function UI(e){const n=e.ticks;if(n.display&&e.display){const t=wi(n.backdropPadding);return lt(n.font&&n.font.size,Ln.font.size)+t.height}return 0}function gre(e,n,t){return t=Dn(t)?t:[t],{w:hJ(e,n.string,t),h:t.length*n.lineHeight}}function y2(e,n,t,r,i){return e===r||e===i?{start:n-t/2,end:n+t/2}:e<r||e>i?{start:n-t,end:n}:{start:n,end:n+t}}function _re(e,n,t,r,i){const o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t));let l=0,u=0;r.start<n.l?(l=(n.l-r.start)/o,e.l=Math.min(e.l,n.l-l)):r.end>n.r&&(l=(r.end-n.r)/o,e.r=Math.max(e.r,n.r+l)),i.start<n.t?(u=(n.t-i.start)/s,e.t=Math.min(e.t,n.t-u)):i.end>n.b&&(u=(i.end-n.b)/s,e.b=Math.max(e.b,n.b+u))}function yre(e,n,t){const r=e.drawingArea,{extra:i,additionalAngle:o,padding:s,size:l}=t,u=e.getPointPosition(n,r+i+s,o),h=Math.round(sI(Ci(u.angle+fr))),g=function wre(e,n,t){return 90===t||270===t?e-=n/2:(t>270||t<90)&&(e-=n),e}(u.y,l.h,h),y=function Cre(e){return 0===e||180===e?"center":e<180?"left":"right"}(h),b=function Ere(e,n,t){return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(u.x,l.w,y);return{visible:!0,x:u.x,y:g,textAlign:y,left:b,top:g,right:b+l.w,bottom:g+l.h}}function vre(e,n){if(!n)return!0;const{left:t,top:r,right:i,bottom:o}=e;return!(Bc({x:t,y:r},n)||Bc({x:t,y:o},n)||Bc({x:i,y:r},n)||Bc({x:i,y:o},n))}function Dre(e,n,t){const{left:r,top:i,right:o,bottom:s}=t,{backdropColor:l}=n;if(!Ct(l)){const u=Hh(n.borderRadius),h=wi(n.backdropPadding);e.fillStyle=l;const g=r-h.left,y=i-h.top,b=o-r+h.width,C=s-i+h.height;Object.values(u).some(w=>0!==w)?(e.beginPath(),p_(e,{x:g,y,w:b,h:C,radius:u}),e.fill()):e.fillRect(g,y,b,C)}}function v2(e,n,t,r){const{ctx:i}=e;if(t)i.arc(e.xCenter,e.yCenter,n,0,In);else{let o=e.getPointPosition(0,n);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=e.getPointPosition(s,n),i.lineTo(o.x,o.y)}}const Jb={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_o=Object.keys(Jb);function b2(e,n){return e-n}function C2(e,n){if(Ct(n))return null;const t=e._adapter,{parser:r,round:i,isoWeekday:o}=e._parseOpts;let s=n;return"function"==typeof r&&(s=r(s)),er(s)||(s="string"==typeof r?t.parse(s,r):t.parse(s)),null===s?null:(i&&(s="week"!==i||!xp(o)&&!0!==o?t.startOf(s,i):t.startOf(s,"isoWeek",o)),+s)}function E2(e,n,t,r){const i=_o.length;for(let o=_o.indexOf(e);o<i-1;++o){const s=Jb[_o[o]];if(s.common&&Math.ceil((t-n)/((s.steps?s.steps:Number.MAX_SAFE_INTEGER)*s.size))<=r)return _o[o]}return _o[i-1]}function w2(e,n,t){if(t){if(t.length){const{lo:r,hi:i}=lI(t,n);e[t[r]>=n?t[r]:t[i]]=!0}}else e[n]=!0}function D2(e,n,t){const r=[],i={},o=n.length;let s,l;for(s=0;s<o;++s)l=n[s],i[l]=s,r.push({value:l,major:!1});return 0!==o&&t?function Pre(e,n,t,r){const i=e._adapter,o=+i.startOf(n[0].value,r),s=n[n.length-1].value;let l,u;for(l=o;l<=s;l=+i.add(l,1,r))u=t[l],u>=0&&(n[u].major=!0);return n}(e,r,i,t):r}let HI=(()=>class e extends qh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const i=t.time||(t.time={}),o=this._adapter=new Ree__date(t.adapters.date);o.init(r),a_(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return void 0===t?null:C2(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:o,max:s,minDefined:l,maxDefined:u}=this.getUserBounds();function h(g){!l&&!isNaN(g.min)&&(o=Math.min(o,g.min)),!u&&!isNaN(g.max)&&(s=Math.max(s,g.max))}(!l||!u)&&(h(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&h(this.getMinMax(!1))),o=er(o)&&!isNaN(o)?o:+r.startOf(Date.now(),i),s=er(s)&&!isNaN(s)?s:+r.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,o="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const s=this.min,u=function JX(e,n,t){let r=0,i=e.length;for(;r<i&&e[r]<n;)r++;for(;i>r&&e[i-1]>t;)i--;return r>0||i<e.length?e.slice(r,i):e}(o,s,this.max);return this._unit=r.unit||(i.autoSkip?E2(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):function Are(e,n,t,r,i){for(let o=_o.length-1;o>=_o.indexOf(t);o--){const s=_o[o];if(Jb[s].common&&e._adapter.diff(i,r,s)>=n-1)return s}return _o[t?_o.indexOf(t):0]}(this,u.length,r.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function xre(e){for(let n=_o.indexOf(e)+1,t=_o.length;n<t;++n)if(Jb[_o[n]].common)return _o[n]}(this._unit):void 0,this.initOffsets(o),t.reverse&&u.reverse(),D2(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let o,s,r=0,i=0;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),r=1===t.length?1-o:(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),i=1===t.length?s:(s-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;r=Kr(r,0,l),i=Kr(i,0,l),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,o=this.options,s=o.time,l=s.unit||E2(s.minUnit,r,i,this._getLabelCapacity(r)),u=lt(o.ticks.stepSize,1),h="week"===l&&s.isoWeekday,g=xp(h)||!0===h,y={};let C,w,b=r;if(g&&(b=+t.startOf(b,"isoWeek",h)),b=+t.startOf(b,g?"day":l),t.diff(i,r,l)>1e5*u)throw new Error(r+" and "+i+" are too far apart with stepSize of "+u+" "+l);const D="data"===o.ticks.source&&this.getDataTimestamps();for(C=b,w=0;C<i;C=+t.add(C,u,l),w++)w2(y,C,D);return(C===i||"ticks"===o.bounds||1===w)&&w2(y,C,D),Object.keys(y).sort(b2).map(S=>+S)}getLabelForValue(t){const i=this.options.time;return this._adapter.format(t,i.tooltipFormat?i.tooltipFormat:i.displayFormats.datetime)}format(t,r){return this._adapter.format(t,r||this.options.time.displayFormats[this._unit])}_tickFormatFunction(t,r,i,o){const s=this.options,l=s.ticks.callback;if(l)return yn(l,[t,r,i],this);const u=s.time.displayFormats,h=this._unit,g=this._majorUnit,b=g&&u[g],C=i[r];return this._adapter.format(t,o||(g&&b&&C&&C.major?b:h&&u[h]))}generateTickLabels(t){let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,o=ba(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(o),l=Math.sin(o),u=this._resolveTickFontOptions(0).size;return{w:i*s+u*l,h:i*l+u*s}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,o=i[r.unit]||i.millisecond,s=this._tickFormatFunction(t,0,D2(this,[t],this._majorUnit),o),l=this._getLabelSize(s),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let r,i,t=this._cache.data||[];if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,i=o.length;r<i;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const o=this.getLabels();for(r=0,i=o.length;r<i;++r)t.push(C2(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return EF(t.sort(b2))}})();function eC(e,n,t){let o,s,l,u,r=0,i=e.length-1;t?(n>=e[r].pos&&n<=e[i].pos&&({lo:r,hi:i}=Vc(e,"pos",n)),({pos:o,time:l}=e[r]),({pos:s,time:u}=e[i])):(n>=e[r].time&&n<=e[i].time&&({lo:r,hi:i}=Vc(e,"time",n)),({time:o,pos:l}=e[r]),({time:s,pos:u}=e[i]));const h=s-o;return h?l+(u-l)*(n-o)/h:l}RI.register(Pee,une,ore,Object.freeze({__proto__:null,CategoryScale:cre,LinearScale:class dre extends Xb{static id="linear";static defaults={ticks:{callback:Pb.formatters.numeric}};determineDataLimits(){const{min:n,max:t}=this.getMinMax(!0);this.min=er(n)?n:0,this.max=er(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const n=this.isHorizontal(),t=n?this.width:this.height,r=ba(this.options.ticks.minRotation),i=(n?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(n){return null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}},LogarithmicScale:class pre extends qh{static id="logarithmic";static defaults={ticks:{callback:Pb.formatters.logarithmic,major:{enabled:!0}}};constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,t){const r=Xb.prototype.parse.apply(this,[n,t]);if(0!==r)return er(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:n,max:t}=this.getMinMax(!0);this.min=er(n)?Math.max(0,n):null,this.max=er(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!er(this._userMin)&&(this.min=n===Kh(this.min,0)?Kh(this.min,-1):Kh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:n,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const o=l=>r=n?r:l,s=l=>i=t?i:l;r===i&&(r<=0?(o(1),s(10)):(o(Kh(r,-1)),s(Kh(i,1)))),r<=0&&o(Kh(i,-1)),i<=0&&s(Kh(r,1)),this.min=r,this.max=i}buildTicks(){const n=this.options,r=function fre(e,{min:n,max:t}){n=ts(e.min,n);const r=[],i=I_(n);let o=function hre(e,n){let r=I_(n-e);for(;_2(e,n,r)>10;)r++;for(;_2(e,n,r)<10;)r--;return Math.min(r,I_(e))}(n,t),s=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),u=i>o?Math.pow(10,i):0,h=Math.round((n-u)*s)/s,g=Math.floor((n-u)/l/10)*l*10;let y=Math.floor((h-g)/Math.pow(10,o)),b=ts(e.min,Math.round((u+g+y*Math.pow(10,o))*s)/s);for(;b<t;)r.push({value:b,major:m2(b),significand:y}),y>=10?y=y<15?15:20:y++,y>=20&&(o++,y=2,s=o>=0?1:s),b=Math.round((u+g+y*Math.pow(10,o))*s)/s;const C=ts(e.max,b);return r.push({value:C,major:m2(C),significand:y}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===n.bounds&&_F(r,this,"value"),n.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(n){return void 0===n?"0":h_(n,this.chart.options.locale,this.options.ticks.format)}configure(){const n=this.min;super.configure(),this._startValue=cd(n),this._valueRange=cd(this.max)-cd(n)}getPixelForValue(n){return(void 0===n||0===n)&&(n=this.min),null===n||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(cd(n)-this._startValue)/this._valueRange)}getValueForPixel(n){const t=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+t*this._valueRange)}},RadialLinearScale:class Mre extends Xb{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Pb.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:n=>n,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const n=this._padding=wi(UI(this.options)/2),t=this.width=this.maxWidth-n.width,r=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+t/2+n.left),this.yCenter=Math.floor(this.top+r/2+n.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:n,max:t}=this.getMinMax(!1);this.min=er(n)&&!isNaN(n)?n:0,this.max=er(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/UI(this.options))}generateTickLabels(n){Xb.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((t,r)=>{const i=yn(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const n=this.options;n.display&&n.pointLabels.display?function mre(e){const n={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},t=Object.assign({},n),r=[],i=[],o=e._pointLabels.length,s=e.options.pointLabels,l=s.centerPointLabels?Ot/o:0;for(let u=0;u<o;u++){const h=s.setContext(e.getPointLabelContext(u));i[u]=h.padding;const g=e.getPointPosition(u,e.drawingArea+i[u],l),y=Or(h.font),b=gre(e.ctx,y,e._pointLabels[u]);r[u]=b;const C=Ci(e.getIndexAngle(u)+l),w=Math.round(sI(C));_re(t,n,C,y2(w,g.x,b.w,0,180),y2(w,g.y,b.h,90,270))}e.setCenterPoint(n.l-t.l,t.r-n.r,n.t-t.t,t.b-n.b),e._pointLabelItems=function bre(e,n,t){const r=[],i=e._pointLabels.length,o=e.options,{centerPointLabels:s,display:l}=o.pointLabels,u={extra:UI(o)/2,additionalAngle:s?Ot/i:0};let h;for(let g=0;g<i;g++){u.padding=t[g],u.size=n[g];const y=yre(e,g,u);r.push(y),"auto"===l&&(y.visible=vre(y,h),y.visible&&(h=y))}return r}(e,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,t,r,i){this.xCenter+=Math.floor((n-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,t,r,i))}getIndexAngle(n){return Ci(n*(In/(this._pointLabels.length||1))+ba(this.options.startAngle||0))}getDistanceFromCenterForValue(n){if(Ct(n))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*t:(n-this.min)*t}getValueForDistanceFromCenter(n){if(Ct(n))return NaN;const t=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(n){const t=this._pointLabels||[];if(n>=0&&n<t.length){const r=t[n];return function Tre(e,n,t){return ud(e,{label:t,index:n,type:"pointLabel"})}(this.getContext(),n,r)}}getPointPosition(n,t,r=0){const i=this.getIndexAngle(n)-fr+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(n,t){return this.getPointPosition(n,this.getDistanceFromCenterForValue(t))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){const{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[n];return{left:t,top:r,right:i,bottom:o}}drawBackground(){const{backgroundColor:n,grid:{circular:t}}=this.options;if(n){const r=this.ctx;r.save(),r.beginPath(),v2(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=n,r.fill(),r.restore()}}drawGrid(){const n=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length;let l,u,h;if(t.pointLabels.display&&function Ire(e,n){const{ctx:t,options:{pointLabels:r}}=e;for(let i=n-1;i>=0;i--){const o=e._pointLabelItems[i];if(!o.visible)continue;const s=r.setContext(e.getPointLabelContext(i));Dre(t,s,o);const l=Or(s.font),{x:u,y:h,textAlign:g}=o;Uh(t,e._pointLabels[i],u,h+l.lineHeight/2,l,{color:s.color,textAlign:g,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((g,y)=>{if(0!==y||0===y&&this.min<0){u=this.getDistanceFromCenterForValue(g.value);const b=this.getContext(y),C=i.setContext(b),w=o.setContext(b);!function Sre(e,n,t,r,i){const o=e.ctx,s=n.circular,{color:l,lineWidth:u}=n;!s&&!r||!l||!u||t<0||(o.save(),o.strokeStyle=l,o.lineWidth=u,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),v2(e,t,s,r),o.closePath(),o.stroke(),o.restore())}(this,C,u,s,w)}}),r.display){for(n.save(),l=s-1;l>=0;l--){const g=r.setContext(this.getPointLabelContext(l)),{color:y,lineWidth:b}=g;!b||!y||(n.lineWidth=b,n.strokeStyle=y,n.setLineDash(g.borderDash),n.lineDashOffset=g.borderDashOffset,u=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),h=this.getPointPosition(l,u),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(h.x,h.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){const n=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let o,s;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(i),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((l,u)=>{if(0===u&&this.min>=0&&!t.reverse)return;const h=r.setContext(this.getContext(u)),g=Or(h.font);if(o=this.getDistanceFromCenterForValue(this.ticks[u].value),h.showLabelBackdrop){n.font=g.string,s=n.measureText(l.label).width,n.fillStyle=h.backdropColor;const y=wi(h.backdropPadding);n.fillRect(-s/2-y.left,-o-g.size/2-y.top,s+y.width,g.size+y.height)}Uh(n,l.label,0,-o,g,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),n.restore()}drawTitle(){}},TimeScale:HI,TimeSeriesScale:class Rre extends HI{static id="timeseries";static defaults=HI.defaults;constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const n=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(n);this._minPos=eC(t,this.min),this._tableRange=eC(t,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){const{min:t,max:r}=this,i=[],o=[];let s,l,u,h,g;for(s=0,l=n.length;s<l;++s)h=n[s],h>=t&&h<=r&&i.push(h);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,l=i.length;s<l;++s)g=i[s+1],u=i[s-1],h=i[s],Math.round((g+u)/2)!==h&&o.push({time:h,pos:s/(l-1)});return o}_generate(){const n=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(n)||!r.length)&&r.splice(0,0,n),(!r.includes(t)||1===r.length)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return n=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,n=this._cache.all=n,n}getDecimalForValue(n){return(eC(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){const t=this._offsets,r=this.getDecimalForPixel(n)/t.factor-t.end;return eC(this._table,r*this._tableRange+this._minPos,!0)}}}));const $I=RI,Ore=["ventasChart"],Fre=["dolarChart"],Lre=["productosChart"];function Vre(e,n){if(1&e&&(B(0,"div",10),q(1),j()),2&e){const t=ot();ne(),mn(" ",t.errorDolar,"\n")}}(function E5(e,n){return oW({rootComponent:e,...ik(n)})})(WY,{providers:[function T9(e,...n){return Mr([{provide:Lm,multi:!0,useValue:e},[],{provide:Mh,useFactory:JN,deps:[ri]},{provide:zf,multi:!0,useFactory:eO},n.map(t=>t.\u0275providers)])}([{path:"",redirectTo:"productos",pathMatch:"full"},{path:"productos",component:ZQ},{path:"alta-producto",component:kZ},{path:"editar-producto/:id",component:OZ},{path:"carrito",component:PZ},{path:"finalizar-compra",component:qZ},{path:"ingresar-producto",component:XZ},{path:"registro",component:rX},{path:"facturas",component:$Z},{path:"login",component:lX},{path:"chat",component:gX},{path:"estadisticas",component:(()=>{class e{constructor(t,r){this.facturaSrv=t,this.http=r,this.chartVentas=null,this.chartDolar=null,this.chartProductos=null,this.periodo="dia",this.rangoDolarDias=7,this.errorDolar=""}ngAfterViewInit(){this.renderVentas(),this.cargarDolar(7)}actualizarAgrupacion(t){this.periodo=t,this.renderVentas()}renderVentas(){this.facturaSrv.facturas$().subscribe(t=>{const r={};t.forEach(s=>{const l=new Date(s.fechaISO);let u;switch(this.periodo){case"semana":{const h=new Date(l);h.setDate(l.getDate()-l.getDay()),u=h.toISOString().slice(0,10);break}case"mes":u=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`;break;default:u=l.toISOString().slice(0,10)}r[u]=(r[u]||0)+1});const i=Object.keys(r).sort(),o=i.map(s=>r[s]);this.chartVentas&&this.chartVentas.destroy(),this.chartVentas=new $I(this.ventasChartRef.nativeElement,{type:"bar",data:{labels:i,datasets:[{label:`Ventas por ${this.periodo}`,data:o,backgroundColor:"#007bff"}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!0}}}}),this.graficarProductosMasVendidos(t)})}cargarDolar(t){var r=this;return(0,P.A)(function*(){r.rangoDolarDias=t,r.errorDolar="";try{const i=yield r.http.get("https://dolarapi.com/v1/dolares/oficial").toPromise(),o=Number(i?.venta)||0,{labels:s,valores:l}=r.generarSerieHistorica(o,t);r.dibujarGraficoDolar(s,l,t)}catch(i){console.error("Error al obtener DolarApi:",i),r.errorDolar="No se pudo obtener la cotizaci\xf3n. Intent\xe1 nuevamente.",r.dibujarGraficoDolar([],[],t)}})()}generarSerieHistorica(t,r){const i=[],o=[],s=new Date;let l=t>0?t:1200;for(let u=r-1;u>=0;u--){const h=new Date(s);h.setDate(s.getDate()-u);const g=(Math.random()-.5)*(.02*l);l=Math.max(1,l+g),i.push(h.toISOString().slice(0,10)),o.push(Number(l.toFixed(2)))}return{labels:i,valores:o}}dibujarGraficoDolar(t,r,i){this.chartDolar&&(this.chartDolar.destroy(),this.chartDolar=null),this.chartDolar=new $I(this.dolarChartRef.nativeElement,{type:"line",data:{labels:t,datasets:[{label:`USD/ARS \xfaltimos ${i} d\xedas`,data:r,borderColor:"#28a745",backgroundColor:"rgba(40, 167, 69, 0.15)",fill:!0,tension:.3,pointRadius:2}]},options:{responsive:!0,plugins:{legend:{display:!0}},scales:{y:{beginAtZero:!1}}}})}graficarProductosMasVendidos(t){const r={};t.forEach(g=>{(g.items?Object.values(g.items):[]).forEach(b=>{const C=b?.producto_nombre&&String(b.producto_nombre).trim()?String(b.producto_nombre).trim():"Producto sin nombre",w=Number(b?.cantidad)||0;w>0&&(r[C]=(r[C]||0)+w)})});const i=Object.entries(r).sort((g,y)=>y[1]-g[1]);if(!i.length)return void(this.chartProductos&&(this.chartProductos.destroy(),this.chartProductos=null));const o=i.slice(0,6),s=o.map(([g])=>g),l=o.map(([,g])=>g),h=["#4e79a7","#f28e2b","#e15759","#76b7b2","#59a14f","#edc949"].slice(0,l.length);this.chartProductos&&this.chartProductos.destroy(),this.chartProductos=new $I(this.productosChartRef.nativeElement,{type:"doughnut",data:{labels:s,datasets:[{label:"Unidades vendidas",data:l,backgroundColor:h,borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:g=>{const y=g.parsed,b=g.dataset.data.reduce((w,D)=>w+D,0),C=b?(y/b*100).toFixed(1):"0.0";return` ${g.label}: ${y} (${C}%)`}}}}}})}static{this.\u0275fac=function(r){return new(r||e)(J(wb),J(r_))}}static{this.\u0275cmp=_i({type:e,selectors:[["app-estadisticas"]],viewQuery:function(r,i){if(1&r&&(om(Ore,5),om(Fre,5),om(Lre,5)),2&r){let o;rp(o=ip())&&(i.ventasChartRef=o.first),rp(o=ip())&&(i.dolarChartRef=o.first),rp(o=ip())&&(i.productosChartRef=o.first)}},decls:27,vars:9,consts:[["ventasChart",""],["dolarChart",""],["productosChart",""],[1,"container","mt-4"],[1,"titulo-grafico"],[1,"filtro-group"],[1,"filtro-btn",3,"click"],[1,"chart-container"],[1,"titulo-grafico","mt-5"],["class","text-danger mt-2","style","text-align:center;",4,"ngIf"],[1,"text-danger","mt-2",2,"text-align","center"]],template:function(r,i){if(1&r){const o=Rr();B(0,"div",3)(1,"h2",4),q(2,"Estad\xedsticas de Ventas"),j(),B(3,"div",5)(4,"button",6),ht("click",function(){return rt(o),dt(i.actualizarAgrupacion("dia"))}),q(5," Por D\xeda "),j(),B(6,"button",6),ht("click",function(){return rt(o),dt(i.actualizarAgrupacion("semana"))}),q(7," Por Semana "),j(),B(8,"button",6),ht("click",function(){return rt(o),dt(i.actualizarAgrupacion("mes"))}),q(9," Por Mes "),j()(),B(10,"div",7),on(11,"canvas",null,0),j()(),B(13,"h2",8),q(14,"Evoluci\xf3n del d\xf3lar (USD/ARS)"),j(),B(15,"div",5)(16,"button",6),ht("click",function(){return rt(o),dt(i.cargarDolar(7))}),q(17,"1 semana"),j()(),B(18,"div",7),on(19,"canvas",null,1),j(),yt(21,Vre,2,1,"div",9),B(22,"h2",8),q(23,"Productos m\xe1s vendidos"),j(),B(24,"div",7),on(25,"canvas",null,2),j()}2&r&&(ne(4),la("activo","dia"===i.periodo),ne(2),la("activo","semana"===i.periodo),ne(2),la("activo","mes"===i.periodo),ne(8),la("activo",7===i.rangoDolarDias),ne(5),Pe("ngIf",i.errorDolar))},dependencies:[Zo,Qo,Vv,JD],styles:[".container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:0 20px;text-align:center}.titulo-grafico[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:20px}.filtro-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-bottom:30px}.filtro-btn[_ngcontent-%COMP%]{background-color:#f0f0f0;border:none;border-radius:25px;padding:10px 18px;font-size:1rem;font-weight:500;color:#333;cursor:pointer;transition:.2s ease-in-out}.filtro-btn[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff;transform:scale(1.05)}.filtro-btn.activo[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.chart-container[_ngcontent-%COMP%]{width:100%;max-width:720px;margin:0 auto;background:#f9f9f9;padding:25px;border-radius:16px;box-shadow:0 8px 20px #00000014}canvas[_ngcontent-%COMP%]{max-width:100%}.chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{height:360px!important}"]})}}return e})()}]),function xY(){return ji("NgEagerAnimations"),[...AY]}(),nF()]}).catch(e=>console.error(e))},467:(Ca,Fr,Fe)=>{function P(Q,N,Tn,bt,Ie,Zt,ln){try{var re=Q[Zt](ln),le=re.value}catch(Me){return void Tn(Me)}re.done?N(le):Promise.resolve(le).then(bt,Ie)}function me(Q){return function(){var N=this,Tn=arguments;return new Promise(function(bt,Ie){var Zt=Q.apply(N,Tn);function ln(le){P(Zt,bt,Ie,ln,re,"next",le)}function re(le){P(Zt,bt,Ie,ln,re,"throw",le)}ln(void 0)})}}Fe.d(Fr,{A:()=>me})},541:(Ca,Fr,Fe)=>{Fe.r(Fr),Fe.d(Fr,{DataSnapshot:()=>jo,Database:()=>uc,OnDisconnect:()=>Tu,QueryConstraint:()=>ni,TransactionResult:()=>Wo,_QueryImpl:()=>lr,_QueryParams:()=>et,_ReferenceImpl:()=>xr,_TEST_ACCESS_forceRestClient:()=>_,_TEST_ACCESS_hijackHash:()=>pn,_initStandalone:()=>p,_repoManagerDatabaseFromApp:()=>oh,_setSDKVersion:()=>ln,_validatePathString:()=>Ka,_validateWritablePath:()=>En,child:()=>Uo,connectDatabaseEmulator:()=>Fu,enableLogging:()=>Lu,endAt:()=>ig,endBefore:()=>ac,equalTo:()=>Ru,forceLongPolling:()=>hc,forceWebSockets:()=>dc,get:()=>ff,getDatabase:()=>fc,goOffline:()=>sh,goOnline:()=>cg,increment:()=>ah,limitToFirst:()=>R_,limitToLast:()=>th,off:()=>Jd,onChildAdded:()=>rg,onChildChanged:()=>Xd,onChildMoved:()=>Au,onChildRemoved:()=>tl,onDisconnect:()=>Qd,onValue:()=>ti,orderByChild:()=>gf,orderByKey:()=>mf,orderByPriority:()=>rl,orderByValue:()=>lc,push:()=>Qn,query:()=>N_,ref:()=>Yd,refFromURL:()=>Mu,remove:()=>Ho,runTransaction:()=>na,serverTimestamp:()=>yf,set:()=>At,setPriority:()=>Zd,setWithPriority:()=>tg,startAfter:()=>sg,startAt:()=>eh,update:()=>ng});var P=Fe(467),me=Fe(807),Q=Fe(958),N=Fe(882),Tn=Fe(317);const bt="@firebase/database";let Zt="";function ln(a){Zt=a}class re{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,d){null==d?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,N.As)(d))}get(c){const d=this.domStorage_.getItem(this.prefixedName_(c));return null==d?null:(0,N.$L)(d)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class le{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,d){null==d?delete this.cache_[c]:this.cache_[c]=d}get(c){return(0,N.gR)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const Me=function(a){try{if(typeof window<"u"&&typeof window[a]<"u"){const c=window[a];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new re(c)}}catch{}return new le},st=Me("localStorage"),Et=Me("sessionStorage"),Vn=new Tn.Vy("@firebase/database"),ii=function(){let a=1;return function(){return a++}}(),Ki=function(a){const c=(0,N.kj)(a),d=new N.gz;d.update(c);const f=d.digest();return N.K3.encodeByteArray(f)},Ht=function(...a){let c="";for(let d=0;d<a.length;d++){const f=a[d];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?c+=Ht.apply(null,f):c+="object"==typeof f?(0,N.As)(f):f,c+=" "}return c};let tr=null,Ir=!0;const Gn=function(a,c){(0,N.vA)(!c||!0===a||!1===a,"Can't turn on custom loggers persistently."),!0===a?(Vn.logLevel=Tn.$b.VERBOSE,tr=Vn.log.bind(Vn),c&&Et.set("logging_enabled",!0)):"function"==typeof a?tr=a:(tr=null,Et.remove("logging_enabled"))},Ft=function(...a){if(!0===Ir&&(Ir=!1,null===tr&&!0===Et.get("logging_enabled")&&Gn(!0)),tr){const c=Ht.apply(null,a);tr(c)}},Yi=function(a){return function(...c){Ft(a,...c)}},vo=function(...a){const c="FIREBASE INTERNAL ERROR: "+Ht(...a);Vn.error(c)},Xt=function(...a){const c=`FIREBASE FATAL ERROR: ${Ht(...a)}`;throw Vn.error(c),new Error(c)},qt=function(...a){const c="FIREBASE WARNING: "+Ht(...a);Vn.warn(c)},oi=function(a){return"number"==typeof a&&(a!=a||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)},cn="[MIN_NAME]",Jt="[MAX_NAME]",Mn=function(a,c){if(a===c)return 0;if(a===cn||c===Jt)return-1;if(c===cn||a===Jt)return 1;{const d=Il(a),f=Il(c);return null!==d?null!==f?d-f==0?a.length-c.length:d-f:-1:null!==f?1:a<c?-1:1}},Lr=function(a,c){return a===c?0:a<c?-1:1},bo=function(a,c){if(c&&a in c)return c[a];throw new Error("Missing required key ("+a+") in object: "+(0,N.As)(c))},si=function(a){if("object"!=typeof a||null===a)return(0,N.As)(a);const c=[];for(const f in a)c.push(f);c.sort();let d="{";for(let f=0;f<c.length;f++)0!==f&&(d+=","),d+=(0,N.As)(c[f]),d+=":",d+=si(a[c[f]]);return d+="}",d},As=function(a,c){const d=a.length;if(d<=c)return[a];const f=[];for(let m=0;m<d;m+=c)f.push(a.substring(m,m+c>d?d:m+c));return f};function en(a,c){for(const d in a)a.hasOwnProperty(d)&&c(d,a[d])}const Co=function(a){(0,N.vA)(!oi(a),"Invalid JSON number");const f=1023;let m,v,E,I,T;0===a?(v=0,E=0,m=1/a==-1/0?1:0):(m=a<0,(a=Math.abs(a))>=Math.pow(2,1-f)?(I=Math.min(Math.floor(Math.log(a)/Math.LN2),f),v=I+f,E=Math.round(a*Math.pow(2,52-I)-Math.pow(2,52))):(v=0,E=Math.round(a/Math.pow(2,-1074))));const M=[];for(T=52;T;T-=1)M.push(E%2?1:0),E=Math.floor(E/2);for(T=11;T;T-=1)M.push(v%2?1:0),v=Math.floor(v/2);M.push(m?1:0),M.reverse();const V=M.join("");let U="";for(T=0;T<64;T+=8){let Y=parseInt(V.substr(T,8),2).toString(16);1===Y.length&&(Y="0"+Y),U+=Y}return U.toLowerCase()},Ps=new RegExp("^-?(0*)\\d{1,10}$"),Il=function(a){if(Ps.test(a)){const c=Number(a);if(c>=-2147483648&&c<=2147483647)return c}return null},Ti=function(a){try{a()}catch(c){setTimeout(()=>{throw qt("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},rs=function(a,c){const d=setTimeout(a,c);return"number"==typeof d&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(d):"object"==typeof d&&d.unref&&d.unref(),d};class wa{constructor(c,d){this.appCheckProvider=d,this.appName=c.name,(0,me.xZ)(c)&&c.settings.appCheckToken&&(this.serverAppAppCheckToken=c.settings.appCheckToken),this.appCheck=d?.getImmediate({optional:!0}),this.appCheck||d?.get().then(f=>this.appCheck=f)}getToken(c){if(this.serverAppAppCheckToken){if(c)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(c):new Promise((d,f)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(d,f):d(null)},0)})}addTokenChangeListener(c){var d;null===(d=this.appCheckProvider)||void 0===d||d.get().then(f=>f.addTokenListener(c))}notifyForInvalidToken(){qt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Gc{constructor(c,d,f){this.appName_=c,this.firebaseOptions_=d,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(m=>this.auth_=m)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(d=>d&&"auth/token-not-initialized"===d.code?(Ft("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,f)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(d,f):d(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(d=>d.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(d=>d.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qt(c)}}let Eo=(()=>{class a{constructor(d){this.accessToken=d}getToken(d){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(d){d(this.accessToken)}removeTokenChangeListener(d){}notifyForInvalidToken(){}}return a.OWNER="owner",a})();const An=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gr="websocket",un="long_polling";class ie{constructor(c,d,f,m,v=!1,E="",I=!1,T=!1,M=null){this.secure=d,this.namespace=f,this.webSocketOnly=m,this.nodeAdmin=v,this.persistenceKey=E,this.includeNamespaceInQueryParams=I,this.isUsingEmulator=T,this.emulatorOptions=M,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=st.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&st.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Pn(a,c,d){let f;if((0,N.vA)("string"==typeof c,"typeof type must == string"),(0,N.vA)("object"==typeof d,"typeof params must == object"),c===gr)f=(a.secure?"wss://":"ws://")+a.internalHost+"/.ws?";else{if(c!==un)throw new Error("Unknown connection type: "+c);f=(a.secure?"https://":"http://")+a.internalHost+"/.lp?"}(function xn(a){return a.host!==a.internalHost||a.isCustomHost()||a.includeNamespaceInQueryParams})(a)&&(d.ns=a.namespace);const m=[];return en(d,(v,E)=>{m.push(v+"="+E)}),f+m.join("&")}class rr{constructor(){this.counters_={}}incrementCounter(c,d=1){(0,N.gR)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=d}get(){return(0,N.A4)(this.counters_)}}const li={},Qr={};function Ai(a){const c=a.toString();return li[c]||(li[c]=new rr),li[c]}class Qi{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,d){this.closeAfterResponse=c,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,d){for(this.pendingResponses[c]=d;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let m=0;m<f.length;++m)f[m]&&Ti(()=>{this.onMessage_(f[m])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Vr{constructor(c,d,f,m,v,E,I){this.connId=c,this.repoInfo=d,this.applicationId=f,this.appCheckToken=m,this.authToken=v,this.transportSessionId=E,this.lastSessionId=I,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yi(c),this.stats_=Ai(d),this.urlFn=T=>(this.appCheckToken&&(T.ac=this.appCheckToken),Pn(d,un,T))}open(c,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new Qi(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(a){if((0,N.$g)()||"complete"===document.readyState)a();else{let c=!1;const d=function(){document.body?c||(c=!0,a()):setTimeout(d,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&d()}),window.attachEvent("onload",d))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rt((...v)=>{const[E,I,T,M,V]=v;if(this.incrementIncomingBytes_(v),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===E)this.id=I,this.password=T;else{if("close"!==E)throw new Error("Unrecognized command received: "+E);I?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(I,()=>{this.onClosed_()})):this.onClosed_()}},(...v)=>{const[E,I]=v;this.incrementIncomingBytes_(v),this.myPacketOrderer.handleResponse(E,I)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&An.test(location.hostname)&&(f.r="f");const m=this.urlFn(f);this.log_("Connecting via long-poll to "+m),this.scriptTagHolder.addTag(m,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vr.forceAllow_=!0}static forceDisallow(){Vr.forceDisallow_=!0}static isAvailable(){return!((0,N.$g)()||!Vr.forceAllow_&&(Vr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const d=(0,N.As)(c);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const f=(0,N.KA)(d),m=As(f,1840);for(let v=0;v<m.length;v++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,m.length,m[v]),this.curSegmentNum++}addDisconnectPingFrame(c,d){if((0,N.$g)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=c,f.pw=d,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const d=(0,N.As)(c).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class Rt{constructor(c,d,f,m){if(this.onDisconnect=f,this.urlFn=m,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.$g)())this.commandCB=c,this.onMessageCB=d;else{this.uniqueCallbackIdentifier=ii(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=d,this.myIFrame=Rt.createIFrame_();let v="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(v='<script>document.domain="'+document.domain+'";<\/script>');const E="<html><body>"+v+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(E),this.myIFrame.doc.close()}catch(I){Ft("frame writing exception"),I.stack&&Ft(I.stack),Ft(I)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||Ft("No IE domain setting required")}catch{const f=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,d){for(this.myID=c,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let d=this.urlFn(c),f="",m=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const E=this.pendingSegs.shift();f=f+"&seg"+m+"="+E.seg+"&ts"+m+"="+E.ts+"&d"+m+"="+E.d,m++}return d+=f,this.addLongPollTag_(d,this.currentSerial),!0}return!1}enqueueSegment(c,d,f){this.pendingSegs.push({seg:c,ts:d,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(c,d){this.outstandingRequests.add(d);const f=()=>{this.outstandingRequests.delete(d),this.newRequest_()},m=setTimeout(f,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(m),f()})}addTag(c,d){(0,N.$g)()?this.doNodeLongPoll(c,d):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=c,f.onload=f.onreadystatechange=function(){const m=f.readyState;(!m||"loaded"===m||"complete"===m)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),d())},f.onerror=()=>{Ft("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch{}},Math.floor(1))}}let Ni=null;typeof MozWebSocket<"u"?Ni=MozWebSocket:typeof WebSocket<"u"&&(Ni=WebSocket);let Oi=(()=>{class a{constructor(d,f,m,v,E,I,T){this.connId=d,this.applicationId=m,this.appCheckToken=v,this.authToken=E,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yi(this.connId),this.stats_=Ai(f),this.connURL=a.connectionURL_(f,I,T,v,m),this.nodeAdmin=f.nodeAdmin}static connectionURL_(d,f,m,v,E){const I={v:"5"};return!(0,N.$g)()&&typeof location<"u"&&location.hostname&&An.test(location.hostname)&&(I.r="f"),f&&(I.s=f),m&&(I.ls=m),v&&(I.ac=v),E&&(I.p=E),Pn(d,gr,I)}open(d,f){this.onDisconnect=f,this.onMessage=d,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,st.set("previous_websocket_failure",!0);try{let m;if((0,N.$g)()){m={headers:{"User-Agent":`Firebase/5/${Zt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(m.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(m.headers["X-Firebase-AppCheck"]=this.appCheckToken);const E=process.env,I=0===this.connURL.indexOf("wss://")?E.HTTPS_PROXY||E.https_proxy:E.HTTP_PROXY||E.http_proxy;I&&(m.proxy={origin:I})}this.mySock=new Ni(this.connURL,[],m)}catch(m){this.log_("Error instantiating WebSocket.");const v=m.message||m.data;return v&&this.log_(v),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=m=>{this.handleIncomingFrame(m)},this.mySock.onerror=m=>{this.log_("WebSocket error.  Closing connection.");const v=m.message||m.data;v&&this.log_(v),this.onClosed_()}}start(){}static forceDisallow(){a.forceDisallow_=!0}static isAvailable(){let d=!1;if(typeof navigator<"u"&&navigator.userAgent){const m=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);m&&m.length>1&&parseFloat(m[1])<4.4&&(d=!0)}return!d&&null!==Ni&&!a.forceDisallow_}static previouslyFailed(){return st.isInMemoryStorage||!0===st.get("previous_websocket_failure")}markConnectionHealthy(){st.remove("previous_websocket_failure")}appendFrame_(d){if(this.frames.push(d),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const m=(0,N.$L)(f);this.onMessage(m)}}handleNewFrameCount_(d){this.totalFrames=d,this.frames=[]}extractFrameCount_(d){if((0,N.vA)(null===this.frames,"We already have a frame buffer"),d.length<=6){const f=Number(d);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),d}handleIncomingFrame(d){if(null===this.mySock)return;const f=d.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const m=this.extractFrameCount_(f);null!==m&&this.appendFrame_(m)}}send(d){this.resetKeepAlive();const f=(0,N.As)(d);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const m=As(f,16384);m.length>1&&this.sendString_(String(m.length));for(let v=0;v<m.length;v++)this.sendString_(m[v])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(d){try{this.mySock.send(d)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return a.responsesRequiredToBeHealthy=2,a.healthyTimeout=3e4,a})(),R=(()=>{class a{static get ALL_TRANSPORTS(){return[Vr,Oi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(d){this.initTransports_(d)}initTransports_(d){const f=Oi&&Oi.isAvailable();let m=f&&!Oi.previouslyFailed();if(d.webSocketOnly&&(f||qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),m=!0),m)this.transports_=[Oi];else{const v=this.transports_=[];for(const E of a.ALL_TRANSPORTS)E&&E.isAvailable()&&v.push(E);a.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return a.globalTransportInitialized_=!1,a})();class Z{constructor(c,d,f,m,v,E,I,T,M,V){this.id=c,this.repoInfo_=d,this.applicationId_=f,this.appCheckToken_=m,this.authToken_=v,this.onMessage_=E,this.onReady_=I,this.onDisconnect_=T,this.onKill_=M,this.lastSessionId=V,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yi("c:"+this.id+":"),this.transportManager_=new R(d),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,f)},Math.floor(0));const m=c.healthyTimeout||0;m>0&&(this.healthyTimeout_=rs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(m)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return d=>{c===this.conn_?this.onConnectionLost_(d):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return d=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(d):c===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const d=c.t;"a"===d?this.upgradeIfSecondaryHealthy_():"r"===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===d&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const d=bo("t",c),f=bo("d",c);if("c"===d)this.onSecondaryControl_(f);else{if("d"!==d)throw new Error("Unknown protocol layer: "+d);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const d=bo("t",c),f=bo("d",c);"c"===d?this.onControl_(f):"d"===d&&this.onDataMessage_(f)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const d=bo("t",c);if("d"in c){const f=c.d;if("h"===d){const m=Object.assign({},f);this.repoInfo_.isUsingEmulator&&(m.h=this.repoInfo_.host),this.onHandshake_(m)}else if("n"===d){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let m=0;m<this.pendingDataMessages.length;++m)this.onDataMessage_(this.pendingDataMessages[m]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===d?this.onConnectionShutdown_(f):"r"===d?this.onReset_(f):"e"===d?vo("Server Error: "+f):"o"===d?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vo("Unknown control packet command: "+d)}}onHandshake_(c){const d=c.ts,f=c.v,m=c.h;this.sessionId=c.s,this.repoInfo_.host=m,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),"5"!==f&&qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,f),rs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,d){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(st.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class de{put(c,d,f,m){}merge(c,d,f,m){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,d,f){}onDisconnectMerge(c,d,f){}onDisconnectCancel(c,d){}reportStats(c){}}class we{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,N.vA)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...d){if(Array.isArray(this.listeners_[c])){const f=[...this.listeners_[c]];for(let m=0;m<f.length;m++)f[m].callback.apply(f[m].context,d)}}on(c,d,f){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:d,context:f});const m=this.getInitialEvent(c);m&&d.apply(f,m)}off(c,d,f){this.validateEventType_(c);const m=this.listeners_[c]||[];for(let v=0;v<m.length;v++)if(m[v].callback===d&&(!f||f===m[v].context))return void m.splice(v,1)}validateEventType_(c){(0,N.vA)(this.allowedEvents_.find(d=>d===c),"Unknown event: "+c)}}class De extends we{static getInstance(){return new De}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,N.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(c){return(0,N.vA)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class Oe{constructor(c,d){if(void 0===d){this.pieces_=c.split("/");let f=0;for(let m=0;m<this.pieces_.length;m++)this.pieces_[m].length>0&&(this.pieces_[f]=this.pieces_[m],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=d}toString(){let c="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)""!==this.pieces_[d]&&(c+="/"+this.pieces_[d]);return c||"/"}}function We(){return new Oe("")}function Ue(a){return a.pieceNum_>=a.pieces_.length?null:a.pieces_[a.pieceNum_]}function Ji(a){return a.pieces_.length-a.pieceNum_}function $e(a){let c=a.pieceNum_;return c<a.pieces_.length&&c++,new Oe(a.pieces_,c)}function Kc(a){return a.pieceNum_<a.pieces_.length?a.pieces_[a.pieces_.length-1]:null}function _t(a,c=0){return a.pieces_.slice(a.pieceNum_+c)}function Ns(a){if(a.pieceNum_>=a.pieces_.length)return null;const c=[];for(let d=a.pieceNum_;d<a.pieces_.length-1;d++)c.push(a.pieces_[d]);return new Oe(c,0)}function He(a,c){const d=[];for(let f=a.pieceNum_;f<a.pieces_.length;f++)d.push(a.pieces_[f]);if(c instanceof Oe)for(let f=c.pieceNum_;f<c.pieces_.length;f++)d.push(c.pieces_[f]);else{const f=c.split("/");for(let m=0;m<f.length;m++)f[m].length>0&&d.push(f[m])}return new Oe(d,0)}function Be(a){return a.pieceNum_>=a.pieces_.length}function Tr(a,c){const d=Ue(a),f=Ue(c);if(null===d)return c;if(d===f)return Tr($e(a),$e(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+a+")")}function So(a,c){const d=_t(a,0),f=_t(c,0);for(let m=0;m<d.length&&m<f.length;m++){const v=Mn(d[m],f[m]);if(0!==v)return v}return d.length===f.length?0:d.length<f.length?-1:1}function Lt(a,c){if(Ji(a)!==Ji(c))return!1;for(let d=a.pieceNum_,f=c.pieceNum_;d<=a.pieces_.length;d++,f++)if(a.pieces_[d]!==c.pieces_[f])return!1;return!0}function Se(a,c){let d=a.pieceNum_,f=c.pieceNum_;if(Ji(a)>Ji(c))return!1;for(;d<a.pieces_.length;){if(a.pieces_[d]!==c.pieces_[f])return!1;++d,++f}return!0}class Os{constructor(c,d){this.errorPrefix_=d,this.parts_=_t(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,N.OE)(this.parts_[f]);gd(this)}}function gd(a){if(a.byteLength_>768)throw new Error(a.errorPrefix_+"has a key path longer than 768 bytes ("+a.byteLength_+").");if(a.parts_.length>32)throw new Error(a.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fs(a))}function Fs(a){return 0===a.parts_.length?"":"in property '"+a.parts_.join(".")+"'"}class eo extends we{static getInstance(){return new eo}constructor(){let c,d;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(d="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(d="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(d="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(d="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const f=!document[c];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}getInitialEvent(c){return(0,N.vA)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const Sl=1e3;let _d,Rn=(()=>{class a extends de{constructor(d,f,m,v,E,I,T,M){if(super(),this.repoInfo_=d,this.applicationId_=f,this.onDataUpdate_=m,this.onConnectStatus_=v,this.onServerInfoUpdate_=E,this.authTokenProvider_=I,this.appCheckTokenProvider_=T,this.authOverride_=M,this.id=a.nextPersistentConnectionId_++,this.log_=Yi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,M&&!(0,N.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eo.getInstance().on("visible",this.onVisible_,this),-1===d.host.indexOf("fblocal")&&De.getInstance().on("online",this.onOnline_,this)}sendRequest(d,f,m){const v=++this.requestNumber_,E={r:v,a:d,b:f};this.log_((0,N.As)(E)),(0,N.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(E),m&&(this.requestCBHash_[v]=m)}get(d){this.initConnection_();const f=new N.cY,v={action:"g",request:{p:d._path.toString(),q:d._queryObject},onComplete:I=>{const T=I.d;"ok"===I.s?f.resolve(T):f.reject(T)}};return this.outstandingGets_.push(v),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),f.promise}listen(d,f,m,v){this.initConnection_();const E=d._queryIdentifier,I=d._path.toString();this.log_("Listen called for "+I+" "+E),this.listens.has(I)||this.listens.set(I,new Map),(0,N.vA)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.vA)(!this.listens.get(I).has(E),"listen() called twice for same path/queryId.");const T={onComplete:v,hashFn:f,query:d,tag:m};this.listens.get(I).set(E,T),this.connected_&&this.sendListen_(T)}sendGet_(d){const f=this.outstandingGets_[d];this.sendRequest("g",f.request,m=>{delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(m)})}sendListen_(d){const f=d.query,m=f._path.toString(),v=f._queryIdentifier;this.log_("Listen on "+m+" for "+v);const E={p:m};d.tag&&(E.q=f._queryObject,E.t=d.tag),E.h=d.hashFn(),this.sendRequest("q",E,T=>{const M=T.d,V=T.s;a.warnOnListenWarnings_(M,f),(this.listens.get(m)&&this.listens.get(m).get(v))===d&&(this.log_("listen response",T),"ok"!==V&&this.removeListen_(m,v),d.onComplete&&d.onComplete(V,M))})}static warnOnListenWarnings_(d,f){if(d&&"object"==typeof d&&(0,N.gR)(d,"w")){const m=(0,N.yw)(d,"w");if(Array.isArray(m)&&~m.indexOf("no_index")){const v='".indexOn": "'+f._queryParams.getIndex().toString()+'"',E=f._path.toString();qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${v} at ${E} to your security rules for better performance.`)}}}refreshAuthToken(d){this.authToken_=d,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(d)}reduceReconnectDelayIfAdminCredential_(d){(d&&40===d.length||(0,N.qc)(d))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(d){this.appCheckToken_=d,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const d=this.authToken_,f=(0,N.Cv)(d)?"auth":"gauth",m={cred:d};null===this.authOverride_?m.noauth=!0:"object"==typeof this.authOverride_&&(m.authvar=this.authOverride_),this.sendRequest(f,m,v=>{const E=v.s,I=v.d||"error";this.authToken_===d&&("ok"===E?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(E,I))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},d=>{const f=d.s,m=d.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,m)})}unlisten(d,f){const m=d._path.toString(),v=d._queryIdentifier;this.log_("Unlisten called for "+m+" "+v),(0,N.vA)(d._queryParams.isDefault()||!d._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(m,v)&&this.connected_&&this.sendUnlisten_(m,v,d._queryObject,f)}sendUnlisten_(d,f,m,v){this.log_("Unlisten on "+d+" for "+f);const E={p:d};v&&(E.q=m,E.t=v),this.sendRequest("n",E)}onDisconnectPut(d,f,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",d,f,m):this.onDisconnectRequestQueue_.push({pathString:d,action:"o",data:f,onComplete:m})}onDisconnectMerge(d,f,m){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",d,f,m):this.onDisconnectRequestQueue_.push({pathString:d,action:"om",data:f,onComplete:m})}onDisconnectCancel(d,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",d,null,f):this.onDisconnectRequestQueue_.push({pathString:d,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(d,f,m,v){const E={p:f,d:m};this.log_("onDisconnect "+d,E),this.sendRequest(d,E,I=>{v&&setTimeout(()=>{v(I.s,I.d)},Math.floor(0))})}put(d,f,m,v){this.putInternal("p",d,f,m,v)}merge(d,f,m,v){this.putInternal("m",d,f,m,v)}putInternal(d,f,m,v,E){this.initConnection_();const I={p:f,d:m};void 0!==E&&(I.h=E),this.outstandingPuts_.push({action:d,request:I,onComplete:v}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(d){const f=this.outstandingPuts_[d].action,m=this.outstandingPuts_[d].request,v=this.outstandingPuts_[d].onComplete;this.outstandingPuts_[d].queued=this.connected_,this.sendRequest(f,m,E=>{this.log_(f+" response",E),delete this.outstandingPuts_[d],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),v&&v(E.s,E.d)})}reportStats(d){if(this.connected_){const f={c:d};this.log_("reportStats",f),this.sendRequest("s",f,m=>{"ok"!==m.s&&this.log_("reportStats","Error sending stats: "+m.d)})}}onDataMessage_(d){if("r"in d){this.log_("from server: "+(0,N.As)(d));const f=d.r,m=this.requestCBHash_[f];m&&(delete this.requestCBHash_[f],m(d.b))}else{if("error"in d)throw"A server-side error has occurred: "+d.error;"a"in d&&this.onDataPush_(d.a,d.b)}}onDataPush_(d,f){this.log_("handleServerMessage",d,f),"d"===d?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===d?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===d?this.onListenRevoked_(f.p,f.q):"ac"===d?this.onAuthRevoked_(f.s,f.d):"apc"===d?this.onAppCheckRevoked_(f.s,f.d):"sd"===d?this.onSecurityDebugPacket_(f):vo("Unrecognized action received from server: "+(0,N.As)(d)+"\nAre you using the latest client?")}onReady_(d,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(d),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(d){(0,N.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(d))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(d){d&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0)),this.visible_=d}onOnline_(d){d?(this.log_("Browser went online."),this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Sl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const d=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let f=Math.max(0,this.reconnectDelay_-d);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var d=this;return(0,P.A)(function*(){if(d.shouldReconnect_()){d.log_("Making a connection attempt"),d.lastConnectionAttemptTime_=(new Date).getTime(),d.lastConnectionEstablishedTime_=null;const f=d.onDataMessage_.bind(d),m=d.onReady_.bind(d),v=d.onRealtimeDisconnect_.bind(d),E=d.id+":"+a.nextConnectionId_++,I=d.lastSessionId;let T=!1,M=null;const V=function(){M?M.close():(T=!0,v())};d.realtime_={close:V,sendRequest:function(fe){(0,N.vA)(M,"sendRequest call when we're not connected not allowed."),M.sendRequest(fe)}};const Y=d.forceTokenRefresh_;d.forceTokenRefresh_=!1;try{const[fe,ve]=yield Promise.all([d.authTokenProvider_.getToken(Y),d.appCheckTokenProvider_.getToken(Y)]);T?Ft("getToken() completed but was canceled"):(Ft("getToken() completed. Creating connection."),d.authToken_=fe&&fe.accessToken,d.appCheckToken_=ve&&ve.token,M=new Z(E,d.repoInfo_,d.applicationId_,d.appCheckToken_,d.authToken_,f,m,v,at=>{qt(at+" ("+d.repoInfo_.toString()+")"),d.interrupt("server_kill")},I))}catch(fe){d.log_("Failed to get token: "+fe),T||(d.repoInfo_.nodeAdmin&&qt(fe),V())}}})()}interrupt(d){Ft("Interrupting connection for reason: "+d),this.interruptReasons_[d]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(d){Ft("Resuming connection for reason: "+d),delete this.interruptReasons_[d],(0,N.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(d){const f=d-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let d=0;d<this.outstandingPuts_.length;d++){const f=this.outstandingPuts_[d];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[d],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(d,f){let m;m=f?f.map(E=>si(E)).join("$"):"default";const v=this.removeListen_(d,m);v&&v.onComplete&&v.onComplete("permission_denied")}removeListen_(d,f){const m=new Oe(d).toString();let v;if(this.listens.has(m)){const E=this.listens.get(m);v=E.get(f),E.delete(f),0===E.size&&this.listens.delete(m)}else v=void 0;return v}onAuthRevoked_(d,f){Ft("Auth token revoked: "+d+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===d||"permission_denied"===d)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(d,f){Ft("App check token revoked: "+d+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===d||"permission_denied"===d)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(d){this.securityDebugCallback_?this.securityDebugCallback_(d):"msg"in d&&console.log("FIREBASE: "+d.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const d of this.listens.values())for(const f of d.values())this.sendListen_(f);for(let d=0;d<this.outstandingPuts_.length;d++)this.outstandingPuts_[d]&&this.sendPut_(d);for(;this.onDisconnectRequestQueue_.length;){const d=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(d.action,d.pathString,d.data,d.onComplete)}for(let d=0;d<this.outstandingGets_.length;d++)this.outstandingGets_[d]&&this.sendGet_(d)}sendConnectStats_(){const d={};let f="js";(0,N.$g)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),d["sdk."+f+"."+Zt.replace(/\./g,"-")]=1,(0,N.jZ)()?d["framework.cordova"]=1:(0,N.lV)()&&(d["framework.reactnative"]=1),this.reportStats(d)}shouldReconnect_(){const d=De.getInstance().currentlyOnline();return(0,N.Im)(this.interruptReasons_)&&d}}return a.nextPersistentConnectionId_=0,a.nextConnectionId_=0,a})();class ue{constructor(c,d){this.name=c,this.node=d}static Wrap(c,d){return new ue(c,d)}}class Yc{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,d){const f=new ue(cn,c),m=new ue(cn,d);return 0!==this.compare(f,m)}minPost(){return ue.MIN}}class Vp extends Yc{static get __EMPTY_NODE(){return _d}static set __EMPTY_NODE(c){_d=c}compare(c,d){return Mn(c.name,d.name)}isDefinedOn(c){throw(0,N.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,d){return!1}minPost(){return ue.MIN}maxPost(){return new ue(Jt,_d)}makePost(c,d){return(0,N.vA)("string"==typeof c,"KeyIndex indexValue must always be a string."),new ue(c,_d)}toString(){return".key"}}const Fi=new Vp;class yd{constructor(c,d,f,m,v=null){this.isReverse_=m,this.resultGenerator_=v,this.nodeStack_=[];let E=1;for(;!c.isEmpty();)if(E=d?f(c.key,d):1,m&&(E*=-1),E<0)c=this.isReverse_?c.left:c.right;else{if(0===E){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let d,c=this.nodeStack_.pop();if(d=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let Qc,pe=(()=>{class a{constructor(d,f,m,v,E){this.key=d,this.value=f,this.color=m??a.RED,this.left=v??Je.EMPTY_NODE,this.right=E??Je.EMPTY_NODE}copy(d,f,m,v,E){return new a(d??this.key,f??this.value,m??this.color,v??this.left,E??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||!!d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,f,m){let v=this;const E=m(d,v.key);return v=E<0?v.copy(null,null,null,v.left.insert(d,f,m),null):0===E?v.copy(null,f,null,null,null):v.copy(null,null,null,null,v.right.insert(d,f,m)),v.fixUp_()}removeMin_(){if(this.left.isEmpty())return Je.EMPTY_NODE;let d=this;return!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.removeMin_(),null),d.fixUp_()}remove(d,f){let m,v;if(m=this,f(d,m.key)<0)!m.left.isEmpty()&&!m.left.isRed_()&&!m.left.left.isRed_()&&(m=m.moveRedLeft_()),m=m.copy(null,null,null,m.left.remove(d,f),null);else{if(m.left.isRed_()&&(m=m.rotateRight_()),!m.right.isEmpty()&&!m.right.isRed_()&&!m.right.left.isRed_()&&(m=m.moveRedRight_()),0===f(d,m.key)){if(m.right.isEmpty())return Je.EMPTY_NODE;v=m.right.min_(),m=m.copy(v.key,v.value,null,null,m.right.removeMin_())}m=m.copy(null,null,null,null,m.right.remove(d,f))}return m.fixUp_()}isRed_(){return this.color}fixUp_(){let d=this;return d.right.isRed_()&&!d.left.isRed_()&&(d=d.rotateLeft_()),d.left.isRed_()&&d.left.left.isRed_()&&(d=d.rotateRight_()),d.left.isRed_()&&d.right.isRed_()&&(d=d.colorFlip_()),d}moveRedLeft_(){let d=this.colorFlip_();return d.right.left.isRed_()&&(d=d.copy(null,null,null,null,d.right.rotateRight_()),d=d.rotateLeft_(),d=d.colorFlip_()),d}moveRedRight_(){let d=this.colorFlip_();return d.left.left.isRed_()&&(d=d.rotateRight_(),d=d.colorFlip_()),d}rotateLeft_(){const d=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight_(){const d=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip_(){const d=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,f)}checkMaxDepth_(){const d=this.check_();return Math.pow(2,d)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const d=this.left.check_();if(d!==this.right.check_())throw new Error("Black depths differ");return d+(this.isRed_()?0:1)}}return a.RED=!0,a.BLACK=!1,a})();class Je{constructor(c,d=Je.EMPTY_NODE){this.comparator_=c,this.root_=d}insert(c,d){return new Je(this.comparator_,this.root_.insert(c,d,this.comparator_).copy(null,null,pe.BLACK,null,null))}remove(c){return new Je(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,pe.BLACK,null,null))}get(c){let d,f=this.root_;for(;!f.isEmpty();){if(d=this.comparator_(c,f.key),0===d)return f.value;d<0?f=f.left:d>0&&(f=f.right)}return null}getPredecessorKey(c){let d,f=this.root_,m=null;for(;!f.isEmpty();){if(d=this.comparator_(c,f.key),0===d){if(f.left.isEmpty())return m?m.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}d<0?f=f.left:d>0&&(m=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new yd(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,d){return new yd(this.root_,c,this.comparator_,!1,d)}getReverseIteratorFrom(c,d){return new yd(this.root_,c,this.comparator_,!0,d)}getReverseIterator(c){return new yd(this.root_,null,this.comparator_,!0,c)}}function Tl(a,c){return Mn(a.name,c.name)}function Ls(a,c){return Mn(a,c)}Je.EMPTY_NODE=new class T_{copy(c,d,f,m,v){return this}insert(c,d,f){return new pe(c,d,null)}remove(c,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ml=function(a){return"number"==typeof a?"number:"+Co(a):"string:"+a},Al=function(a){if(a.isLeafNode()){const c=a.val();(0,N.vA)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,N.gR)(c,".sv"),"Priority must be a string or number.")}else(0,N.vA)(a===Qc||a.isEmpty(),"priority of unexpected type.");(0,N.vA)(a===Qc||a.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Zc,Xh,ce,as=(()=>{class a{static set __childrenNodeConstructor(d){Zc=d}static get __childrenNodeConstructor(){return Zc}constructor(d,f=a.__childrenNodeConstructor.EMPTY_NODE){this.value_=d,this.priorityNode_=f,this.lazyHash_=null,(0,N.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Al(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(d){return new a(this.value_,d)}getImmediateChild(d){return".priority"===d?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE}getChild(d){return Be(d)?this:".priority"===Ue(d)?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(d,f){return null}updateImmediateChild(d,f){return".priority"===d?this.updatePriority(f):f.isEmpty()&&".priority"!==d?this:a.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(d,f).updatePriority(this.priorityNode_)}updateChild(d,f){const m=Ue(d);return null===m?f:f.isEmpty()&&".priority"!==m?this:((0,N.vA)(".priority"!==m||1===Ji(d),".priority must be the last token in a path"),this.updateImmediateChild(m,a.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(d),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(d,f){return!1}val(d){return d&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let d="";this.priorityNode_.isEmpty()||(d+="priority:"+Ml(this.priorityNode_.val())+":");const f=typeof this.value_;d+=f+":",d+="number"===f?Co(this.value_):this.value_,this.lazyHash_=Ki(d)}return this.lazyHash_}getValue(){return this.value_}compareTo(d){return d===a.__childrenNodeConstructor.EMPTY_NODE?1:d instanceof a.__childrenNodeConstructor?-1:((0,N.vA)(d.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(d))}compareToLeafNode_(d){const f=typeof d.value_,m=typeof this.value_,v=a.VALUE_TYPE_ORDER.indexOf(f),E=a.VALUE_TYPE_ORDER.indexOf(m);return(0,N.vA)(v>=0,"Unknown leaf type: "+f),(0,N.vA)(E>=0,"Unknown leaf type: "+m),v===E?"object"===m?0:this.value_<d.value_?-1:this.value_===d.value_?0:1:E-v}withIndex(){return this}isIndexed(){return!0}equals(d){return d===this||!!d.isLeafNode()&&(this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_))}}return a.VALUE_TYPE_ORDER=["object","boolean","number","string"],a})();const Nt=new class Jh extends Yc{compare(c,d){const f=c.node.getPriority(),m=d.node.getPriority(),v=f.compareTo(m);return 0===v?Mn(c.name,d.name):v}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,d){return!c.getPriority().equals(d.getPriority())}minPost(){return ue.MIN}maxPost(){return new ue(Jt,new as("[PRIORITY-POST]",ce))}makePost(c,d){const f=Xh(c);return new ue(d,new as("[PRIORITY-POST]",f))}toString(){return".priority"}},Bp=Math.log(2);class Jc{constructor(c){this.count=parseInt(Math.log(c+1)/Bp,10),this.current_=this.count-1;const m=(()=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&m}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const bd=function(a,c,d,f){a.sort(c);const m=function(T,M){const V=M-T;let U,Y;if(0===V)return null;if(1===V)return U=a[T],Y=d?d(U):U,new pe(Y,U.node,pe.BLACK,null,null);{const fe=parseInt(V/2,10)+T,ve=m(T,fe),at=m(fe+1,M);return U=a[fe],Y=d?d(U):U,new pe(Y,U.node,pe.BLACK,ve,at)}},I=function(T){let M=null,V=null,U=a.length;const Y=function(ve,at){const Zn=U-ve,ra=U;U-=ve;const ol=m(Zn+1,ra),gc=a[Zn],wn=d?d(gc):gc;fe(new pe(wn,gc.node,at,null,ol))},fe=function(ve){M?(M.left=ve,M=ve):(V=ve,M=ve)};for(let ve=0;ve<T.count;++ve){const at=T.nextBitIsOne(),Zn=Math.pow(2,T.count-(ve+1));at?Y(Zn,pe.BLACK):(Y(Zn,pe.BLACK),Y(Zn,pe.RED))}return V}(new Jc(a.length));return new Je(f||c,I)};let Ma;const Aa={};class ui{static get Default(){return(0,N.vA)(Aa&&Nt,"ChildrenNode.ts has not been loaded"),Ma=Ma||new ui({".priority":Aa},{".priority":Nt}),Ma}constructor(c,d){this.indexes_=c,this.indexSet_=d}get(c){const d=(0,N.yw)(this.indexes_,c);if(!d)throw new Error("No index defined for "+c);return d instanceof Je?d:null}hasIndex(c){return(0,N.gR)(this.indexSet_,c.toString())}addIndex(c,d){(0,N.vA)(c!==Fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let m=!1;const v=d.getIterator(ue.Wrap);let I,E=v.getNext();for(;E;)m=m||c.isDefinedOn(E.node),f.push(E),E=v.getNext();I=m?bd(f,c.getCompare()):Aa;const T=c.toString(),M=Object.assign({},this.indexSet_);M[T]=c;const V=Object.assign({},this.indexes_);return V[T]=I,new ui(V,M)}addToIndexes(c,d){const f=(0,N.kH)(this.indexes_,(m,v)=>{const E=(0,N.yw)(this.indexSet_,v);if((0,N.vA)(E,"Missing index implementation for "+v),m===Aa){if(E.isDefinedOn(c.node)){const I=[],T=d.getIterator(ue.Wrap);let M=T.getNext();for(;M;)M.name!==c.name&&I.push(M),M=T.getNext();return I.push(c),bd(I,E.getCompare())}return Aa}{const I=d.get(c.name);let T=m;return I&&(T=T.remove(new ue(c.name,I))),T.insert(c,c.node)}});return new ui(f,this.indexSet_)}removeFromIndexes(c,d){const f=(0,N.kH)(this.indexes_,m=>{if(m===Aa)return m;{const v=d.get(c.name);return v?m.remove(new ue(c.name,v)):m}});return new ui(f,this.indexSet_)}}let xa,Le=(()=>{class a{static get EMPTY_NODE(){return xa||(xa=new a(new Je(Ls),null,ui.Default))}constructor(d,f,m){this.children_=d,this.priorityNode_=f,this.indexMap_=m,this.lazyHash_=null,this.priorityNode_&&Al(this.priorityNode_),this.children_.isEmpty()&&(0,N.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xa}updatePriority(d){return this.children_.isEmpty()?this:new a(this.children_,d,this.indexMap_)}getImmediateChild(d){if(".priority"===d)return this.getPriority();{const f=this.children_.get(d);return null===f?xa:f}}getChild(d){const f=Ue(d);return null===f?this:this.getImmediateChild(f).getChild($e(d))}hasChild(d){return null!==this.children_.get(d)}updateImmediateChild(d,f){if((0,N.vA)(f,"We should always be passing snapshot nodes"),".priority"===d)return this.updatePriority(f);{const m=new ue(d,f);let v,E;f.isEmpty()?(v=this.children_.remove(d),E=this.indexMap_.removeFromIndexes(m,this.children_)):(v=this.children_.insert(d,f),E=this.indexMap_.addToIndexes(m,this.children_));const I=v.isEmpty()?xa:this.priorityNode_;return new a(v,I,E)}}updateChild(d,f){const m=Ue(d);if(null===m)return f;{(0,N.vA)(".priority"!==Ue(d)||1===Ji(d),".priority must be the last token in a path");const v=this.getImmediateChild(m).updateChild($e(d),f);return this.updateImmediateChild(m,v)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(d){if(this.isEmpty())return null;const f={};let m=0,v=0,E=!0;if(this.forEachChild(Nt,(I,T)=>{f[I]=T.val(d),m++,E&&a.INTEGER_REGEXP_.test(I)?v=Math.max(v,Number(I)):E=!1}),!d&&E&&v<2*m){const I=[];for(const T in f)I[T]=f[T];return I}return d&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let d="";this.getPriority().isEmpty()||(d+="priority:"+Ml(this.getPriority().val())+":"),this.forEachChild(Nt,(f,m)=>{const v=m.hash();""!==v&&(d+=":"+f+":"+v)}),this.lazyHash_=""===d?"":Ki(d)}return this.lazyHash_}getPredecessorChildName(d,f,m){const v=this.resolveIndex_(m);if(v){const E=v.getPredecessorKey(new ue(d,f));return E?E.name:null}return this.children_.getPredecessorKey(d)}getFirstChildName(d){const f=this.resolveIndex_(d);if(f){const m=f.minKey();return m&&m.name}return this.children_.minKey()}getFirstChild(d){const f=this.getFirstChildName(d);return f?new ue(f,this.children_.get(f)):null}getLastChildName(d){const f=this.resolveIndex_(d);if(f){const m=f.maxKey();return m&&m.name}return this.children_.maxKey()}getLastChild(d){const f=this.getLastChildName(d);return f?new ue(f,this.children_.get(f)):null}forEachChild(d,f){const m=this.resolveIndex_(d);return m?m.inorderTraversal(v=>f(v.name,v.node)):this.children_.inorderTraversal(f)}getIterator(d){return this.getIteratorFrom(d.minPost(),d)}getIteratorFrom(d,f){const m=this.resolveIndex_(f);if(m)return m.getIteratorFrom(d,v=>v);{const v=this.children_.getIteratorFrom(d.name,ue.Wrap);let E=v.peek();for(;null!=E&&f.compare(E,d)<0;)v.getNext(),E=v.peek();return v}}getReverseIterator(d){return this.getReverseIteratorFrom(d.maxPost(),d)}getReverseIteratorFrom(d,f){const m=this.resolveIndex_(f);if(m)return m.getReverseIteratorFrom(d,v=>v);{const v=this.children_.getReverseIteratorFrom(d.name,ue.Wrap);let E=v.peek();for(;null!=E&&f.compare(E,d)>0;)v.getNext(),E=v.peek();return v}}compareTo(d){return this.isEmpty()?d.isEmpty()?0:-1:d.isLeafNode()||d.isEmpty()?1:d===cs?-1:0}withIndex(d){if(d===Fi||this.indexMap_.hasIndex(d))return this;{const f=this.indexMap_.addIndex(d,this.children_);return new a(this.children_,this.priorityNode_,f)}}isIndexed(d){return d===Fi||this.indexMap_.hasIndex(d)}equals(d){if(d===this)return!0;if(d.isLeafNode())return!1;{const f=d;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const m=this.getIterator(Nt),v=f.getIterator(Nt);let E=m.getNext(),I=v.getNext();for(;E&&I;){if(E.name!==I.name||!E.node.equals(I.node))return!1;E=m.getNext(),I=v.getNext()}return null===E&&null===I}return!1}return!1}}resolveIndex_(d){return d===Fi?null:this.indexMap_.get(d.toString())}}return a.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,a})();const cs=new class ls extends Le{constructor(){super(new Je(Ls),Le.EMPTY_NODE,ui.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return Le.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ue,{MIN:{value:new ue(cn,Le.EMPTY_NODE)},MAX:{value:new ue(Jt,cs)}}),Vp.__EMPTY_NODE=Le.EMPTY_NODE,as.__childrenNodeConstructor=Le,function vd(a){Qc=a}(cs),function Xc(a){ce=a}(cs);const xl=!0;function zt(a,c=null){if(null===a)return Le.EMPTY_NODE;if("object"==typeof a&&".priority"in a&&(c=a[".priority"]),(0,N.vA)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]),"object"!=typeof a||".sv"in a)return new as(a,zt(c));if(a instanceof Array||!xl){let d=Le.EMPTY_NODE;return en(a,(f,m)=>{if((0,N.gR)(a,f)&&"."!==f.substring(0,1)){const v=zt(m);(v.isLeafNode()||!v.isEmpty())&&(d=d.updateImmediateChild(f,v))}}),d.updatePriority(zt(c))}{const d=[];let f=!1;if(en(a,(E,I)=>{if("."!==E.substring(0,1)){const T=zt(I);T.isEmpty()||(f=f||!T.getPriority().isEmpty(),d.push(new ue(E,T)))}}),0===d.length)return Le.EMPTY_NODE;const v=bd(d,Tl,E=>E.name,Ls);if(f){const E=bd(d,Nt.getCompare());return new Le(v,zt(c),new ui({".priority":E},{".priority":Nt}))}return new Le(v,zt(c),ui.Default)}}!function Ta(a){Xh=a}(zt);class Li extends Yc{constructor(c){super(),this.indexPath_=c,(0,N.vA)(!Be(c)&&".priority"!==Ue(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,d){const f=this.extractChild(c.node),m=this.extractChild(d.node),v=f.compareTo(m);return 0===v?Mn(c.name,d.name):v}makePost(c,d){const f=zt(c),m=Le.EMPTY_NODE.updateChild(this.indexPath_,f);return new ue(d,m)}maxPost(){const c=Le.EMPTY_NODE.updateChild(this.indexPath_,cs);return new ue(Jt,c)}toString(){return _t(this.indexPath_,0).join("/")}}const Pl=new class Pa extends Yc{compare(c,d){const f=c.node.compareTo(d.node);return 0===f?Mn(c.name,d.name):f}isDefinedOn(c){return!0}indexedValueChanged(c,d){return!c.equals(d)}minPost(){return ue.MIN}maxPost(){return ue.MAX}makePost(c,d){const f=zt(c);return new ue(d,f)}toString(){return".value"}};function Ge(a){return{type:"value",snapshotNode:a}}function gt(a,c){return{type:"child_added",snapshotNode:c,childName:a}}function eu(a,c){return{type:"child_removed",snapshotNode:c,childName:a}}function to(a,c,d){return{type:"child_changed",snapshotNode:c,childName:a,oldSnap:d}}class tu{constructor(c){this.index_=c}updateChild(c,d,f,m,v,E){(0,N.vA)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const I=c.getImmediateChild(d);return I.getChild(m).equals(f.getChild(m))&&I.isEmpty()===f.isEmpty()||(null!=E&&(f.isEmpty()?c.hasChild(d)?E.trackChildChange(eu(d,I)):(0,N.vA)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):I.isEmpty()?E.trackChildChange(gt(d,f)):E.trackChildChange(to(d,f,I))),c.isLeafNode()&&f.isEmpty())?c:c.updateImmediateChild(d,f).withIndex(this.index_)}updateFullNode(c,d,f){return null!=f&&(c.isLeafNode()||c.forEachChild(Nt,(m,v)=>{d.hasChild(m)||f.trackChildChange(eu(m,v))}),d.isLeafNode()||d.forEachChild(Nt,(m,v)=>{if(c.hasChild(m)){const E=c.getImmediateChild(m);E.equals(v)||f.trackChildChange(to(m,v,E))}else f.trackChildChange(gt(m,v))})),d.withIndex(this.index_)}updatePriority(c,d){return c.isEmpty()?Le.EMPTY_NODE:c.updatePriority(d)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Rl{constructor(c){this.indexedFilter_=new tu(c.getIndex()),this.index_=c.getIndex(),this.startPost_=Rl.getStartPost_(c),this.endPost_=Rl.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const d=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,f=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return d&&f}updateChild(c,d,f,m,v,E){return this.matches(new ue(d,f))||(f=Le.EMPTY_NODE),this.indexedFilter_.updateChild(c,d,f,m,v,E)}updateFullNode(c,d,f){d.isLeafNode()&&(d=Le.EMPTY_NODE);let m=d.withIndex(this.index_);m=m.updatePriority(Le.EMPTY_NODE);const v=this;return d.forEachChild(Nt,(E,I)=>{v.matches(new ue(E,I))||(m=m.updateImmediateChild(E,Le.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,m,f)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const d=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),d)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const d=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),d)}return c.getIndex().maxPost()}}class kl{constructor(c){this.withinDirectionalStart=d=>this.reverse_?this.withinEndPost(d):this.withinStartPost(d),this.withinDirectionalEnd=d=>this.reverse_?this.withinStartPost(d):this.withinEndPost(d),this.withinStartPost=d=>{const f=this.index_.compare(this.rangedFilter_.getStartPost(),d);return this.startIsInclusive_?f<=0:f<0},this.withinEndPost=d=>{const f=this.index_.compare(d,this.rangedFilter_.getEndPost());return this.endIsInclusive_?f<=0:f<0},this.rangedFilter_=new Rl(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,d,f,m,v,E){return this.rangedFilter_.matches(new ue(d,f))||(f=Le.EMPTY_NODE),c.getImmediateChild(d).equals(f)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,d,f,m,v,E):this.fullLimitUpdateChild_(c,d,f,v,E)}updateFullNode(c,d,f){let m;if(d.isLeafNode()||d.isEmpty())m=Le.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<d.numChildren()&&d.isIndexed(this.index_)){let v;m=Le.EMPTY_NODE.withIndex(this.index_),v=this.reverse_?d.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let E=0;for(;v.hasNext()&&E<this.limit_;){const I=v.getNext();if(this.withinDirectionalStart(I)){if(!this.withinDirectionalEnd(I))break;m=m.updateImmediateChild(I.name,I.node),E++}}}else{let v;m=d.withIndex(this.index_),m=m.updatePriority(Le.EMPTY_NODE),v=this.reverse_?m.getReverseIterator(this.index_):m.getIterator(this.index_);let E=0;for(;v.hasNext();){const I=v.getNext();E<this.limit_&&this.withinDirectionalStart(I)&&this.withinDirectionalEnd(I)?E++:m=m.updateImmediateChild(I.name,Le.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,m,f)}updatePriority(c,d){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,d,f,m,v){let E;if(this.reverse_){const U=this.index_.getCompare();E=(Y,fe)=>U(fe,Y)}else E=this.index_.getCompare();const I=c;(0,N.vA)(I.numChildren()===this.limit_,"");const T=new ue(d,f),M=this.reverse_?I.getFirstChild(this.index_):I.getLastChild(this.index_),V=this.rangedFilter_.matches(T);if(I.hasChild(d)){const U=I.getImmediateChild(d);let Y=m.getChildAfterChild(this.index_,M,this.reverse_);for(;null!=Y&&(Y.name===d||I.hasChild(Y.name));)Y=m.getChildAfterChild(this.index_,Y,this.reverse_);const fe=null==Y?1:E(Y,T);if(V&&!f.isEmpty()&&fe>=0)return v?.trackChildChange(to(d,f,U)),I.updateImmediateChild(d,f);{v?.trackChildChange(eu(d,U));const at=I.updateImmediateChild(d,Le.EMPTY_NODE);return null!=Y&&this.rangedFilter_.matches(Y)?(v?.trackChildChange(gt(Y.name,Y.node)),at.updateImmediateChild(Y.name,Y.node)):at}}return f.isEmpty()?c:V&&E(M,T)>=0?(null!=v&&(v.trackChildChange(eu(M.name,M.node)),v.trackChildChange(gt(d,f))),I.updateImmediateChild(d,f).updateImmediateChild(M.name,Le.EMPTY_NODE)):c}}class et{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nt}copy(){const c=new et;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function nu(a,c,d){const f=a.copy();return f.startSet_=!0,void 0===c&&(c=null),f.indexStartValue_=c,null!=d?(f.startNameSet_=!0,f.indexStartName_=d):(f.startNameSet_=!1,f.indexStartName_=""),f}function Ol(a,c,d){const f=a.copy();return f.endSet_=!0,void 0===c&&(c=null),f.indexEndValue_=c,void 0!==d?(f.endNameSet_=!0,f.indexEndName_=d):(f.endNameSet_=!1,f.indexEndName_=""),f}function Ra(a,c){const d=a.copy();return d.index_=c,d}function Fl(a){const c={};if(a.isDefault())return c;let d;if(a.index_===Nt?d="$priority":a.index_===Pl?d="$value":a.index_===Fi?d="$key":((0,N.vA)(a.index_ instanceof Li,"Unrecognized index type!"),d=a.index_.toString()),c.orderBy=(0,N.As)(d),a.startSet_){const f=a.startAfterSet_?"startAfter":"startAt";c[f]=(0,N.As)(a.indexStartValue_),a.startNameSet_&&(c[f]+=","+(0,N.As)(a.indexStartName_))}if(a.endSet_){const f=a.endBeforeSet_?"endBefore":"endAt";c[f]=(0,N.As)(a.indexEndValue_),a.endNameSet_&&(c[f]+=","+(0,N.As)(a.indexEndName_))}return a.limitSet_&&(a.isViewFromLeft()?c.limitToFirst=a.limit_:c.limitToLast=a.limit_),c}function Ll(a){const c={};if(a.startSet_&&(c.sp=a.indexStartValue_,a.startNameSet_&&(c.sn=a.indexStartName_),c.sin=!a.startAfterSet_),a.endSet_&&(c.ep=a.indexEndValue_,a.endNameSet_&&(c.en=a.indexEndName_),c.ein=!a.endBeforeSet_),a.limitSet_){c.l=a.limit_;let d=a.viewFrom_;""===d&&(d=a.isViewFromLeft()?"l":"r"),c.vf=d}return a.index_!==Nt&&(c.i=a.index_.toString()),c}class ka extends de{reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,d){return void 0!==d?"tag$"+d:((0,N.vA)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}constructor(c,d,f,m){super(),this.repoInfo_=c,this.onDataUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.log_=Yi("p:rest:"),this.listens_={}}listen(c,d,f,m){const v=c._path.toString();this.log_("Listen called for "+v+" "+c._queryIdentifier);const E=ka.getListenId_(c,f),I={};this.listens_[E]=I;const T=Fl(c._queryParams);this.restRequest_(v+".json",T,(M,V)=>{let U=V;if(404===M&&(U=null,M=null),null===M&&this.onDataUpdate_(v,U,!1,f),(0,N.yw)(this.listens_,E)===I){let Y;Y=M?401===M?"permission_denied":"rest_error:"+M:"ok",m(Y,null)}})}unlisten(c,d){const f=ka.getListenId_(c,d);delete this.listens_[f]}get(c){const d=Fl(c._queryParams),f=c._path.toString(),m=new N.cY;return this.restRequest_(f+".json",d,(v,E)=>{let I=E;404===v&&(I=null,v=null),null===v?(this.onDataUpdate_(f,I,!1,null),m.resolve(I)):m.reject(new Error(I))}),m.promise}refreshAuthToken(c){}restRequest_(c,d={},f){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([m,v])=>{m&&m.accessToken&&(d.auth=m.accessToken),v&&v.token&&(d.ac=v.token);const E=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,N.Am)(d);this.log_("Sending REST request for "+E);const I=new XMLHttpRequest;I.onreadystatechange=()=>{if(f&&4===I.readyState){this.log_("REST Response for "+E+" received. status:",I.status,"response:",I.responseText);let T=null;if(I.status>=200&&I.status<300){try{T=(0,N.$L)(I.responseText)}catch{qt("Failed to parse JSON response for "+E+": "+I.responseText)}f(null,T)}else 401!==I.status&&404!==I.status&&qt("Got unsuccessful REST response for "+E+" Status: "+I.status),f(I.status);f=null}},I.open("GET",E,!0),I.send()})}}class jp{constructor(){this.rootNode_=Le.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,d){this.rootNode_=this.rootNode_.updateChild(c,d)}}function Na(){return{value:null,children:new Map}}function Vs(a,c,d){if(Be(c))a.value=d,a.children.clear();else if(null!==a.value)a.value=a.value.updateChild(c,d);else{const f=Ue(c);a.children.has(f)||a.children.set(f,Na()),Vs(a.children.get(f),c=$e(c),d)}}function Vl(a,c){if(Be(c))return a.value=null,a.children.clear(),!0;if(null!==a.value){if(a.value.isLeafNode())return!1;{const d=a.value;return a.value=null,d.forEachChild(Nt,(f,m)=>{Vs(a,new Oe(f),m)}),Vl(a,c)}}if(a.children.size>0){const d=Ue(c);return c=$e(c),a.children.has(d)&&Vl(a.children.get(d),c)&&a.children.delete(d),0===a.children.size}return!0}function Te(a,c,d){null!==a.value?d(c,a.value):function ru(a,c){a.children.forEach((d,f)=>{c(f,d)})}(a,(f,m)=>{Te(m,new Oe(c.toString()+"/"+f),d)})}class X{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),d=Object.assign({},c);return this.last_&&en(this.last_,(f,m)=>{d[f]=d[f]-m}),this.last_=c,d}}class Ed{constructor(c,d){this.server_=d,this.statsToReport_={},this.statsListener_=new X(c);const f=1e4+2e4*Math.random();rs(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const c=this.statsListener_.get(),d={};let f=!1;en(c,(m,v)=>{v>0&&(0,N.gR)(this.statsToReport_,m)&&(d[m]=v,f=!0)}),f&&this.server_.reportStats(d),rs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var no=function(a){return a[a.OVERWRITE=0]="OVERWRITE",a[a.MERGE=1]="MERGE",a[a.ACK_USER_WRITE=2]="ACK_USER_WRITE",a[a.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",a}(no||{});function js(a){return{fromUser:!1,fromServer:!0,queryId:a,tagged:!0}}class ou{constructor(c,d,f){this.path=c,this.affectedTree=d,this.revert=f,this.type=no.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Be(this.path)){if(null!=this.affectedTree.value)return(0,N.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new Oe(c));return new ou(We(),d,this.revert)}}return(0,N.vA)(Ue(this.path)===c,"operationForChild called for unrelated child."),new ou($e(this.path),this.affectedTree,this.revert)}}class Mo{constructor(c,d){this.source=c,this.path=d,this.type=no.LISTEN_COMPLETE}operationForChild(c){return Be(this.path)?new Mo(this.source,We()):new Mo(this.source,$e(this.path))}}class Us{constructor(c,d,f){this.source=c,this.path=d,this.snap=f,this.type=no.OVERWRITE}operationForChild(c){return Be(this.path)?new Us(this.source,We(),this.snap.getImmediateChild(c)):new Us(this.source,$e(this.path),this.snap)}}class Br{constructor(c,d,f){this.source=c,this.path=d,this.children=f,this.type=no.MERGE}operationForChild(c){if(Be(this.path)){const d=this.children.subtree(new Oe(c));return d.isEmpty()?null:d.value?new Us(this.source,We(),d.value):new Br(this.source,We(),d)}return(0,N.vA)(Ue(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new Br(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ds{constructor(c,d,f){this.node_=c,this.fullyInitialized_=d,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Be(c))return this.isFullyInitialized()&&!this.filtered_;const d=Ue(c);return this.isCompleteForChild(d)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class jr{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function Xr(a,c,d,f,m,v){const E=f.filter(I=>I.type===d);E.sort((I,T)=>function au(a,c,d){if(null==c.childName||null==d.childName)throw(0,N.Hk)("Should only compare child_ events.");const f=new ue(c.childName,c.snapshotNode),m=new ue(d.childName,d.snapshotNode);return a.index_.compare(f,m)}(a,I,T)),E.forEach(I=>{const T=function su(a,c,d){return"value"===c.type||"child_removed"===c.type||(c.prevName=d.getPredecessorChildName(c.childName,c.snapshotNode,a.index_)),c}(a,I,v);m.forEach(M=>{M.respondsTo(I.type)&&c.push(M.createEvent(T,a.query_))})})}function ro(a,c){return{eventCache:a,serverCache:c}}function Oa(a,c,d,f){return ro(new ds(c,d,f),a.serverCache)}function _r(a,c,d,f){return ro(a.eventCache,new ds(c,d,f))}function Ur(a){return a.eventCache.isFullyInitialized()?a.eventCache.getNode():null}function yr(a){return a.serverCache.isFullyInitialized()?a.serverCache.getNode():null}let Hs;class Ae{static fromObject(c){let d=new Ae(null);return en(c,(f,m)=>{d=d.set(new Oe(f),m)}),d}constructor(c,d=(()=>(Hs||(Hs=new Je(Lr)),Hs))()){this.value=c,this.children=d}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,d){if(null!=this.value&&d(this.value))return{path:We(),value:this.value};if(Be(c))return null;{const f=Ue(c),m=this.children.get(f);if(null!==m){const v=m.findRootMostMatchingPathAndValue($e(c),d);return null!=v?{path:He(new Oe(f),v.path),value:v.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Be(c))return this;{const d=Ue(c),f=this.children.get(d);return null!==f?f.subtree($e(c)):new Ae(null)}}set(c,d){if(Be(c))return new Ae(d,this.children);{const f=Ue(c),v=(this.children.get(f)||new Ae(null)).set($e(c),d),E=this.children.insert(f,v);return new Ae(this.value,E)}}remove(c){if(Be(c))return this.children.isEmpty()?new Ae(null):new Ae(null,this.children);{const d=Ue(c),f=this.children.get(d);if(f){const m=f.remove($e(c));let v;return v=m.isEmpty()?this.children.remove(d):this.children.insert(d,m),null===this.value&&v.isEmpty()?new Ae(null):new Ae(this.value,v)}return this}}get(c){if(Be(c))return this.value;{const d=Ue(c),f=this.children.get(d);return f?f.get($e(c)):null}}setTree(c,d){if(Be(c))return d;{const f=Ue(c),v=(this.children.get(f)||new Ae(null)).setTree($e(c),d);let E;return E=v.isEmpty()?this.children.remove(f):this.children.insert(f,v),new Ae(this.value,E)}}fold(c){return this.fold_(We(),c)}fold_(c,d){const f={};return this.children.inorderTraversal((m,v)=>{f[m]=v.fold_(He(c,m),d)}),d(c,this.value,f)}findOnPath(c,d){return this.findOnPath_(c,We(),d)}findOnPath_(c,d,f){const m=!!this.value&&f(d,this.value);if(m)return m;if(Be(c))return null;{const v=Ue(c),E=this.children.get(v);return E?E.findOnPath_($e(c),He(d,v),f):null}}foreachOnPath(c,d){return this.foreachOnPath_(c,We(),d)}foreachOnPath_(c,d,f){if(Be(c))return this;{this.value&&f(d,this.value);const m=Ue(c),v=this.children.get(m);return v?v.foreachOnPath_($e(c),He(d,m),f):new Ae(null)}}foreach(c){this.foreach_(We(),c)}foreach_(c,d){this.children.inorderTraversal((f,m)=>{m.foreach_(He(c,f),d)}),this.value&&d(c,this.value)}foreachChild(c){this.children.inorderTraversal((d,f)=>{f.value&&c(d,f.value)})}}class dn{constructor(c){this.writeTree_=c}static empty(){return new dn(new Ae(null))}}function Fa(a,c,d){if(Be(c))return new dn(new Ae(d));{const f=a.writeTree_.findRootMostValueAndPath(c);if(null!=f){const m=f.path;let v=f.value;const E=Tr(m,c);return v=v.updateChild(E,d),new dn(a.writeTree_.set(m,v))}{const m=new Ae(d),v=a.writeTree_.setTree(c,m);return new dn(v)}}}function Ao(a,c,d){let f=a;return en(d,(m,v)=>{f=Fa(f,He(c,m),v)}),f}function Bl(a,c){if(Be(c))return dn.empty();{const d=a.writeTree_.setTree(c,new Ae(null));return new dn(d)}}function Kn(a,c){return null!=Ye(a,c)}function Ye(a,c){const d=a.writeTree_.findRootMostValueAndPath(c);return null!=d?a.writeTree_.get(d.path).getChild(Tr(d.path,c)):null}function jn(a){const c=[],d=a.writeTree_.value;return null!=d?d.isLeafNode()||d.forEachChild(Nt,(f,m)=>{c.push(new ue(f,m))}):a.writeTree_.children.inorderTraversal((f,m)=>{null!=m.value&&c.push(new ue(f,m.value))}),c}function hn(a,c){if(Be(c))return a;{const d=Ye(a,c);return new dn(null!=d?new Ae(d):a.writeTree_.subtree(c))}}function kn(a){return a.writeTree_.isEmpty()}function Mr(a,c){return Up(We(),a.writeTree_,c)}function Up(a,c,d){if(null!=c.value)return d.updateChild(a,c.value);{let f=null;return c.children.inorderTraversal((m,v)=>{".priority"===m?((0,N.vA)(null!==v.value,"Priority writes must always be leaf nodes"),f=v.value):d=Up(He(a,m),v,d)}),!d.getChild(a).isEmpty()&&null!==f&&(d=d.updateChild(He(a,".priority"),f)),d}}function La(a,c){return ms(c,a)}function Ul(a,c){if(a.snap)return Se(a.path,c);for(const d in a.children)if(a.children.hasOwnProperty(d)&&Se(He(a.path,d),c))return!0;return!1}function Hl(a){return a.visible}function Ba(a,c,d){let f=dn.empty();for(let m=0;m<a.length;++m){const v=a[m];if(c(v)){const E=v.path;let I;if(v.snap)Se(d,E)?(I=Tr(d,E),f=Fa(f,I,v.snap)):Se(E,d)&&(I=Tr(E,d),f=Fa(f,We(),v.snap.getChild(I)));else{if(!v.children)throw(0,N.Hk)("WriteRecord should have .snap or .children");if(Se(d,E))I=Tr(d,E),f=Ao(f,I,v.children);else if(Se(E,d))if(I=Tr(E,d),Be(I))f=Ao(f,We(),v.children);else{const T=(0,N.yw)(v.children,Ue(I));if(T){const M=T.getChild($e(I));f=Fa(f,We(),M)}}}}}return f}function $l(a,c,d,f,m){if(f||m){const v=hn(a.visibleWrites,c);return!m&&kn(v)?d:m||null!=d||Kn(v,We())?Mr(Ba(a.allWrites,function(M){return(M.visible||m)&&(!f||!~f.indexOf(M.writeId))&&(Se(M.path,c)||Se(c,M.path))},c),d||Le.EMPTY_NODE):null}{const v=Ye(a.visibleWrites,c);if(null!=v)return v;{const E=hn(a.visibleWrites,c);return kn(E)?d:null!=d||Kn(E,We())?Mr(E,d||Le.EMPTY_NODE):null}}}function ps(a,c,d,f){return $l(a.writeTree,a.treePath,c,d,f)}function Un(a,c){return function fs(a,c,d){let f=Le.EMPTY_NODE;const m=Ye(a.visibleWrites,c);if(m)return m.isLeafNode()||m.forEachChild(Nt,(v,E)=>{f=f.updateImmediateChild(v,E)}),f;if(d){const v=hn(a.visibleWrites,c);return d.forEachChild(Nt,(E,I)=>{const T=Mr(hn(v,new Oe(E)),I);f=f.updateImmediateChild(E,T)}),jn(v).forEach(E=>{f=f.updateImmediateChild(E.name,E.node)}),f}return jn(hn(a.visibleWrites,c)).forEach(E=>{f=f.updateImmediateChild(E.name,E.node)}),f}(a.writeTree,a.treePath,c)}function xo(a,c,d,f){return function Id(a,c,d,f,m){(0,N.vA)(f||m,"Either existingEventSnap or existingServerSnap must exist");const v=He(c,d);if(Kn(a.visibleWrites,v))return null;{const E=hn(a.visibleWrites,v);return kn(E)?m.getChild(d):Mr(E,m.getChild(d))}}(a.writeTree,a.treePath,c,d,f)}function gs(a,c){return function ja(a,c){return Ye(a.visibleWrites,c)}(a.writeTree,He(a.treePath,c))}function Gl(a,c,d){return function lu(a,c,d,f){const m=He(c,d),v=Ye(a.visibleWrites,m);return null!=v?v:f.isCompleteForChild(d)?Mr(hn(a.visibleWrites,m),f.getNode().getImmediateChild(d)):null}(a.writeTree,a.treePath,c,d)}function Sd(a,c){return ms(He(a.treePath,c),a.writeTree)}function ms(a,c){return{treePath:a,writeTree:c}}class io{constructor(){this.changeMap=new Map}trackChildChange(c){const d=c.type,f=c.childName;(0,N.vA)("child_added"===d||"child_changed"===d||"child_removed"===d,"Only child changes supported for tracking"),(0,N.vA)(".priority"!==f,"Only non-priority child changes can be tracked.");const m=this.changeMap.get(f);if(m){const v=m.type;if("child_added"===d&&"child_removed"===v)this.changeMap.set(f,to(f,c.snapshotNode,m.snapshotNode));else if("child_removed"===d&&"child_added"===v)this.changeMap.delete(f);else if("child_removed"===d&&"child_changed"===v)this.changeMap.set(f,eu(f,m.oldSnap));else if("child_changed"===d&&"child_added"===v)this.changeMap.set(f,gt(f,c.snapshotNode));else{if("child_changed"!==d||"child_changed"!==v)throw(0,N.Hk)("Illegal combination of changes: "+c+" occurred after "+m);this.changeMap.set(f,to(f,c.snapshotNode,m.oldSnap))}}else this.changeMap.set(f,c)}getChanges(){return Array.from(this.changeMap.values())}}const cu=new class Td{getCompleteChild(c){return null}getChildAfterChild(c,d,f){return null}};class Ua{constructor(c,d,f=null){this.writes_=c,this.viewCache_=d,this.optCompleteServerCache_=f}getCompleteChild(c){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(c))return d.getNode().getImmediateChild(c);{const f=null!=this.optCompleteServerCache_?new ds(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gl(this.writes_,c,f)}}getChildAfterChild(c,d,f){const m=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:yr(this.viewCache_),v=function Hp(a,c,d,f,m,v){return function zl(a,c,d,f,m,v,E){let I;const T=hn(a.visibleWrites,c),M=Ye(T,We());if(null!=M)I=M;else{if(null==d)return[];I=Mr(T,d)}if(I=I.withIndex(E),I.isEmpty()||I.isLeafNode())return[];{const V=[],U=E.getCompare(),Y=v?I.getReverseIteratorFrom(f,E):I.getIteratorFrom(f,E);let fe=Y.getNext();for(;fe&&V.length<m;)0!==U(fe,f)&&V.push(fe),fe=Y.getNext();return V}}(a.writeTree,a.treePath,c,d,f,m,v)}(this.writes_,m,d,1,f,c);return 0===v.length?null:v[0]}}function $s(a,c,d,f,m,v){const E=c.eventCache;if(null!=gs(f,d))return c;{let I,T;if(Be(d))if((0,N.vA)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const M=yr(c),U=Un(f,M instanceof Le?M:Le.EMPTY_NODE);I=a.filter.updateFullNode(c.eventCache.getNode(),U,v)}else{const M=ps(f,yr(c));I=a.filter.updateFullNode(c.eventCache.getNode(),M,v)}else{const M=Ue(d);if(".priority"===M){(0,N.vA)(1===Ji(d),"Can't have a priority with additional path components");const V=E.getNode();T=c.serverCache.getNode();const U=xo(f,d,V,T);I=null!=U?a.filter.updatePriority(V,U):E.getNode()}else{const V=$e(d);let U;if(E.isCompleteForChild(M)){T=c.serverCache.getNode();const Y=xo(f,d,E.getNode(),T);U=null!=Y?E.getNode().getImmediateChild(M).updateChild(V,Y):E.getNode().getImmediateChild(M)}else U=Gl(f,M,c.serverCache);I=null!=U?a.filter.updateChild(E.getNode(),M,U,V,m,v):E.getNode()}}return Oa(c,I,E.isFullyInitialized()||Be(d),a.filter.filtersNodes())}}function Ha(a,c,d,f,m,v,E,I){const T=c.serverCache;let M;const V=E?a.filter:a.filter.getIndexedFilter();if(Be(d))M=V.updateFullNode(T.getNode(),f,null);else if(V.filtersNodes()&&!T.isFiltered()){const fe=T.getNode().updateChild(d,f);M=V.updateFullNode(T.getNode(),fe,null)}else{const fe=Ue(d);if(!T.isCompleteForPath(d)&&Ji(d)>1)return c;const ve=$e(d),Zn=T.getNode().getImmediateChild(fe).updateChild(ve,f);M=".priority"===fe?V.updatePriority(T.getNode(),Zn):V.updateChild(T.getNode(),fe,Zn,ve,cu,null)}const U=_r(c,M,T.isFullyInitialized()||Be(d),V.filtersNodes());return $s(a,U,d,m,new Ua(m,U,v),I)}function Ad(a,c,d,f,m,v,E){const I=c.eventCache;let T,M;const V=new Ua(m,c,v);if(Be(d))M=a.filter.updateFullNode(c.eventCache.getNode(),f,E),T=Oa(c,M,!0,a.filter.filtersNodes());else{const U=Ue(d);if(".priority"===U)M=a.filter.updatePriority(c.eventCache.getNode(),f),T=Oa(c,M,I.isFullyInitialized(),I.isFiltered());else{const Y=$e(d),fe=I.getNode().getImmediateChild(U);let ve;if(Be(Y))ve=f;else{const at=V.getCompleteChild(U);ve=null!=at?".priority"===Kc(Y)&&at.getChild(Ns(Y)).isEmpty()?at:at.updateChild(Y,f):Le.EMPTY_NODE}T=fe.equals(ve)?c:Oa(c,a.filter.updateChild(I.getNode(),U,ve,Y,V,E),I.isFullyInitialized(),a.filter.filtersNodes())}}return T}function fn(a,c){return a.eventCache.isCompleteForChild(c)}function uu(a,c,d){return d.foreach((f,m)=>{c=c.updateChild(f,m)}),c}function zs(a,c,d,f,m,v,E,I){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let M,T=c;M=Be(d)?f:new Ae(null).setTree(d,f);const V=c.serverCache.getNode();return M.children.inorderTraversal((U,Y)=>{if(V.hasChild(U)){const ve=uu(0,c.serverCache.getNode().getImmediateChild(U),Y);T=Ha(a,T,new Oe(U),ve,m,v,E,I)}}),M.children.inorderTraversal((U,Y)=>{const fe=!c.serverCache.isCompleteForChild(U)&&null===Y.value;if(!V.hasChild(U)&&!fe){const at=uu(0,c.serverCache.getNode().getImmediateChild(U),Y);T=Ha(a,T,new Oe(U),at,m,v,E,I)}}),T}class zp{constructor(c,d){this.query_=c,this.eventRegistrations_=[];const f=this.query_._queryParams,m=new tu(f.getIndex()),v=function Nl(a){return a.loadsAllData()?new tu(a.getIndex()):a.hasLimit()?new kl(a):new Rl(a)}(f);this.processor_=function ql(a){return{filter:a}}(v);const E=d.serverCache,I=d.eventCache,T=m.updateFullNode(Le.EMPTY_NODE,E.getNode(),null),M=v.updateFullNode(Le.EMPTY_NODE,I.getNode(),null),V=new ds(T,E.isFullyInitialized(),m.filtersNodes()),U=new ds(M,I.isFullyInitialized(),v.filtersNodes());this.viewCache_=ro(U,V),this.eventGenerator_=new jr(this.query_)}get query(){return this.query_}}function Nd(a,c){const d=yr(a.viewCache_);return d&&(a.query._queryParams.loadsAllData()||!Be(c)&&!d.getImmediateChild(Ue(c)).isEmpty())?d.getChild(c):null}function Kl(a){return 0===a.eventRegistrations_.length}function oe(a,c,d){const f=[];if(d){(0,N.vA)(null==c,"A cancel should cancel all event registrations.");const m=a.query._path;a.eventRegistrations_.forEach(v=>{const E=v.createCancelEvent(d,m);E&&f.push(E)})}if(c){let m=[];for(let v=0;v<a.eventRegistrations_.length;++v){const E=a.eventRegistrations_[v];if(E.matches(c)){if(c.hasAnyCallback()){m=m.concat(a.eventRegistrations_.slice(v+1));break}}else m.push(E)}a.eventRegistrations_=m}else a.eventRegistrations_=[];return f}function ke(a,c,d,f){c.type===no.MERGE&&null!==c.source.queryId&&((0,N.vA)(yr(a.viewCache_),"We should always have a full cache before handling merges"),(0,N.vA)(Ur(a.viewCache_),"Missing event cache, even though we have a server cache"));const m=a.viewCache_,v=function Md(a,c,d,f,m){const v=new io;let E,I;if(d.type===no.OVERWRITE){const M=d;M.source.fromUser?E=Ad(a,c,M.path,M.snap,f,m,v):((0,N.vA)(M.source.fromServer,"Unknown source."),I=M.source.tagged||c.serverCache.isFiltered()&&!Be(M.path),E=Ha(a,c,M.path,M.snap,f,m,I,v))}else if(d.type===no.MERGE){const M=d;M.source.fromUser?E=function xd(a,c,d,f,m,v,E){let I=c;return f.foreach((T,M)=>{const V=He(d,T);fn(c,Ue(V))&&(I=Ad(a,I,V,M,m,v,E))}),f.foreach((T,M)=>{const V=He(d,T);fn(c,Ue(V))||(I=Ad(a,I,V,M,m,v,E))}),I}(a,c,M.path,M.children,f,m,v):((0,N.vA)(M.source.fromServer,"Unknown source."),I=M.source.tagged||c.serverCache.isFiltered(),E=zs(a,c,M.path,M.children,f,m,I,v))}else if(d.type===no.ACK_USER_WRITE){const M=d;E=M.revert?function Rd(a,c,d,f,m,v){let E;if(null!=gs(f,d))return c;{const I=new Ua(f,c,m),T=c.eventCache.getNode();let M;if(Be(d)||".priority"===Ue(d)){let V;if(c.serverCache.isFullyInitialized())V=ps(f,yr(c));else{const U=c.serverCache.getNode();(0,N.vA)(U instanceof Le,"serverChildren would be complete if leaf node"),V=Un(f,U)}M=a.filter.updateFullNode(T,V,v)}else{const V=Ue(d);let U=Gl(f,V,c.serverCache);null==U&&c.serverCache.isCompleteForChild(V)&&(U=T.getImmediateChild(V)),M=null!=U?a.filter.updateChild(T,V,U,$e(d),I,v):c.eventCache.getNode().hasChild(V)?a.filter.updateChild(T,V,Le.EMPTY_NODE,$e(d),I,v):T,M.isEmpty()&&c.serverCache.isFullyInitialized()&&(E=ps(f,yr(c)),E.isLeafNode()&&(M=a.filter.updateFullNode(M,E,v)))}return E=c.serverCache.isFullyInitialized()||null!=gs(f,We()),Oa(c,M,E,a.filter.filtersNodes())}}(a,c,M.path,f,m,v):function Pd(a,c,d,f,m,v,E){if(null!=gs(m,d))return c;const I=c.serverCache.isFiltered(),T=c.serverCache;if(null!=f.value){if(Be(d)&&T.isFullyInitialized()||T.isCompleteForPath(d))return Ha(a,c,d,T.getNode().getChild(d),m,v,I,E);if(Be(d)){let M=new Ae(null);return T.getNode().forEachChild(Fi,(V,U)=>{M=M.set(new Oe(V),U)}),zs(a,c,d,M,m,v,I,E)}return c}{let M=new Ae(null);return f.foreach((V,U)=>{const Y=He(d,V);T.isCompleteForPath(Y)&&(M=M.set(V,T.getNode().getChild(Y)))}),zs(a,c,d,M,m,v,I,E)}}(a,c,M.path,M.affectedTree,f,m,v)}else{if(d.type!==no.LISTEN_COMPLETE)throw(0,N.Hk)("Unknown operation type: "+d.type);E=function $p(a,c,d,f,m){const v=c.serverCache;return $s(a,_r(c,v.getNode(),v.isFullyInitialized()||Be(d),v.isFiltered()),d,f,cu,m)}(a,c,d.path,f,v)}const T=v.getChanges();return function _s(a,c,d){const f=c.eventCache;if(f.isFullyInitialized()){const m=f.getNode().isLeafNode()||f.getNode().isEmpty(),v=Ur(a);(d.length>0||!a.eventCache.isFullyInitialized()||m&&!f.getNode().equals(v)||!f.getNode().getPriority().equals(v.getPriority()))&&d.push(Ge(Ur(c)))}}(c,E,T),{viewCache:E,changes:T}}(a.processor_,m,c,d,f);return function Hr(a,c){(0,N.vA)(c.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,N.vA)(c.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed")}(a.processor_,v.viewCache),(0,N.vA)(v.viewCache.serverCache.isFullyInitialized()||!m.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),a.viewCache_=v.viewCache,Hn(a,v.changes,v.viewCache.eventCache.getNode(),null)}function Hn(a,c,d,f){return function hs(a,c,d,f){const m=[],v=[];return c.forEach(E=>{"child_changed"===E.type&&a.index_.indexedValueChanged(E.oldSnap,E.snapshotNode)&&v.push(function Cd(a,c){return{type:"child_moved",snapshotNode:c,childName:a}}(E.childName,E.snapshotNode))}),Xr(a,m,"child_removed",c,f,d),Xr(a,m,"child_added",c,f,d),Xr(a,m,"child_moved",v,f,d),Xr(a,m,"child_changed",c,f,d),Xr(a,m,"value",c,f,d),m}(a.eventGenerator_,c,d,f?[f]:a.eventRegistrations_)}let bn,Yl;class Yn{constructor(){this.views=new Map}}function $r(a,c,d,f){const m=c.source.queryId;if(null!==m){const v=a.views.get(m);return(0,N.vA)(null!=v,"SyncTree gave us an op for an invalid query."),ke(v,c,d,f)}{let v=[];for(const E of a.views.values())v=v.concat(ke(E,c,d,f));return v}}function Ve(a,c,d,f,m){const E=a.views.get(c._queryIdentifier);if(!E){let I=ps(d,m?f:null),T=!1;I?T=!0:f instanceof Le?(I=Un(d,f),T=!1):(I=Le.EMPTY_NODE,T=!1);const M=ro(new ds(I,T,!1),new ds(f,m,!1));return new zp(c,M)}return E}function Ws(a){const c=[];for(const d of a.views.values())d.query._queryParams.loadsAllData()||c.push(d);return c}function It(a,c){let d=null;for(const f of a.views.values())d=d||Nd(f,c);return d}function oo(a,c){return c._queryParams.loadsAllData()?Ro(a):a.views.get(c._queryIdentifier)}function Gs(a,c){return null!=oo(a,c)}function Cn(a){return null!=Ro(a)}function Ro(a){for(const c of a.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let qs=1;class zr{constructor(c){this.listenProvider_=c,this.syncPointTree_=new Ae(null),this.pendingWriteTree_=function Wl(){return{visibleWrites:dn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vs(a,c,d,f,m){return function Va(a,c,d,f,m){(0,N.vA)(f>a.lastWriteId,"Stacking an older write on top of newer ones"),void 0===m&&(m=!0),a.allWrites.push({path:c,snap:d,writeId:f,visible:m}),m&&(a.visibleWrites=Fa(a.visibleWrites,c,d)),a.lastWriteId=f}(a.pendingWriteTree_,c,d,f,m),m?Kt(a,new Us({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,d)):[]}function so(a,c,d=!1){const f=function jl(a,c){for(let d=0;d<a.allWrites.length;d++){const f=a.allWrites[d];if(f.writeId===c)return f}return null}(a.pendingWriteTree_,c);if(function M_(a,c){const d=a.allWrites.findIndex(I=>I.writeId===c);(0,N.vA)(d>=0,"removeWrite called with nonexistent writeId.");const f=a.allWrites[d];a.allWrites.splice(d,1);let m=f.visible,v=!1,E=a.allWrites.length-1;for(;m&&E>=0;){const I=a.allWrites[E];I.visible&&(E>=d&&Ul(I,f.path)?m=!1:Se(f.path,I.path)&&(v=!0)),E--}return!!m&&(v?(function Dd(a){a.visibleWrites=Ba(a.allWrites,Hl,We()),a.lastWriteId=a.allWrites.length>0?a.allWrites[a.allWrites.length-1].writeId:-1}(a),!0):(f.snap?a.visibleWrites=Bl(a.visibleWrites,f.path):en(f.children,T=>{a.visibleWrites=Bl(a.visibleWrites,He(f.path,T))}),!0))}(a.pendingWriteTree_,c)){let v=new Ae(null);return null!=f.snap?v=v.set(We(),!0):en(f.children,E=>{v=v.set(new Oe(E),!0)}),Kt(a,new ou(f.path,v,d))}return[]}function or(a,c,d){return Kt(a,new Us({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,d))}function Vt(a,c,d,f,m=!1){const v=c._path,E=a.syncPointTree_.get(v);let I=[];if(E&&("default"===c._queryIdentifier||Gs(E,c))){const T=function du(a,c,d,f){const m=c._queryIdentifier,v=[];let E=[];const I=Cn(a);if("default"===m)for(const[T,M]of a.views.entries())E=E.concat(oe(M,d,f)),Kl(M)&&(a.views.delete(T),M.query._queryParams.loadsAllData()||v.push(M.query));else{const T=a.views.get(m);T&&(E=E.concat(oe(T,d,f)),Kl(T)&&(a.views.delete(m),T.query._queryParams.loadsAllData()||v.push(T.query)))}return I&&!Cn(a)&&v.push(new(function Dt(){return(0,N.vA)(bn,"Reference.ts has not been loaded"),bn}())(c._repo,c._path)),{removed:v,events:E}}(E,c,d,f);(function nn(a){return 0===a.views.size})(E)&&(a.syncPointTree_=a.syncPointTree_.remove(v));const M=T.removed;if(I=T.events,!m){const V=-1!==M.findIndex(Y=>Y._queryParams.loadsAllData()),U=a.syncPointTree_.findOnPath(v,(Y,fe)=>Cn(fe));if(V&&!U){const Y=a.syncPointTree_.subtree(v);if(!Y.isEmpty()){const fe=function nf(a){return a.fold((c,d,f)=>{if(d&&Cn(d))return[Ro(d)];{let m=[];return d&&(m=Ws(d)),en(f,(v,E)=>{m=m.concat(E)}),m}})}(Y);for(let ve=0;ve<fe.length;++ve){const at=fe[ve],Zn=at.query,ra=Fd(a,at);a.listenProvider_.startListening(pu(Zn),Jr(a,Zn),ra.hashFn,ra.onComplete)}}}!U&&M.length>0&&!f&&(V?a.listenProvider_.stopListening(pu(c),null):M.forEach(Y=>{const fe=a.queryToTagMap.get(Xl(Y));a.listenProvider_.stopListening(pu(Y),fe)}))}!function Vd(a,c){for(let d=0;d<c.length;++d){const f=c[d];if(!f._queryParams.loadsAllData()){const m=Xl(f),v=a.queryToTagMap.get(m);a.queryToTagMap.delete(m),a.tagToQueryMap.delete(v)}}}(a,M)}return I}function rn(a,c,d,f){const m=Ld(a,f);if(null!=m){const v=Ga(m),E=v.path,I=v.queryId,T=Tr(E,c);return fu(a,E,new Us(js(I),T,d))}return[]}function Zl(a,c,d,f=!1){const m=c._path;let v=null,E=!1;a.syncPointTree_.foreachOnPath(m,(Y,fe)=>{const ve=Tr(Y,m);v=v||It(fe,ve),E=E||Cn(fe)});let T,I=a.syncPointTree_.get(m);I?(E=E||Cn(I),v=v||It(I,We())):(I=new Yn,a.syncPointTree_=a.syncPointTree_.set(m,I)),null!=v?T=!0:(T=!1,v=Le.EMPTY_NODE,a.syncPointTree_.subtree(m).foreachChild((fe,ve)=>{const at=It(ve,We());at&&(v=v.updateImmediateChild(fe,at))}));const M=Gs(I,c);if(!M&&!c._queryParams.loadsAllData()){const Y=Xl(c);(0,N.vA)(!a.queryToTagMap.has(Y),"View does not exist, but we have a tag");const fe=function Gp(){return qs++}();a.queryToTagMap.set(Y,fe),a.tagToQueryMap.set(fe,Y)}let U=function Po(a,c,d,f,m,v){const E=Ve(a,c,f,m,v);return a.views.has(c._queryIdentifier)||a.views.set(c._queryIdentifier,E),function Tt(a,c){a.eventRegistrations_.push(c)}(E,d),function tn(a,c){const d=a.viewCache_.eventCache,f=[];return d.getNode().isLeafNode()||d.getNode().forEachChild(Nt,(v,E)=>{f.push(gt(v,E))}),d.isFullyInitialized()&&f.push(Ge(d.getNode())),Hn(a,f,d.getNode(),c)}(E,d)}(I,c,d,La(a.pendingWriteTree_,m),v,T);if(!M&&!E&&!f){const Y=oo(I,c);U=U.concat(function A_(a,c,d){const f=c._path,m=Jr(a,c),v=Fd(a,d),E=a.listenProvider_.startListening(pu(c),m,v.hashFn,v.onComplete),I=a.syncPointTree_.subtree(f);if(m)(0,N.vA)(!Cn(I.value),"If we're adding a query, it shouldn't be shadowed");else{const T=I.fold((M,V,U)=>{if(!Be(M)&&V&&Cn(V))return[Ro(V).query];{let Y=[];return V&&(Y=Y.concat(Ws(V).map(fe=>fe.query))),en(U,(fe,ve)=>{Y=Y.concat(ve)}),Y}});for(let M=0;M<T.length;++M){const V=T[M];a.listenProvider_.stopListening(pu(V),Jr(a,V))}}return E}(a,c,Y))}return U}function Wr(a,c,d){const m=a.pendingWriteTree_,v=a.syncPointTree_.findOnPath(c,(E,I)=>{const M=It(I,Tr(E,c));if(M)return M});return $l(m,c,v,d,!0)}function Kt(a,c){return hi(c,a.syncPointTree_,null,La(a.pendingWriteTree_,We()))}function hi(a,c,d,f){if(Be(a.path))return Od(a,c,d,f);{const m=c.get(We());null==d&&null!=m&&(d=It(m,We()));let v=[];const E=Ue(a.path),I=a.operationForChild(E),T=c.children.get(E);if(T&&I){const M=d?d.getImmediateChild(E):null,V=Sd(f,E);v=v.concat(hi(I,T,M,V))}return m&&(v=v.concat($r(m,a,f,d))),v}}function Od(a,c,d,f){const m=c.get(We());null==d&&null!=m&&(d=It(m,We()));let v=[];return c.children.inorderTraversal((E,I)=>{const T=d?d.getImmediateChild(E):null,M=Sd(f,E),V=a.operationForChild(E);V&&(v=v.concat(Od(V,I,T,M)))}),m&&(v=v.concat($r(m,a,f,d))),v}function Fd(a,c){const d=c.query,f=Jr(a,d);return{hashFn:()=>(function Wp(a){return a.viewCache_.serverCache.getNode()}(c)||Le.EMPTY_NODE).hash(),onComplete:m=>{if("ok"===m)return f?function za(a,c,d){const f=Ld(a,d);if(f){const m=Ga(f),v=m.path,E=m.queryId,I=Tr(v,c);return fu(a,v,new Mo(js(E),I))}return[]}(a,d._path,f):function Ql(a,c){return Kt(a,new Mo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(a,d._path);{const v=function xs(a,c){let d="Unknown Error";"too_big"===a?d="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===a?d="Client doesn't have permission to access the desired data.":"unavailable"===a&&(d="The service is unavailable");const f=new Error(a+" at "+c._path.toString()+": "+d);return f.code=a.toUpperCase(),f}(m,d);return Vt(a,d,null,v)}}}}function Jr(a,c){const d=Xl(c);return a.queryToTagMap.get(d)}function Xl(a){return a._path.toString()+"$"+a._queryIdentifier}function Ld(a,c){return a.tagToQueryMap.get(c)}function Ga(a){const c=a.indexOf("$");return(0,N.vA)(-1!==c&&c<a.length-1,"Bad queryKey."),{queryId:a.substr(c+1),path:new Oe(a.substr(0,c))}}function fu(a,c,d){const f=a.syncPointTree_.get(c);return(0,N.vA)(f,"Missing sync point for query tag that we're tracking"),$r(f,d,La(a.pendingWriteTree_,c),null)}function pu(a){return a._queryParams.loadsAllData()&&!a._queryParams.isDefault()?new(function hu(){return(0,N.vA)(Yl,"Reference.ts has not been loaded"),Yl}())(a._repo,a._path):a}class gu{constructor(c){this.node_=c}getImmediateChild(c){const d=this.node_.getImmediateChild(c);return new gu(d)}node(){return this.node_}}class qp{constructor(c,d){this.syncTree_=c,this.path_=d}getImmediateChild(c){const d=He(this.path_,c);return new qp(this.syncTree_,d)}node(){return Wr(this.syncTree_,this.path_)}}const Kp=function(a){return(a=a||{}).timestamp=a.timestamp||(new Date).getTime(),a},Yp=function(a,c,d){return a&&"object"==typeof a?((0,N.vA)(".sv"in a,"Unexpected leaf node or priority contents"),"string"==typeof a[".sv"]?rf(a[".sv"],c,d):"object"==typeof a[".sv"]?mu(a[".sv"],c):void(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(a,null,2))):a},rf=function(a,c,d){if("timestamp"===a)return d.timestamp;(0,N.vA)(!1,"Unexpected server value: "+a)},mu=function(a,c,d){a.hasOwnProperty("increment")||(0,N.vA)(!1,"Unexpected server value: "+JSON.stringify(a,null,2));const f=a.increment;"number"!=typeof f&&(0,N.vA)(!1,"Unexpected increment value: "+f);const m=c.node();if((0,N.vA)(null!==m&&typeof m<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!m.isLeafNode())return f;const E=m.getValue();return"number"!=typeof E?f:E+f},sf=function(a,c,d,f){return Qp(c,new qp(d,a),f)},af=function(a,c,d){return Qp(a,new gu(c),d)};function Qp(a,c,d){const f=a.getPriority().val(),m=Yp(f,c.getImmediateChild(".priority"),d);let v;if(a.isLeafNode()){const E=a,I=Yp(E.getValue(),c,d);return I!==E.getValue()||m!==E.getPriority().val()?new as(I,zt(m)):a}{const E=a;return v=E,m!==E.getPriority().val()&&(v=v.updatePriority(new as(m))),E.forEachChild(Nt,(I,T)=>{const M=Qp(T,c.getImmediateChild(I),d);M!==T&&(v=v.updateImmediateChild(I,M))}),v}}class _u{constructor(c="",d=null,f={children:{},childCount:0}){this.name=c,this.parent=d,this.node=f}}function yu(a,c){let d=c instanceof Oe?c:new Oe(c),f=a,m=Ue(d);for(;null!==m;){const v=(0,N.yw)(f.node.children,m)||{children:{},childCount:0};f=new _u(m,f,v),d=$e(d),m=Ue(d)}return f}function bs(a){return a.node.value}function vr(a,c){a.node.value=c,ec(a)}function Bd(a){return a.node.childCount>0}function vu(a,c){en(a.node.children,(d,f)=>{c(new _u(d,a,f))})}function Jl(a,c,d,f){d&&!f&&c(a),vu(a,m=>{Jl(m,c,!0,f)}),d&&f&&c(a)}function Ks(a){return new Oe(null===a.parent?a.name:Ks(a.parent)+"/"+a.name)}function ec(a){null!==a.parent&&function Zp(a,c,d){const f=function Nn(a){return void 0===bs(a)&&!Bd(a)}(d),m=(0,N.gR)(a.node.children,c);f&&m?(delete a.node.children[c],a.node.childCount--,ec(a)):!f&&!m&&(a.node.children[c]=d.node,a.node.childCount++,ec(a))}(a.parent,a.name,a)}const Mt=/[\[\].#$\/\u0000-\u001F\u007F]/,cf=/[\[\].#$\u0000-\u001F\u007F]/,Ys=10485760,pt=function(a){return"string"==typeof a&&0!==a.length&&!Mt.test(a)},Cs=function(a){return"string"==typeof a&&0!==a.length&&!cf.test(a)},zn=function(a){return null===a||"string"==typeof a||"number"==typeof a&&!oi(a)||a&&"object"==typeof a&&(0,N.gR)(a,".sv")},fi=function(a,c,d,f){f&&void 0===c||pi((0,N.dI)(a,"value"),c,d)},pi=function(a,c,d){const f=d instanceof Oe?new Os(d,a):d;if(void 0===c)throw new Error(a+"contains undefined "+Fs(f));if("function"==typeof c)throw new Error(a+"contains a function "+Fs(f)+" with contents = "+c.toString());if(oi(c))throw new Error(a+"contains "+c.toString()+" "+Fs(f));if("string"==typeof c&&c.length>Ys/3&&(0,N.OE)(c)>Ys)throw new Error(a+"contains a string greater than "+Ys+" utf8 bytes "+Fs(f)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let m=!1,v=!1;if(en(c,(E,I)=>{if(".value"===E)m=!0;else if(".priority"!==E&&".sv"!==E&&(v=!0,!pt(E)))throw new Error(a+" contains an invalid key ("+E+") "+Fs(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function qn(a,c){a.parts_.length>0&&(a.byteLength_+=1),a.parts_.push(c),a.byteLength_+=(0,N.OE)(c),gd(a)})(f,E),pi(a,I,f),function Op(a){const c=a.parts_.pop();a.byteLength_-=(0,N.OE)(c),a.parts_.length>0&&(a.byteLength_-=1)}(f)}),m&&v)throw new Error(a+' contains ".value" child '+Fs(f)+" in addition to actual children.")}},bu=function(a,c,d,f){if(f&&void 0===c)return;const m=(0,N.dI)(a,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(m+" must be an object containing the children to replace.");const v=[];en(c,(E,I)=>{const T=new Oe(E);if(pi(m,I,He(d,T)),".priority"===Kc(T)&&!zn(I))throw new Error(m+"contains an invalid value for '"+T.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");v.push(T)}),function(a,c){let d,f;for(d=0;d<c.length;d++){f=c[d];const v=_t(f);for(let E=0;E<v.length;E++)if((".priority"!==v[E]||E!==v.length-1)&&!pt(v[E]))throw new Error(a+"contains an invalid key ("+v[E]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(So);let m=null;for(d=0;d<c.length;d++){if(f=c[d],null!==m&&Se(m,f))throw new Error(a+"contains a path "+m.toString()+" that is ancestor of another path "+f.toString());m=f}}(m,v)},Wn=function(a,c,d){if(!d||void 0!==c){if(oi(c))throw new Error((0,N.dI)(a,"priority")+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zn(c))throw new Error((0,N.dI)(a,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qa=function(a,c,d,f){if(!(f&&void 0===d||pt(d)))throw new Error((0,N.dI)(a,c)+'was an invalid key = "'+d+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ka=function(a,c,d,f){if(!(f&&void 0===d||Cs(d)))throw new Error((0,N.dI)(a,c)+'was an invalid path = "'+d+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xp=function(a,c,d,f){d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Ka(a,c,d,f)},En=function(a,c){if(".info"===Ue(c))throw new Error(a+" failed = Can't modify data under /.info/")},Cu=function(a,c){const d=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!pt(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==d.length&&!function(a){return a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Cs(a)}(d))throw new Error((0,N.dI)(a,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Eu{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tc(a,c){let d=null;for(let f=0;f<c.length;f++){const m=c[f],v=m.getPath();null!==d&&!Lt(v,d.path)&&(a.eventLists_.push(d),d=null),null===d&&(d={events:[],path:v}),d.events.push(m)}d&&a.eventLists_.push(d)}function Ya(a,c,d){tc(a,d),Qs(a,f=>Lt(f,c))}function sr(a,c,d){tc(a,d),Qs(a,f=>Se(f,c)||Se(c,f))}function Qs(a,c){a.recursionDepth_++;let d=!0;for(let f=0;f<a.eventLists_.length;f++){const m=a.eventLists_[f];m&&(c(m.path)?(wu(a.eventLists_[f]),a.eventLists_[f]=null):d=!1)}d&&(a.eventLists_=[]),a.recursionDepth_--}function wu(a){for(let c=0;c<a.events.length;c++){const d=a.events[c];if(null!==d){a.events[c]=null;const f=d.getEventRunner();tr&&Ft("event: "+d.toString()),Ti(f)}}}const Du="repo_interrupt",Oo=25;class Zs{constructor(c,d,f,m){this.repoInfo_=c,this.forceRestClient_=d,this.authTokenProvider_=f,this.appCheckProvider_=m,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Eu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Na(),this.transactionQueueTree_=new _u,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uf(a){const d=a.infoData_.getNode(new Oe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+d}function je(a){return Kp({timestamp:uf(a)})}function Xs(a,c,d,f,m){a.dataUpdateCount++;const v=new Oe(c);d=a.interceptServerDataCallback_?a.interceptServerDataCallback_(c,d):d;let E=[];if(m)if(f){const T=(0,N.kH)(d,M=>zt(M));E=function $n(a,c,d,f){const m=Ld(a,f);if(m){const v=Ga(m),E=v.path,I=v.queryId,T=Tr(E,c),M=Ae.fromObject(d);return fu(a,E,new Br(js(I),T,M))}return[]}(a.serverSyncTree_,v,T,m)}else{const T=zt(d);E=rn(a.serverSyncTree_,v,T,m)}else if(f){const T=(0,N.kH)(d,M=>zt(M));E=function Bi(a,c,d){const f=Ae.fromObject(d);return Kt(a,new Br({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,f))}(a.serverSyncTree_,v,T)}else{const T=zt(d);E=or(a.serverSyncTree_,v,T)}let I=v;E.length>0&&(I=Lo(a,v)),sr(a.eventQueue_,I,E)}function Iu(a,c){Ud(a,"connected",c),!1===c&&function Hd(a){Qe(a,"onDisconnectEvents");const c=je(a),d=Na();Te(a.onDisconnect_,We(),(m,v)=>{const E=sf(m,v,a.serverSyncTree_,c);Vs(d,m,E)});let f=[];Te(d,We(),(m,v)=>{f=f.concat(or(a.serverSyncTree_,m,v));const E=ar(a,m);Lo(a,E)}),a.onDisconnect_=Na(),sr(a.eventQueue_,We(),f)}(a)}function Ud(a,c,d){const f=new Oe("/.info/"+c),m=zt(d);a.infoData_.updateSnapshot(f,m);const v=or(a.infoSyncTree_,f,m);sr(a.eventQueue_,f,v)}function Qa(a){return a.nextWriteId_++}function Js(a,c,d,f,m){Qe(a,"set",{path:c.toString(),value:d,priority:f});const v=je(a),E=zt(d,f),I=Wr(a.serverSyncTree_,c),T=af(E,I,v),M=Qa(a),V=vs(a.serverSyncTree_,c,T,M,!0);tc(a.eventQueue_,V),a.server_.put(c.toString(),E.val(!0),(Y,fe)=>{const ve="ok"===Y;ve||qt("set at "+c+" failed: "+Y);const at=so(a.serverSyncTree_,M,!ve);sr(a.eventQueue_,c,at),Fo(0,m,Y,fe)});const U=ar(a,c);Lo(a,U),sr(a.eventQueue_,U,[])}function eg(a,c,d){a.server_.onDisconnectCancel(c.toString(),(f,m)=>{"ok"===f&&Vl(a.onDisconnect_,c),Fo(0,d,f,m)})}function Su(a,c,d,f){const m=zt(d);a.server_.onDisconnectPut(c.toString(),m.val(!0),(v,E)=>{"ok"===v&&Vs(a.onDisconnect_,c,m),Fo(0,f,v,E)})}function xe(a,c,d){let f;f=".info"===Ue(c._path)?Vt(a.infoSyncTree_,c,d):Vt(a.serverSyncTree_,c,d),Ya(a.eventQueue_,c._path,f)}function rt(a){a.persistentConnection_&&a.persistentConnection_.interrupt(Du)}function Qe(a,...c){let d="";a.persistentConnection_&&(d=a.persistentConnection_.id+":"),Ft(d,...c)}function Fo(a,c,d,f){c&&Ti(()=>{if("ok"===d)c(null);else{const m=(d||"error").toUpperCase();let v=m;f&&(v+=": "+f);const E=new Error(v);E.code=m,c(E)}})}function Gr(a,c,d){return Wr(a.serverSyncTree_,c,d)||Le.EMPTY_NODE}function Za(a,c=a.transactionQueueTree_){if(c||Vo(a,c),bs(c)){const d=qd(a,c);(0,N.vA)(d.length>0,"Sending zero length transaction queue"),d.every(m=>0===m.status)&&function Wd(a,c,d){const f=d.map(M=>M.currentWriteId),m=Gr(a,c,f);let v=m;const E=m.hash();for(let M=0;M<d.length;M++){const V=d[M];(0,N.vA)(0===V.status,"tryToSendTransactionQueue_: items in queue should all be run."),V.status=1,V.retryCount++;const U=Tr(c,V.path);v=v.updateChild(U,V.currentOutputSnapshotRaw)}const I=v.val(!0),T=c;a.server_.put(T.toString(),I,M=>{Qe(a,"transaction put response",{path:T.toString(),status:M});let V=[];if("ok"===M){const U=[];for(let Y=0;Y<d.length;Y++)d[Y].status=2,V=V.concat(so(a.serverSyncTree_,d[Y].currentWriteId)),d[Y].onComplete&&U.push(()=>d[Y].onComplete(null,!0,d[Y].currentOutputSnapshotResolved)),d[Y].unwatcher();Vo(a,yu(a.transactionQueueTree_,c)),Za(a,a.transactionQueueTree_),sr(a.eventQueue_,c,V);for(let Y=0;Y<U.length;Y++)Ti(U[Y])}else{if("datastale"===M)for(let U=0;U<d.length;U++)d[U].status=3===d[U].status?4:0;else{qt("transaction at "+T.toString()+" failed: "+M);for(let U=0;U<d.length;U++)d[U].status=4,d[U].abortReason=M}Lo(a,c)}},E)}(a,Ks(c),d)}else Bd(c)&&vu(c,d=>{Za(a,d)})}function Lo(a,c){const d=Gd(a,c),f=Ks(d);return function x_(a,c,d){if(0===c.length)return;const f=[];let m=[];const E=c.filter(I=>0===I.status).map(I=>I.currentWriteId);for(let I=0;I<c.length;I++){const T=c[I],M=Tr(d,T.path);let U,V=!1;if((0,N.vA)(null!==M,"rerunTransactionsUnderNode_: relativePath should not be null."),4===T.status)V=!0,U=T.abortReason,m=m.concat(so(a.serverSyncTree_,T.currentWriteId,!0));else if(0===T.status)if(T.retryCount>=Oo)V=!0,U="maxretry",m=m.concat(so(a.serverSyncTree_,T.currentWriteId,!0));else{const Y=Gr(a,T.path,E);T.currentInputSnapshot=Y;const fe=c[I].update(Y.val());if(void 0!==fe){pi("transaction failed: Data returned ",fe,T.path);let ve=zt(fe);"object"==typeof fe&&null!=fe&&(0,N.gR)(fe,".priority")||(ve=ve.updatePriority(Y.getPriority()));const Zn=T.currentWriteId,ra=je(a),ol=af(ve,Y,ra);T.currentOutputSnapshotRaw=ve,T.currentOutputSnapshotResolved=ol,T.currentWriteId=Qa(a),E.splice(E.indexOf(Zn),1),m=m.concat(vs(a.serverSyncTree_,T.path,ol,T.currentWriteId,T.applyLocally)),m=m.concat(so(a.serverSyncTree_,Zn,!0))}else V=!0,U="nodata",m=m.concat(so(a.serverSyncTree_,T.currentWriteId,!0))}sr(a.eventQueue_,d,m),m=[],V&&(c[I].status=2,setTimeout(c[I].unwatcher,Math.floor(0)),c[I].onComplete&&f.push("nodata"===U?()=>c[I].onComplete(null,!1,c[I].currentInputSnapshot):()=>c[I].onComplete(new Error(U),!1,null)))}Vo(a,a.transactionQueueTree_);for(let I=0;I<f.length;I++)Ti(f[I]);Za(a,a.transactionQueueTree_)}(a,qd(a,d),f),f}function Gd(a,c){let d,f=a.transactionQueueTree_;for(d=Ue(c);null!==d&&void 0===bs(f);)f=yu(f,d),d=Ue(c=$e(c));return f}function qd(a,c){const d=[];return rc(a,c,d),d.sort((f,m)=>f.order-m.order),d}function rc(a,c,d){const f=bs(c);if(f)for(let m=0;m<f.length;m++)d.push(f[m]);vu(c,m=>{rc(a,m,d)})}function Vo(a,c){const d=bs(c);if(d){let f=0;for(let m=0;m<d.length;m++)2!==d[m].status&&(d[f]=d[m],f++);d.length=f,vr(c,d.length>0?d:void 0)}vu(c,f=>{Vo(a,f)})}function ar(a,c){const d=Ks(Gd(a,c)),f=yu(a.transactionQueueTree_,c);return function lf(a,c,d){let f=d?a:a.parent;for(;null!==f;){if(c(f))return!0;f=f.parent}}(f,m=>{Ar(a,m)}),Ar(a,f),Jl(f,m=>{Ar(a,m)}),d}function Ar(a,c){const d=bs(c);if(d){const f=[];let m=[],v=-1;for(let E=0;E<d.length;E++)3===d[E].status||(1===d[E].status?((0,N.vA)(v===E-1,"All SENT items should be at beginning of queue."),v=E,d[E].status=3,d[E].abortReason="set"):((0,N.vA)(0===d[E].status,"Unexpected transaction status in abort"),d[E].unwatcher(),m=m.concat(so(a.serverSyncTree_,d[E].currentWriteId,!0)),d[E].onComplete&&f.push(d[E].onComplete.bind(null,new Error("set"),!1,null))));-1===v?vr(c,void 0):d.length=v+1,sr(a.eventQueue_,Ks(c),m);for(let E=0;E<f.length;E++)Ti(f[E])}}const ei=function(a,c){const d=Kd(a),f=d.namespace;return"firebase.com"===d.domain&&Xt(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==d.domain&&Xt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ie(d.host,d.secure,f,"ws"===d.scheme||"wss"===d.scheme,c,"",f!==d.subdomain),path:new Oe(d.pathString)}},Kd=function(a){let c="",d="",f="",m="",v="",E=!0,I="https",T=443;if("string"==typeof a){let M=a.indexOf("//");M>=0&&(I=a.substring(0,M-1),a=a.substring(M+2));let V=a.indexOf("/");-1===V&&(V=a.length);let U=a.indexOf("?");-1===U&&(U=a.length),c=a.substring(0,Math.min(V,U)),V<U&&(m=function df(a){let c="";const d=a.split("/");for(let f=0;f<d.length;f++)if(d[f].length>0){let m=d[f];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch{}c+="/"+m}return c}(a.substring(V,U)));const Y=function gi(a){const c={};"?"===a.charAt(0)&&(a=a.substring(1));for(const d of a.split("&")){if(0===d.length)continue;const f=d.split("=");2===f.length?c[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):qt(`Invalid query segment '${d}' in query '${a}'`)}return c}(a.substring(Math.min(a.length,U)));M=c.indexOf(":"),M>=0?(E="https"===I||"wss"===I,T=parseInt(c.substring(M+1),10)):M=c.length;const fe=c.slice(0,M);if("localhost"===fe.toLowerCase())d="localhost";else if(fe.split(".").length<=2)d=fe;else{const ve=c.indexOf(".");f=c.substring(0,ve).toLowerCase(),d=c.substring(ve+1),v=f}"ns"in Y&&(v=Y.ns)}return{host:c,port:T,domain:d,subdomain:f,secure:E,scheme:I,pathString:m,namespace:v}},ic="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",P_=function(){let a=0;const c=[];return function(d){const f=d===a;let m;a=d;const v=new Array(8);for(m=7;m>=0;m--)v[m]=ic.charAt(d%64),d=Math.floor(d/64);(0,N.vA)(0===d,"Cannot push at time == 0");let E=v.join("");if(f){for(m=11;m>=0&&63===c[m];m--)c[m]=0;c[m]++}else for(m=0;m<12;m++)c[m]=Math.floor(64*Math.random());for(m=0;m<12;m++)E+=ic.charAt(c[m]);return(0,N.vA)(20===E.length,"nextPushId: Length should be 20."),E}}();class hf{constructor(c,d,f,m){this.eventType=c,this.eventRegistration=d,this.snapshot=f,this.prevName=m}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.As)(this.snapshot.exportVal())}}class oc{constructor(c,d,f){this.eventRegistration=c,this.error=d,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Xa{constructor(c,d){this.snapshotCallback=c,this.cancelCallback=d}onValue(c,d){this.snapshotCallback.call(null,c,d)}onCancel(c){return(0,N.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class Tu{constructor(c,d){this._repo=c,this._path=d}cancel(){const c=new N.cY;return eg(this._repo,this._path,c.wrapCallback(()=>{})),c.promise}remove(){En("OnDisconnect.remove",this._path);const c=new N.cY;return Su(this._repo,this._path,null,c.wrapCallback(()=>{})),c.promise}set(c){En("OnDisconnect.set",this._path),fi("OnDisconnect.set",c,this._path,!1);const d=new N.cY;return Su(this._repo,this._path,c,d.wrapCallback(()=>{})),d.promise}setWithPriority(c,d){En("OnDisconnect.setWithPriority",this._path),fi("OnDisconnect.setWithPriority",c,this._path,!1),Wn("OnDisconnect.setWithPriority",d,!1);const f=new N.cY;return function $d(a,c,d,f,m){const v=zt(d,f);a.server_.onDisconnectPut(c.toString(),v.val(!0),(E,I)=>{"ok"===E&&Vs(a.onDisconnect_,c,v),Fo(0,m,E,I)})}(this._repo,this._path,c,d,f.wrapCallback(()=>{})),f.promise}update(c){En("OnDisconnect.update",this._path),bu("OnDisconnect.update",c,this._path,!1);const d=new N.cY;return function zd(a,c,d,f){if((0,N.Im)(d))return Ft("onDisconnect().update() called with empty data.  Don't do anything."),void Fo(0,f,"ok",void 0);a.server_.onDisconnectMerge(c.toString(),d,(m,v)=>{"ok"===m&&en(d,(E,I)=>{const T=zt(I);Vs(a.onDisconnect_,He(c,E),T)}),Fo(0,f,m,v)})}(this._repo,this._path,c,d.wrapCallback(()=>{})),d.promise}}class lr{constructor(c,d,f,m){this._repo=c,this._path=d,this._queryParams=f,this._orderByCalled=m}get key(){return Be(this._path)?null:Kc(this._path)}get ref(){return new xr(this._repo,this._path)}get _queryIdentifier(){const c=Ll(this._queryParams),d=si(c);return"{}"===d?"default":d}get _queryObject(){return Ll(this._queryParams)}isEqual(c){if(!((c=(0,N.Ku)(c))instanceof lr))return!1;const d=this._repo===c._repo,f=Lt(this._path,c._path);return d&&f&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function S_(a){let c="";for(let d=a.pieceNum_;d<a.pieces_.length;d++)""!==a.pieces_[d]&&(c+="/"+encodeURIComponent(String(a.pieces_[d])));return c||"/"}(this._path)}}function Ja(a,c){if(!0===a._orderByCalled)throw new Error(c+": You can't combine multiple orderBy calls.")}function Bo(a){let c=null,d=null;if(a.hasStart()&&(c=a.getIndexStartValue()),a.hasEnd()&&(d=a.getIndexEndValue()),a.getIndex()===Fi){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",m="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(a.hasStart()){if(a.getIndexStartName()!==cn)throw new Error(f);if("string"!=typeof c)throw new Error(m)}if(a.hasEnd()){if(a.getIndexEndName()!==Jt)throw new Error(f);if("string"!=typeof d)throw new Error(m)}}else if(a.getIndex()===Nt){if(null!=c&&!zn(c)||null!=d&&!zn(d))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.vA)(a.getIndex()instanceof Li||a.getIndex()===Pl,"unknown index type."),null!=c&&"object"==typeof c||null!=d&&"object"==typeof d)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function el(a){if(a.hasStart()&&a.hasEnd()&&a.hasLimit()&&!a.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class xr extends lr{constructor(c,d){super(c,d,new et,!1)}get parent(){const c=Ns(this._path);return null===c?null:new xr(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class jo{constructor(c,d,f){this._node=c,this.ref=d,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const d=new Oe(c),f=Uo(this.ref,c);return new jo(this._node.getChild(d),f,Nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,m)=>c(new jo(m,Uo(this.ref,f),Nt)))}hasChild(c){const d=new Oe(c);return!this._node.getChild(d).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yd(a,c){return(a=(0,N.Ku)(a))._checkNotDeleted("ref"),void 0!==c?Uo(a._root,c):a._root}function Mu(a,c){(a=(0,N.Ku)(a))._checkNotDeleted("refFromURL");const d=ei(c,a._repo.repoInfo_.nodeAdmin);Cu("refFromURL",d);const f=d.repoInfo;return!a._repo.repoInfo_.isCustomHost()&&f.host!==a._repo.repoInfo_.host&&Xt("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+a._repo.repoInfo_.host+")"),Yd(a,d.path.toString())}function Uo(a,c){return null===Ue((a=(0,N.Ku)(a))._path)?Xp("child","path",c,!1):Ka("child","path",c,!1),new xr(a._repo,He(a._path,c))}function Qd(a){return a=(0,N.Ku)(a),new Tu(a._repo,a._path)}function Qn(a,c){a=(0,N.Ku)(a),En("push",a._path),fi("push",c,a._path,!0);const d=uf(a._repo),f=P_(d),m=Uo(a,f),v=Uo(a,f);let E;return E=null!=c?At(v,c).then(()=>v):Promise.resolve(v),m.then=E.then.bind(E),m.catch=E.then.bind(E,void 0),m}function Ho(a){return En("remove",a._path),At(a,null)}function At(a,c){a=(0,N.Ku)(a),En("set",a._path),fi("set",c,a._path,!1);const d=new N.cY;return Js(a._repo,a._path,c,null,d.wrapCallback(()=>{})),d.promise}function Zd(a,c){a=(0,N.Ku)(a),En("setPriority",a._path),Wn("setPriority",c,!1);const d=new N.cY;return Js(a._repo,He(a._path,".priority"),c,null,d.wrapCallback(()=>{})),d.promise}function tg(a,c,d){if(En("setWithPriority",a._path),fi("setWithPriority",c,a._path,!1),Wn("setWithPriority",d,!1),".length"===a.key||".keys"===a.key)throw"setWithPriority failed: "+a.key+" is a read-only object.";const f=new N.cY;return Js(a._repo,a._path,c,d,f.wrapCallback(()=>{})),f.promise}function ng(a,c){bu("update",c,a._path,!1);const d=new N.cY;return function ao(a,c,d,f){Qe(a,"update",{path:c.toString(),value:d});let m=!0;const v=je(a),E={};if(en(d,(I,T)=>{m=!1,E[I]=sf(He(c,I),zt(T),a.serverSyncTree_,v)}),m)Ft("update() called with empty data.  Don't do anything."),Fo(0,f,"ok",void 0);else{const I=Qa(a),T=function ye(a,c,d,f){!function wd(a,c,d,f){(0,N.vA)(f>a.lastWriteId,"Stacking an older merge on top of newer ones"),a.allWrites.push({path:c,children:d,writeId:f,visible:!0}),a.visibleWrites=Ao(a.visibleWrites,c,d),a.lastWriteId=f}(a.pendingWriteTree_,c,d,f);const m=Ae.fromObject(d);return Kt(a,new Br({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,m))}(a.serverSyncTree_,c,E,I);tc(a.eventQueue_,T),a.server_.merge(c.toString(),d,(M,V)=>{const U="ok"===M;U||qt("update at "+c+" failed: "+M);const Y=so(a.serverSyncTree_,I,!U),fe=Y.length>0?Lo(a,c):c;sr(a.eventQueue_,fe,Y),Fo(0,f,M,V)}),en(d,M=>{const V=ar(a,He(c,M));Lo(a,V)}),sr(a.eventQueue_,c,[])}}(a._repo,a._path,c,d.wrapCallback(()=>{})),d.promise}function ff(a){a=(0,N.Ku)(a);const c=new Xa(()=>{}),d=new ta(c);return function Jp(a,c,d){const f=function Wa(a,c){const d=c._path;let f=null;a.syncPointTree_.foreachOnPath(d,(M,V)=>{const U=Tr(M,d);f=f||It(V,U)});let m=a.syncPointTree_.get(d);m?f=f||It(m,We()):(m=new Yn,a.syncPointTree_=a.syncPointTree_.set(d,m));const v=null!=f,E=v?new ds(f,!0,!1):null;return function kd(a){return Ur(a.viewCache_)}(Ve(m,c,La(a.pendingWriteTree_,c._path),v?E.getNode():Le.EMPTY_NODE,v))}(a.serverSyncTree_,c);return null!=f?Promise.resolve(f):a.server_.get(c).then(m=>{const v=zt(m).withIndex(c._queryParams.getIndex());let E;if(Zl(a.serverSyncTree_,c,d,!0),c._queryParams.loadsAllData())E=or(a.serverSyncTree_,c._path,v);else{const I=Jr(a.serverSyncTree_,c);E=rn(a.serverSyncTree_,c._path,v,I)}return sr(a.eventQueue_,c._path,E),Vt(a.serverSyncTree_,c,d,null,!0),v},m=>(Qe(a,"get for query "+(0,N.As)(c)+" failed: "+m),Promise.reject(new Error(m))))}(a._repo,a,d).then(f=>new jo(f,new xr(a._repo,a._path),a._queryParams.getIndex()))}class ta{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,d){const f=d._queryParams.getIndex();return new hf("value",this,new jo(c.snapshotNode,new xr(d._repo,d._path),f))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new oc(this,c,d):null}matches(c){return c instanceof ta&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class sc{constructor(c,d){this.eventType=c,this.callbackContext=d}respondsTo(c){let d="children_added"===c?"child_added":c;return d="children_removed"===d?"child_removed":d,this.eventType===d}createCancelEvent(c,d){return this.callbackContext.hasCancelCallback?new oc(this,c,d):null}createEvent(c,d){(0,N.vA)(null!=c.childName,"Child events should have a childName.");const f=Uo(new xr(d._repo,d._path),c.childName),m=d._queryParams.getIndex();return new hf(c.type,this,new jo(c.snapshotNode,f,m),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof sc&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $o(a,c,d,f,m){let v;if("object"==typeof f&&(v=void 0,m=f),"function"==typeof f&&(v=f),m&&m.onlyOnce){const T=d,M=(V,U)=>{xe(a._repo,a,I),T(V,U)};M.userCallback=d.userCallback,M.context=d.context,d=M}const E=new Xa(d,v||void 0),I="value"===c?new ta(E):new sc(c,E);return function K(a,c,d){let f;f=".info"===Ue(c._path)?Zl(a.infoSyncTree_,c,d):Zl(a.serverSyncTree_,c,d),Ya(a.eventQueue_,c._path,f)}(a._repo,a,I),()=>xe(a._repo,a,I)}function ti(a,c,d,f){return $o(a,"value",c,d,f)}function rg(a,c,d,f){return $o(a,"child_added",c,d,f)}function Xd(a,c,d,f){return $o(a,"child_changed",c,d,f)}function Au(a,c,d,f){return $o(a,"child_moved",c,d,f)}function tl(a,c,d,f){return $o(a,"child_removed",c,d,f)}function Jd(a,c,d){let f=null;const m=d?new Xa(d):null;"value"===c?f=new ta(m):c&&(f=new sc(c,m)),xe(a._repo,a,f)}class ni{}class xu extends ni{constructor(c,d){super(),this._value=c,this._key=d,this.type="endAt"}_apply(c){fi("endAt",this._value,c._path,!0);const d=Ol(c._queryParams,this._value,this._key);if(el(d),Bo(d),c._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lr(c._repo,c._path,d,c._orderByCalled)}}function ig(a,c){return qa("endAt","key",c,!0),new xu(a,c)}class zo extends ni{constructor(c,d){super(),this._value=c,this._key=d,this.type="endBefore"}_apply(c){fi("endBefore",this._value,c._path,!1);const d=function To(a,c,d){let f;return f=Ol(a,c,a.index_===Fi||d?d:cn),f.endBeforeSet_=!0,f}(c._queryParams,this._value,this._key);if(el(d),Bo(d),c._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lr(c._repo,c._path,d,c._orderByCalled)}}function ac(a,c){return qa("endBefore","key",c,!0),new zo(a,c)}class Pu extends ni{constructor(c,d){super(),this._value=c,this._key=d,this.type="startAt"}_apply(c){fi("startAt",this._value,c._path,!0);const d=nu(c._queryParams,this._value,this._key);if(el(d),Bo(d),c._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new lr(c._repo,c._path,d,c._orderByCalled)}}function eh(a=null,c){return qa("startAt","key",c,!0),new Pu(a,c)}class og extends ni{constructor(c,d){super(),this._value=c,this._key=d,this.type="startAfter"}_apply(c){fi("startAfter",this._value,c._path,!1);const d=function tf(a,c,d){let f;return f=nu(a,c,a.index_===Fi||d?d:Jt),f.startAfterSet_=!0,f}(c._queryParams,this._value,this._key);if(el(d),Bo(d),c._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new lr(c._repo,c._path,d,c._orderByCalled)}}function sg(a,c){return qa("startAfter","key",c,!0),new og(a,c)}class ag extends ni{constructor(c){super(),this._limit=c,this.type="limitToFirst"}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new lr(c._repo,c._path,function ef(a,c){const d=a.copy();return d.limitSet_=!0,d.limit_=c,d.viewFrom_="l",d}(c._queryParams,this._limit),c._orderByCalled)}}function R_(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ag(a)}class k_ extends ni{constructor(c){super(),this._limit=c,this.type="limitToLast"}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new lr(c._repo,c._path,function mr(a,c){const d=a.copy();return d.limitSet_=!0,d.limit_=c,d.viewFrom_="r",d}(c._queryParams,this._limit),c._orderByCalled)}}function th(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new k_(a)}class pf extends ni{constructor(c){super(),this._path=c,this.type="orderByChild"}_apply(c){Ja(c,"orderByChild");const d=new Oe(this._path);if(Be(d))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new Li(d),m=Ra(c._queryParams,f);return Bo(m),new lr(c._repo,c._path,m,!0)}}function gf(a){if("$key"===a)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===a)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===a)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ka("orderByChild","path",a,!1),new pf(a)}class nl extends ni{constructor(){super(...arguments),this.type="orderByKey"}_apply(c){Ja(c,"orderByKey");const d=Ra(c._queryParams,Fi);return Bo(d),new lr(c._repo,c._path,d,!0)}}function mf(){return new nl}class nh extends ni{constructor(){super(...arguments),this.type="orderByPriority"}_apply(c){Ja(c,"orderByPriority");const d=Ra(c._queryParams,Nt);return Bo(d),new lr(c._repo,c._path,d,!0)}}function rl(){return new nh}class lg extends ni{constructor(){super(...arguments),this.type="orderByValue"}_apply(c){Ja(c,"orderByValue");const d=Ra(c._queryParams,Pl);return Bo(d),new lr(c._repo,c._path,d,!0)}}function lc(){return new lg}class rh extends ni{constructor(c,d){super(),this._value=c,this._key=d,this.type="equalTo"}_apply(c){if(fi("equalTo",this._value,c._path,!1),c._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(c._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xu(this._value,this._key)._apply(new Pu(this._value,this._key)._apply(c))}}function Ru(a,c){return qa("equalTo","key",c,!0),new rh(a,c)}function N_(a,...c){let d=(0,N.Ku)(a);for(const f of c)d=f._apply(d);return d}(function $a(a){(0,N.vA)(!bn,"__referenceConstructor has already been defined"),bn=a})(xr),function ys(a){(0,N.vA)(!Yl,"__referenceConstructor has already been defined"),Yl=a}(xr);const ih="FIREBASE_DATABASE_EMULATOR_HOST",il={};let _f=!1;function oh(a,c,d,f,m){let v=f||a.options.databaseURL;void 0===v&&(a.options.projectId||Xt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ft("Using default host for project ",a.options.projectId),v=`${a.options.projectId}-default-rtdb.firebaseio.com`);let T,M,E=ei(v,m),I=E.repoInfo;typeof process<"u"&&process.env&&(M=process.env[ih]),M?(T=!0,v=`http://${M}?ns=${I.namespace}`,E=ei(v,m),I=E.repoInfo):T=!E.repoInfo.secure;const V=m&&T?new Eo(Eo.OWNER):new Gc(a.name,a.options,c);Cu("Invalid Firebase Database URL",E),Be(E.path)||Xt("Database URL must point to the root of a Firebase Database (not including a child path).");const U=function ku(a,c,d,f){let m=il[c.name];m||(m={},il[c.name]=m);let v=m[a.toURLString()];return v&&Xt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),v=new Zs(a,_f,d,f),m[a.toURLString()]=v,v}(I,a,V,new wa(a,d));return new uc(U,a)}class uc{constructor(c,d){this._repoInternal=c,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jd(a,c,d){if(a.stats_=Ai(a.repoInfo_),a.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)a.server_=new ka(a.repoInfo_,(f,m,v,E)=>{Xs(a,f,m,v,E)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>Iu(a,!0),0);else{if(typeof d<"u"&&null!==d){if("object"!=typeof d)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.As)(d)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}a.persistentConnection_=new Rn(a.repoInfo_,c,(f,m,v,E)=>{Xs(a,f,m,v,E)},f=>{Iu(a,f)},f=>{!function nc(a,c){en(c,(d,f)=>{Ud(a,d,f)})}(a,f)},a.authTokenProvider_,a.appCheckProvider_,d),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(f=>{a.server_.refreshAuthToken(f)}),a.appCheckProvider_.addTokenChangeListener(f=>{a.server_.refreshAppCheckToken(f.token)}),a.statsReporter_=function qc(a,c){const d=a.toString();return Qr[d]||(Qr[d]=c()),Qr[d]}(a.repoInfo_,()=>new Ed(a.stats_,a.server_)),a.infoData_=new jp,a.infoSyncTree_=new zr({startListening:(f,m,v,E)=>{let I=[];const T=a.infoData_.getNode(f._path);return T.isEmpty()||(I=or(a.infoSyncTree_,f._path,T),setTimeout(()=>{E("ok")},0)),I},stopListening:()=>{}}),Ud(a,"connected",!1),a.serverSyncTree_=new zr({startListening:(f,m,v,E)=>(a.server_.listen(f,v,m,(I,T)=>{const M=E(I,T);sr(a.eventQueue_,f._path,M)}),[]),stopListening:(f,m)=>{a.server_.unlisten(f,m)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xr(this._repo,We())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function cc(a,c){const d=il[c];(!d||d[a.key]!==a)&&Xt(`Database ${c}(${a.repoInfo_}) has already been deleted.`),rt(a),delete d[a.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&Xt("Cannot call "+c+" on a deleted database.")}}function Ou(){R.IS_TRANSPORT_INITIALIZED&&qt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function dc(){Ou(),Vr.forceDisallow()}function hc(){Ou(),Oi.forceDisallow(),Vr.forceAllow()}function fc(a=(0,me.Sx)(),c){const d=(0,me.j6)(a,"database").getImmediate({identifier:c});if(!d._instanceStarted){const f=(0,N.yU)("database");f&&Fu(d,...f)}return d}function Fu(a,c,d,f={}){(a=(0,N.Ku)(a))._checkNotDeleted("useEmulator");const m=`${c}:${d}`,v=a._repoInternal;if(a._instanceStarted){if(m===a._repoInternal.repoInfo_.host&&(0,N.bD)(f,v.repoInfo_.emulatorOptions))return;Xt("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let E;if(v.repoInfo_.nodeAdmin)f.mockUserToken&&Xt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new Eo(Eo.OWNER);else if(f.mockUserToken){const I="string"==typeof f.mockUserToken?f.mockUserToken:(0,N.Fy)(f.mockUserToken,a.app.options.projectId);E=new Eo(I)}(0,N.zJ)(c)&&((0,N.gE)(c),(0,N.P1)("Database",!0)),function mi(a,c,d,f){const m=c.lastIndexOf(":"),v=c.substring(0,m),E=(0,N.zJ)(v);a.repoInfo_=new ie(c,E,a.repoInfo_.namespace,a.repoInfo_.webSocketOnly,a.repoInfo_.nodeAdmin,a.repoInfo_.persistenceKey,a.repoInfo_.includeNamespaceInQueryParams,!0,d),f&&(a.authTokenProvider_=f)}(v,m,f,E)}function sh(a){(a=(0,N.Ku)(a))._checkNotDeleted("goOffline"),rt(a._repo)}function cg(a){(a=(0,N.Ku)(a))._checkNotDeleted("goOnline"),function dt(a){a.persistentConnection_&&a.persistentConnection_.resume(Du)}(a._repo)}function Lu(a,c){Gn(a,c)}const ug={".sv":"timestamp"};function yf(){return ug}function ah(a){return{".sv":{increment:a}}}class Wo{constructor(c,d){this.committed=c,this.snapshot=d}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function na(a,c,d){var f;if(a=(0,N.Ku)(a),En("Reference.transaction",a._path),".length"===a.key||".keys"===a.key)throw"Reference.transaction failed: "+a.key+" is a read-only object.";const m=null===(f=d?.applyLocally)||void 0===f||f,v=new N.cY,I=ti(a,()=>{});return function ea(a,c,d,f,m,v){Qe(a,"transaction on "+c);const E={path:c,update:d,onComplete:f,status:null,order:ii(),applyLocally:v,retryCount:0,unwatcher:m,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},I=Gr(a,c,void 0);E.currentInputSnapshot=I;const T=E.update(I.val());if(void 0===T)E.unwatcher(),E.currentOutputSnapshotRaw=null,E.currentOutputSnapshotResolved=null,E.onComplete&&E.onComplete(null,!1,E.currentInputSnapshot);else{pi("transaction failed: Data returned ",T,E.path),E.status=0;const M=yu(a.transactionQueueTree_,c),V=bs(M)||[];let U;V.push(E),vr(M,V),"object"==typeof T&&null!==T&&(0,N.gR)(T,".priority")?(U=(0,N.yw)(T,".priority"),(0,N.vA)(zn(U),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):U=(Wr(a.serverSyncTree_,c)||Le.EMPTY_NODE).getPriority().val();const Y=je(a),fe=zt(T,U),ve=af(fe,I,Y);E.currentOutputSnapshotRaw=fe,E.currentOutputSnapshotResolved=ve,E.currentWriteId=Qa(a);const at=vs(a.serverSyncTree_,c,ve,E.currentWriteId,E.applyLocally);sr(a.eventQueue_,c,at),Za(a,a.transactionQueueTree_)}}(a._repo,a._path,c,(T,M,V)=>{let U=null;T?v.reject(T):(U=new jo(V,new xr(a._repo,a._path),Nt),v.resolve(new Wo(M,U)))},I,m),v.promise}Rn.prototype.simpleListen=function(a,c){this.sendRequest("q",{p:a},c)},Rn.prototype.echo=function(a,c){this.sendRequest("echo",{d:a},c)};const pn=function(a){const c=Rn.prototype.put;return Rn.prototype.put=function(d,f,m,v){void 0!==v&&(v=a()),c.call(this,d,f,m,v)},function(){Rn.prototype.put=c}},_=function(a){!function Nu(a){_f=a}(a)};function p({app:a,url:c,version:d,customAuthImpl:f,customAppCheckImpl:m,nodeAdmin:v=!1}){ln(d);const E=new Q.h1("database-standalone"),I=new Q.Kq("auth-internal",E);let T;return m&&(T=new Q.Kq("app-check-internal",E),T.setComponent(new Q.uA("app-check-internal",()=>m,"PRIVATE"))),I.setComponent(new Q.uA("auth-internal",()=>f,"PRIVATE")),oh(a,I,T,c,v)}!function pc(a){ln(me.MF),(0,me.om)(new Q.uA("database",(c,{instanceIdentifier:d})=>oh(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),d),"PUBLIC").setMultipleInstances(!0)),(0,me.KO)(bt,"1.0.20",a),(0,me.KO)(bt,"1.0.20","esm2017")}()},807:(Ca,Fr,Fe)=>{Fe.d(Fr,{g:()=>N.g,MF:()=>Pi,iF:()=>gr,yi:()=>rr,mq:()=>li,SV:()=>ie,HG:()=>ss,yX:()=>Pn,j6:()=>Ai,U6:()=>Qi,xZ:()=>os,om:()=>Qr,Us:()=>qc,Tj:()=>xn,NM:()=>Do,Sx:()=>Sr,Dk:()=>Ia,Wp:()=>Da,pN:()=>ci,aP:()=>ki,KO:()=>Ri,He:()=>Io});var P=Fe(467),me=Fe(958),Q=Fe(317),N=Fe(882);let bt,Ie;const re=new WeakMap,le=new WeakMap,Me=new WeakMap,st=new WeakMap,Et=new WeakMap;let Ki={get($,F,Z){if($ instanceof IDBTransaction){if("done"===F)return le.get($);if("objectStoreNames"===F)return $.objectStoreNames||Me.get($);if("store"===F)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Gn($[F])},set:($,F,Z)=>($[F]=Z,!0),has:($,F)=>$ instanceof IDBTransaction&&("done"===F||"store"===F)||F in $};function Ir($){return"function"==typeof $?function tr($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ln(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...F){return $.apply(Ft(this),F),Gn(re.get(this))}:function(...F){return Gn($.apply(Ft(this),F))}:function(F,...Z){const de=$.call(Ft(this),F,...Z);return Me.set(de,F.sort?F.sort():[F]),Gn(de)}}($):($ instanceof IDBTransaction&&function ii($){if(le.has($))return;const F=new Promise((Z,de)=>{const we=()=>{$.removeEventListener("complete",De),$.removeEventListener("error",Ne),$.removeEventListener("abort",Ne)},De=()=>{Z(),we()},Ne=()=>{de($.error||new DOMException("AbortError","AbortError")),we()};$.addEventListener("complete",De),$.addEventListener("error",Ne),$.addEventListener("abort",Ne)});le.set($,F)}($),(($,F)=>F.some(Z=>$ instanceof Z))($,function Zt(){return bt||(bt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Ki):$)}function Gn($){if($ instanceof IDBRequest)return function Vn($){const F=new Promise((Z,de)=>{const we=()=>{$.removeEventListener("success",De),$.removeEventListener("error",Ne)},De=()=>{Z(Gn($.result)),we()},Ne=()=>{de($.error),we()};$.addEventListener("success",De),$.addEventListener("error",Ne)});return F.then(Z=>{Z instanceof IDBCursor&&re.set(Z,$)}).catch(()=>{}),Et.set(F,$),F}($);if(st.has($))return st.get($);const F=Ir($);return F!==$&&(st.set($,F),Et.set(F,$)),F}const Ft=$=>Et.get($),Xt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],ns=new Map;function oi($,F){if(!($ instanceof IDBDatabase)||F in $||"string"!=typeof F)return;if(ns.get(F))return ns.get(F);const Z=F.replace(/FromIndex$/,""),de=F!==Z,we=qt.includes(Z);if(!(Z in(de?IDBIndex:IDBObjectStore).prototype)||!we&&!Xt.includes(Z))return;const De=function(){var Ne=(0,P.A)(function*(vt,...Oe){const We=this.transaction(vt,we?"readwrite":"readonly");let Ue=We.store;return de&&(Ue=Ue.index(Oe.shift())),(yield Promise.all([Ue[Z](...Oe),we&&We.done]))[0]});return function(Oe){return Ne.apply(this,arguments)}}();return ns.set(F,De),De}!function Ht($){Ki=$(Ki)}($=>({...$,get:(F,Z,de)=>oi(F,Z)||$.get(F,Z,de),has:(F,Z)=>!!oi(F,Z)||$.has(F,Z)}));class Dl{constructor(F){this.container=F}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function cn($){const F=$.getComponent();return"VERSION"===F?.type}(Z)){const de=Z.getImmediate();return`${de.library}/${de.version}`}return null}).filter(Z=>Z).join(" ")}}const Jt="@firebase/app",Mn="0.13.2",Lr=new Q.Vy("@firebase/app"),bo="@firebase/app-compat",si="@firebase/analytics-compat",As="@firebase/analytics",en="@firebase/app-check-compat",Co="@firebase/app-check",Ea="@firebase/auth",zc="@firebase/auth-compat",xs="@firebase/database",Ps="@firebase/data-connect",pd="@firebase/database-compat",Rs="@firebase/functions",Il="@firebase/functions-compat",Ti="@firebase/installations",Wc="@firebase/installations-compat",rs="@firebase/messaging",wa="@firebase/messaging-compat",Gc="@firebase/performance",Eo="@firebase/performance-compat",Mi="@firebase/remote-config",ai="@firebase/remote-config-compat",nr="@firebase/storage",is="@firebase/storage-compat",wo="@firebase/firestore",An="@firebase/ai",Ke="@firebase/firestore-compat",Yr="firebase",gr="[DEFAULT]",un={[Jt]:"fire-core",[bo]:"fire-core-compat",[As]:"fire-analytics",[si]:"fire-analytics-compat",[Co]:"fire-app-check",[en]:"fire-app-check-compat",[Ea]:"fire-auth",[zc]:"fire-auth-compat",[xs]:"fire-rtdb",[Ps]:"fire-data-connect",[pd]:"fire-rtdb-compat",[Rs]:"fire-fn",[Il]:"fire-fn-compat",[Ti]:"fire-iid",[Wc]:"fire-iid-compat",[rs]:"fire-fcm",[wa]:"fire-fcm-compat",[Gc]:"fire-perf",[Eo]:"fire-perf-compat",[Mi]:"fire-rc",[ai]:"fire-rc-compat",[nr]:"fire-gcs",[is]:"fire-gcs-compat",[wo]:"fire-fst",[Ke]:"fire-fst-compat",[An]:"fire-vertex","fire-js":"fire-js",[Yr]:"fire-js-all"},ie=new Map,xn=new Map,Pn=new Map;function rr($,F){try{$.container.addComponent(F)}catch(Z){Lr.debug(`Component ${F.name} failed to register with FirebaseApp ${$.name}`,Z)}}function li($,F){$.container.addOrOverwriteComponent(F)}function Qr($){const F=$.name;if(Pn.has(F))return Lr.debug(`There were multiple attempts to register component ${F}.`),!1;Pn.set(F,$);for(const Z of ie.values())rr(Z,$);for(const Z of xn.values())rr(Z,$);return!0}function Ai($,F){const Z=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),$.container.getProvider(F)}function qc($,F,Z=gr){Ai($,F).clearInstance(Z)}function Qi($){return void 0!==$.options}function os($){return null!=$&&void 0!==$.settings}function ss(){Pn.clear()}const Bn=new N.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ks{constructor(F,Z,de){this._isDeleted=!1,this._options=Object.assign({},F),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=de,this.container.addComponent(new me.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(F){this.checkDestroyed(),this._automaticDataCollectionEnabled=F}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(F){this._isDeleted=F}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}function wt($,F){const Z=(0,N.u)($.split(".")[1]);null!==Z?void 0!==JSON.parse(Z).exp?1e3*JSON.parse(Z).exp-(new Date).getTime()<=0&&console.error(`FirebaseServerApp ${F} is invalid: the token has expired.`):console.error(`FirebaseServerApp ${F} is invalid: expiration claim could not be parsed`):console.error(`FirebaseServerApp ${F} is invalid: second part could not be parsed.`)}class Pt extends ks{constructor(F,Z,de,we){const De=void 0===Z.automaticDataCollectionEnabled||Z.automaticDataCollectionEnabled,Ne={name:de,automaticDataCollectionEnabled:De};super(void 0!==F.apiKey?F:F.options,Ne,we),this._serverConfig=Object.assign({automaticDataCollectionEnabled:De},Z),this._serverConfig.authIdToken&&wt(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&wt(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Z.releaseOnDeref=void 0,Ri(Jt,Mn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(F){this.isDeleted||(this._refCount++,void 0!==F&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(F,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Do(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Bn.create("server-app-deleted")}}const Pi="11.10.0";function Da($,F={}){let Z=$;"object"!=typeof F&&(F={name:F});const de=Object.assign({name:gr,automaticDataCollectionEnabled:!0},F),we=de.name;if("string"!=typeof we||!we)throw Bn.create("bad-app-name",{appName:String(we)});if(Z||(Z=(0,N.T9)()),!Z)throw Bn.create("no-options");const De=ie.get(we);if(De){if((0,N.bD)(Z,De.options)&&(0,N.bD)(de,De.config))return De;throw Bn.create("duplicate-app",{appName:we})}const Ne=new me.h1(we);for(const Oe of Pn.values())Ne.addComponent(Oe);const vt=new ks(Z,de,Ne);return ie.set(we,vt),vt}function ci($,F){if((0,N.Bd)()&&!(0,N.p7)())throw Bn.create("invalid-server-app-environment");let Z;void 0===F.automaticDataCollectionEnabled&&(F.automaticDataCollectionEnabled=!0),Z=Qi($)?$.options:$;const de=Object.assign(Object.assign({},F),Z);if(void 0!==de.releaseOnDeref&&delete de.releaseOnDeref,void 0!==F.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Bn.create("finalization-registry-not-supported",{});const De=""+(We=JSON.stringify(de),[...We].reduce((Ue,Ji)=>Math.imul(31,Ue)+Ji.charCodeAt(0)|0,0)),Ne=xn.get(De);var We;if(Ne)return Ne.incRefCount(F.releaseOnDeref),Ne;const vt=new me.h1(De);for(const We of Pn.values())vt.addComponent(We);const Oe=new Pt(Z,F,De,vt);return xn.set(De,Oe),Oe}function Sr($=gr){const F=ie.get($);if(!F&&$===gr&&(0,N.T9)())return Da();if(!F)throw Bn.create("no-app",{appName:$});return F}function Ia(){return Array.from(ie.values())}function Do($){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.A)(function*($){let F=!1;const Z=$.name;ie.has(Z)?(F=!0,ie.delete(Z)):xn.has(Z)&&$.decRefCount()<=0&&(xn.delete(Z),F=!0),F&&(yield Promise.all($.container.getProviders().map(de=>de.delete())),$.isDeleted=!0)})).apply(this,arguments)}function Ri($,F,Z){var de;let we=null!==(de=un[$])&&void 0!==de?de:$;Z&&(we+=`-${Z}`);const De=we.match(/\s|\//),Ne=F.match(/\s|\//);if(De||Ne){const vt=[`Unable to register library "${we}" with version "${F}":`];return De&&vt.push(`library name "${we}" contains illegal characters (whitespace or "/")`),De&&Ne&&vt.push("and"),Ne&&vt.push(`version name "${F}" contains illegal characters (whitespace or "/")`),void Lr.warn(vt.join(" "))}Qr(new me.uA(`${we}-version`,()=>({library:we,version:F}),"VERSION"))}function ki($,F){if(null!==$&&"function"!=typeof $)throw Bn.create("invalid-log-argument");(0,Q.Ey)($,F)}function Io($){(0,Q.He)($)}const Xi="firebase-heartbeat-store";let Sa=null;function Ni(){return Sa||(Sa=function Yi($,F,{blocked:Z,upgrade:de,blocking:we,terminated:De}={}){const Ne=indexedDB.open($,F),vt=Gn(Ne);return de&&Ne.addEventListener("upgradeneeded",Oe=>{de(Gn(Ne.result),Oe.oldVersion,Oe.newVersion,Gn(Ne.transaction),Oe)}),Z&&Ne.addEventListener("blocked",Oe=>Z(Oe.oldVersion,Oe.newVersion,Oe)),vt.then(Oe=>{De&&Oe.addEventListener("close",()=>De()),we&&Oe.addEventListener("versionchange",We=>we(We.oldVersion,We.newVersion,We))}).catch(()=>{}),vt}("firebase-heartbeat-database",1,{upgrade:($,F)=>{if(0===F)try{$.createObjectStore(Xi)}catch(Z){console.warn(Z)}}}).catch($=>{throw Bn.create("idb-open",{originalErrorMessage:$.message})})),Sa}function R(){return(R=(0,P.A)(function*($){try{const Z=(yield Ni()).transaction(Xi),de=yield Z.objectStore(Xi).get(ee($));return yield Z.done,de}catch(F){if(F instanceof N.g)Lr.warn(F.message);else{const Z=Bn.create("idb-get",{originalErrorMessage:F?.message});Lr.warn(Z.message)}}})).apply(this,arguments)}function k($,F){return O.apply(this,arguments)}function O(){return(O=(0,P.A)(function*($,F){try{const de=(yield Ni()).transaction(Xi,"readwrite");yield de.objectStore(Xi).put(F,ee($)),yield de.done}catch(Z){if(Z instanceof N.g)Lr.warn(Z.message);else{const de=Bn.create("idb-set",{originalErrorMessage:Z?.message});Lr.warn(de.message)}}})).apply(this,arguments)}function ee($){return`${$.name}!${$.options.appId}`}class ze{constructor(F){this.container=F,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new vn(Z),this._heartbeatsCachePromise=this._storage.read().then(de=>(this._heartbeatsCache=de,de))}triggerHeartbeat(){var F=this;return(0,P.A)(function*(){var Z,de;try{const De=F.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ne=Ce();if(null==(null===(Z=F._heartbeatsCache)||void 0===Z?void 0:Z.heartbeats)&&(F._heartbeatsCache=yield F._heartbeatsCachePromise,null==(null===(de=F._heartbeatsCache)||void 0===de?void 0:de.heartbeats))||F._heartbeatsCache.lastSentHeartbeatDate===Ne||F._heartbeatsCache.heartbeats.some(vt=>vt.date===Ne))return;if(F._heartbeatsCache.heartbeats.push({date:Ne,agent:De}),F._heartbeatsCache.heartbeats.length>30){const vt=function ft($){if(0===$.length)return-1;let F=0,Z=$[0].date;for(let de=1;de<$.length;de++)$[de].date<Z&&(Z=$[de].date,F=de);return F}(F._heartbeatsCache.heartbeats);F._heartbeatsCache.heartbeats.splice(vt,1)}return F._storage.overwrite(F._heartbeatsCache)}catch(we){Lr.warn(we)}})()}getHeartbeatsHeader(){var F=this;return(0,P.A)(function*(){var Z;try{if(null===F._heartbeatsCache&&(yield F._heartbeatsCachePromise),null==(null===(Z=F._heartbeatsCache)||void 0===Z?void 0:Z.heartbeats)||0===F._heartbeatsCache.heartbeats.length)return"";const de=Ce(),{heartbeatsToSend:we,unsentEntries:De}=function ir($,F=1024){const Z=[];let de=$.slice();for(const we of $){const De=Z.find(Ne=>Ne.agent===we.agent);if(De){if(De.dates.push(we.date),H(Z)>F){De.dates.pop();break}}else if(Z.push({agent:we.agent,dates:[we.date]}),H(Z)>F){Z.pop();break}de=de.slice(1)}return{heartbeatsToSend:Z,unsentEntries:de}}(F._heartbeatsCache.heartbeats),Ne=(0,N.Uj)(JSON.stringify({version:2,heartbeats:we}));return F._heartbeatsCache.lastSentHeartbeatDate=de,De.length>0?(F._heartbeatsCache.heartbeats=De,yield F._storage.overwrite(F._heartbeatsCache)):(F._heartbeatsCache.heartbeats=[],F._storage.overwrite(F._heartbeatsCache)),Ne}catch(de){return Lr.warn(de),""}})()}}function Ce(){return(new Date).toISOString().substring(0,10)}class vn{constructor(F){this.app=F,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,P.A)(function*(){return!!(0,N.zW)()&&(0,N.eX)().then(()=>!0).catch(()=>!1)})()}read(){var F=this;return(0,P.A)(function*(){if(yield F._canUseIndexedDBPromise){const de=yield function Oi($){return R.apply(this,arguments)}(F.app);return de?.heartbeats?de:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(F){var Z=this;return(0,P.A)(function*(){var de;if(yield Z._canUseIndexedDBPromise){const De=yield Z.read();return k(Z.app,{lastSentHeartbeatDate:null!==(de=F.lastSentHeartbeatDate)&&void 0!==de?de:De.lastSentHeartbeatDate,heartbeats:F.heartbeats})}})()}add(F){var Z=this;return(0,P.A)(function*(){var de;if(yield Z._canUseIndexedDBPromise){const De=yield Z.read();return k(Z.app,{lastSentHeartbeatDate:null!==(de=F.lastSentHeartbeatDate)&&void 0!==de?de:De.lastSentHeartbeatDate,heartbeats:[...De.heartbeats,...F.heartbeats]})}})()}}function H($){return(0,N.Uj)(JSON.stringify({version:2,heartbeats:$})).length}!function Ee($){Qr(new me.uA("platform-logger",F=>new Dl(F),"PRIVATE")),Qr(new me.uA("heartbeat",F=>new ze(F),"PRIVATE")),Ri(Jt,Mn,$),Ri(Jt,Mn,"esm2017"),Ri("fire-js","")}("")},882:(Ca,Fr,Fe)=>{Fe.d(Fr,{cY:()=>Xt,FA:()=>nr,g:()=>ai,gz:()=>xi,vA:()=>N,Hk:()=>Tn,K3:()=>Zt,u:()=>Me,KA:()=>re,Uj:()=>le,gR:()=>xn,Fy:()=>Dl,tD:()=>Bn,A4:()=>st,bD:()=>Qr,dI:()=>ci,hp:()=>ss,T9:()=>Yi,Tj:()=>Gn,yU:()=>Ft,XA:()=>vo,Ku:()=>Oi,ZQ:()=>si,qc:()=>ie,Bd:()=>Co,sr:()=>xs,zJ:()=>qt,c1:()=>zc,Im:()=>rr,lT:()=>Rs,zW:()=>wa,jZ:()=>As,$g:()=>Ti,lV:()=>Ps,Cv:()=>un,p7:()=>Ea,$L:()=>An,kH:()=>li,gE:()=>ns,Am:()=>Qi,I9:()=>os,yw:()=>Pn,OE:()=>Ri,kj:()=>Zi,As:()=>Ke,P1:()=>bo,eX:()=>Gc});var P=Fe(467);const Q={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},N=function(R,k){if(!R)throw Tn(k)},Tn=function(R){return new Error("Firebase Database ("+Q.SDK_VERSION+") INTERNAL ASSERT FAILED: "+R)},bt=function(R){const k=[];let O=0;for(let ee=0;ee<R.length;ee++){let z=R.charCodeAt(ee);z<128?k[O++]=z:z<2048?(k[O++]=z>>6|192,k[O++]=63&z|128):55296==(64512&z)&&ee+1<R.length&&56320==(64512&R.charCodeAt(ee+1))?(z=65536+((1023&z)<<10)+(1023&R.charCodeAt(++ee)),k[O++]=z>>18|240,k[O++]=z>>12&63|128,k[O++]=z>>6&63|128,k[O++]=63&z|128):(k[O++]=z>>12|224,k[O++]=z>>6&63|128,k[O++]=63&z|128)}return k},Zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(R,k){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const O=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,ee=[];for(let z=0;z<R.length;z+=3){const he=R[z],ze=z+1<R.length,Ce=ze?R[z+1]:0,ir=z+2<R.length,vn=ir?R[z+2]:0;let Ee=(15&Ce)<<2|vn>>6,$=63&vn;ir||($=64,ze||(Ee=64)),ee.push(O[he>>2],O[(3&he)<<4|Ce>>4],O[Ee],O[$])}return ee.join("")},encodeString(R,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(R):this.encodeByteArray(bt(R),k)},decodeString(R,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(R):function(R){const k=[];let O=0,ee=0;for(;O<R.length;){const z=R[O++];if(z<128)k[ee++]=String.fromCharCode(z);else if(z>191&&z<224){const he=R[O++];k[ee++]=String.fromCharCode((31&z)<<6|63&he)}else if(z>239&&z<365){const ir=((7&z)<<18|(63&R[O++])<<12|(63&R[O++])<<6|63&R[O++])-65536;k[ee++]=String.fromCharCode(55296+(ir>>10)),k[ee++]=String.fromCharCode(56320+(1023&ir))}else{const he=R[O++],ze=R[O++];k[ee++]=String.fromCharCode((15&z)<<12|(63&he)<<6|63&ze)}}return k.join("")}(this.decodeStringToByteArray(R,k))},decodeStringToByteArray(R,k){this.init_();const O=k?this.charToByteMapWebSafe_:this.charToByteMap_,ee=[];for(let z=0;z<R.length;){const he=O[R.charAt(z++)],Ce=z<R.length?O[R.charAt(z)]:0;++z;const vn=z<R.length?O[R.charAt(z)]:64;++z;const ft=z<R.length?O[R.charAt(z)]:64;if(++z,null==he||null==Ce||null==vn||null==ft)throw new ln;ee.push(he<<2|Ce>>4),64!==vn&&(ee.push(Ce<<4&240|vn>>2),64!==ft&&ee.push(vn<<6&192|ft))}return ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class ln extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const re=function(R){const k=bt(R);return Zt.encodeByteArray(k,!0)},le=function(R){return re(R).replace(/\./g,"")},Me=function(R){try{return Zt.decodeString(R,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function st(R){return Et(void 0,R)}function Et(R,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===R&&(R={});break;case Array:R=[];break;default:return k}for(const O in k)!k.hasOwnProperty(O)||!Vn(O)||(R[O]=Et(R[O],k[O]));return R}function Vn(R){return"__proto__"!==R}const Ir=()=>{try{return function ii(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const R=process.env.__FIREBASE_DEFAULTS__;return R?JSON.parse(R):void 0})()||(()=>{if(typeof document>"u")return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=R&&Me(R[1]);return k&&JSON.parse(k)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},Gn=R=>{var k,O;return null===(O=null===(k=Ir())||void 0===k?void 0:k.emulatorHosts)||void 0===O?void 0:O[R]},Ft=R=>{const k=Gn(R);if(!k)return;const O=k.lastIndexOf(":");if(O<=0||O+1===k.length)throw new Error(`Invalid host ${k} with no separate hostname and port!`);const ee=parseInt(k.substring(O+1),10);return"["===k[0]?[k.substring(1,O-1),ee]:[k.substring(0,O),ee]},Yi=()=>{var R;return null===(R=Ir())||void 0===R?void 0:R.config},vo=R=>{var k;return null===(k=Ir())||void 0===k?void 0:k[`_${R}`]};class Xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,O)=>{this.resolve=k,this.reject=O})}wrapCallback(k){return(O,ee)=>{O?this.reject(O):this.resolve(ee),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(O):k(O,ee))}}}function qt(R){try{return(R.startsWith("http://")||R.startsWith("https://")?new URL(R).hostname:R).endsWith(".cloudworkstations.dev")}catch{return!1}}function ns(R){return oi.apply(this,arguments)}function oi(){return(oi=(0,P.A)(function*(R){return(yield fetch(R,{credentials:"include"})).ok})).apply(this,arguments)}function Dl(R,k){if(R.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ee=k||"demo-project",z=R.iat||0,he=R.sub||R.user_id;if(!he)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${ee}`,aud:ee,iat:z,exp:z+3600,auth_time:z,sub:he,user_id:he,firebase:{sign_in_provider:"custom",identities:{}}},R);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ze)),""].join(".")}const cn={};let Lr=!1;function bo(R,k){if(typeof window>"u"||typeof document>"u"||!qt(window.location.host)||cn[R]===k||cn[R]||Lr)return;function O(Ee){return`__firebase__banner__${Ee}`}cn[R]=k;const ee="__firebase__banner",he=function Jt(){const R={prod:[],emulator:[]};for(const k of Object.keys(cn))cn[k]?R.emulator.push(k):R.prod.push(k);return R}().prod.length>0;function ft(){const Ee=function Mn(R){let k=document.getElementById(R),O=!1;return k||(k=document.createElement("div"),k.setAttribute("id",R),O=!0),{created:O,element:k}}(ee),$=O("text"),F=document.getElementById($)||document.createElement("span"),Z=O("learnmore"),de=document.getElementById(Z)||document.createElement("a"),we=O("preprendIcon"),De=document.getElementById(we)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Ee.created){const Ne=Ee.element;(function Ce(Ee){Ee.style.display="flex",Ee.style.background="#7faaf0",Ee.style.position="fixed",Ee.style.bottom="5px",Ee.style.left="5px",Ee.style.padding=".5em",Ee.style.borderRadius="5px",Ee.style.alignItems="center"})(Ne),function H(Ee,$){Ee.setAttribute("id",$),Ee.innerText="Learn more",Ee.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Ee.setAttribute("target","__blank"),Ee.style.paddingLeft="5px",Ee.style.textDecoration="underline"}(de,Z);const vt=function vn(){const Ee=document.createElement("span");return Ee.style.cursor="pointer",Ee.style.marginLeft="16px",Ee.style.fontSize="24px",Ee.innerHTML=" &times;",Ee.onclick=()=>{Lr=!0,function ze(){const Ee=document.getElementById(ee);Ee&&Ee.remove()}()},Ee}();(function ir(Ee,$){Ee.setAttribute("width","24"),Ee.setAttribute("id",$),Ee.setAttribute("height","24"),Ee.setAttribute("viewBox","0 0 24 24"),Ee.setAttribute("fill","none"),Ee.style.marginLeft="-6px"})(De,we),Ne.append(De,F,de,vt),document.body.appendChild(Ne)}he?(F.innerText="Preview backend disconnected.",De.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(De.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',F.innerText="Preview backend running in this workspace."),F.setAttribute("id",$)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",ft):ft()}function si(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function As(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function Co(){return typeof window<"u"||Ea()}function Ea(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zc(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function xs(){const R="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof R&&void 0!==R.id}function Ps(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Rs(){const R=si();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function Ti(){return!0===Q.NODE_CLIENT||!0===Q.NODE_ADMIN}function wa(){try{return"object"==typeof indexedDB}catch{return!1}}function Gc(){return new Promise((R,k)=>{try{let O=!0;const ee="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(ee);z.onsuccess=()=>{z.result.close(),O||self.indexedDB.deleteDatabase(ee),R(!0)},z.onupgradeneeded=()=>{O=!1},z.onerror=()=>{var he;k((null===(he=z.error)||void 0===he?void 0:he.message)||"")}}catch(O){k(O)}})}class ai extends Error{constructor(k,O,ee){super(O),this.code=k,this.customData=ee,this.name="FirebaseError",Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nr.prototype.create)}}class nr{constructor(k,O,ee){this.service=k,this.serviceName=O,this.errors=ee}create(k,...O){const ee=O[0]||{},z=`${this.service}/${k}`,he=this.errors[k],ze=he?function is(R,k){return R.replace(wo,(O,ee)=>{const z=k[ee];return null!=z?String(z):`<${ee}?>`})}(he,ee):"Error";return new ai(z,`${this.serviceName}: ${ze} (${z}).`,ee)}}const wo=/\{\$([^}]+)}/g;function An(R){return JSON.parse(R)}function Ke(R){return JSON.stringify(R)}const Yr=function(R){let k={},O={},ee={},z="";try{const he=R.split(".");k=An(Me(he[0])||""),O=An(Me(he[1])||""),z=he[2],ee=O.d||{},delete O.d}catch{}return{header:k,claims:O,data:ee,signature:z}},un=function(R){const O=Yr(R).claims;return!!O&&"object"==typeof O&&O.hasOwnProperty("iat")},ie=function(R){const k=Yr(R).claims;return"object"==typeof k&&!0===k.admin};function xn(R,k){return Object.prototype.hasOwnProperty.call(R,k)}function Pn(R,k){if(Object.prototype.hasOwnProperty.call(R,k))return R[k]}function rr(R){for(const k in R)if(Object.prototype.hasOwnProperty.call(R,k))return!1;return!0}function li(R,k,O){const ee={};for(const z in R)Object.prototype.hasOwnProperty.call(R,z)&&(ee[z]=k.call(O,R[z],z,R));return ee}function Qr(R,k){if(R===k)return!0;const O=Object.keys(R),ee=Object.keys(k);for(const z of O){if(!ee.includes(z))return!1;const he=R[z],ze=k[z];if(Ai(he)&&Ai(ze)){if(!Qr(he,ze))return!1}else if(he!==ze)return!1}for(const z of ee)if(!O.includes(z))return!1;return!0}function Ai(R){return null!==R&&"object"==typeof R}function Qi(R){const k=[];for(const[O,ee]of Object.entries(R))Array.isArray(ee)?ee.forEach(z=>{k.push(encodeURIComponent(O)+"="+encodeURIComponent(z))}):k.push(encodeURIComponent(O)+"="+encodeURIComponent(ee));return k.length?"&"+k.join("&"):""}function os(R){const k={};return R.replace(/^\?/,"").split("&").forEach(ee=>{if(ee){const[z,he]=ee.split("=");k[decodeURIComponent(z)]=decodeURIComponent(he)}}),k}function ss(R){const k=R.indexOf("?");if(!k)return"";const O=R.indexOf("#",k);return R.substring(k,O>0?O:void 0)}class xi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let k=1;k<this.blockSize;++k)this.pad_[k]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(k,O){O||(O=0);const ee=this.W_;if("string"==typeof k)for(let ft=0;ft<16;ft++)ee[ft]=k.charCodeAt(O)<<24|k.charCodeAt(O+1)<<16|k.charCodeAt(O+2)<<8|k.charCodeAt(O+3),O+=4;else for(let ft=0;ft<16;ft++)ee[ft]=k[O]<<24|k[O+1]<<16|k[O+2]<<8|k[O+3],O+=4;for(let ft=16;ft<80;ft++){const Ee=ee[ft-3]^ee[ft-8]^ee[ft-14]^ee[ft-16];ee[ft]=4294967295&(Ee<<1|Ee>>>31)}let vn,H,z=this.chain_[0],he=this.chain_[1],ze=this.chain_[2],Ce=this.chain_[3],ir=this.chain_[4];for(let ft=0;ft<80;ft++){ft<40?ft<20?(vn=Ce^he&(ze^Ce),H=1518500249):(vn=he^ze^Ce,H=1859775393):ft<60?(vn=he&ze|Ce&(he|ze),H=2400959708):(vn=he^ze^Ce,H=3395469782);const Ee=(z<<5|z>>>27)+vn+ir+H+ee[ft]&4294967295;ir=Ce,Ce=ze,ze=4294967295&(he<<30|he>>>2),he=z,z=Ee}this.chain_[0]=this.chain_[0]+z&4294967295,this.chain_[1]=this.chain_[1]+he&4294967295,this.chain_[2]=this.chain_[2]+ze&4294967295,this.chain_[3]=this.chain_[3]+Ce&4294967295,this.chain_[4]=this.chain_[4]+ir&4294967295}update(k,O){if(null==k)return;void 0===O&&(O=k.length);const ee=O-this.blockSize;let z=0;const he=this.buf_;let ze=this.inbuf_;for(;z<O;){if(0===ze)for(;z<=ee;)this.compress_(k,z),z+=this.blockSize;if("string"==typeof k){for(;z<O;)if(he[ze]=k.charCodeAt(z),++ze,++z,ze===this.blockSize){this.compress_(he),ze=0;break}}else for(;z<O;)if(he[ze]=k[z],++ze,++z,ze===this.blockSize){this.compress_(he),ze=0;break}}this.inbuf_=ze,this.total_+=O}digest(){const k=[];let O=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let z=this.blockSize-1;z>=56;z--)this.buf_[z]=255&O,O/=256;this.compress_(this.buf_);let ee=0;for(let z=0;z<5;z++)for(let he=24;he>=0;he-=8)k[ee]=this.chain_[z]>>he&255,++ee;return k}}function Bn(R,k){const O=new ks(R,k);return O.subscribe.bind(O)}class ks{constructor(k,O){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=O,this.task.then(()=>{k(this)}).catch(ee=>{this.error(ee)})}next(k){this.forEachObserver(O=>{O.next(k)})}error(k){this.forEachObserver(O=>{O.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,O,ee){let z;if(void 0===k&&void 0===O&&void 0===ee)throw new Error("Missing Observer.");z=function Pt(R,k){if("object"!=typeof R||null===R)return!1;for(const O of k)if(O in R&&"function"==typeof R[O])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:O,complete:ee},void 0===z.next&&(z.next=Pi),void 0===z.error&&(z.error=Pi),void 0===z.complete&&(z.complete=Pi);const he=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),he}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let O=0;O<this.observers.length;O++)this.sendOne(O,k)}sendOne(k,O){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{O(this.observers[k])}catch(ee){typeof console<"u"&&console.error&&console.error(ee)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pi(){}function ci(R,k){return`${R} failed: ${k} argument `}const Zi=function(R){const k=[];let O=0;for(let ee=0;ee<R.length;ee++){let z=R.charCodeAt(ee);if(z>=55296&&z<=56319){const he=z-55296;ee++,N(ee<R.length,"Surrogate pair missing trail surrogate."),z=65536+(he<<10)+(R.charCodeAt(ee)-56320)}z<128?k[O++]=z:z<2048?(k[O++]=z>>6|192,k[O++]=63&z|128):z<65536?(k[O++]=z>>12|224,k[O++]=z>>6&63|128,k[O++]=63&z|128):(k[O++]=z>>18|240,k[O++]=z>>12&63|128,k[O++]=z>>6&63|128,k[O++]=63&z|128)}return k},Ri=function(R){let k=0;for(let O=0;O<R.length;O++){const ee=R.charCodeAt(O);ee<128?k++:ee<2048?k+=2:ee>=55296&&ee<=56319?(k+=4,O++):k+=3}return k};function Oi(R){return R&&R._delegate?R._delegate:R}},958:(Ca,Fr,Fe)=>{Fe.d(Fr,{Kq:()=>Tn,h1:()=>Zt,uA:()=>Q});var P=Fe(467),me=Fe(882);class Q{constructor(re,le,Me){this.name=re,this.instanceFactory=le,this.type=Me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const N="[DEFAULT]";class Tn{constructor(re,le){this.name=re,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const le=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(le)){const Me=new me.cY;if(this.instancesDeferred.set(le,Me),this.isInitialized(le)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:le});st&&Me.resolve(st)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(re){var le;const Me=this.normalizeInstanceIdentifier(re?.identifier),st=null!==(le=re?.optional)&&void 0!==le&&le;if(!this.isInitialized(Me)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Me})}catch(Et){if(st)return null;throw Et}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function Ie(ln){return"EAGER"===ln.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:N})}catch{}for(const[le,Me]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(le);try{const Et=this.getOrInitializeService({instanceIdentifier:st});Me.resolve(Et)}catch{}}}}clearInstance(re=N){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,P.A)(function*(){const le=Array.from(re.instances.values());yield Promise.all([...le.filter(Me=>"INTERNAL"in Me).map(Me=>Me.INTERNAL.delete()),...le.filter(Me=>"_delete"in Me).map(Me=>Me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=N){return this.instances.has(re)}getOptions(re=N){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:le={}}=re,Me=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(Me))throw Error(`${this.name}(${Me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:Me,options:le});for(const[Et,Vn]of this.instancesDeferred.entries())Me===this.normalizeInstanceIdentifier(Et)&&Vn.resolve(st);return st}onInit(re,le){var Me;const st=this.normalizeInstanceIdentifier(le),Et=null!==(Me=this.onInitCallbacks.get(st))&&void 0!==Me?Me:new Set;Et.add(re),this.onInitCallbacks.set(st,Et);const Vn=this.instances.get(st);return Vn&&re(Vn,st),()=>{Et.delete(re)}}invokeOnInitCallbacks(re,le){const Me=this.onInitCallbacks.get(le);if(Me)for(const st of Me)try{st(re,le)}catch{}}getOrInitializeService({instanceIdentifier:re,options:le={}}){let Me=this.instances.get(re);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:(ln=re,ln===N?void 0:ln),options:le}),this.instances.set(re,Me),this.instancesOptions.set(re,le),this.invokeOnInitCallbacks(Me,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,Me)}catch{}var ln;return Me||null}normalizeInstanceIdentifier(re=N){return this.component?this.component.multipleInstances?re:N:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Zt{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const le=this.getProvider(re.name);if(le.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);le.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const le=new Tn(re,this);return this.providers.set(re,le),le}getProviders(){return Array.from(this.providers.values())}}}},Ca=>{Ca(Ca.s=374)}]);